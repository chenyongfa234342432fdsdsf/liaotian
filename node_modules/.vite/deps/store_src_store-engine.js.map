{
  "version": 3,
  "sources": ["../../.pnpm/store@2.0.12/node_modules/store/src/store-engine.js"],
  "sourcesContent": ["var util = require('./util')\nvar slice = util.slice\nvar pluck = util.pluck\nvar each = util.each\nvar bind = util.bind\nvar create = util.create\nvar isList = util.isList\nvar isFunction = util.isFunction\nvar isObject = util.isObject\n\nmodule.exports = {\n\tcreateStore: createStore\n}\n\nvar storeAPI = {\n\tversion: '2.0.12',\n\tenabled: false,\n\t\n\t// get returns the value of the given key. If that value\n\t// is undefined, it returns optionalDefaultValue instead.\n\tget: function(key, optionalDefaultValue) {\n\t\tvar data = this.storage.read(this._namespacePrefix + key)\n\t\treturn this._deserialize(data, optionalDefaultValue)\n\t},\n\n\t// set will store the given value at key and returns value.\n\t// Calling set with value === undefined is equivalent to calling remove.\n\tset: function(key, value) {\n\t\tif (value === undefined) {\n\t\t\treturn this.remove(key)\n\t\t}\n\t\tthis.storage.write(this._namespacePrefix + key, this._serialize(value))\n\t\treturn value\n\t},\n\n\t// remove deletes the key and value stored at the given key.\n\tremove: function(key) {\n\t\tthis.storage.remove(this._namespacePrefix + key)\n\t},\n\n\t// each will call the given callback once for each key-value pair\n\t// in this store.\n\teach: function(callback) {\n\t\tvar self = this\n\t\tthis.storage.each(function(val, namespacedKey) {\n\t\t\tcallback.call(self, self._deserialize(val), (namespacedKey || '').replace(self._namespaceRegexp, ''))\n\t\t})\n\t},\n\n\t// clearAll will remove all the stored key-value pairs in this store.\n\tclearAll: function() {\n\t\tthis.storage.clearAll()\n\t},\n\n\t// additional functionality that can't live in plugins\n\t// ---------------------------------------------------\n\n\t// hasNamespace returns true if this store instance has the given namespace.\n\thasNamespace: function(namespace) {\n\t\treturn (this._namespacePrefix == '__storejs_'+namespace+'_')\n\t},\n\n\t// createStore creates a store.js instance with the first\n\t// functioning storage in the list of storage candidates,\n\t// and applies the the given mixins to the instance.\n\tcreateStore: function() {\n\t\treturn createStore.apply(this, arguments)\n\t},\n\t\n\taddPlugin: function(plugin) {\n\t\tthis._addPlugin(plugin)\n\t},\n\t\n\tnamespace: function(namespace) {\n\t\treturn createStore(this.storage, this.plugins, namespace)\n\t}\n}\n\nfunction _warn() {\n\tvar _console = (typeof console == 'undefined' ? null : console)\n\tif (!_console) { return }\n\tvar fn = (_console.warn ? _console.warn : _console.log)\n\tfn.apply(_console, arguments)\n}\n\nfunction createStore(storages, plugins, namespace) {\n\tif (!namespace) {\n\t\tnamespace = ''\n\t}\n\tif (storages && !isList(storages)) {\n\t\tstorages = [storages]\n\t}\n\tif (plugins && !isList(plugins)) {\n\t\tplugins = [plugins]\n\t}\n\n\tvar namespacePrefix = (namespace ? '__storejs_'+namespace+'_' : '')\n\tvar namespaceRegexp = (namespace ? new RegExp('^'+namespacePrefix) : null)\n\tvar legalNamespaces = /^[a-zA-Z0-9_\\-]*$/ // alpha-numeric + underscore and dash\n\tif (!legalNamespaces.test(namespace)) {\n\t\tthrow new Error('store.js namespaces can only have alphanumerics + underscores and dashes')\n\t}\n\t\n\tvar _privateStoreProps = {\n\t\t_namespacePrefix: namespacePrefix,\n\t\t_namespaceRegexp: namespaceRegexp,\n\n\t\t_testStorage: function(storage) {\n\t\t\ttry {\n\t\t\t\tvar testStr = '__storejs__test__'\n\t\t\t\tstorage.write(testStr, testStr)\n\t\t\t\tvar ok = (storage.read(testStr) === testStr)\n\t\t\t\tstorage.remove(testStr)\n\t\t\t\treturn ok\n\t\t\t} catch(e) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t},\n\n\t\t_assignPluginFnProp: function(pluginFnProp, propName) {\n\t\t\tvar oldFn = this[propName]\n\t\t\tthis[propName] = function pluginFn() {\n\t\t\t\tvar args = slice(arguments, 0)\n\t\t\t\tvar self = this\n\n\t\t\t\t// super_fn calls the old function which was overwritten by\n\t\t\t\t// this mixin.\n\t\t\t\tfunction super_fn() {\n\t\t\t\t\tif (!oldFn) { return }\n\t\t\t\t\teach(arguments, function(arg, i) {\n\t\t\t\t\t\targs[i] = arg\n\t\t\t\t\t})\n\t\t\t\t\treturn oldFn.apply(self, args)\n\t\t\t\t}\n\n\t\t\t\t// Give mixing function access to super_fn by prefixing all mixin function\n\t\t\t\t// arguments with super_fn.\n\t\t\t\tvar newFnArgs = [super_fn].concat(args)\n\n\t\t\t\treturn pluginFnProp.apply(self, newFnArgs)\n\t\t\t}\n\t\t},\n\n\t\t_serialize: function(obj) {\n\t\t\treturn JSON.stringify(obj)\n\t\t},\n\n\t\t_deserialize: function(strVal, defaultVal) {\n\t\t\tif (!strVal) { return defaultVal }\n\t\t\t// It is possible that a raw string value has been previously stored\n\t\t\t// in a storage without using store.js, meaning it will be a raw\n\t\t\t// string value instead of a JSON serialized string. By defaulting\n\t\t\t// to the raw string value in case of a JSON parse error, we allow\n\t\t\t// for past stored values to be forwards-compatible with store.js\n\t\t\tvar val = ''\n\t\t\ttry { val = JSON.parse(strVal) }\n\t\t\tcatch(e) { val = strVal }\n\n\t\t\treturn (val !== undefined ? val : defaultVal)\n\t\t},\n\t\t\n\t\t_addStorage: function(storage) {\n\t\t\tif (this.enabled) { return }\n\t\t\tif (this._testStorage(storage)) {\n\t\t\t\tthis.storage = storage\n\t\t\t\tthis.enabled = true\n\t\t\t}\n\t\t},\n\n\t\t_addPlugin: function(plugin) {\n\t\t\tvar self = this\n\n\t\t\t// If the plugin is an array, then add all plugins in the array.\n\t\t\t// This allows for a plugin to depend on other plugins.\n\t\t\tif (isList(plugin)) {\n\t\t\t\teach(plugin, function(plugin) {\n\t\t\t\t\tself._addPlugin(plugin)\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Keep track of all plugins we've seen so far, so that we\n\t\t\t// don't add any of them twice.\n\t\t\tvar seenPlugin = pluck(this.plugins, function(seenPlugin) {\n\t\t\t\treturn (plugin === seenPlugin)\n\t\t\t})\n\t\t\tif (seenPlugin) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.plugins.push(plugin)\n\n\t\t\t// Check that the plugin is properly formed\n\t\t\tif (!isFunction(plugin)) {\n\t\t\t\tthrow new Error('Plugins must be function values that return objects')\n\t\t\t}\n\n\t\t\tvar pluginProperties = plugin.call(this)\n\t\t\tif (!isObject(pluginProperties)) {\n\t\t\t\tthrow new Error('Plugins must return an object of function properties')\n\t\t\t}\n\n\t\t\t// Add the plugin function properties to this store instance.\n\t\t\teach(pluginProperties, function(pluginFnProp, propName) {\n\t\t\t\tif (!isFunction(pluginFnProp)) {\n\t\t\t\t\tthrow new Error('Bad plugin property: '+propName+' from plugin '+plugin.name+'. Plugins should only return functions.')\n\t\t\t\t}\n\t\t\t\tself._assignPluginFnProp(pluginFnProp, propName)\n\t\t\t})\n\t\t},\n\t\t\n\t\t// Put deprecated properties in the private API, so as to not expose it to accidential\n\t\t// discovery through inspection of the store object.\n\t\t\n\t\t// Deprecated: addStorage\n\t\taddStorage: function(storage) {\n\t\t\t_warn('store.addStorage(storage) is deprecated. Use createStore([storages])')\n\t\t\tthis._addStorage(storage)\n\t\t}\n\t}\n\n\tvar store = create(_privateStoreProps, storeAPI, {\n\t\tplugins: []\n\t})\n\tstore.raw = {}\n\teach(store, function(prop, propName) {\n\t\tif (isFunction(prop)) {\n\t\t\tstore.raw[propName] = bind(store, prop)\t\t\t\n\t\t}\n\t})\n\teach(storages, function(storage) {\n\t\tstore._addStorage(storage)\n\t})\n\teach(plugins, function(plugin) {\n\t\tstore._addPlugin(plugin)\n\t})\n\treturn store\n}\n"],
  "mappings": "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",
  "names": ["plugin", "seenPlugin"]
}
