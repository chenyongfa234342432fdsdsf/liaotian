import {
  __commonJS
} from "./chunk-Y7S7B2N7.js";

// node_modules/.pnpm/zego-zim-web@2.12.0/node_modules/zego-zim-web/index.js
var require_zego_zim_web = __commonJS({
  "node_modules/.pnpm/zego-zim-web@2.12.0/node_modules/zego-zim-web/index.js"(exports, module) {
    !function(e, t) {
      if ("object" == typeof exports && "object" == typeof module)
        module.exports = t();
      else if ("function" == typeof define && define.amd)
        define([], t);
      else {
        var r, n = t();
        for (r in n)
          ("object" == typeof exports ? exports : e)[r] = n[r];
      }
    }("undefined" != typeof self ? self : exports, function() {
      return function(e) {
        var t = {};
        function r(n) {
          if (t[n])
            return t[n].exports;
          var o = t[n] = { i: n, l: false, exports: {} };
          return e[n].call(o.exports, o, o.exports, r), o.l = true, o.exports;
        }
        return r.m = e, r.c = t, r.d = function(e2, t2, n) {
          r.o(e2, t2) || Object.defineProperty(e2, t2, { enumerable: true, get: n });
        }, r.r = function(e2) {
          "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e2, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e2, "__esModule", { value: true });
        }, r.t = function(e2, t2) {
          if (1 & t2 && (e2 = r(e2)), 8 & t2)
            return e2;
          if (4 & t2 && "object" == typeof e2 && e2 && e2.__esModule)
            return e2;
          var n = /* @__PURE__ */ Object.create(null);
          if (r.r(n), Object.defineProperty(n, "default", { enumerable: true, value: e2 }), 2 & t2 && "string" != typeof e2)
            for (var o in e2)
              r.d(n, o, (function(t3) {
                return e2[t3];
              }).bind(null, o));
          return n;
        }, r.n = function(e2) {
          var t2 = e2 && e2.__esModule ? function() {
            return e2.default;
          } : function() {
            return e2;
          };
          return r.d(t2, "a", t2), t2;
        }, r.o = function(e2, t2) {
          return Object.prototype.hasOwnProperty.call(e2, t2);
        }, r.p = "", r(r.s = 22);
      }([function(e, t, r) {
        "use strict";
        var n = r(8), o = (r.d(t, "f", function() {
          return n.a;
        }), r.d(t, "g", function() {
          return n.b;
        }), r.d(t, "h", function() {
          return n.c;
        }), r.d(t, "j", function() {
          return n.d;
        }), r.d(t, "k", function() {
          return n.e;
        }), r.d(t, "n", function() {
          return n.f;
        }), r.d(t, "o", function() {
          return n.g;
        }), r.d(t, "q", function() {
          return n.h;
        }), r.d(t, "s", function() {
          return n.i;
        }), r.d(t, "w", function() {
          return n.j;
        }), r.d(t, "y", function() {
          return n.k;
        }), r.d(t, "A", function() {
          return n.l;
        }), r.d(t, "C", function() {
          return n.m;
        }), r.d(t, "F", function() {
          return n.n;
        }), r.d(t, "G", function() {
          return n.o;
        }), r.d(t, "H", function() {
          return n.p;
        }), r.d(t, "K", function() {
          return n.q;
        }), r.d(t, "L", function() {
          return n.r;
        }), r.d(t, "M", function() {
          return n.s;
        }), r.d(t, "N", function() {
          return n.t;
        }), r.d(t, "P", function() {
          return n.u;
        }), r.d(t, "R", function() {
          return n.v;
        }), r.d(t, "S", function() {
          return n.w;
        }), r.d(t, "T", function() {
          return n.x;
        }), r.d(t, "U", function() {
          return n.y;
        }), r.d(t, "V", function() {
          return n.z;
        }), r(35)), s = (r.d(t, "a", function() {
          return o.a;
        }), r.d(t, "b", function() {
          return o.b;
        }), r.d(t, "e", function() {
          return o.c;
        }), r.d(t, "m", function() {
          return o.d;
        }), r.d(t, "p", function() {
          return o.e;
        }), r.d(t, "u", function() {
          return o.f;
        }), r.d(t, "x", function() {
          return o.g;
        }), r.d(t, "z", function() {
          return o.h;
        }), r.d(t, "B", function() {
          return o.i;
        }), r.d(t, "D", function() {
          return o.j;
        }), r.d(t, "E", function() {
          return o.k;
        }), r.d(t, "O", function() {
          return o.l;
        }), r.d(t, "Q", function() {
          return o.m;
        }), r(36)), i = (r.d(t, "c", function() {
          return s.a;
        }), r.d(t, "d", function() {
          return s.b;
        }), r.d(t, "i", function() {
          return s.c;
        }), r.d(t, "W", function() {
          return s.d;
        }), r(37)), a = (r.d(t, "l", function() {
          return i.a;
        }), r.d(t, "t", function() {
          return i.b;
        }), r.d(t, "v", function() {
          return i.c;
        }), r(38)), u = (r.d(t, "r", function() {
          return a.a;
        }), r(39));
        r.d(t, "I", function() {
          return u.a;
        }), r.d(t, "J", function() {
          return u.b;
        });
      }, function(e, t, r) {
        "use strict";
        var n = r(26), o = (r.d(t, "m", function() {
          return n.a;
        }), r.d(t, "o", function() {
          return n.b;
        }), r.d(t, "p", function() {
          return n.c;
        }), r(15)), s = (r.d(t, "s", function() {
          return o.a;
        }), r(27));
        r.d(t, "a", function() {
          return s.a;
        }), r.d(t, "b", function() {
          return s.b;
        }), r.d(t, "c", function() {
          return s.c;
        }), r.d(t, "d", function() {
          return s.d;
        }), r.d(t, "e", function() {
          return s.e;
        }), r.d(t, "f", function() {
          return s.f;
        }), r.d(t, "g", function() {
          return s.g;
        }), r.d(t, "h", function() {
          return s.h;
        }), r.d(t, "i", function() {
          return s.i;
        }), r.d(t, "j", function() {
          return s.j;
        }), r.d(t, "k", function() {
          return s.k;
        }), r.d(t, "l", function() {
          return s.l;
        }), r.d(t, "n", function() {
          return s.m;
        }), r.d(t, "q", function() {
          return s.n;
        }), r.d(t, "r", function() {
          return s.o;
        });
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return d;
        });
        var n = r(52), o = r(60), s = r(62), i = r(79), a = r(83), u = r(84), c = r(0), l = c.J.Manager, d = (p.getInstance = function() {
          return this.instance || (this.instance = new p());
        }, p.prototype.getVersion = function() {
          return "2.12.0";
        }, p.prototype.createEngine = function(e2) {
          var t2 = { appID: e2, msg: "first create", tag: "2023/11/15 11:37:11", version: "2.12.0" }, r2 = this.handle;
          return this.enginMap.get(r2) ? (t2.msg = "had created", this.logger.info(l, c.I.Create, t2), null) : (e2 = new s.a(r2, e2), this.enginMap.set(r2, e2), this.logger.info(l, c.I.Create, t2), e2);
        }, p.prototype.destroyEngine = function(e2) {
          this.logger.info(l, c.I.Destroy), e2 && (this.enginMap.delete(e2.engineConfig.handle), e2.destroy());
        }, p.prototype.setLogConfig = function(e2) {
          this.logger.info(l, c.I.SetLogConfig, e2), this.logger.setLogConfig(Object.assign({ logLevel: "info" }, e2));
        }, p.prototype.setAdvancedConfig = function(e2, t2) {
          this.settings.advancedConfig[e2] = t2;
        }, p.prototype.setGeofencingConfig = function(e2, t2) {
          var r2, n2;
          return (t2 == c.w.Include || t2 == c.w.Exclude) && e2 && 0 < e2.length && e2.every(function(e3) {
            return 2 <= e3 && e3 <= 7;
          }) ? (e2 = e2.map(function(e3) {
            return 0 | e3;
          }), this.settings.advancedConfig.geoFence.type = t2, this.settings.advancedConfig.geoFence.areas = e2, n2 = t2 == c.w.Include ? e2[n2 = 1 < e2.length ? (Math.random() * e2.length | 0) % e2.length : 0] : ((r2 = new Set(Object.keys(c.v).map(function(e3) {
            return +e3;
          }))).delete(1), e2.forEach(function(e3) {
            r2.delete(e3), c.v[e3].relatives.forEach(function(e4) {
              return r2.delete(e4);
            });
          }), n2 = 1 < (e2 = Array.from(r2)).length ? (Math.random() * e2.length | 0) % e2.length : 0, e2[n2] || 1), this.settings.advancedConfig.geoFence.id = n2, this.settings.advancedConfig.geoFence.host = c.v[n2].host, this.logger.info(l, c.I.SetGeoFence, this.settings.advancedConfig.geoFence), 1 != this.settings.advancedConfig.geoFence.id) : (this.logger.info(l, c.I.SetGeoFence, { type: t2, areas: e2 }), false);
        }, p);
        function p() {
          if (this.handle = Symbol(), this.enginMap = /* @__PURE__ */ new Map(), p.instance)
            return p.instance;
          this.logger = new i.a(this.getVersion()), this.settings = new a.a(this.getVersion()), this.dataReport = new u.a(this.settings), this.crypto = new n.a(), this.protobuf = new o.a(this.crypto, this.settings.advancedConfig.geoFence), p.instance = this;
        }
      }, function(e, t) {
        e.exports = n;
        var r = null;
        try {
          r = new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0, 97, 115, 109, 1, 0, 0, 0, 1, 13, 2, 96, 0, 1, 127, 96, 4, 127, 127, 127, 127, 1, 127, 3, 7, 6, 0, 1, 1, 1, 1, 1, 6, 6, 1, 127, 1, 65, 0, 11, 7, 50, 6, 3, 109, 117, 108, 0, 1, 5, 100, 105, 118, 95, 115, 0, 2, 5, 100, 105, 118, 95, 117, 0, 3, 5, 114, 101, 109, 95, 115, 0, 4, 5, 114, 101, 109, 95, 117, 0, 5, 8, 103, 101, 116, 95, 104, 105, 103, 104, 0, 0, 10, 191, 1, 6, 4, 0, 35, 0, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 126, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 127, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 128, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 129, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 130, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11])), {}).exports;
        } catch (e2) {
        }
        function n(e2, t2, r2) {
          this.low = 0 | e2, this.high = 0 | t2, this.unsigned = !!r2;
        }
        function o(e2) {
          return true === (e2 && e2.__isLong__);
        }
        Object.defineProperty(n.prototype, "__isLong__", { value: true }), n.isLong = o;
        var s = {}, i = {};
        function a(e2, t2) {
          var r2, n2, o2;
          return t2 ? (o2 = 0 <= (e2 >>>= 0) && e2 < 256) && (n2 = i[e2]) ? n2 : (r2 = c(e2, (0 | e2) < 0 ? -1 : 0, true), o2 && (i[e2] = r2), r2) : (o2 = -128 <= (e2 |= 0) && e2 < 128) && (n2 = s[e2]) ? n2 : (r2 = c(e2, e2 < 0 ? -1 : 0, false), o2 && (s[e2] = r2), r2);
        }
        function u(e2, t2) {
          if (isNaN(e2))
            return t2 ? v : _;
          if (t2) {
            if (e2 < 0)
              return v;
            if (g <= e2)
              return k;
          } else {
            if (e2 <= -f)
              return w;
            if (f <= e2 + 1)
              return I;
          }
          return e2 < 0 ? u(-e2, t2).neg() : c(e2 % h | 0, e2 / h | 0, t2);
        }
        function c(e2, t2, r2) {
          return new n(e2, t2, r2);
        }
        n.fromInt = a, n.fromNumber = u, n.fromBits = c;
        var l = Math.pow;
        function d(e2, t2, r2) {
          if (0 === e2.length)
            throw Error("empty string");
          if ("NaN" === e2 || "Infinity" === e2 || "+Infinity" === e2 || "-Infinity" === e2)
            return _;
          if (t2 = "number" == typeof t2 ? (r2 = t2, false) : !!t2, (r2 = r2 || 10) < 2 || 36 < r2)
            throw RangeError("radix");
          var n2;
          if (0 < (n2 = e2.indexOf("-")))
            throw Error("interior hyphen");
          if (0 === n2)
            return d(e2.substring(1), t2, r2).neg();
          for (var o2 = u(l(r2, 8)), s2 = _, i2 = 0; i2 < e2.length; i2 += 8) {
            var a2 = Math.min(8, e2.length - i2), c2 = parseInt(e2.substring(i2, i2 + a2), r2);
            s2 = a2 < 8 ? (a2 = u(l(r2, a2)), s2.mul(a2).add(u(c2))) : (s2 = s2.mul(o2)).add(u(c2));
          }
          return s2.unsigned = t2, s2;
        }
        function p(e2, t2) {
          return "number" == typeof e2 ? u(e2, t2) : "string" == typeof e2 ? d(e2, t2) : c(e2.low, e2.high, "boolean" == typeof t2 ? t2 : e2.unsigned);
        }
        n.fromString = d, n.fromValue = p;
        var h = 4294967296, g = h * h, f = g / 2, m = a(1 << 24), _ = a(0), v = (n.ZERO = _, a(0, true)), b = (n.UZERO = v, a(1)), y = (n.ONE = b, a(1, true)), M = (n.UONE = y, a(-1)), I = (n.NEG_ONE = M, c(-1, 2147483647, false)), k = (n.MAX_VALUE = I, c(-1, -1, true)), w = (n.MAX_UNSIGNED_VALUE = k, c(0, -2147483648, false));
        (e = (n.MIN_VALUE = w, n.prototype)).toInt = function() {
          return this.unsigned ? this.low >>> 0 : this.low;
        }, e.toNumber = function() {
          return this.unsigned ? (this.high >>> 0) * h + (this.low >>> 0) : this.high * h + (this.low >>> 0);
        }, e.toString = function(e2) {
          if ((e2 = e2 || 10) < 2 || 36 < e2)
            throw RangeError("radix");
          if (this.isZero())
            return "0";
          var t2, r2;
          if (this.isNegative())
            return this.eq(w) ? (r2 = u(e2), r2 = (t2 = this.div(r2)).mul(r2).sub(this), t2.toString(e2) + r2.toInt().toString(e2)) : "-" + this.neg().toString(e2);
          for (var n2 = u(l(e2, 6), this.unsigned), o2 = this, s2 = ""; ; ) {
            var i2 = o2.div(n2), a2 = (o2.sub(i2.mul(n2)).toInt() >>> 0).toString(e2);
            if ((o2 = i2).isZero())
              return a2 + s2;
            for (; a2.length < 6; )
              a2 = "0" + a2;
            s2 = "" + a2 + s2;
          }
        }, e.getHighBits = function() {
          return this.high;
        }, e.getHighBitsUnsigned = function() {
          return this.high >>> 0;
        }, e.getLowBits = function() {
          return this.low;
        }, e.getLowBitsUnsigned = function() {
          return this.low >>> 0;
        }, e.getNumBitsAbs = function() {
          if (this.isNegative())
            return this.eq(w) ? 64 : this.neg().getNumBitsAbs();
          for (var e2 = 0 != this.high ? this.high : this.low, t2 = 31; 0 < t2 && 0 == (e2 & 1 << t2); t2--)
            ;
          return 0 != this.high ? t2 + 33 : t2 + 1;
        }, e.isZero = function() {
          return 0 === this.high && 0 === this.low;
        }, e.eqz = e.isZero, e.isNegative = function() {
          return !this.unsigned && this.high < 0;
        }, e.isPositive = function() {
          return this.unsigned || 0 <= this.high;
        }, e.isOdd = function() {
          return 1 == (1 & this.low);
        }, e.isEven = function() {
          return 0 == (1 & this.low);
        }, e.equals = function(e2) {
          return o(e2) || (e2 = p(e2)), (this.unsigned === e2.unsigned || this.high >>> 31 != 1 || e2.high >>> 31 != 1) && this.high === e2.high && this.low === e2.low;
        }, e.eq = e.equals, e.notEquals = function(e2) {
          return !this.eq(e2);
        }, e.neq = e.notEquals, e.ne = e.notEquals, e.lessThan = function(e2) {
          return this.comp(e2) < 0;
        }, e.lt = e.lessThan, e.lessThanOrEqual = function(e2) {
          return this.comp(e2) <= 0;
        }, e.lte = e.lessThanOrEqual, e.le = e.lessThanOrEqual, e.greaterThan = function(e2) {
          return 0 < this.comp(e2);
        }, e.gt = e.greaterThan, e.greaterThanOrEqual = function(e2) {
          return 0 <= this.comp(e2);
        }, e.gte = e.greaterThanOrEqual, e.ge = e.greaterThanOrEqual, e.compare = function(e2) {
          if (o(e2) || (e2 = p(e2)), this.eq(e2))
            return 0;
          var t2 = this.isNegative(), r2 = e2.isNegative();
          return t2 && !r2 ? -1 : !t2 && r2 ? 1 : this.unsigned ? e2.high >>> 0 > this.high >>> 0 || e2.high === this.high && e2.low >>> 0 > this.low >>> 0 ? -1 : 1 : this.sub(e2).isNegative() ? -1 : 1;
        }, e.comp = e.compare, e.negate = function() {
          return !this.unsigned && this.eq(w) ? w : this.not().add(b);
        }, e.neg = e.negate, e.add = function(e2) {
          o(e2) || (e2 = p(e2));
          var t2 = this.high >>> 16, r2 = 65535 & this.high, n2 = this.low >>> 16, s2 = 65535 & this.low, i2 = e2.high >>> 16, a2 = 65535 & e2.high, u2 = e2.low >>> 16, l2 = 0, d2 = 0, h2 = 0, g2 = 0;
          return d2 += (h2 = h2 + ((g2 += s2 + (65535 & e2.low)) >>> 16) + (n2 + u2)) >>> 16, c((h2 &= 65535) << 16 | (g2 &= 65535), ((l2 += (d2 += r2 + a2) >>> 16) + (t2 + i2) & 65535) << 16 | (d2 &= 65535), this.unsigned);
        }, e.subtract = function(e2) {
          return o(e2) || (e2 = p(e2)), this.add(e2.neg());
        }, e.sub = e.subtract, e.multiply = function(e2) {
          if (this.isZero())
            return _;
          if (o(e2) || (e2 = p(e2)), r)
            return c(r.mul(this.low, this.high, e2.low, e2.high), r.get_high(), this.unsigned);
          if (e2.isZero())
            return _;
          if (this.eq(w))
            return e2.isOdd() ? w : _;
          if (e2.eq(w))
            return this.isOdd() ? w : _;
          if (this.isNegative())
            return e2.isNegative() ? this.neg().mul(e2.neg()) : this.neg().mul(e2).neg();
          if (e2.isNegative())
            return this.mul(e2.neg()).neg();
          if (this.lt(m) && e2.lt(m))
            return u(this.toNumber() * e2.toNumber(), this.unsigned);
          var t2 = this.high >>> 16, n2 = 65535 & this.high, s2 = this.low >>> 16, i2 = 65535 & this.low, a2 = e2.high >>> 16, l2 = 65535 & e2.high, d2 = e2.low >>> 16, h2 = 0, g2 = 0, f2 = 0, v2 = (v2 = 0) + ((g2 = g2 + ((f2 += i2 * (e2 = 65535 & e2.low)) >>> 16) + s2 * e2) >>> 16) + ((g2 = (65535 & g2) + i2 * d2) >>> 16);
          return c((g2 &= 65535) << 16 | (f2 &= 65535), ((h2 += (v2 += n2 * e2) >>> 16) + ((v2 = (65535 & v2) + s2 * d2) >>> 16) + ((v2 = (65535 & v2) + i2 * l2) >>> 16) + (t2 * e2 + n2 * d2 + s2 * l2 + i2 * a2) & 65535) << 16 | (v2 &= 65535), this.unsigned);
        }, e.mul = e.multiply, e.divide = function(e2) {
          if ((e2 = o(e2) ? e2 : p(e2)).isZero())
            throw Error("division by zero");
          var t2, n2, s2;
          if (r)
            return this.unsigned || -2147483648 !== this.high || -1 !== e2.low || -1 !== e2.high ? c((this.unsigned ? r.div_u : r.div_s)(this.low, this.high, e2.low, e2.high), r.get_high(), this.unsigned) : this;
          if (this.isZero())
            return this.unsigned ? v : _;
          if (this.unsigned) {
            if ((e2 = e2.unsigned ? e2 : e2.toUnsigned()).gt(this))
              return v;
            if (e2.gt(this.shru(1)))
              return y;
            n2 = v;
          } else {
            if (this.eq(w))
              return e2.eq(b) || e2.eq(M) ? w : e2.eq(w) ? b : (s2 = this.shr(1).div(e2).shl(1)).eq(_) ? e2.isNegative() ? b : M : (t2 = this.sub(e2.mul(s2)), s2.add(t2.div(e2)));
            if (e2.eq(w))
              return this.unsigned ? v : _;
            if (this.isNegative())
              return e2.isNegative() ? this.neg().div(e2.neg()) : this.neg().div(e2).neg();
            if (e2.isNegative())
              return this.div(e2.neg()).neg();
            n2 = _;
          }
          for (t2 = this; t2.gte(e2); ) {
            s2 = Math.max(1, Math.floor(t2.toNumber() / e2.toNumber()));
            for (var i2 = Math.ceil(Math.log(s2) / Math.LN2), a2 = i2 <= 48 ? 1 : l(2, i2 - 48), d2 = u(s2), h2 = d2.mul(e2); h2.isNegative() || h2.gt(t2); )
              h2 = (d2 = u(s2 -= a2, this.unsigned)).mul(e2);
            d2.isZero() && (d2 = b), n2 = n2.add(d2), t2 = t2.sub(h2);
          }
          return n2;
        }, e.div = e.divide, e.modulo = function(e2) {
          return o(e2) || (e2 = p(e2)), r ? c((this.unsigned ? r.rem_u : r.rem_s)(this.low, this.high, e2.low, e2.high), r.get_high(), this.unsigned) : this.sub(this.div(e2).mul(e2));
        }, e.mod = e.modulo, e.rem = e.modulo, e.not = function() {
          return c(~this.low, ~this.high, this.unsigned);
        }, e.and = function(e2) {
          return o(e2) || (e2 = p(e2)), c(this.low & e2.low, this.high & e2.high, this.unsigned);
        }, e.or = function(e2) {
          return o(e2) || (e2 = p(e2)), c(this.low | e2.low, this.high | e2.high, this.unsigned);
        }, e.xor = function(e2) {
          return o(e2) || (e2 = p(e2)), c(this.low ^ e2.low, this.high ^ e2.high, this.unsigned);
        }, e.shiftLeft = function(e2) {
          return o(e2) && (e2 = e2.toInt()), 0 == (e2 &= 63) ? this : e2 < 32 ? c(this.low << e2, this.high << e2 | this.low >>> 32 - e2, this.unsigned) : c(0, this.low << e2 - 32, this.unsigned);
        }, e.shl = e.shiftLeft, e.shiftRight = function(e2) {
          return o(e2) && (e2 = e2.toInt()), 0 == (e2 &= 63) ? this : e2 < 32 ? c(this.low >>> e2 | this.high << 32 - e2, this.high >> e2, this.unsigned) : c(this.high >> e2 - 32, 0 <= this.high ? 0 : -1, this.unsigned);
        }, e.shr = e.shiftRight, e.shiftRightUnsigned = function(e2) {
          var t2;
          return o(e2) && (e2 = e2.toInt()), 0 == (e2 &= 63) ? this : (t2 = this.high, e2 < 32 ? c(this.low >>> e2 | t2 << 32 - e2, t2 >>> e2, this.unsigned) : c(32 === e2 ? t2 : t2 >>> e2 - 32, 0, this.unsigned));
        }, e.shru = e.shiftRightUnsigned, e.shr_u = e.shiftRightUnsigned, e.toSigned = function() {
          return this.unsigned ? c(this.low, this.high, false) : this;
        }, e.toUnsigned = function() {
          return this.unsigned ? this : c(this.low, this.high, true);
        }, e.toBytes = function(e2) {
          return e2 ? this.toBytesLE() : this.toBytesBE();
        }, e.toBytesLE = function() {
          var e2 = this.high, t2 = this.low;
          return [255 & t2, t2 >>> 8 & 255, t2 >>> 16 & 255, t2 >>> 24, 255 & e2, e2 >>> 8 & 255, e2 >>> 16 & 255, e2 >>> 24];
        }, e.toBytesBE = function() {
          var e2 = this.high, t2 = this.low;
          return [e2 >>> 24, e2 >>> 16 & 255, e2 >>> 8 & 255, 255 & e2, t2 >>> 24, t2 >>> 16 & 255, t2 >>> 8 & 255, 255 & t2];
        }, n.fromBytes = function(e2, t2, r2) {
          return r2 ? n.fromBytesLE(e2, t2) : n.fromBytesBE(e2, t2);
        }, n.fromBytesLE = function(e2, t2) {
          return new n(e2[0] | e2[1] << 8 | e2[2] << 16 | e2[3] << 24, e2[4] | e2[5] << 8 | e2[6] << 16 | e2[7] << 24, t2);
        }, n.fromBytesBE = function(e2, t2) {
          return new n(e2[4] << 24 | e2[5] << 16 | e2[6] << 8 | e2[7], e2[0] << 24 | e2[1] << 16 | e2[2] << 8 | e2[3], t2);
        };
      }, function(e, t, r) {
        "use strict";
        r.d(t, "b", function() {
          return o;
        }), r.d(t, "a", function() {
          return s;
        }), r.d(t, "g", function() {
          return i;
        }), r.d(t, "d", function() {
          return a;
        }), r.d(t, "f", function() {
          return c;
        }), r.d(t, "e", function() {
          return l;
        }), r.d(t, "c", function() {
          return h;
        });
        var n, o = { importantLevel: 0, reportSize: 2e3, reportNum: 20, bps: 16e3, netTimeout: 3 }, s = { totalAvailCache: 102400, cacheMaxSize: 2e4, cacheDelPer: 0.2 }, i = (n = 1, function() {
          return n++;
        }), a = (u.prototype.isEmpty = function() {
          return 0 == this.items.length;
        }, u.prototype.enqueue = function(e2) {
          this.items.push(e2);
        }, u.prototype.dequeue = function() {
          return this.items.shift();
        }, u.prototype.front = function() {
          return this.isEmpty() ? "No elements in Queue" : this.items[0];
        }, u.prototype.size = function() {
          return this.items.length;
        }, u.prototype.clear = function() {
          this.items = [];
        }, u);
        function u() {
          this.items = [], this.items = [];
        }
        var c = { TIMEOUT: { code: 100001, msg: "network timeout" }, DATAEXIST: { code: 100002, msg: "data exist" } }, l = -1, d = (Object.defineProperty(p.prototype, "id", { get: function() {
          return this._id || null;
        }, set: function(e2) {
          this._id = e2;
        }, enumerable: false, configurable: true }), Object.defineProperty(p.prototype, "data", { get: function() {
          return this._data;
        }, set: function(e2) {
          this._data = e2;
        }, enumerable: false, configurable: true }), p.prototype.hasNext = function() {
          return this.next && this.next.id;
        }, p.prototype.hasPrev = function() {
          return this.prev && this.prev.id;
        }, p);
        function p(e2, t2) {
          void 0 === e2 && (e2 = null), void 0 === t2 && (t2 = null), this.next = null, this.prev = null, this._id = e2, this._data = t2;
        }
        g.prototype.insertBefore = function(e2, t2) {
          return (t2 = new d(this._idCounter, t2)).next = e2, t2.prev = e2.prev, e2.prev && (e2.prev.next = t2), e2.prev = t2, ++this._idCounter, ++this._numNodes, t2;
        }, g.prototype.addLast = function(e2) {
          return this.insertBefore(this.end, e2);
        }, g.prototype.add = function(e2) {
          return this.addLast(e2);
        }, g.prototype.getFirst = function() {
          return 0 === this._numNodes ? null : this.start.next;
        }, g.prototype.getLast = function() {
          return 0 === this._numNodes ? null : this.end.prev;
        }, g.prototype.size = function() {
          return this._numNodes;
        }, g.prototype.getFromFirst = function(e2) {
          var t2 = 0, r2 = this.start.next;
          if (0 <= e2)
            for (; t2 < e2 && null !== r2; )
              r2 = r2.next, ++t2;
          else
            r2 = null;
          if (null === r2)
            throw "Index out of bounds.";
          return r2;
        }, g.prototype.get = function(e2) {
          return 0 === e2 ? this.getFirst() : e2 === this._numNodes - 1 ? this.getLast() : this.getFromFirst(e2);
        }, g.prototype.remove = function(e2) {
          return e2.prev && (e2.prev.next = e2.next), e2.next && (e2.next.prev = e2.prev), --this._numNodes, e2;
        }, g.prototype.removeFirst = function() {
          var e2 = null;
          return 0 < this._numNodes && this.start.next ? this.remove(this.start.next) : e2;
        }, g.prototype.removeLast = function() {
          var e2 = null;
          return 0 < this._numNodes && this.end.prev ? this.remove(this.end.prev) : e2;
        }, g.prototype.removeAll = function() {
          this.start.next = this.end, this.end.prev = this.start, this._numNodes = 0, this._idCounter = 0;
        }, g.prototype.each = function(e2) {
          for (var t2 = this.start; t2.hasNext(); )
            e2(t2 = t2.next);
        }, g.prototype.find = function(e2) {
          for (var t2 = this.start, r2 = false, n2 = null; t2.hasNext() && !r2; )
            e2(t2 = t2.next) && (n2 = t2, r2 = true);
          return n2;
        }, g.prototype.map = function(e2) {
          for (var t2 = this.start, r2 = []; t2.hasNext(); )
            e2(t2 = t2.next) && r2.push(t2);
          return r2;
        }, g.prototype.push = function(e2) {
          return this.addLast(e2);
        }, g.prototype.unshift = function(e2) {
          0 < this._numNodes ? this.insertBefore(this.start.next, e2) : this.insertBefore(this.end, e2);
        }, g.prototype.pop = function() {
          return this.removeLast();
        }, g.prototype.shift = function() {
          return this.removeFirst();
        };
        var h = g;
        function g() {
          this.start = new d(), this.end = new d(), this._idCounter = 0, this._numNodes = 0, this.start.next = this.end, this.start.prev = null, this.end.prev = this.start, this.end.next = null;
        }
      }, function(e, t, r) {
        (function(t2) {
          e.exports = function(e2) {
            var n;
            if ("undefined" != typeof window && window.crypto && (n = window.crypto), "undefined" != typeof self && self.crypto && (n = self.crypto), !(n = !(n = !(n = "undefined" != typeof globalThis && globalThis.crypto ? globalThis.crypto : n) && "undefined" != typeof window && window.msCrypto ? window.msCrypto : n) && void 0 !== t2 && t2.crypto ? t2.crypto : n))
              try {
                n = r(92);
              } catch (i2) {
              }
            var o = Object.create || function(e3) {
              return s.prototype = e3, e3 = new s(), s.prototype = null, e3;
            };
            function s() {
            }
            var i = {}, a = i.lib = {}, u = a.Base = { extend: function(e3) {
              var t3 = o(this);
              return e3 && t3.mixIn(e3), t3.hasOwnProperty("init") && this.init !== t3.init || (t3.init = function() {
                t3.$super.init.apply(this, arguments);
              }), (t3.init.prototype = t3).$super = this, t3;
            }, create: function() {
              var e3 = this.extend();
              return e3.init.apply(e3, arguments), e3;
            }, init: function() {
            }, mixIn: function(e3) {
              for (var t3 in e3)
                e3.hasOwnProperty(t3) && (this[t3] = e3[t3]);
              e3.hasOwnProperty("toString") && (this.toString = e3.toString);
            }, clone: function() {
              return this.init.prototype.extend(this);
            } }, c = a.WordArray = u.extend({ init: function(e3, t3) {
              e3 = this.words = e3 || [], this.sigBytes = null != t3 ? t3 : 4 * e3.length;
            }, toString: function(e3) {
              return (e3 || d).stringify(this);
            }, concat: function(e3) {
              var t3 = this.words, r2 = e3.words, n2 = this.sigBytes, o2 = e3.sigBytes;
              if (this.clamp(), n2 % 4)
                for (var s2 = 0; s2 < o2; s2++) {
                  var i2 = r2[s2 >>> 2] >>> 24 - s2 % 4 * 8 & 255;
                  t3[n2 + s2 >>> 2] |= i2 << 24 - (n2 + s2) % 4 * 8;
                }
              else
                for (var a2 = 0; a2 < o2; a2 += 4)
                  t3[n2 + a2 >>> 2] = r2[a2 >>> 2];
              return this.sigBytes += o2, this;
            }, clamp: function() {
              var t3 = this.words, r2 = this.sigBytes;
              t3[r2 >>> 2] &= 4294967295 << 32 - r2 % 4 * 8, t3.length = e2.ceil(r2 / 4);
            }, clone: function() {
              var e3 = u.clone.call(this);
              return e3.words = this.words.slice(0), e3;
            }, random: function(e3) {
              for (var t3 = [], r2 = 0; r2 < e3; r2 += 4)
                t3.push(function() {
                  if (n) {
                    if ("function" == typeof n.getRandomValues)
                      try {
                        return n.getRandomValues(new Uint32Array(1))[0];
                      } catch (e4) {
                      }
                    if ("function" == typeof n.randomBytes)
                      try {
                        return n.randomBytes(4).readInt32LE();
                      } catch (e4) {
                      }
                  }
                  throw new Error("Native crypto module could not be used to get secure random number.");
                }());
              return new c.init(t3, e3);
            } }), l = i.enc = {}, d = l.Hex = { stringify: function(e3) {
              for (var t3 = e3.words, r2 = e3.sigBytes, n2 = [], o2 = 0; o2 < r2; o2++) {
                var s2 = t3[o2 >>> 2] >>> 24 - o2 % 4 * 8 & 255;
                n2.push((s2 >>> 4).toString(16)), n2.push((15 & s2).toString(16));
              }
              return n2.join("");
            }, parse: function(e3) {
              for (var t3 = e3.length, r2 = [], n2 = 0; n2 < t3; n2 += 2)
                r2[n2 >>> 3] |= parseInt(e3.substr(n2, 2), 16) << 24 - n2 % 8 * 4;
              return new c.init(r2, t3 / 2);
            } }, p = l.Latin1 = { stringify: function(e3) {
              for (var t3 = e3.words, r2 = e3.sigBytes, n2 = [], o2 = 0; o2 < r2; o2++) {
                var s2 = t3[o2 >>> 2] >>> 24 - o2 % 4 * 8 & 255;
                n2.push(String.fromCharCode(s2));
              }
              return n2.join("");
            }, parse: function(e3) {
              for (var t3 = e3.length, r2 = [], n2 = 0; n2 < t3; n2++)
                r2[n2 >>> 2] |= (255 & e3.charCodeAt(n2)) << 24 - n2 % 4 * 8;
              return new c.init(r2, t3);
            } }, h = l.Utf8 = { stringify: function(e3) {
              try {
                return decodeURIComponent(escape(p.stringify(e3)));
              } catch (e4) {
                throw new Error("Malformed UTF-8 data");
              }
            }, parse: function(e3) {
              return p.parse(unescape(encodeURIComponent(e3)));
            } }, g = a.BufferedBlockAlgorithm = u.extend({ reset: function() {
              this._data = new c.init(), this._nDataBytes = 0;
            }, _append: function(e3) {
              "string" == typeof e3 && (e3 = h.parse(e3)), this._data.concat(e3), this._nDataBytes += e3.sigBytes;
            }, _process: function(t3) {
              var r2, n2 = this._data, o2 = n2.words, s2 = n2.sigBytes, i2 = this.blockSize, a2 = s2 / (4 * i2), u2 = (a2 = t3 ? e2.ceil(a2) : e2.max((0 | a2) - this._minBufferSize, 0)) * i2;
              t3 = e2.min(4 * u2, s2);
              if (u2) {
                for (var l2 = 0; l2 < u2; l2 += i2)
                  this._doProcessBlock(o2, l2);
                r2 = o2.splice(0, u2), n2.sigBytes -= t3;
              }
              return new c.init(r2, t3);
            }, clone: function() {
              var e3 = u.clone.call(this);
              return e3._data = this._data.clone(), e3;
            }, _minBufferSize: 0 }), f = (a.Hasher = g.extend({ cfg: u.extend(), init: function(e3) {
              this.cfg = this.cfg.extend(e3), this.reset();
            }, reset: function() {
              g.reset.call(this), this._doReset();
            }, update: function(e3) {
              return this._append(e3), this._process(), this;
            }, finalize: function(e3) {
              return e3 && this._append(e3), this._doFinalize();
            }, blockSize: 16, _createHelper: function(e3) {
              return function(t3, r2) {
                return new e3.init(r2).finalize(t3);
              };
            }, _createHmacHelper: function(e3) {
              return function(t3, r2) {
                return new f.HMAC.init(e3, r2).finalize(t3);
              };
            } }), i.algo = {});
            return i;
          }(Math);
        }).call(this, r(12));
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return E;
        });
        r = "function" == typeof atob, t = "function" == typeof btoa;
        var n = "function" == typeof Buffer;
        const o = "function" == typeof TextDecoder ? new TextDecoder() : void 0, s = "function" == typeof TextEncoder ? new TextEncoder() : void 0, i = Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="), a = ((e2) => {
          let t2 = {};
          return e2.forEach((e3, r2) => t2[e3] = r2), t2;
        })(i), u = /^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/, c = String.fromCharCode.bind(String), l = "function" == typeof Uint8Array.from ? Uint8Array.from.bind(Uint8Array) : (e2, t2 = (e3) => e3) => new Uint8Array(Array.prototype.slice.call(e2, 0).map(t2)), d = (e2) => e2.replace(/=/g, "").replace(/[+\/]/g, (e3) => "+" == e3 ? "-" : "_"), p = (e2) => e2.replace(/[^A-Za-z0-9\+\/]/g, "");
        var h = (e2) => {
          let t2, r2, n2, o2, s2 = "";
          var a2 = e2.length % 3;
          for (let a3 = 0; a3 < e2.length; ) {
            if (255 < (r2 = e2.charCodeAt(a3++)) || 255 < (n2 = e2.charCodeAt(a3++)) || 255 < (o2 = e2.charCodeAt(a3++)))
              throw new TypeError("invalid character found");
            t2 = r2 << 16 | n2 << 8 | o2, s2 += i[t2 >> 18 & 63] + i[t2 >> 12 & 63] + i[t2 >> 6 & 63] + i[63 & t2];
          }
          return a2 ? s2.slice(0, a2 - 3) + "===".substring(a2) : s2;
        };
        const g = t ? (e2) => btoa(e2) : n ? (e2) => Buffer.from(e2, "binary").toString("base64") : h, f = n ? (e2) => Buffer.from(e2).toString("base64") : (e2) => {
          let t2 = [];
          for (let r2 = 0, n2 = e2.length; r2 < n2; r2 += 4096)
            t2.push(c.apply(null, e2.subarray(r2, r2 + 4096)));
          return g(t2.join(""));
        }, m = (e2, t2 = false) => t2 ? d(f(e2)) : f(e2), _ = (e2) => {
          var t2;
          return e2.length < 2 ? (t2 = e2.charCodeAt(0)) < 128 ? e2 : t2 < 2048 ? c(192 | t2 >>> 6) + c(128 | 63 & t2) : c(224 | t2 >>> 12 & 15) + c(128 | t2 >>> 6 & 63) + c(128 | 63 & t2) : (t2 = 65536 + 1024 * (e2.charCodeAt(0) - 55296) + (e2.charCodeAt(1) - 56320), c(240 | t2 >>> 18 & 7) + c(128 | t2 >>> 12 & 63) + c(128 | t2 >>> 6 & 63) + c(128 | 63 & t2));
        }, v = /[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g, b = (e2) => e2.replace(v, _), y = n ? (e2) => Buffer.from(e2, "utf8").toString("base64") : s ? (e2) => f(s.encode(e2)) : (e2) => g(b(e2)), M = (e2, t2 = false) => t2 ? d(y(e2)) : y(e2);
        t = (e2) => M(e2, true);
        const I = /[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g, k = (e2) => {
          switch (e2.length) {
            case 4:
              var t2 = ((7 & e2.charCodeAt(0)) << 18 | (63 & e2.charCodeAt(1)) << 12 | (63 & e2.charCodeAt(2)) << 6 | 63 & e2.charCodeAt(3)) - 65536;
              return c(55296 + (t2 >>> 10)) + c(56320 + (1023 & t2));
            case 3:
              return c((15 & e2.charCodeAt(0)) << 12 | (63 & e2.charCodeAt(1)) << 6 | 63 & e2.charCodeAt(2));
            default:
              return c((31 & e2.charCodeAt(0)) << 6 | 63 & e2.charCodeAt(1));
          }
        }, w = (e2) => e2.replace(I, k);
        var C = (e2) => {
          if (e2 = e2.replace(/\s+/g, ""), !u.test(e2))
            throw new TypeError("malformed base64.");
          e2 += "==".slice(2 - (3 & e2.length));
          let t2, r2, n2, o2 = "";
          for (let s2 = 0; s2 < e2.length; )
            t2 = a[e2.charAt(s2++)] << 18 | a[e2.charAt(s2++)] << 12 | (r2 = a[e2.charAt(s2++)]) << 6 | (n2 = a[e2.charAt(s2++)]), o2 += 64 === r2 ? c(t2 >> 16 & 255) : 64 === n2 ? c(t2 >> 16 & 255, t2 >> 8 & 255) : c(t2 >> 16 & 255, t2 >> 8 & 255, 255 & t2);
          return o2;
        };
        const S = r ? (e2) => atob(p(e2)) : n ? (e2) => Buffer.from(e2, "base64").toString("binary") : C, D = n ? (e2) => l(Buffer.from(e2, "base64")) : (e2) => l(S(e2), (e3) => e3.charCodeAt(0)), q = (e2) => D(O(e2)), R = n ? (e2) => Buffer.from(e2, "base64").toString("utf8") : o ? (e2) => o.decode(D(e2)) : (e2) => w(S(e2)), O = (e2) => p(e2.replace(/[-_]/g, (e3) => "-" == e3 ? "+" : "/")), A = (e2) => R(O(e2));
        function x() {
          var e2 = (e3, t2) => Object.defineProperty(String.prototype, e3, T(t2));
          e2("fromBase64", function() {
            return A(this);
          }), e2("toBase64", function(e3) {
            return M(this, e3);
          }), e2("toBase64URI", function() {
            return M(this, true);
          }), e2("toBase64URL", function() {
            return M(this, true);
          }), e2("toUint8Array", function() {
            return q(this);
          });
        }
        function P() {
          var e2 = (e3, t2) => Object.defineProperty(Uint8Array.prototype, e3, T(t2));
          e2("toBase64", function(e3) {
            return m(this, e3);
          }), e2("toBase64URI", function() {
            return m(this, true);
          }), e2("toBase64URL", function() {
            return m(this, true);
          });
        }
        const T = (e2) => ({ value: e2, enumerable: false, writable: true, configurable: true }), E = { version: "3.7.2", VERSION: "3.7.2", atob: S, atobPolyfill: C, btoa: g, btoaPolyfill: h, fromBase64: A, toBase64: M, encode: M, encodeURI: t, encodeURL: t, utob: b, btou: w, decode: A, isValid: (e2) => "string" == typeof e2 && (e2 = e2.replace(/\s+/g, "").replace(/={0,2}$/, ""), !/[^\s0-9a-zA-Z\+/]/.test(e2) || !/[^\s0-9a-zA-Z\-_]/.test(e2)), fromUint8Array: m, toUint8Array: q, extendString: x, extendUint8Array: P, extendBuiltins: () => {
          x(), P();
        } };
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return o;
        }), r.d(t, "b", function() {
          return s;
        });
        var n, o = { DEBUG: 0, INFO: 1, WARN: 2, ERROR: 3, REPORT: 99, DISABLE: 100, debug: 0, info: 1, warn: 2, error: 3, report: 99, disable: 100 }, s = (n = 1, function() {
          return n++;
        });
      }, function(e, t, r) {
        "use strict";
        var n = r(28), o = (r.d(t, "i", function() {
          return n.a;
        }), r(29)), s = (r.d(t, "d", function() {
          return o.a;
        }), r.d(t, "e", function() {
          return o.b;
        }), r.d(t, "j", function() {
          return o.c;
        }), r.d(t, "r", function() {
          return o.d;
        }), r(30)), i = (r.d(t, "a", function() {
          return s.a;
        }), r.d(t, "b", function() {
          return s.b;
        }), r.d(t, "c", function() {
          return s.c;
        }), r(31)), a = (r.d(t, "f", function() {
          return i.a;
        }), r.d(t, "g", function() {
          return i.b;
        }), r.d(t, "h", function() {
          return i.c;
        }), r.d(t, "q", function() {
          return i.d;
        }), r.d(t, "s", function() {
          return i.e;
        }), r.d(t, "t", function() {
          return i.f;
        }), r.d(t, "u", function() {
          return i.g;
        }), r.d(t, "v", function() {
          return i.h;
        }), r.d(t, "w", function() {
          return i.i;
        }), r(32)), u = (r.d(t, "k", function() {
          return a.a;
        }), r.d(t, "l", function() {
          return a.b;
        }), r.d(t, "m", function() {
          return a.c;
        }), r.d(t, "n", function() {
          return a.d;
        }), r.d(t, "o", function() {
          return a.e;
        }), r.d(t, "p", function() {
          return a.f;
        }), r(33));
        r.d(t, "x", function() {
          return u.a;
        }), r.d(t, "y", function() {
          return u.b;
        }), r.d(t, "z", function() {
          return u.c;
        }), r(34);
      }, function(e, t, r) {
        "use strict";
        e.exports = r(97);
      }, function(e, t, r) {
        "use strict";
        (function(e2) {
          var n = t;
          function o(e3, t2, r2) {
            for (var n2 = Object.keys(t2), o2 = 0; o2 < n2.length; ++o2)
              void 0 !== e3[n2[o2]] && r2 || (e3[n2[o2]] = t2[n2[o2]]);
            return e3;
          }
          function s(e3) {
            function t2(e4, r2) {
              if (!(this instanceof t2))
                return new t2(e4, r2);
              Object.defineProperty(this, "message", { get: function() {
                return e4;
              } }), Error.captureStackTrace ? Error.captureStackTrace(this, t2) : Object.defineProperty(this, "stack", { value: new Error().stack || "" }), r2 && o(this, r2);
            }
            return (t2.prototype = Object.create(Error.prototype)).constructor = t2, Object.defineProperty(t2.prototype, "name", { get: function() {
              return e3;
            } }), t2.prototype.toString = function() {
              return this.name + ": " + this.message;
            }, t2;
          }
          n.asPromise = r(98), n.base64 = r(99), n.EventEmitter = r(100), n.float = r(101), n.inquire = r(102), n.utf8 = r(103), n.pool = r(104), n.LongBits = r(105), n.isNode = Boolean(void 0 !== e2 && e2 && e2.process && e2.process.versions && e2.process.versions.node), n.global = n.isNode && e2 || "undefined" != typeof window && window || "undefined" != typeof self && self || this, n.emptyArray = Object.freeze ? Object.freeze([]) : [], n.emptyObject = Object.freeze ? Object.freeze({}) : {}, n.isInteger = Number.isInteger || function(e3) {
            return "number" == typeof e3 && isFinite(e3) && Math.floor(e3) === e3;
          }, n.isString = function(e3) {
            return "string" == typeof e3 || e3 instanceof String;
          }, n.isObject = function(e3) {
            return e3 && "object" == typeof e3;
          }, n.isset = n.isSet = function(e3, t2) {
            var r2 = e3[t2];
            return !(null == r2 || !e3.hasOwnProperty(t2)) && ("object" != typeof r2 || 0 < (Array.isArray(r2) ? r2 : Object.keys(r2)).length);
          }, n.Buffer = function() {
            try {
              var e3 = n.inquire("buffer").Buffer;
              return e3.prototype.utf8Write ? e3 : null;
            } catch (e4) {
              return null;
            }
          }(), n._Buffer_from = null, n._Buffer_allocUnsafe = null, n.newBuffer = function(e3) {
            return "number" == typeof e3 ? n.Buffer ? n._Buffer_allocUnsafe(e3) : new n.Array(e3) : n.Buffer ? n._Buffer_from(e3) : "undefined" == typeof Uint8Array ? e3 : new Uint8Array(e3);
          }, n.Array = "undefined" != typeof Uint8Array ? Uint8Array : Array, n.Long = n.global.dcodeIO && n.global.dcodeIO.Long || n.global.Long || n.inquire("long"), n.key2Re = /^true|false|0|1$/, n.key32Re = /^-?(?:0|[1-9][0-9]*)$/, n.key64Re = /^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/, n.longToHash = function(e3) {
            return e3 ? n.LongBits.from(e3).toHash() : n.LongBits.zeroHash;
          }, n.longFromHash = function(e3, t2) {
            return e3 = n.LongBits.fromHash(e3), n.Long ? n.Long.fromBits(e3.lo, e3.hi, t2) : e3.toNumber(Boolean(t2));
          }, n.merge = o, n.lcFirst = function(e3) {
            return e3.charAt(0).toLowerCase() + e3.substring(1);
          }, n.newError = s, n.ProtocolError = s("ProtocolError"), n.oneOfGetter = function(e3) {
            for (var t2 = {}, r2 = 0; r2 < e3.length; ++r2)
              t2[e3[r2]] = 1;
            return function() {
              for (var e4 = Object.keys(this), r3 = e4.length - 1; -1 < r3; --r3)
                if (1 === t2[e4[r3]] && void 0 !== this[e4[r3]] && null !== this[e4[r3]])
                  return e4[r3];
            };
          }, n.oneOfSetter = function(e3) {
            return function(t2) {
              for (var r2 = 0; r2 < e3.length; ++r2)
                e3[r2] !== t2 && delete this[e3[r2]];
            };
          }, n.toJSONOptions = { longs: String, enums: String, bytes: String, json: true }, n._configure = function() {
            var e3 = n.Buffer;
            e3 ? (n._Buffer_from = e3.from !== Uint8Array.from && e3.from || function(t2, r2) {
              return new e3(t2, r2);
            }, n._Buffer_allocUnsafe = e3.allocUnsafe || function(t2) {
              return new e3(t2);
            }) : n._Buffer_from = n._Buffer_allocUnsafe = null;
          };
        }).call(this, r(12));
      }, function(e, t, r) {
        e.exports = function(e2) {
          for (var t2 = Math, r2 = e2, n = r2.lib, o = n.WordArray, s = n.Hasher, i = r2.algo, a = [], u = 0; u < 64; u++)
            a[u] = 4294967296 * t2.abs(t2.sin(u + 1)) | 0;
          var c = i.MD5 = s.extend({ _doReset: function() {
            this._hash = new o.init([1732584193, 4023233417, 2562383102, 271733878]);
          }, _doProcessBlock: function(e3, t3) {
            for (var r3 = 0; r3 < 16; r3++) {
              var n2 = t3 + r3, o2 = e3[n2];
              e3[n2] = 16711935 & (o2 << 8 | o2 >>> 24) | 4278255360 & (o2 << 24 | o2 >>> 8);
            }
            var s2 = this._hash.words, i2 = e3[t3 + 0], u2 = e3[t3 + 1], c2 = e3[t3 + 2], g = e3[t3 + 3], f = e3[t3 + 4], m = e3[t3 + 5], _ = e3[t3 + 6], v = e3[t3 + 7], b = e3[t3 + 8], y = e3[t3 + 9], M = e3[t3 + 10], I = e3[t3 + 11], k = e3[t3 + 12], w = e3[t3 + 13], C = e3[t3 + 14], S = e3[t3 + 15], D = s2[0], q = s2[1], R = s2[2], O = s2[3];
            D = l(D, q, R, O, i2, 7, a[0]), O = l(O, D, q, R, u2, 12, a[1]), R = l(R, O, D, q, c2, 17, a[2]), q = l(q, R, O, D, g, 22, a[3]), D = l(D, q, R, O, f, 7, a[4]), O = l(O, D, q, R, m, 12, a[5]), R = l(R, O, D, q, _, 17, a[6]), q = l(q, R, O, D, v, 22, a[7]), D = l(D, q, R, O, b, 7, a[8]), O = l(O, D, q, R, y, 12, a[9]), R = l(R, O, D, q, M, 17, a[10]), q = l(q, R, O, D, I, 22, a[11]), D = l(D, q, R, O, k, 7, a[12]), O = l(O, D, q, R, w, 12, a[13]), R = l(R, O, D, q, C, 17, a[14]), D = d(D, q = l(q, R, O, D, S, 22, a[15]), R, O, u2, 5, a[16]), O = d(O, D, q, R, _, 9, a[17]), R = d(R, O, D, q, I, 14, a[18]), q = d(q, R, O, D, i2, 20, a[19]), D = d(D, q, R, O, m, 5, a[20]), O = d(O, D, q, R, M, 9, a[21]), R = d(R, O, D, q, S, 14, a[22]), q = d(q, R, O, D, f, 20, a[23]), D = d(D, q, R, O, y, 5, a[24]), O = d(O, D, q, R, C, 9, a[25]), R = d(R, O, D, q, g, 14, a[26]), q = d(q, R, O, D, b, 20, a[27]), D = d(D, q, R, O, w, 5, a[28]), O = d(O, D, q, R, c2, 9, a[29]), R = d(R, O, D, q, v, 14, a[30]), D = p(D, q = d(q, R, O, D, k, 20, a[31]), R, O, m, 4, a[32]), O = p(O, D, q, R, b, 11, a[33]), R = p(R, O, D, q, I, 16, a[34]), q = p(q, R, O, D, C, 23, a[35]), D = p(D, q, R, O, u2, 4, a[36]), O = p(O, D, q, R, f, 11, a[37]), R = p(R, O, D, q, v, 16, a[38]), q = p(q, R, O, D, M, 23, a[39]), D = p(D, q, R, O, w, 4, a[40]), O = p(O, D, q, R, i2, 11, a[41]), R = p(R, O, D, q, g, 16, a[42]), q = p(q, R, O, D, _, 23, a[43]), D = p(D, q, R, O, y, 4, a[44]), O = p(O, D, q, R, k, 11, a[45]), R = p(R, O, D, q, S, 16, a[46]), D = h(D, q = p(q, R, O, D, c2, 23, a[47]), R, O, i2, 6, a[48]), O = h(O, D, q, R, v, 10, a[49]), R = h(R, O, D, q, C, 15, a[50]), q = h(q, R, O, D, m, 21, a[51]), D = h(D, q, R, O, k, 6, a[52]), O = h(O, D, q, R, g, 10, a[53]), R = h(R, O, D, q, M, 15, a[54]), q = h(q, R, O, D, u2, 21, a[55]), D = h(D, q, R, O, b, 6, a[56]), O = h(O, D, q, R, S, 10, a[57]), R = h(R, O, D, q, _, 15, a[58]), q = h(q, R, O, D, w, 21, a[59]), D = h(D, q, R, O, f, 6, a[60]), O = h(O, D, q, R, I, 10, a[61]), R = h(R, O, D, q, c2, 15, a[62]), q = h(q, R, O, D, y, 21, a[63]), s2[0] = s2[0] + D | 0, s2[1] = s2[1] + q | 0, s2[2] = s2[2] + R | 0, s2[3] = s2[3] + O | 0;
          }, _doFinalize: function() {
            var e3 = this._data, r3 = e3.words, n2 = 8 * this._nDataBytes, o2 = 8 * e3.sigBytes;
            r3[o2 >>> 5] |= 128 << 24 - o2 % 32;
            var s2 = t2.floor(n2 / 4294967296), i2 = n2;
            r3[15 + (o2 + 64 >>> 9 << 4)] = 16711935 & (s2 << 8 | s2 >>> 24) | 4278255360 & (s2 << 24 | s2 >>> 8), r3[14 + (o2 + 64 >>> 9 << 4)] = 16711935 & (i2 << 8 | i2 >>> 24) | 4278255360 & (i2 << 24 | i2 >>> 8), e3.sigBytes = 4 * (r3.length + 1), this._process();
            for (var a2 = this._hash, u2 = a2.words, c2 = 0; c2 < 4; c2++) {
              var l2 = u2[c2];
              u2[c2] = 16711935 & (l2 << 8 | l2 >>> 24) | 4278255360 & (l2 << 24 | l2 >>> 8);
            }
            return a2;
          }, clone: function() {
            var e3 = s.clone.call(this);
            return e3._hash = this._hash.clone(), e3;
          } });
          function l(e3, t3, r3, n2, o2, s2, i2) {
            var a2 = e3 + (t3 & r3 | ~t3 & n2) + o2 + i2;
            return (a2 << s2 | a2 >>> 32 - s2) + t3;
          }
          function d(e3, t3, r3, n2, o2, s2, i2) {
            var a2 = e3 + (t3 & n2 | r3 & ~n2) + o2 + i2;
            return (a2 << s2 | a2 >>> 32 - s2) + t3;
          }
          function p(e3, t3, r3, n2, o2, s2, i2) {
            var a2 = e3 + (t3 ^ r3 ^ n2) + o2 + i2;
            return (a2 << s2 | a2 >>> 32 - s2) + t3;
          }
          function h(e3, t3, r3, n2, o2, s2, i2) {
            var a2 = e3 + (r3 ^ (t3 | ~n2)) + o2 + i2;
            return (a2 << s2 | a2 >>> 32 - s2) + t3;
          }
          return r2.MD5 = s._createHelper(c), r2.HmacMD5 = s._createHmacHelper(c), e2.MD5;
        }(r(5));
      }, function(e, t) {
        var r = function() {
          return this;
        }();
        try {
          r = r || new Function("return this")();
        } catch (e2) {
          "object" == typeof window && (r = window);
        }
        e.exports = r;
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return l;
        });
        var n = r(2), o = r(1), s = r(0), i = function() {
          return (i = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var o2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, o2) && (e2[o2] = t2[o2]);
            return e2;
          }).apply(this, arguments);
        }, a = function(e2, t2) {
          var r2 = "function" == typeof Symbol && e2[Symbol.iterator];
          if (!r2)
            return e2;
          var n2, o2, s2 = r2.call(e2), i2 = [];
          try {
            for (; (void 0 === t2 || 0 < t2--) && !(n2 = s2.next()).done; )
              i2.push(n2.value);
          } catch (e3) {
            o2 = { error: e3 };
          } finally {
            try {
              n2 && !n2.done && (r2 = s2.return) && r2.call(s2);
            } finally {
              if (o2)
                throw o2.error;
            }
          }
          return i2;
        }, u = function(e2, t2, r2) {
          if (r2 || 2 === arguments.length)
            for (var n2, o2 = 0, s2 = t2.length; o2 < s2; o2++)
              !n2 && o2 in t2 || ((n2 = n2 || Array.prototype.slice.call(t2, 0, o2))[o2] = t2[o2]);
          return e2.concat(n2 || Array.prototype.slice.call(t2));
        }, c = s.J.Conversation, l = (d.prototype.destroy = function() {
          this.dbMgr = null, this.connMgr = null, this.eventBus = null, this.logger = null, this.engineConfig = null;
        }, d.prototype.setDBConv = function(e2) {
          Object.assign(e2, this.dbConv), this.dbConv = e2;
        }, d.prototype.setDBUser = function(e2) {
          e2 && this.convType == s.q.Peer && (this.dbUser = e2);
        }, d.prototype.sendMessage = function(e2, t2, r2, n2) {
          var u2 = this, l2 = (e2 = Object.isFrozen(e2) ? i({}, e2) : e2).type >= s.R.Image && e2.type <= s.R.Video, d2 = l2 && !!e2.fileUID, p = l2 ? s.I.SendMediaMessage : s.I.SendMessage, h = Date.now();
          if (!d2 && h - this.lastSendTime < this.engineConfig.cloudSetting.qps.send_msg)
            return f = Object(o.s)(s.s.CommonModuleTriggerSDKFrequencyLimit), g = { convID: this.convID, error: f }, this.logger.warn(c, p, g), e2.sentStatus = s.P.Failed, this.emitMessageSentStatusChanged(e2), Promise.reject(f);
          this.lastSendTime = h, n2 = n2 || { time: h, convID: this.convID, message: i({}, e2) };
          var g = Object(o.i)(e2.message), f = (l2 ? e2.message = "" : this.emitSendingMessage(e2, t2, r2), d2 && (e2.clientSeq = ++this.clientMsgSeq), i(i({}, this.getAssociatedReqBody()), { conv_id: this.convID, msg_info: { msg_type: e2.type, priority_type: t2.priority, msg: g, payload: Object(o.i)(e2.extendedData || ""), has_receipt: t2.hasReceipt && this.convType !== s.q.Room ? 1 : void 0, conv_id: this.convID, msg_client_info: { conv_sid: e2.clientSid, client_msg_seq: e2.clientSeq }, offline_push: this.convType == s.q.Room ? void 0 : Object(o.e)(t2.pushConfig) } }));
          this.convType != s.q.Peer || this.dbUser || this.dbConv.maxOrderKey || (f.fetch_peer_user_info = 1), e2.type == s.R.Custom && (f.msg_info.sub_msg_type = e2.subType, f.msg_info.searched_content = e2.searchedContent), h = this.engineConfig.cloudSetting.req_to.send_msg;
          return this.connMgr.sendRequest(this.convTypeMap.textMsgCmd, f, s.i.API, h).then(function(t3) {
            if (111100 == t3.code)
              return u2.dbConv.state = t3.conv_disable && u2.convType == s.q.Peer ? s.p.Disable : s.p.Normal, u2.updateConvWhenSendedMessage(t3), n2.result = u2.saveLocalMessage(e2, s.P.Success, t3.audit_info), u2.logger.info(c, p, n2), { message: e2 };
            if (6000104 == t3.code)
              return u2.queryMessageStatus([e2], true).then(function(t4) {
                var r4, o2 = (t4 = a(t4, 2))[0];
                if (t4 = t4[1])
                  return d2 && u2.dbMgr.deleteMessageList(u2.convID, u2.convType, [e2]), r4 = t4.conversationSeq, i2 = u2.dbConv.state, u2.dbConv.state = s.p.Normal, u2.saveMessageList([t4], r4, i2, s.O.Sended), n2.result = r4, u2.logger.info(c, p, n2), Object.assign(e2, t4), { message: e2 };
                var i2 = u2.handleSendMessageFail(e2, o2, p, n2, d2);
                if (d2)
                  throw i2;
                return Promise.reject(i2);
              });
            if (t3.code) {
              var r3 = u2.handleSendMessageFail(e2, t3, p, n2, d2);
              if (d2)
                throw r3;
              return Promise.reject(r3);
            }
            return u2.handleSendMessageSuccess(e2, t3, p, n2, d2);
          });
        }, d.prototype.sendCommand = function(e2, t2, r2) {
          var n2, a2 = this, u2 = (Object.isFrozen(e2) && (e2 = i({}, e2)), Date.now()), l2 = u2 - this.lastSendTime < this.engineConfig.cloudSetting.qps.send_msg;
          if (e2.type != s.R.Barrage && l2)
            return n2 = Object(o.s)(s.s.CommonModuleTriggerSDKFrequencyLimit), l2 = { convID: this.convID, error: n2 }, this.logger.warn(c, s.I.SendMessage, l2), e2.sentStatus = s.P.Failed, this.emitMessageSentStatusChanged(e2), Promise.reject(n2);
          l2 = e2.type;
          var d2 = e2.message, p = (l2 != s.R.Barrage && (this.lastSendTime = u2), { time: u2, convID: this.convID, message: i({}, e2) });
          if (e2.clientSeq = ++this.clientMsgSeq, e2.clientSid = "" + this.convSid, e2.localMessageID = e2.clientSid + e2.clientSeq, e2.conversationID = this.convID, e2.conversationType = this.convType, e2.senderUserID = this.engineConfig.user.userID, e2.direction = s.K.Send, e2.sentStatus = s.P.Sending, e2.conversationSeq = 0, e2.orderKey = 0, e2.isUserInserted = false, e2.receiptStatus = s.M.None, e2.isBroadcastMessage && (e2.isBroadcastMessage = false), r2 && "function" == typeof r2.onMessageAttached)
            try {
              r2.onMessageAttached(e2);
            } catch (n3) {
            }
          return r2 = u2 - this.lastSendTime < this.engineConfig.cloudSetting.qps.send_barrage_msg, e2.type == s.R.Barrage && r2 ? new Promise(function(t3) {
            setTimeout(function() {
              e2.sentStatus = s.P.Success, e2.messageID = e2.localMessageID, e2.timestamp = u2 + a2.settings.serverOffsetTime, a2.emitMessageSentStatusChanged(e2), t3({ message: e2 });
            }, 80 * Math.random() + 50);
          }) : (r2 = { msg_type: l2, priority_type: t2.priority, msg: "string" == typeof d2 ? Object(o.i)(d2) : d2, conv_id: this.convID }, e2.extendedData && (r2.payload = Object(o.i)(e2.extendedData)), l2 = i(i({}, this.getAssociatedReqBody()), { conv_id: this.convID, command_msg_info: r2 }), this.connMgr.sendRequest(this.convTypeMap.commandMsgCmd, l2).then(function(t3) {
            if (u2 += a2.settings.serverOffsetTime, t3.code)
              return e2.sentStatus = s.P.Failed, e2.messageID = e2.localMessageID, e2.timestamp = u2, a2.emitMessageSentStatusChanged(e2), r3 = a2.withSendMessageErrorCode(t3), p.error = r3, a2.logger.warn(c, s.I.SendMessage, p), Promise.reject(r3);
            var r3 = t3.msg_id;
            t3 = t3.command_svr_info;
            return e2.sentStatus = s.P.Success, e2.messageID = t3 ? t3.msg_id : r3, e2.timestamp = t3 ? t3.msg_time : u2, a2.emitMessageSentStatusChanged(e2), a2.logger.info(c, s.I.SendMessage, p), { message: e2 };
          }));
        }, d.prototype.sendMediaMessage = function(e2, t2, r2) {
          var n2 = this, a2 = (Object.isFrozen(e2) && (e2 = i({}, e2)), { time: /* @__PURE__ */ new Date(), uploadTime: 0, convID: this.convID, message: i({}, e2) });
          return this.emitSendingMessage(e2, t2, r2), e2.fileDownloadUrl && "string" == typeof e2.fileDownloadUrl ? (e2.fileUID = "", e2.message = this.encodeMediaMsgBody(e2.fileDownloadUrl, e2, true), this.sendMessage(e2, t2, void 0, a2)) : this.dbMgr.getFileInfo(e2.fileLocalPath).then(function(t3) {
            return e2.fileUID = t3.md5, e2.fileName = e2.fileName || t3.name, e2.fileSize = +e2.fileSize || t3.size || 1, n2.saveLocalMessage(e2, s.P.Sending), t3 = { md5: e2.fileUID, name: e2.fileName, size: e2.fileSize, file_type: e2.type - 10, duration: n2.getMediaMessageDuration(e2) }, n2.connMgr.sendRequest(s.c.file_upload, t3);
          }).then(function(i2) {
            if (i2.code)
              throw Object(o.s)(s.s.MessageModuleFileServerError, i2.message, i2.code);
            function u2(t3) {
              var n3 = t3.loaded || t3.totalBytesSent || t3.totalBytesWritten || 0;
              t3 = t3.total || t3.totalBytesExpectedToSend || t3.totalBytesExpectedToWrite || 1;
              if (r2 && "function" == typeof r2.onMediaUploadingProgress)
                try {
                  r2.onMediaUploadingProgress(e2, n3, t3);
                } catch (t4) {
                }
            }
            if (u2({ loaded: 0, total: e2.fileSize }), 1 == i2.state)
              return u2({ loaded: e2.fileSize, total: e2.fileSize }), n2.fetchFileProcess(e2, t2, a2);
            var c2 = Date.now(), l2 = { file_size: e2.fileSize, file_type: e2.type, file_env: o.n ? o.n._zim_env : "" };
            return n2.dbMgr.uploadFile(i2.upload_req, e2.fileLocalPath, u2).then(function() {
              return l2.time_consumed = Date.now() - c2, n2.dataReport.reportSDKEvent("/sdk/file/upload_msg", l2), a2.uploadTime = l2.time_consumed, n2.fetchFileProcess(e2, t2, a2);
            }, function(e3) {
              throw l2.time_consumed = Date.now() - c2, l2.error = e3.code, l2.error_message = e3.message, n2.dataReport.reportSDKEvent("/sdk/file/upload_msg", l2), e3.code = 0, e3;
            });
          }).catch(function(e3) {
            var t3 = o.n ? o.n._zim_env : "", r3 = e3 ? e3.code : 0, i2 = e3 ? e3.stack || e3.message || e3.errMsg : r3;
            e3 = r3 ? e3 : Object(o.s)(s.s.MessageModuleSendMessageFailed, i2);
            throw a2.error = e3, n2.logger.warn(c, s.I.SendMediaMessage, a2), r3 || (n2.dataReport.reportSDKEvent("/sdk/log", { error_message: "API.sendMediaMessage:" + t3 + i2 }), n2.logger.upload("sendMediaMessage error", true)), e3;
          });
        }, d.prototype.deleteMessages = function(e2, t2) {
          var r2 = this;
          if (!(e2 = e2.filter(function(e3) {
            return e3.messageID && e3.conversationSeq && e3.conversationID === r2.convID && e3.conversationType === r2.convType;
          })).length)
            return Promise.reject(Object(o.s)(s.s.CommonModuleParamInvalid, "messageList is invalid."));
          var n2 = { time: /* @__PURE__ */ new Date(), convID: this.convID, config: t2 };
          if (t2 && t2.isAlsoDeleteServerMessage) {
            if (0 == (t2 = e2.filter(function(e3) {
              return !e3.isUserInserted && !e3.isBroadcastMessage && e3.sentStatus == s.P.Success;
            })).length)
              return this.deleteLocalMessages(e2, n2);
            var i2 = this.convType == s.q.Peer ? s.c.c2c_del_msg : s.c.group_del_msg;
            t2 = this.convType == s.q.Peer ? { conv_id: this.convID, conv_type: this.convType, msg_ids: t2.map(function(e3) {
              return e3.messageID;
            }) } : { conv_id: this.convID, conv_msg_seq: t2.map(function(e3) {
              return e3.conversationSeq;
            }) };
            return this.connMgr.sendRequest(i2, t2).then(function(t3) {
              return t3.code ? (t3 = Object(o.s)(s.s.ConversationModuleServerError, t3.message, t3.code), n2.error = t3, r2.logger.warn(c, s.I.DeleteMessages, n2), Promise.reject(t3)) : r2.deleteLocalMessages(e2, n2);
            });
          }
          return this.deleteLocalMessages(e2, n2);
        }, d.prototype.deleteAllMessage = function(e2) {
          var t2, r2 = this, n2 = { time: /* @__PURE__ */ new Date(), convID: this.convID, config: e2 };
          return e2 && e2.isAlsoDeleteServerMessage ? (e2 = this.convType == s.q.Peer ? s.c.c2c_del_all_msg : s.c.group_del_all_msg, t2 = { conv_id: this.convID, conv_type: this.convType }, this.connMgr.sendRequest(e2, t2).then(function(e3) {
            return e3.code ? (e3 = Object(o.s)(s.s.ConversationModuleServerError, e3.message, e3.code), n2.error = e3, r2.logger.warn(c, s.I.DeleteAllMessage, n2), Promise.reject(e3)) : r2.deleteLocalAllMessage(n2);
          })) : this.deleteLocalAllMessage(n2);
        }, d.prototype.queryHistoryMessage = function(e2) {
          var t2 = this;
          return new Promise(function(r2) {
            function n2(e3, n3) {
              c2 ? e3.sort(function(e4, t3) {
                return t3.orderKey - e4.orderKey;
              }) : e3.sort(function(e4, t3) {
                return e4.orderKey - t3.orderKey;
              });
              var a2 = 0, u2 = (a2 = o2 ? e3.findIndex(function(e4) {
                return o2 === e4.messageID;
              }) + 1 : a2) + i2;
              e3 = e3.slice(a2, u2), c2 && e3.sort(function(e4, t3) {
                return e4.orderKey - t3.orderKey;
              }), _.seqs = [l2, d2, p, a2, i2].join(), v.count = e3.length, v.statusMap = _, n3 && (v.dataReport = n3), (u2 = e3.filter(function(e4) {
                return e4.sentStatus == s.P.Sending;
              })).length && t2.queryMessageStatus(u2), r2({ list: e3, log: v });
            }
            var o2 = e2.nextMessage ? e2.nextMessage.messageID : "", i2 = e2.count, c2 = e2.reverse, l2 = t2.dbConv.msgSeq || 0, d2 = t2.dbConv.maxSeq || 0, p = e2.nextMessage ? e2.nextMessage.conversationSeq : 0, h = !p && c2, g = false, f = 0, m = 0, _ = (c2 ? (m = p ? p - 1 : l2, f = Math.max(t2.dbConv.deletedMsgMaxSeq || 0, m - i2)) : (f = Math.max(t2.dbConv.deletedMsgMaxSeq || 0, p), m = f + i2), { reverse: c2, seqs: "", degree: {}, flag: {} }), v = { time: /* @__PURE__ */ new Date(), convID: t2.convID, smin: f, smax: m, lmin: 0, lmax: 0, dbCount: 0, count: 0 };
            t2.dbMgr.getMessageList(t2.dbConv, e2).then(function(r3) {
              var o3 = t2.dbConv.deletedMsgMaxSeq || 0, p2 = t2.dbConv.deletedMsgSeqs || [], b = r3.filter(function(e3) {
                return !e3.isUserInserted && e3.sentStatus == s.P.Success;
              }).map(function(e3) {
                return e3.conversationSeq;
              }), y = (p2.length && b.push.apply(b, u([], a(p2), false)), b.sort(function(e3, t3) {
                return e3 - t3;
              }), b[0] || 0), M = b[b.length - 1] || 0;
              if (v.dbCount = r3.length, v.lmin = y, v.lmax = M, !h && r3.length >= i2 && M - y < b.length && y <= f + 1 && m <= M)
                return n2(r3);
              function I(a2) {
                var u2, l3, d3, b2, y2;
                t2.dbMgr && (D += a2.list.length, l3 = u2 = 0, a2.list.forEach(function(e3, r4) {
                  var n3 = e3.msg_svr_info.msg_id, s2 = e3.msg_svr_info.conv_msg_seq;
                  A.push(s2), -1 == p2.indexOf(s2) && o3 < s2 && !q.has(n3) && (C < s2 && (C = s2), (!w || s2 < w) && (w = s2), q.set(n3, t2.transform2Message(e3, true))), 0 == r4 ? u2 = s2 : r4 == a2.list.length - 1 && (l3 = s2), null != (n3 = e3.msg_info.msg) && n3.length || (_.flag[s2] = e3.msg_info.msg);
                }), _.degree[S] = w + "," + C + "," + u2 + "," + l3, b2 = h ? g : c2, a2.nextSeq && q.size < i2 && (!b2 && C < m || b2 && f < w) ? t2.fetchServerPageMessage(a2.nextSeq, ++S, R, b2).then(I) : (a2.degree = S, a2.svrCount = D, d3 = t2.dataReport.endNetworkRequest(t2.convTypeMap.fetchMsgList.cmd, O, a2), b2 = Array.from(q.values()), (y2 = t2.dbConv.state) != s.p.Delete && b2.length && (t2.dbConv.state = s.p.Normal), t2.insertDeletedMsgSeqs(A, v), b2.length ? t2.saveMessageList(b2, C, y2, s.O.Fetch).then(function() {
                  return t2.dbMgr.getMessageList(t2.dbConv, e2);
                }).then(function(e3) {
                  return n2(e3, d3);
                }) : n2(r3)));
              }
              var k, w = 0, C = 0, S = 1, D = 0, q = /* @__PURE__ */ new Map(), R = s.u.Biz, O = ++t2.mergeMsgListSeq + t2.convType + t2.convID, A = [];
              if (h)
                d2 && l2 <= d2 ? t2.fetchServerPageMessage(l2, S, R, g, O).then(I) : (g = true, k = Math.min(100, l2 - d2), t2.fetchServerPageMessage(-1, S, R, g, O, k).then(I));
              else {
                var x = c2 ? y : M, P = 100;
                if (c2)
                  if (m <= M) {
                    for (var T = b.length - 1; 0 < T; T--)
                      if (1 < b[T] - b[T - 1]) {
                        x = b[T], P = Math.min(100, b[T] - b[T - 1]), _.seqs = b[T - 1] + "," + x;
                        break;
                      }
                  } else
                    x = m + 1, P = Math.min(100, m + 1 - M);
                else if (x = M, y <= f + 1) {
                  for (T = 1; T < b.length; T++)
                    if (1 < b[T] - b[T - 1]) {
                      x = b[T - 1], P = Math.min(100, b[T] - b[T - 1]), _.seqs = x + "," + b[T];
                      break;
                    }
                } else
                  x = f, P = Math.min(100, y - f + 1);
                t2.fetchServerPageMessage(x, S, R, c2, O, P).then(I);
              }
            });
          });
        }, d.prototype.insertMessageToLocalDB = function(e2) {
          var t2 = this, r2 = (Object.isFrozen(e2) && (e2 = i({}, e2)), this.dbConv.msgSeq || 0), n2 = { convID: this.convID, dbSeq: r2, orderKey: this.dbConv.maxOrderKey, message: i({}, e2) }, o2 = (e2.clientSeq = ++this.clientMsgSeq, e2.clientSid = "" + this.convSid, e2.localMessageID = e2.clientSid + e2.clientSeq, e2.messageID = e2.localMessageID, e2.conversationSeq = r2, e2.orderKey = (this.dbConv.maxOrderKey || 0) + 1, e2.conversationID = this.convID, e2.conversationType = this.convType, e2.direction = s.K.Send, e2.sentStatus = s.P.Success, e2.timestamp = Date.now() + this.settings.serverOffsetTime, e2.isUserInserted = true, e2.receiptStatus = s.M.None, this.dbUser && (this.dbConv.conversationName = this.dbUser.userName, this.dbConv.conversationAvatarUrl = this.dbUser.userAvatarUrl), i({}, e2)), a2 = this.dbConv.state;
          return a2 == s.p.Delete && (this.dbConv.state = s.p.Normal), this.saveMessageList([o2], r2, a2, s.O.Insert).then(function() {
            return t2.logger.info(c, s.I.InsertMessageToLocalDB, n2), { message: e2 };
          });
        }, d.prototype.onPushMessage = function(e2, t2) {
          t2 && (this.dbConv.sendMsgCount = t2), t2 = this.transform2Message(e2, false), e2 = this.dbConv.state, this.dbConv.state = s.p.Normal, this.saveMessageList([t2], t2.conversationSeq, e2, s.O.Push), this.emitReceiveMessage([t2], s.u.SDKPush, "push");
        }, d.prototype.onPushMsgDelete = function(e2, t2) {
          var r2 = this, n2 = this.dbConv.readMsgSeq || 0;
          this.dbMgr.deleteMessageListFromRemote(this.convID, this.convType, e2, n2, function(n3, o2, i2) {
            0 < n3.length && (n3 = { conversationID: r2.convID, conversationType: r2.convType, isDeleteConversationAllMessage: false, messageList: n3 }, r2.eventBus.emit(s.t.MsgDeleted, n3)), r2.afterDeleteLocalMessages(e2, o2, false, t2, i2);
          });
        }, d.prototype.onPushAllMsgDelete = function(e2, t2) {
          function r2(r3) {
            var i3 = { conversationID: n2.convID, conversationType: n2.convType, isDeleteConversationAllMessage: true, messageList: [] }, c3 = (i3 = (n2.eventBus.emit(s.t.MsgDeleted, i3), [0, n2.dbConv.unreadMessageCount, 0]), false);
            n2.dbConv.deletedMsgCount = r3, (l2 = n2.dbConv.lastMessage) && !l2.isUserInserted && l2.sentStatus == s.P.Success && l2.conversationSeq == e2 && (c3 = true, i3[0] = l2.conversationSeq, n2.dbConv.lastMessage = void 0);
            var l2 = Math.max(a2 - o2 - u2 - r3, 0);
            (i3[2] = l2) != n2.dbConv.unreadMessageCount && (c3 = true, n2.dbConv.unreadMessageCount = l2, n2.emitUnreadMessageCount(t2)), c3 && n2.emitConversationChanged(s.n.Updated, t2), n2.dbMgr.addConversationList([n2.dbConv], t2 + i3.join());
          }
          var n2 = this, o2 = Math.max(e2, this.dbConv.readMsgSeq || 0), i2 = (this.dbConv.readMsgSeq = o2, this.dbConv.deletedMsgMaxSeq = Math.max(e2, this.dbConv.deletedMsgMaxSeq || 0), []), a2 = (this.dbConv.deletedMsgSeqs && this.dbConv.deletedMsgSeqs.length && (this.dbConv.deletedMsgSeqs = this.dbConv.deletedMsgSeqs.filter(function(t3) {
            return o2 < t3 && i2.push(t3), e2 < t3;
          })), this.dbConv.msgSeq || 0), u2 = this.dbConv.sendMsgCount || 0, c2 = 0 < i2.length;
          c2 || r2(0), this.dbMgr.deleteAllMessageFromRemote(this.convID, this.convType, e2, i2, c2 ? r2 : void 0);
        }, d.prototype.insertDeletedMsgSeqs = function(e2, t2) {
          e2.sort(function(e3, t3) {
            return e3 - t3;
          });
          for (var r2 = [], n2 = 0; n2 < e2.length - 1; n2++) {
            var o2 = e2[n2 + 1] - e2[n2];
            if (1 < o2)
              for (var s2 = 1; s2 < o2; s2++)
                r2.push(e2[n2] + s2);
          }
          r2.length && (t2 && (t2.delSeqs = r2.join()), (t2 = this.dbConv.deletedMsgSeqs) && t2.length && r2.push.apply(r2, u([], a(t2), false)), this.dbConv.deletedMsgSeqs = Array.from(new Set(r2)));
        }, d.prototype.deleteLocalMessages = function(e2, t2) {
          var r2 = this, n2 = this.dbConv.readMsgSeq || 0, o2 = [], i2 = 0;
          return e2.forEach(function(e3) {
            e3.isUserInserted || e3.isBroadcastMessage || e3.sentStatus != s.P.Success || (o2.push(e3.conversationSeq), e3.direction === s.K.Receive && e3.conversationSeq > n2 && i2++);
          }), this.dbMgr.deleteMessageList(this.convID, this.convType, e2, true).then(function(e3) {
            return r2.afterDeleteLocalMessages(o2, i2, true, "deleteMsgs", e3), r2.logger.info(c, s.I.DeleteMessages, t2), o2;
          });
        }, d.prototype.afterDeleteLocalMessages = function(e2, t2, r2, n2, o2) {
          var i2, a2 = false, u2 = (e2 = (this.dbConv.deletedMsgSeqs = e2.concat(this.dbConv.deletedMsgSeqs || []), this.dbConv.lastMessage ? this.dbConv.lastMessage.messageID : ""), o2 ? o2.messageID : "");
          o2 && u2 != e2 && (this.dbConv.orderKey = o2.timestamp), e2 != u2 && (a2 = true), this.dbConv.lastMessage = o2, o2 = [e2, u2, 0, this.dbConv.unreadMessageCount, t2];
          0 < t2 && (t2 += this.dbConv.deletedMsgCount || 0, this.dbConv.deletedMsgCount = t2, e2 = this.dbConv.readMsgSeq || 0, u2 = this.dbConv.msgSeq || 0, i2 = this.dbConv.sendMsgCount || 0, e2 = Math.max(u2 - e2 - i2 - t2, 0), o2[2] = e2, r2 && 0 == e2 && (this.dbConv.readMsgSeq = u2, this.dbConv.sendMsgCount = 0, this.dbConv.deletedMsgCount = 0, this.updateServerReadMsgSeq(u2)), this.dbConv.unreadMessageCount != e2 && (a2 = true, this.dbConv.unreadMessageCount = e2, this.emitUnreadMessageCount(n2))), a2 && this.emitConversationChanged(s.n.Updated, n2), this.dbMgr.addConversationList([this.dbConv], n2 + o2.join());
        }, d.prototype.deleteLocalAllMessage = function(e2) {
          this.dbMgr.deleteAllMessage(this.convID, this.convType);
          var t2 = this.dbConv.msgSeq || 0, r2 = (this.dbConv.sendMsgCount = 0, this.dbConv.deletedMsgCount = 0, this.dbConv.unreadMessageCount = 0, this.dbConv.readMsgSeq = t2, this.dbConv.deletedMsgMaxSeq = t2, this.dbConv.deletedMsgSeqs = [], this.dbConv.lastMessage = void 0, "deleteAllMsg");
          return this.emitConversationChanged(s.n.Updated, r2), this.emitUnreadMessageCount(r2), this.updateServerReadMsgSeq(t2), this.dbMgr.addConversationList([this.dbConv], r2), this.logger.info(c, s.I.DeleteAllMessage, e2), Promise.resolve({ conversationID: this.convID, conversationType: this.convType });
        }, d.prototype.updateServerReadMsgSeq = function(e2) {
          this.dbConv.state || (e2 = { conv_id: this.convID, conv_type: this.convType, read_seq: e2 }, this.connMgr.sendRequest(s.c.usermail_update_read_seq, e2, s.i.SDK));
        }, d.prototype.fetchServerPageMessage = function(e2, t2, r2, n2, o2, i2) {
          if (i2 = this.getFetchMessageReqBody(e2, r2, n2 ? 1 : 0, i2 || 100), this.convType == s.q.Room && !i2)
            return Promise.resolve({ nextSeq: 0, list: [] });
          i2.degree = t2, i2.how = r2;
          var a2 = this.convTypeMap.fetchMsgList, u2 = r2 == s.u.Biz ? s.i.API : s.i.SDK;
          return 1 == t2 && o2 && this.dataReport.beginNetworkRequest(a2.cmd, o2, u2, i2), this.connMgr.sendRequest(a2, i2, u2).then(function(t3) {
            if (t3.code)
              return t3.list = [], t3;
            var o3 = t3.max_conv_msg_seq, i3 = t3.next_conv_msg_seq, a3 = { fetch_end: t3.fetch_end, next_seq: i3, maxSeq: o3, nextSeq: i3, list: t3.msgs };
            return (r2 == s.u.SDKLogin || t3.fetch_end || !n2 && (o3 ? o3 <= e2 || o3 <= i3 : i3 <= e2)) && (a3.nextSeq = 0), a3;
          });
        }, d.prototype.saveLocalMessage = function(e2, t2, r2) {
          var n2 = this.dbConv.msgSeq || 0, o2 = (e2.messageID || (e2.messageID = e2.localMessageID), e2.sentStatus = t2, e2.timestamp = Date.now() + this.settings.serverOffsetTime, e2.conversationSeq = n2, e2.orderKey = (this.dbConv.maxOrderKey || 0) + 1, i({}, e2)), a2 = t2 == s.P.Sending ? s.O.Sending : s.O.Sended;
          return this.saveMessageList([o2], n2, this.dbConv.state, a2), t2 != s.P.Sending && this.emitMessageSentStatusChanged(e2, r2), e2.conversationSeq;
        }, d.prototype.saveMessageList = function(e2, t2, r2, n2) {
          if (0 == e2.length)
            return Promise.resolve();
          e2.sort(function(e3, t3) {
            return e3.orderKey - t3.orderKey;
          });
          var o2, i2, a2 = { maxSeq: this.dbConv.maxSeq || 0, msgSeq: this.dbConv.msgSeq || 0, maxOrderKey: this.dbConv.maxOrderKey || 0, lastMessage: this.dbConv.lastMessage || { messageID: "" } }, u2 = a2.lastMessage.orderKey || 0, c2 = e2[e2.length - 1], l2 = (this.dbConv.maxSeq = Math.max(a2.maxSeq, t2), this.dbConv.maxOrderKey = Math.max(a2.maxOrderKey, c2.orderKey), t2 = Math.max(a2.msgSeq, t2), this.dbConv.msgSeq = t2, "saveMsgs_" + n2), d2 = (this.convType == s.q.Room || n2 != s.O.Fetch && n2 != s.O.Push || (i2 = this.dbConv.readMsgSeq || 0, d2 = this.dbConv.sendMsgCount || 0, o2 = this.dbConv.deletedMsgCount || 0, n2 != s.O.Push || a2.msgSeq || (this.dbConv.readMsgSeq = i2 = t2 - 1), (t2 = Math.max(t2 - i2 - d2 - o2, 0)) != this.dbConv.unreadMessageCount && (this.dbConv.unreadMessageCount = t2, this.emitUnreadMessageCount(l2))), this.convType != s.q.Room && a2.lastMessage.messageID != c2.messageID && (a2.lastMessage.sentStatus == s.P.Failed || c2.orderKey >= u2 || n2 == s.O.Push) && (this.dbConv.orderKey = c2.timestamp, this.dbConv.lastMessage = c2, n2 != s.O.Sending && (i2 = n2 == s.O.Sended || a2.maxOrderKey && r2 != s.p.Delete ? this.dbConv.state == s.p.Disable ? s.n.Disabled : s.n.Updated : s.n.Added, this.emitConversationChanged(i2, l2))), [a2.msgSeq, a2.maxSeq, a2.maxOrderKey, u2, c2.orderKey].join());
          return this.dbMgr.addConversationList([this.dbConv], l2 + "_" + d2), this.dbMgr.addMessageList(this.convID, this.convType, e2, n2 == s.O.Fetch);
        }, d.prototype.transform2Message = function(e2, t2) {
          var r2 = e2.msg_info, n2 = (e2 = e2.msg_svr_info, r2.msg_type), i2 = e2.sender_user_id;
          return (n2 = { type: 200 <= n2 && n2 <= 400 ? s.R.Custom : n2, localMessageID: "", messageID: e2.msg_id, timestamp: e2.msg_time, extendedData: r2.payload && n2 != s.R.Revoke ? Object(o.f)(r2.payload) : void 0, conversationID: this.convID, conversationType: this.convType, senderUserID: i2, sentStatus: s.P.Success, direction: i2 === this.engineConfig.user.userID ? s.K.Send : s.K.Receive, conversationSeq: e2.conv_msg_seq, orderKey: 0, isUserInserted: false, receiptStatus: s.M.None, clientSeq: r2.msg_client_info ? r2.msg_client_info.client_msg_seq : 0, clientSid: r2.msg_client_info ? r2.msg_client_info.conv_sid : "" }).localMessageID = n2.clientSid + n2.clientSeq, this.protobuf.decodeMsgBody(n2, r2.msg, e2.version, e2.is_server), n2.type == s.R.Custom && (n2.subType = r2.sub_msg_type || 0, n2.searchedContent = r2.searched_content), n2.type != s.R.Revoke && r2.msg_status && (n2.receiptStatus = Object(o.r)(r2.msg_status).receipt, t2 && this.dbMgr.checkMessageStatus(n2)), n2.reactions = this.convMgr.handleReactionList(n2, e2.reactions), this.calculateMessageOrderKey(n2, true), n2;
        }, d.prototype.withSendMessageErrorCode = function(e2) {
          return e2 = Object(o.s)(s.s.MessageModuleSendMessageFailed, e2.message, e2.code), this.convType == s.q.Group && -1 == this.auditErrorCodes.indexOf(e2.code) && (e2.code = 6000203), e2;
        }, d.prototype.calculateMessageOrderKey = function(e2, t2) {
          if (e2.orderKey)
            return e2.orderKey;
          var r2 = s.l.MESSAGE_SEQ_MULTIPLIER, n2 = e2.clientSeq, o2 = e2.clientSid;
          if (!n2 || !o2)
            return e2.orderKey = e2.conversationSeq * r2, e2.orderKey;
          var i2 = this.msgCaches[e2.senderUserID];
          if (!i2)
            return e2.orderKey = e2.conversationSeq * r2, t2 && (this.msgCaches[e2.senderUserID] = i2 = [e2]), e2.orderKey;
          var a2 = i2.find(function(t3) {
            return t3.messageID == e2.messageID;
          });
          if (a2 && a2.orderKey)
            return e2.orderKey = a2.orderKey, a2.orderKey;
          var u2 = 0, c2 = 0, l2 = 0, d2 = 0, p = (i2.forEach(function(e3) {
            var t3 = e3.clientSeq;
            e3.clientSid == o2 && t3 && (n2 < t3 && (!c2 || t3 < c2) ? (c2 = t3, d2 = e3.conversationSeq * r2) : t3 < n2 && (!u2 || u2 < t3) && (u2 = t3, l2 = e3.conversationSeq * r2));
          }), e2.conversationSeq * r2);
          return u2 && c2 ? (p <= l2 || d2 <= p) && (p = l2 + Math.floor(Math.random() * (d2 - l2 + 1))) : p < l2 ? p = l2 + n2 - u2 : c2 && d2 < p && (p = d2 + n2 - c2), e2.orderKey = p, !a2 && t2 && i2.push(e2), 100 < i2.length && (i2.sort(function(e3, t3) {
            return e3.orderKey - t3.orderKey;
          }), i2.splice(0, 90)), e2.orderKey;
        }, d.prototype.mergeServerMessageList = function(e2, t2, r2) {
          var n2, o2, i2, a2, u2, l2, d2, p, h, g, f = this;
          this.isFetchMessageWhenLogin(e2) && (n2 = Math.max(this.dbConv.maxSeq || 0, this.dbConv.deletedMsgMaxSeq || 0), r2 = r2 || this.dbConv.msgSeq || 0, e2 == s.u.SDKHb && r2 <= n2 || (o2 = /* @__PURE__ */ new Map(), i2 = ++this.mergeMsgListSeq + this.convType + this.convID, l2 = 1, d2 = u2 = a2 = 0, p = { time: /* @__PURE__ */ new Date(), convID: this.convID, how: e2, action: t2, dbSeq: n2, msgSeq: r2, emitSeq: 0, statusMap: { degree: {}, flag: {} } }, h = function(r3) {
            var g2, m, _, v, b, y;
            f.dbMgr && (g2 = f.dbConv.deletedMsgSeqs || [], m = [], d2 += r3.list.length, v = _ = 0, r3.list.forEach(function(e3, t3) {
              var s2 = e3.msg_svr_info.msg_id, i3 = e3.msg_svr_info.conv_msg_seq;
              m.push(i3), -1 == g2.indexOf(i3) && n2 < i3 && !o2.has(s2) && (u2 < i3 && (u2 = i3), (!a2 || i3 < a2) && (a2 = i3), o2.set(s2, f.transform2Message(e3, true))), 0 == t3 ? _ = i3 : t3 == r3.list.length - 1 && (v = i3), 31 == e3.msg_info.msg_type || null != (s2 = e3.msg_info.msg) && s2.length || (p.statusMap.flag[i3] = e3.msg_info.msg);
            }), p.statusMap.degree[l2] = a2 + "," + u2 + "," + _ + "," + v, r3.nextSeq ? f.fetchServerPageMessage(r3.nextSeq, ++l2, e2, false).then(h) : (r3.degree = l2, r3.svrCount = d2, r3.dbSeq = n2, b = Array.from(o2.values()), (y = f.dbConv.state) != s.p.Delete && b.length && (f.dbConv.state = s.p.Normal), f.insertDeletedMsgSeqs(m, p), f.saveMessageList(b, u2, y, s.O.Fetch), f.emitReceiveMessage(b, e2, t2), p.dataReport = f.dataReport.endNetworkRequest(f.convTypeMap.fetchMsgList, i2, r3), f.logger.info(c, "mergeSvrMsgs", p)));
          }, e2 == s.u.SDKLogin ? n2 < r2 ? this.fetchServerPageMessage(r2 + 1, l2, e2, true, i2, r2 + 1 - n2).then(h) : this.dbConv.state == s.p.Delete && this.convType == s.q.Peer && (-1 == (g = 0 < r2 ? r2 + 1 : -1) || n2 < r2) && this.fetchServerPageMessage(g, l2, e2, true, i2, 0 < r2 ? r2 + 1 - n2 : 0).then(h) : this.fetchServerPageMessage(n2, l2, e2, false, i2).then(h)));
        }, d.prototype.fetchMsgListFromCache = function(e2) {
          var t2 = this;
          return new Promise(function(r2) {
            e2.sort(function(e3, t3) {
              return e3 - t3;
            });
            var n2 = /* @__PURE__ */ new Map();
            if (Object.values(t2.msgCaches).forEach(function(t3) {
              t3 && t3.length && t3.forEach(function(t4) {
                var r3 = t4.conversationSeq;
                -1 != e2.indexOf(r3) && n2.set(r3, t4);
              });
            }), n2.size == e2.length)
              return r2(n2);
            t2.dbMgr.getMessageListBySeqs(t2.convID, t2.convType, e2).then(r2);
          });
        }, d.prototype.updateMsgCacheList = function(e2) {
          var t2 = this;
          e2.forEach(function(e3) {
            var r2, n2 = t2.msgCaches[e3.senderUserID];
            n2 && n2.length && -1 != (r2 = n2.findIndex(function(t3) {
              return t3.messageID == e3.messageID;
            })) && (n2[r2] = e3);
          });
        }, d.prototype.fetchFileProcess = function(e2, t2, r2) {
          var n2 = this, i2 = { md5: e2.fileUID, file_type: e2.type - 10, file_name: e2.fileName };
          return this.connMgr.sendRequest(s.c.file_process, i2).then(function(i3) {
            if (i3.code)
              throw Object(o.s)(s.s.MessageModuleSendMessageFailed, i3.message, i3.code);
            return e2.message = n2.encodeMediaMsgBody(i3.download_url, e2), e2.fileLocalPath = "", n2.sendMessage(e2, t2, void 0, r2);
          });
        }, d.prototype.emitUnreadMessageCount = function(e2) {
          this.convType != s.q.Room && this.eventBus.exec(s.t.IUnreadMsgCount, e2);
        }, d.prototype.emitConversationChanged = function(e2, t2, r2) {
          this.convType != s.q.Room && this.dbConv.state != s.p.Delete && (e2 = { event: e2, conversation: { conversationID: this.dbConv.conversationID, conversationName: this.dbConv.conversationName, conversationAvatarUrl: this.dbConv.conversationAvatarUrl, type: this.dbConv.type, unreadMessageCount: this.dbConv.unreadMessageCount, notificationStatus: this.dbConv.notificationStatus, orderKey: r2 ? r2.timestamp : this.dbConv.orderKey, isPinned: !!this.dbConv.isPinned, lastMessage: r2 || this.dbConv.lastMessage } }, this.eventBus.emit(s.t.ConvChanged, { infoList: [e2] }, t2));
        }, d.prototype.emitSendingMessage = function(e2, t2, r2) {
          if (e2.clientSeq = ++this.clientMsgSeq, e2.clientSid = "" + this.convSid, e2.localMessageID = e2.clientSid + e2.clientSeq, e2.conversationID = this.convID, e2.conversationType = this.convType, e2.senderUserID = this.engineConfig.user.userID, e2.direction = s.K.Send, e2.sentStatus = s.P.Sending, e2.timestamp = Date.now() + this.settings.serverOffsetTime, e2.isUserInserted = false, e2.receiptStatus = t2.hasReceipt ? s.M.Processing : s.M.None, e2.isBroadcastMessage && (e2.isBroadcastMessage = false), r2 && "function" == typeof r2.onMessageAttached)
            try {
              r2.onMessageAttached(e2);
            } catch (e3) {
            }
          this.dbUser && (this.dbConv.conversationName = this.dbUser.userName, this.dbConv.conversationAvatarUrl = this.dbUser.userAvatarUrl), t2 = s.n.Added, this.dbConv.state == s.p.Delete ? this.dbConv.state = s.p.Normal : this.dbConv.maxOrderKey && (t2 = this.dbConv.state == s.p.Disable ? s.n.Disabled : s.n.Updated), this.emitConversationChanged(t2, "sendingMessage_" + this.dbConv.maxOrderKey, e2);
        }, d.prototype.emitReceiveMessage = function(e2, t2, r2) {
          e2.length && (e2.sort(function(e3, t3) {
            return e3.orderKey - t3.orderKey;
          }), this.eventBus.emit(this.convTypeMap.receiveMessage, { messageList: e2, fromConversationID: this.convID }, r2));
        }, d.prototype.getMediaMessageDuration = function(e2) {
          var t2 = 0;
          return e2.type == s.R.Audio ? t2 = +e2.audioDuration || 0 : e2.type == s.R.Video && (t2 = +e2.videoDuration || 0), t2;
        }, d.prototype.encodeMediaMsgBody = function(e2, t2, r2) {
          e2 = { version: "1", file_type: t2.type - 10, file_download_url: e2 };
          var n2, o2 = (r2 || (e2.file_uid = t2.fileUID || ""), e2.file_name = t2.fileName || "", e2.file_size = String(+t2.fileSize || 0), t2.type);
          return o2 == s.R.Image && r2 ? (r2 = t2.thumbnailDownloadUrl, n2 = t2.largeImageDownloadUrl, r2 && (e2.thumbnail_download_url = r2), n2 && (e2.large_image_download_url = n2)) : o2 == s.R.Audio ? (r2 = t2.audioDuration, e2.media_duration = String(r2 || 0)) : o2 == s.R.Video && (n2 = t2.videoDuration, r2 = t2.videoFirstFrameDownloadUrl, e2.media_duration = String(n2 || 0), r2 && (e2.video_first_frame_download_url = r2)), this.protobuf.encodeMediaMsgBody(o2, e2);
        }, d.prototype.emitMessageSentStatusChanged = function(e2, t2) {
          t2 = { status: e2.sentStatus, reason: t2, message: e2 }, this.eventBus.emit(s.t.MsgSentStatus, { infos: [t2] });
        }, d.prototype.queryMessageStatus = function(e2, t2) {
          var r2 = this, n2 = e2.map(function(e3) {
            return { conv_sid: e3.clientSid, client_msg_seq: e3.clientSeq };
          });
          n2 = i(i({}, this.getAssociatedReqBody()), { room_id: this.convID, client_infos: n2 });
          return this.connMgr.sendRequest(this.convTypeMap.msgStatusQuery, n2, s.i.SDK).then(function(n3) {
            var i2 = [];
            return n3.msgs = n3.msgs || [], n3.msgs.forEach(function(t3) {
              var n4, a2, u2, c2, l2, d2 = t3.msg_info, p = (t3 = t3.msg_svr_info, d2.msg_status), h = d2.msg_client_info;
              (d2 = (d2 = e2.find(function(e3) {
                return e3.clientSeq == h.client_msg_seq && e3.clientSid == h.conv_sid;
              })) ? JSON.parse(JSON.stringify(d2)) : null) && d2.sentStatus !== s.P.Success && (n4 = d2.type >= s.R.Image && d2.type <= s.R.Video && !!d2.fileUID, a2 = t3.conv_msg_seq, u2 = t3.msg_id, c2 = t3.msg_time, l2 = t3.msg_rsp, t3 = t3.version, d2.sentStatus = s.P.Success, d2.messageID = u2, d2.timestamp = c2, d2.conversationSeq = a2, p && d2.receiptStatus == s.M.Processing && (d2.receiptStatus = Object(o.r)(p).receipt), n4 && r2.protobuf.decodeMsgBody(d2, l2, t3, false), r2.calculateMessageOrderKey(d2, true), i2.push(d2));
            }), n3.fail_list = n3.fail_list || [], n3.fail_list.forEach(function(t3) {
              var r3, n4 = t3.client_info;
              t3 = t3.reason;
              (r3 = (r3 = e2.find(function(e3) {
                return e3.clientSeq == n4.client_msg_seq && e3.clientSid == n4.conv_sid;
              })) ? JSON.parse(JSON.stringify(r3)) : null) && 1 == t3 && (r3.sentStatus = s.P.Failed, i2.push(r3));
            }), 0 < i2.length && (t2 || r2.dbMgr.addMessageList(r2.convID, r2.convType, i2, true), r2.eventBus.emit(s.t.MsgSentStatus, { infos: i2.map(function(e3) {
              return { status: e3.sentStatus, message: e3 };
            }) })), [n3, i2[0]];
          });
        }, d.prototype.updateConvWhenSendedMessage = function(e2) {
          e2.peer_user_name && (this.dbConv.conversationName = Object(o.f)(e2.peer_user_name)), e2.peer_user_avatar && (this.dbConv.conversationAvatarUrl = Object(o.f)(e2.peer_user_avatar)), e2.send_count_after_read && (this.dbConv.sendMsgCount = e2.send_count_after_read);
        }, d.prototype.handleSendMessageFail = function(e2, t2, r2, n2, o2) {
          this.dbConv.state = t2.conv_disable && this.convType == s.q.Peer ? s.p.Disable : s.p.Normal;
          var i2 = 6000104 == t2.code ? s.P.Sending : s.P.Failed;
          n2.result = this.saveLocalMessage(e2, i2, t2.audit_info), e2 = this.withSendMessageErrorCode(t2);
          return o2 || (n2.error = e2, this.logger.warn(c, r2, n2)), e2;
        }, d.prototype.handleSendMessageSuccess = function(e2, t2, r2, n2, a2) {
          this.updateConvWhenSendedMessage(t2);
          var u2 = (h = t2.msg_svr_info).conv_msg_seq, l2 = h.msg_id, d2 = h.msg_time, p = h.msg_rsp, h = h.version;
          (d2 = (e2.sentStatus = s.P.Success, e2.messageID = l2, e2.timestamp = d2, e2.conversationSeq = u2, t2.msg_status || (null == (l2 = t2.msg_info) ? void 0 : l2.msg_status))) && e2.receiptStatus == s.M.Processing && (e2.receiptStatus = Object(o.r)(d2).receipt), l2 = null, this.convType == s.q.Group && t2.receipt_seq && (l2 = { seq: t2.receipt_seq, count: t2.unread_count || 0 }), a2 && (this.dbMgr.deleteMessageList(this.convID, this.convType, [e2]), this.protobuf.decodeMsgBody(e2, p, h, false)), d2 = i({}, e2), e2.orderKey = this.calculateMessageOrderKey(d2, true), a2 = this.dbConv.state;
          return this.dbConv.state = s.p.Normal, this.saveMessageList([d2], u2, a2, s.O.Sended), this.emitMessageSentStatusChanged(e2, t2.audit_info), n2.result = u2, this.logger.info(c, r2, n2), { message: e2, receiptInfo: l2 };
        }, d);
        function d(e2, t2, r2, o2, s2, i2) {
          this.logger = n.a.getInstance().logger, this.dataReport = n.a.getInstance().dataReport, this.protobuf = n.a.getInstance().protobuf, this.settings = n.a.getInstance().settings, this.lastSendTime = 0, this.convSid = Date.now(), this.clientMsgSeq = 0, this.dbConv = {}, this.mergeMsgListSeq = 0, this.msgCaches = {}, this.auditErrorCodes = [6000104, 6000221, , 6000222], this.dbConv.conversationID = e2, this.convID = e2, this.engineConfig = t2, this.eventBus = r2, this.dbMgr = o2, this.connMgr = s2, this.convMgr = i2;
        }
      }, function(e, t, r) {
        e.exports = function(e2) {
          for (var t2 = e2, r2 = t2.lib.BlockCipher, n = t2.algo, o = [], s = [], i = [], a = [], u = [], c = [], l = [], d = [], p = [], h = [], g = [], f = 0; f < 256; f++)
            g[f] = f < 128 ? f << 1 : f << 1 ^ 283;
          var m = 0, _ = 0;
          for (f = 0; f < 256; f++) {
            var v = _ ^ _ << 1 ^ _ << 2 ^ _ << 3 ^ _ << 4;
            v = v >>> 8 ^ 255 & v ^ 99, o[m] = v, s[v] = m;
            var b = g[m], y = g[b], M = g[y], I = 257 * g[v] ^ 16843008 * v;
            i[m] = I << 24 | I >>> 8, a[m] = I << 16 | I >>> 16, u[m] = I << 8 | I >>> 24, c[m] = I;
            I = 16843009 * M ^ 65537 * y ^ 257 * b ^ 16843008 * m;
            l[v] = I << 24 | I >>> 8, d[v] = I << 16 | I >>> 16, p[v] = I << 8 | I >>> 24, h[v] = I, m ? (m = b ^ g[g[g[M ^ b]]], _ ^= g[g[_]]) : m = _ = 1;
          }
          var k = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54], w = n.AES = r2.extend({ _doReset: function() {
            if (!this._nRounds || this._keyPriorReset !== this._key) {
              for (var e3 = this._keyPriorReset = this._key, t3 = e3.words, r3 = e3.sigBytes / 4, n2 = 4 * ((this._nRounds = r3 + 6) + 1), s2 = this._keySchedule = [], i2 = 0; i2 < n2; i2++)
                i2 < r3 ? s2[i2] = t3[i2] : (c2 = s2[i2 - 1], i2 % r3 ? r3 > 6 && i2 % r3 == 4 && (c2 = o[c2 >>> 24] << 24 | o[c2 >>> 16 & 255] << 16 | o[c2 >>> 8 & 255] << 8 | o[255 & c2]) : (c2 = o[(c2 = c2 << 8 | c2 >>> 24) >>> 24] << 24 | o[c2 >>> 16 & 255] << 16 | o[c2 >>> 8 & 255] << 8 | o[255 & c2], c2 ^= k[i2 / r3 | 0] << 24), s2[i2] = s2[i2 - r3] ^ c2);
              for (var a2 = this._invKeySchedule = [], u2 = 0; u2 < n2; u2++) {
                i2 = n2 - u2;
                if (u2 % 4)
                  var c2 = s2[i2];
                else
                  c2 = s2[i2 - 4];
                a2[u2] = u2 < 4 || i2 <= 4 ? c2 : l[o[c2 >>> 24]] ^ d[o[c2 >>> 16 & 255]] ^ p[o[c2 >>> 8 & 255]] ^ h[o[255 & c2]];
              }
            }
          }, encryptBlock: function(e3, t3) {
            this._doCryptBlock(e3, t3, this._keySchedule, i, a, u, c, o);
          }, decryptBlock: function(e3, t3) {
            var r3 = e3[t3 + 1];
            e3[t3 + 1] = e3[t3 + 3], e3[t3 + 3] = r3, this._doCryptBlock(e3, t3, this._invKeySchedule, l, d, p, h, s);
            r3 = e3[t3 + 1];
            e3[t3 + 1] = e3[t3 + 3], e3[t3 + 3] = r3;
          }, _doCryptBlock: function(e3, t3, r3, n2, o2, s2, i2, a2) {
            for (var u2 = this._nRounds, c2 = e3[t3] ^ r3[0], l2 = e3[t3 + 1] ^ r3[1], d2 = e3[t3 + 2] ^ r3[2], p2 = e3[t3 + 3] ^ r3[3], h2 = 4, g2 = 1; g2 < u2; g2++) {
              var f2 = n2[c2 >>> 24] ^ o2[l2 >>> 16 & 255] ^ s2[d2 >>> 8 & 255] ^ i2[255 & p2] ^ r3[h2++], m2 = n2[l2 >>> 24] ^ o2[d2 >>> 16 & 255] ^ s2[p2 >>> 8 & 255] ^ i2[255 & c2] ^ r3[h2++], _2 = n2[d2 >>> 24] ^ o2[p2 >>> 16 & 255] ^ s2[c2 >>> 8 & 255] ^ i2[255 & l2] ^ r3[h2++], v2 = n2[p2 >>> 24] ^ o2[c2 >>> 16 & 255] ^ s2[l2 >>> 8 & 255] ^ i2[255 & d2] ^ r3[h2++];
              c2 = f2, l2 = m2, d2 = _2, p2 = v2;
            }
            f2 = (a2[c2 >>> 24] << 24 | a2[l2 >>> 16 & 255] << 16 | a2[d2 >>> 8 & 255] << 8 | a2[255 & p2]) ^ r3[h2++], m2 = (a2[l2 >>> 24] << 24 | a2[d2 >>> 16 & 255] << 16 | a2[p2 >>> 8 & 255] << 8 | a2[255 & c2]) ^ r3[h2++], _2 = (a2[d2 >>> 24] << 24 | a2[p2 >>> 16 & 255] << 16 | a2[c2 >>> 8 & 255] << 8 | a2[255 & l2]) ^ r3[h2++], v2 = (a2[p2 >>> 24] << 24 | a2[c2 >>> 16 & 255] << 16 | a2[l2 >>> 8 & 255] << 8 | a2[255 & d2]) ^ r3[h2++];
            e3[t3] = f2, e3[t3 + 1] = m2, e3[t3 + 2] = _2, e3[t3 + 3] = v2;
          }, keySize: 8 });
          return t2.AES = r2._createHelper(w), e2.AES;
        }(r(5), (r(93), r(11), r(23), r(96)));
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return o;
        });
        var n = { 0: "Success.", 1: "Failed.", 6000001: "The incoming parameter is invalid.", 6000002: "The SDK is not initialized.", 6000003: "Invalid AppID.", 6000004: "Trigger SDK internal frequency limit.", 6000005: "Trigger background service frequency limit.", 6000006: "Switch server internal error.", 6000007: "ZIM service internal error.", 6000010: "Failed to upload log.", 6000011: "User is not exist.", 6000012: "Trigger frequency limit when querying user information.", 6000013: "Unsupported request.", 6000014: "The ZIM service is being activated for you, please try again in five minutes.", 6000015: "Exceed DAU limit.", 6000016: "Exceed MAU limit.", 6000101: "Login failed.", 6000102: "Login failed due to background service.", 6000103: "Token is invalid.", 6000104: "Network error.", 6000106: "Token expired.", 6000107: "Token version number is wrong.", 6000108: "Token duration is too short.", 6000109: "Token duration is too long.", 6000111: "User has already logged in.", 6000121: "User is not logged in.", 6000201: "Internal error sending message.", 6000202: "Error sending message background service.", 6000203: "Message sending failed.", 6000204: "The message target does not exist.", 6000211: "File is not exist.", 6000212: "File server internal error.", 6000213: "File type is not supported.", 6000214: "File size is invalid.", 6000215: "File duration is invalid.", 6000221: "Failed to pass security audit.", 6000222: "Security audit failed.", 6000230: "Failed to pass custom security audit.", 6000270: "Call invitation failed.", 6000271: "Failed to cancel call invitation.", 6000272: "Failed to initiate call invitation service.", 6000273: "The non-initiator cancel the call invitation.", 6000274: "Uninvited users.", 6000275: "CallID already exists.", 6000276: "CallID does not exist.", 6000277: "Receipt error.", 6000278: "Revoke time is exceed.", 6000279: "The message has been revoked.", 6000280: "The message reaction type exist.", 6000281: "The user invited by the call does not exist.", 6000282: "The number of message receipts exceeds the limit.", 6000283: "User is already in call.", 6000301: "Internal error in room.", 6000302: "Error in room service.", 6000303: "Failed to create room.", 6000304: "Failed to join room.", 6000306: "Failed to leave the room.", 6000310: "Failed to query room members.", 6000311: "Failed to query room members.", 6000321: "The user is not in the room.", 6000322: "Room does not exist.", 6000323: "Room already exist.", 6000324: "The maximum number of rooms can exist at the same time.", 6000325: "The number of rooms a user can join at the same time has reached the upper limit.", 6000330: "Internal error in room attributes.", 6000331: "Failed to operate room attributes.", 6000333: "Failed to query room attributes.", 6000334: "The number of room attributes exceeds limit.", 6000335: "The key length of room attribute exceeds limit.", 6000336: "The value length of room attribute exceeds limit.", 6000337: "The total value length of the room attributes exceeds limit.", 6000350: "Internal error in room member attributes.", 6000351: "The total length of room member attributes exceeds limit.", 6000352: "The key length of room member attribute exceeds limit.", 6000353: "The value length of room member attributes exceeds limit.", 6000357: "The member number of room member attributes exceeds limit.", 6000501: "Internal error in group.", 6000502: "Error in group service.", 6000503: "Failed to create group.", 6000504: "Failed to dismiss group.", 6000505: "Failed to join group.", 6000506: "Failed to leave group.", 6000507: "Failed to kick group member.", 6000508: "Failed to invite user to group.", 6000509: "Failed to transfer group owner.", 6000510: "Failed to update group information.", 6000511: "Failed to query group information.", 6000512: "Failed to operate group attributes.", 6000513: "Failed to query group attributes.", 6000514: "Failed to update group member information.", 6000515: "Failed to query group member information.", 6000516: "Failed to query group list.", 6000517: "Failed to query group member list.", 6000521: "User is not in group.", 6000522: "User is already in the group.", 6000523: "Group does not exist.", 6000524: "Group already exists.", 6000525: "The group members have reached the limit.", 6000526: "Group attribute does not exist.", 6000527: "Cannot create group after dismissed.", 6000531: "The number of group attributes exceeds limit.", 6000532: "The key length of group attribute exceeds limit.", 6000533: "The value length of group attribute exceeds limit.", 6000534: "The total value length of the group attributes exceeds limit.", 6000541: "There is no operation permission for group-related interfaces.", 6000601: "Internal error in conversation.", 6000602: "Error in conversation service.", 6000603: "Conversation does not exist.", 6000604: "The number of pinned conversations has reached the upper limit." }, o = function(e2, t2, r2) {
          return t2 = r2 && 6000104 != r2 ? (e2 = function(e3) {
            switch (e3) {
              case 50012:
                return 6000121;
              case 100002:
              case 100003:
              case 100004:
              case 50013:
              case 50014:
              case 104002:
                return 6000001;
              case 50008:
              case 103019:
              case 100017:
              case 103020:
              case 103034:
              case 103041:
              case 103042:
              case 103044:
              case 103016:
              case 103017:
              case 108050:
                return 6000005;
              case 102002:
                return 6000016;
              case 102003:
                return 6000015;
              case 100018:
                return 6000012;
              case 100021:
                return 6000013;
              case 50001:
              case 50002:
              case 50003:
              case 50004:
              case 50005:
              case 50007:
              case 50009:
              case 50101:
              case 50102:
              case 50105:
              case 50106:
              case 50107:
              case 50108:
              case 50110:
                return 6000006;
              case 50111:
                return 6000103;
              case 100001:
              case 102001:
              case 100005:
              case 100006:
              case 100007:
              case 100008:
              case 100009:
              case 100010:
              case 100011:
              case 101001:
              case 101002:
              case 101003:
              case 101004:
                return 6000007;
              case 105e3:
              case 105004:
              case 103033:
                return 6000011;
              case 103015:
              case 103001:
                return 6000321;
              case 103021:
                return 6000322;
              case 103032:
                return 6000323;
              case 103050:
                return 6000311;
              case 103018:
                return 6000324;
              case 103010:
                return 6000325;
              case 103022:
                return 6000334;
              case 103023:
                return 6000335;
              case 103024:
                return 6000336;
              case 103025:
                return 6000337;
              case 103039:
                return 6000352;
              case 103040:
                return 6000353;
              case 103038:
                return 6000351;
              case 103045:
                return 6000357;
              case 107003:
                return 6000271;
              case 107004:
                return 6000272;
              case 107005:
              case 61002:
              case 61003:
                return 6000276;
              case 107006:
              case 107007:
                return 6000272;
              case 107012:
                return 6000273;
              case 107014:
                return 6000274;
              case 107019:
                return 6000275;
              case 107026:
                return 6000281;
              case 111101:
                return 6000230;
              case 111003:
              case 111006:
              case 111007:
                return 6000221;
              case 111002:
              case 111004:
              case 111005:
                return 6000222;
              case 61004:
                return 6000272;
              case 109001:
                return 6000204;
              case 108054:
              case 106019:
                return 6000277;
              case 100039:
                return 6000282;
              case 107025:
                return 6000283;
              case 106022:
                return 6000604;
              case 100015:
              case 110002:
              case 110003:
              case 110005:
              case 110006:
              case 110007:
              case 110008:
              case 110009:
              case 110010:
              case 110011:
              case 110012:
              case 110013:
              case 110014:
              case 110015:
                return 6000212;
              case 110004:
                return 6000211;
              case 110016:
              case 110019:
              case 110021:
              case 110023:
                return 6000213;
              case 110017:
              case 110020:
              case 110022:
              case 110024:
                return 6000214;
              case 110018:
                return 6000215;
              case 108035:
              case 108051:
                return 6000521;
              case 108003:
                return 6000541;
              case 108040:
                return 6000531;
              case 108041:
                return 6000532;
              case 108042:
                return 6000533;
              case 108037:
                return 6000522;
              case 108038:
              case 108039:
                return 6000514;
              case 108043:
                return 6000524;
              case 108060:
                return 6000527;
              case 108044:
              case 106011:
                return 6000523;
              case 108046:
                return 6000526;
              case 108049:
                return 6000525;
              case 100012:
                return 6000278;
              case 100013:
                return 6000279;
              case 100022:
                return 6000278;
              case 100037:
                return 6000280;
              default:
                return 0;
            }
          }(r2) || e2, "code: " + r2 + ", message: " + (t2 || n[e2])) : t2 || n[e2], { code: e2 = 6000104 == r2 ? r2 : e2, message: t2 };
        };
      }, function(e, t, r) {
        e.exports = r(5).enc.Hex;
      }, function(e, t, r) {
        e.exports = r(5).enc.Utf8;
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return o;
        }), r.d(t, "b", function() {
          return d;
        });
        var n = r(20), o = (s.prototype.toString = function(e2) {
          if (this.s < 0)
            return "-" + this.negate().toString(e2);
          var t2;
          if (16 == e2)
            t2 = 4;
          else if (8 == e2)
            t2 = 3;
          else if (2 == e2)
            t2 = 1;
          else if (32 == e2)
            t2 = 5;
          else {
            if (4 != e2)
              return this.toRadix(e2);
            t2 = 2;
          }
          var r2, o2 = (1 << t2) - 1, s2 = false, i2 = "", a2 = this.t, u2 = this.DB - a2 * this.DB % t2;
          if (0 < a2--)
            for (u2 < this.DB && 0 < (r2 = this[a2] >> u2) && (s2 = true, i2 = Object(n.a)(r2)); 0 <= a2; )
              u2 < t2 ? (r2 = (this[a2] & (1 << u2) - 1) << t2 - u2, r2 |= this[--a2] >> (u2 += this.DB - t2)) : (r2 = this[a2] >> (u2 -= t2) & o2, u2 <= 0 && (u2 += this.DB, --a2)), (s2 = 0 < r2 || s2) && (i2 += Object(n.a)(r2));
          return s2 ? i2 : "0";
        }, s.prototype.negate = function() {
          var e2 = l();
          return s.ZERO.subTo(this, e2), e2;
        }, s.prototype.abs = function() {
          return this.s < 0 ? this.negate() : this;
        }, s.prototype.compareTo = function(e2) {
          var t2 = this.s - e2.s;
          if (0 != t2)
            return t2;
          var r2 = this.t;
          if (0 != (t2 = r2 - e2.t))
            return this.s < 0 ? -t2 : t2;
          for (; 0 <= --r2; )
            if (0 != (t2 = this[r2] - e2[r2]))
              return t2;
          return 0;
        }, s.prototype.bitLength = function() {
          return this.t <= 0 ? 0 : this.DB * (this.t - 1) + _(this[this.t - 1] ^ this.s & this.DM);
        }, s.prototype.mod = function(e2) {
          var t2 = l();
          return this.abs().divRemTo(e2, null, t2), this.s < 0 && 0 < t2.compareTo(s.ZERO) && e2.subTo(t2, t2), t2;
        }, s.prototype.modPowInt = function(e2, t2) {
          return t2 = new (e2 < 256 || t2.isEven() ? i : u)(t2), this.exp(e2, t2);
        }, s.prototype.intValue = function() {
          if (this.s < 0) {
            if (1 == this.t)
              return this[0] - this.DV;
            if (0 == this.t)
              return -1;
          } else {
            if (1 == this.t)
              return this[0];
            if (0 == this.t)
              return 0;
          }
          return (this[1] & (1 << 32 - this.DB) - 1) << this.DB | this[0];
        }, s.prototype.signum = function() {
          return this.s < 0 ? -1 : this.t <= 0 || 1 == this.t && this[0] <= 0 ? 0 : 1;
        }, s.prototype.copyTo = function(e2) {
          for (var t2 = this.t - 1; 0 <= t2; --t2)
            e2[t2] = this[t2];
          e2.t = this.t, e2.s = this.s;
        }, s.prototype.fromInt = function(e2) {
          this.t = 1, this.s = e2 < 0 ? -1 : 0, 0 < e2 ? this[0] = e2 : e2 < -1 ? this[0] = e2 + this.DV : this.t = 0;
        }, s.prototype.fromString = function(e2, t2) {
          var r2;
          if (16 == t2)
            r2 = 4;
          else if (8 == t2)
            r2 = 3;
          else if (256 == t2)
            r2 = 8;
          else if (2 == t2)
            r2 = 1;
          else if (32 == t2)
            r2 = 5;
          else {
            if (4 != t2)
              return void this.fromRadix(e2, t2);
            r2 = 2;
          }
          this.t = 0, this.s = 0;
          for (var n2 = e2.length, o2 = false, i2 = 0; 0 <= --n2; ) {
            var a2 = 8 == r2 ? 255 & +e2[n2] : f(e2, n2);
            a2 < 0 ? "-" == e2.charAt(n2) && (o2 = true) : (o2 = false, 0 == i2 ? this[this.t++] = a2 : i2 + r2 > this.DB ? (this[this.t - 1] |= (a2 & (1 << this.DB - i2) - 1) << i2, this[this.t++] = a2 >> this.DB - i2) : this[this.t - 1] |= a2 << i2, (i2 += r2) >= this.DB && (i2 -= this.DB));
          }
          8 == r2 && 0 != (128 & +e2[0]) && (this.s = -1, 0 < i2 && (this[this.t - 1] |= (1 << this.DB - i2) - 1 << i2)), this.clamp(), o2 && s.ZERO.subTo(this, this);
        }, s.prototype.clamp = function() {
          for (var e2 = this.s & this.DM; 0 < this.t && this[this.t - 1] == e2; )
            --this.t;
        }, s.prototype.dlShiftTo = function(e2, t2) {
          for (var r2 = this.t - 1; 0 <= r2; --r2)
            t2[r2 + e2] = this[r2];
          for (r2 = e2 - 1; 0 <= r2; --r2)
            t2[r2] = 0;
          t2.t = this.t + e2, t2.s = this.s;
        }, s.prototype.drShiftTo = function(e2, t2) {
          for (var r2 = e2; r2 < this.t; ++r2)
            t2[r2 - e2] = this[r2];
          t2.t = Math.max(this.t - e2, 0), t2.s = this.s;
        }, s.prototype.lShiftTo = function(e2, t2) {
          for (var r2 = e2 % this.DB, n2 = this.DB - r2, o2 = (1 << n2) - 1, s2 = Math.floor(e2 / this.DB), i2 = this.s << r2 & this.DM, a2 = this.t - 1; 0 <= a2; --a2)
            t2[a2 + s2 + 1] = this[a2] >> n2 | i2, i2 = (this[a2] & o2) << r2;
          for (a2 = s2 - 1; 0 <= a2; --a2)
            t2[a2] = 0;
          t2[s2] = i2, t2.t = this.t + s2 + 1, t2.s = this.s, t2.clamp();
        }, s.prototype.rShiftTo = function(e2, t2) {
          t2.s = this.s;
          var r2 = Math.floor(e2 / this.DB);
          if (r2 >= this.t)
            t2.t = 0;
          else {
            var n2 = e2 % this.DB, o2 = this.DB - n2, s2 = (1 << n2) - 1;
            t2[0] = this[r2] >> n2;
            for (var i2 = r2 + 1; i2 < this.t; ++i2)
              t2[i2 - r2 - 1] |= (this[i2] & s2) << o2, t2[i2 - r2] = this[i2] >> n2;
            0 < n2 && (t2[this.t - r2 - 1] |= (this.s & s2) << o2), t2.t = this.t - r2, t2.clamp();
          }
        }, s.prototype.subTo = function(e2, t2) {
          for (var r2 = 0, n2 = 0, o2 = Math.min(e2.t, this.t); r2 < o2; )
            n2 += this[r2] - e2[r2], t2[r2++] = n2 & this.DM, n2 >>= this.DB;
          if (e2.t < this.t) {
            for (n2 -= e2.s; r2 < this.t; )
              n2 += this[r2], t2[r2++] = n2 & this.DM, n2 >>= this.DB;
            n2 += this.s;
          } else {
            for (n2 += this.s; r2 < e2.t; )
              n2 -= e2[r2], t2[r2++] = n2 & this.DM, n2 >>= this.DB;
            n2 -= e2.s;
          }
          t2.s = n2 < 0 ? -1 : 0, n2 < -1 ? t2[r2++] = this.DV + n2 : 0 < n2 && (t2[r2++] = n2), t2.t = r2, t2.clamp();
        }, s.prototype.multiplyTo = function(e2, t2) {
          var r2 = this.abs(), n2 = e2.abs(), o2 = r2.t;
          for (t2.t = o2 + n2.t; 0 <= --o2; )
            t2[o2] = 0;
          for (o2 = 0; o2 < n2.t; ++o2)
            t2[o2 + r2.t] = r2.am(0, n2[o2], t2, o2, 0, r2.t);
          t2.s = 0, t2.clamp(), this.s != e2.s && s.ZERO.subTo(t2, t2);
        }, s.prototype.squareTo = function(e2) {
          for (var t2 = this.abs(), r2 = e2.t = 2 * t2.t; 0 <= --r2; )
            e2[r2] = 0;
          for (r2 = 0; r2 < t2.t - 1; ++r2) {
            var n2 = t2.am(r2, t2[r2], e2, 2 * r2, 0, 1);
            (e2[r2 + t2.t] += t2.am(r2 + 1, 2 * t2[r2], e2, 2 * r2 + 1, n2, t2.t - r2 - 1)) >= t2.DV && (e2[r2 + t2.t] -= t2.DV, e2[r2 + t2.t + 1] = 1);
          }
          0 < e2.t && (e2[e2.t - 1] += t2.am(r2, t2[r2], e2, 2 * r2, 0, 1)), e2.s = 0, e2.clamp();
        }, s.prototype.divRemTo = function(e2, t2, r2) {
          if (!((d2 = e2.abs()).t <= 0)) {
            var n2 = this.abs();
            if (n2.t < d2.t)
              return null != t2 && t2.fromInt(0), void (null != r2 && this.copyTo(r2));
            null == r2 && (r2 = l());
            var o2 = l(), i2 = this.s, a2 = (e2 = e2.s, this.DB - _(d2[d2.t - 1])), u2 = (0 < a2 ? (d2.lShiftTo(a2, o2), n2.lShiftTo(a2, r2)) : (d2.copyTo(o2), n2.copyTo(r2)), o2.t), c2 = o2[u2 - 1];
            if (0 != c2) {
              var d2 = c2 * (1 << this.F1) + (1 < u2 ? o2[u2 - 2] >> this.F2 : 0), p2 = this.FV / d2, h2 = (1 << this.F1) / d2, g2 = 1 << this.F2, f2 = r2.t, m2 = f2 - u2, v = null == t2 ? l() : t2;
              for (o2.dlShiftTo(m2, v), 0 <= r2.compareTo(v) && (r2[r2.t++] = 1, r2.subTo(v, r2)), s.ONE.dlShiftTo(u2, v), v.subTo(o2, o2); o2.t < u2; )
                o2[o2.t++] = 0;
              for (; 0 <= --m2; ) {
                var b = r2[--f2] == c2 ? this.DM : Math.floor(r2[f2] * p2 + (r2[f2 - 1] + g2) * h2);
                if ((r2[f2] += o2.am(0, b, r2, m2, 0, u2)) < b)
                  for (o2.dlShiftTo(m2, v), r2.subTo(v, r2); r2[f2] < --b; )
                    r2.subTo(v, r2);
              }
              null != t2 && (r2.drShiftTo(u2, t2), i2 != e2 && s.ZERO.subTo(t2, t2)), r2.t = u2, r2.clamp(), 0 < a2 && r2.rShiftTo(a2, r2), i2 < 0 && s.ZERO.subTo(r2, r2);
            }
          }
        }, s.prototype.invDigit = function() {
          if (this.t < 1)
            return 0;
          var e2 = this[0];
          if (0 == (1 & e2))
            return 0;
          var t2 = 3 & e2;
          return 0 < (t2 = (t2 = (t2 = (t2 = t2 * (2 - (15 & e2) * t2) & 15) * (2 - (255 & e2) * t2) & 255) * (2 - ((65535 & e2) * t2 & 65535)) & 65535) * (2 - e2 * t2 % this.DV) % this.DV) ? this.DV - t2 : -t2;
        }, s.prototype.isEven = function() {
          return 0 == (0 < this.t ? 1 & this[0] : this.s);
        }, s.prototype.exp = function(e2, t2) {
          if (4294967295 < e2 || e2 < 1)
            return s.ONE;
          var r2, n2 = l(), o2 = l(), i2 = t2.convert(this), a2 = _(e2) - 1;
          for (i2.copyTo(n2); 0 <= --a2; )
            t2.sqrTo(n2, o2), 0 < (e2 & 1 << a2) ? t2.mulTo(o2, i2, n2) : (r2 = n2, n2 = o2, o2 = r2);
          return t2.revert(n2);
        }, s.prototype.chunkSize = function(e2) {
          return Math.floor(Math.LN2 * this.DB / Math.log(e2));
        }, s.prototype.toRadix = function(e2) {
          if (null == e2 && (e2 = 10), 0 == this.signum() || e2 < 2 || 36 < e2)
            return "0";
          var t2 = this.chunkSize(e2), r2 = Math.pow(e2, t2), n2 = m(r2), o2 = l(), s2 = l(), i2 = "";
          for (this.divRemTo(n2, o2, s2); 0 < o2.signum(); )
            i2 = (r2 + s2.intValue()).toString(e2).substr(1) + i2, o2.divRemTo(n2, o2, s2);
          return s2.intValue().toString(e2) + i2;
        }, s.prototype.fromRadix = function(e2, t2) {
          this.fromInt(0);
          for (var r2 = this.chunkSize(t2 = null == t2 ? 10 : t2), n2 = Math.pow(t2, r2), o2 = false, i2 = 0, a2 = 0, u2 = 0; u2 < e2.length; ++u2) {
            var c2 = f(e2, u2);
            c2 < 0 ? "-" == e2.charAt(u2) && 0 == this.signum() && (o2 = true) : (a2 = t2 * a2 + c2, ++i2 >= r2 && (this.dMultiply(n2), this.dAddOffset(a2, 0), a2 = i2 = 0));
          }
          0 < i2 && (this.dMultiply(Math.pow(t2, i2)), this.dAddOffset(a2, 0)), o2 && s.ZERO.subTo(this, this);
        }, s.prototype.dMultiply = function(e2) {
          this[this.t] = this.am(0, e2 - 1, this, 0, 0, this.t), ++this.t, this.clamp();
        }, s.prototype.dAddOffset = function(e2, t2) {
          if (0 != e2) {
            for (; this.t <= t2; )
              this[this.t++] = 0;
            for (this[t2] += e2; this[t2] >= this.DV; )
              this[t2] -= this.DV, ++t2 >= this.t && (this[this.t++] = 0), ++this[t2];
          }
        }, s);
        function s(e2, t2) {
          null != e2 && (null == t2 && "string" != typeof e2 ? this.fromString(e2, 256) : this.fromString(e2, t2));
        }
        a.prototype.convert = function(e2) {
          return e2.s < 0 || 0 <= e2.compareTo(this.m) ? e2.mod(this.m) : e2;
        }, a.prototype.revert = function(e2) {
          return e2;
        }, a.prototype.reduce = function(e2) {
          e2.divRemTo(this.m, null, e2);
        }, a.prototype.mulTo = function(e2, t2, r2) {
          e2.multiplyTo(t2, r2), this.reduce(r2);
        }, a.prototype.sqrTo = function(e2, t2) {
          e2.squareTo(t2), this.reduce(t2);
        };
        var i = a;
        function a(e2) {
          this.m = e2;
        }
        c.prototype.convert = function(e2) {
          var t2 = l();
          return e2.abs().dlShiftTo(this.m.t, t2), t2.divRemTo(this.m, null, t2), e2.s < 0 && 0 < t2.compareTo(o.ZERO) && this.m.subTo(t2, t2), t2;
        }, c.prototype.revert = function(e2) {
          var t2 = l();
          return e2.copyTo(t2), this.reduce(t2), t2;
        }, c.prototype.reduce = function(e2) {
          for (; e2.t <= this.mt2; )
            e2[e2.t++] = 0;
          for (var t2 = 0; t2 < this.m.t; ++t2) {
            var r2 = 32767 & e2[t2], n2 = r2 * this.mpl + ((r2 * this.mph + (e2[t2] >> 15) * this.mpl & this.um) << 15) & e2.DM;
            for (e2[r2 = t2 + this.m.t] += this.m.am(0, n2, e2, t2, 0, this.m.t); e2[r2] >= e2.DV; )
              e2[r2] -= e2.DV, e2[++r2]++;
          }
          e2.clamp(), e2.drShiftTo(this.m.t, e2), 0 <= e2.compareTo(this.m) && e2.subTo(this.m, e2);
        }, c.prototype.mulTo = function(e2, t2, r2) {
          e2.multiplyTo(t2, r2), this.reduce(r2);
        }, c.prototype.sqrTo = function(e2, t2) {
          e2.squareTo(t2), this.reduce(t2);
        };
        var u = c;
        function c(e2) {
          this.m = e2, this.mp = e2.invDigit(), this.mpl = 32767 & this.mp, this.mph = this.mp >> 15, this.um = (1 << e2.DB - 15) - 1, this.mt2 = 2 * e2.t;
        }
        function l() {
          return new o(null);
        }
        function d(e2, t2) {
          return new o(e2, t2);
        }
        r = (t = "undefined" != typeof navigator) && "Microsoft Internet Explorer" == navigator.appName ? (o.prototype.am = function(e2, t2, r2, n2, o2, s2) {
          for (var i2 = 32767 & t2, a2 = t2 >> 15; 0 <= --s2; ) {
            var u2 = 32767 & this[e2], c2 = this[e2++] >> 15, l2 = a2 * u2 + c2 * i2;
            o2 = ((u2 = i2 * u2 + ((32767 & l2) << 15) + r2[n2] + (1073741823 & o2)) >>> 30) + (l2 >>> 15) + a2 * c2 + (o2 >>> 30), r2[n2++] = 1073741823 & u2;
          }
          return o2;
        }, 30) : t && "Netscape" != navigator.appName ? (o.prototype.am = function(e2, t2, r2, n2, o2, s2) {
          for (; 0 <= --s2; ) {
            var i2 = t2 * this[e2++] + r2[n2] + o2;
            o2 = Math.floor(i2 / 67108864), r2[n2++] = 67108863 & i2;
          }
          return o2;
        }, 26) : (o.prototype.am = function(e2, t2, r2, n2, o2, s2) {
          for (var i2 = 16383 & t2, a2 = t2 >> 14; 0 <= --s2; ) {
            var u2 = 16383 & this[e2], c2 = this[e2++] >> 14, l2 = a2 * u2 + c2 * i2;
            o2 = ((u2 = i2 * u2 + ((16383 & l2) << 14) + r2[n2] + o2) >> 28) + (l2 >> 14) + a2 * c2, r2[n2++] = 268435455 & u2;
          }
          return o2;
        }, 28);
        for (var p = (o.prototype.DB = r, o.prototype.DM = (1 << r) - 1, o.prototype.DV = 1 << r, o.prototype.FV = Math.pow(2, 52), o.prototype.F1 = 52 - r, o.prototype.F2 = 2 * r - 52, []), h = "0".charCodeAt(0), g = 0; g <= 9; ++g)
          p[h++] = g;
        for (h = "a".charCodeAt(0), g = 10; g < 36; ++g)
          p[h++] = g;
        for (h = "A".charCodeAt(0), g = 10; g < 36; ++g)
          p[h++] = g;
        function f(e2, t2) {
          return null == (e2 = p[e2.charCodeAt(t2)]) ? -1 : e2;
        }
        function m(e2) {
          var t2 = l();
          return t2.fromInt(e2), t2;
        }
        function _(e2) {
          var t2, r2 = 1;
          return 0 != (t2 = e2 >>> 16) && (e2 = t2, r2 += 16), 0 != (t2 = e2 >> 8) && (e2 = t2, r2 += 8), 0 != (t2 = e2 >> 4) && (e2 = t2, r2 += 4), 0 != (t2 = e2 >> 2) && (e2 = t2, r2 += 2), 0 != (t2 = e2 >> 1) && (e2 = t2, r2 += 1), r2;
        }
        o.ZERO = m(0), o.ONE = m(1);
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return u;
        });
        var n = r(2), o = r(1), s = r(0), i = function() {
          return (i = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var o2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, o2) && (e2[o2] = t2[o2]);
            return e2;
          }).apply(this, arguments);
        }, a = s.J.Group, u = (c.prototype.destroy = function() {
          this.connMgr = null, this.eventBus = null, this.logger = null, this.settings = null, this.engineConfig = null, this.dbMgr = null, this.dbGroupMemberMap = null;
        }, c.prototype.setDBGroup = function(e2, t2) {
          var r2 = this;
          this.dbGroup = e2, this.groupName = e2.groupName, this.groupAvatarUrl = e2.groupAvatarUrl, t2 && this.dbMgr.getGroupMemberList(this.groupID).then(function(t3) {
            r2.tatalMemberCount = e2.tatalMemberCount || t3.length, t3.forEach(function(e3) {
              return r2.dbGroupMemberMap.set(e3.userID, e3);
            });
          });
        }, c.prototype.createGroup = function(e2, t2, r2) {
          var n2 = this, i2 = { time: /* @__PURE__ */ new Date(), groupInfo: e2, config: r2, userIDs: t2 }, u2 = [], c2 = (Array.isArray(t2) && (t2 = t2.filter(function(e3) {
            return !!Object(o.l)(e3) || (u2.push({ userID: e3, reason: 6000001 }), false);
          }), t2 = Array.from(new Set(t2))), r2.groupAttributes), l = Object.keys(c2).map(function(e3) {
            return { key: e3, value: c2[e3], seq: 1 };
          }), d = { group_name: e2.groupName || "", group_notice: r2.groupNotice || "", group_avatar: Object(o.i)(e2.groupAvatarUrl || ""), user_ids: t2, attributes: l };
          return e2.groupID && (d.group_id = e2.groupID), this.connMgr.sendRequest(s.c.group_create, d).then(function(t3) {
            if (t3.code)
              return c3 = Object(o.s)(s.s.GroupModuleCreateGroupError, t3.message, t3.code), i2.error = c3, n2.logger.warn(a, s.I.CreateGroup, i2), Promise.reject(c3);
            n2.groupID = t3.group_id, n2.dbGroup.groupID = n2.groupID, n2.tatalMemberCount = t3.member_count, n2.groupMember.memberRole = s.E.Owner, t3.attributes = { attributes: l, seq: t3.group_attribute_seq }, t3.group_name = e2.groupName, t3.group_avatar = d.group_avatar, t3.group_notice = r2.groupNotice, t3.error_users.forEach(function(e3) {
              return u2.push(n2.createErrorUser(e3));
            });
            var c3 = n2.createGroupCallback(t3);
            return n2.logger.info(a, s.I.CreateGroup, i2), { groupInfo: n2.createGroupFullInfo(), userList: c3, errorUserList: u2 };
          });
        }, c.prototype.joinGroup = function() {
          var e2 = this, t2 = { time: /* @__PURE__ */ new Date(), groupID: this.groupID }, r2 = { group_id: this.groupID };
          return this.connMgr.sendRequest(s.c.group_enter, r2).then(function(r3) {
            var n2;
            return r3.code ? (n2 = Object(o.s)(s.s.GroupModuleJoinGroupError, r3.message, r3.code), t2.error = n2, e2.logger.warn(a, s.I.JoinGroup, t2), Promise.reject(n2)) : (e2.tatalMemberCount = r3.member_count, e2.groupMember.memberRole = s.E.Member, r3.member.member_data.user_avatar || (r3.member.member_data.user_avatar = e2.engineConfig.user.userAvatarUrl), r3.op_user = i(i({}, r3.member.member_data), { user_id: r3.member.user_id }), r3.members = [r3.member], e2.joinGroupCallback(r3, s.C.Joined, s.A.Joined), e2.logger.info(a, s.I.JoinGroup, t2), { groupInfo: e2.createGroupFullInfo(), seq: r3.conv_msg_seq });
          });
        }, c.prototype.inviteUsersIntoGroup = function(e2) {
          var t2 = this, r2 = { time: /* @__PURE__ */ new Date(), groupID: this.groupID, userIDs: e2 }, n2 = [];
          e2 = e2.filter(function(e3) {
            return !!Object(o.l)(e3) || (n2.push({ userID: e3, reason: 6000001 }), false);
          }), e2 = Array.from(new Set(e2)), e2 = { group_id: this.groupID, user_ids: e2 };
          return this.connMgr.sendRequest(s.c.group_invite, e2).then(function(e3) {
            if (e3.code)
              return i2 = Object(o.s)(s.s.GroupModuleInviteUserIntoGroupError, e3.message, e3.code), r2.error = i2, t2.logger.warn(a, s.I.InviteUsersIntoGroup, r2), Promise.reject(i2);
            t2.tatalMemberCount = e3.member_count;
            var i2 = t2.inviteUsersIntoGroupCallback(e3);
            return e3.error_users.forEach(function(e4) {
              return n2.push(t2.createErrorUser(e4));
            }), t2.eventBus.emit(s.t.GroupMemberState, { groupID: t2.groupID, state: s.F.Enter, event: s.C.Invited, operatedInfo: t2.createOwnerOperator(), userList: i2 }), t2.logger.info(a, s.I.InviteUsersIntoGroup, r2), { groupID: t2.groupID, userList: i2, errorUserList: n2 };
          });
        }, c.prototype.kickGroupMembers = function(e2) {
          var t2 = this, r2 = { time: /* @__PURE__ */ new Date(), groupID: this.groupID, userIDs: e2 }, n2 = [], u2 = (e2 = e2.filter(function(e3) {
            return !!Object(o.l)(e3) || (n2.push({ userID: e3, reason: 6000001 }), false);
          }), e2 = Array.from(new Set(e2)), { group_id: this.groupID, user_ids: e2 });
          return this.connMgr.sendRequest(s.c.group_kickout, u2).then(function(u3) {
            var c2;
            if (u3.code)
              return c2 = Object(o.s)(s.s.GroupModuleKickoutGroupMemberError, u3.message, u3.code), r2.error = c2, t2.logger.warn(a, s.I.KickGroupMembers, r2), Promise.reject(c2);
            t2.tatalMemberCount = u3.member_count;
            var l = [];
            return e2.forEach(function(e3) {
              var r3;
              u3.error_users.some(function(t3) {
                return t3.user_id === e3;
              }) || (r3 = t2.dbGroupMemberMap.get(e3), l.push(i(i({}, r3), { userID: e3 })), t2.dbGroupMemberMap.delete(e3));
            }), e2 = l.map(function(e3) {
              return e3.userID;
            }), u3.error_users.forEach(function(e3) {
              return n2.push(t2.createErrorUser(e3));
            }), t2.updateMemberSeq(u3.member_all_seq), t2.dbMgr.deleteGroupMemberList(t2.groupID, e2), t2.eventBus.emit(s.t.GroupMemberState, { groupID: t2.groupID, state: s.F.Quit, event: s.C.KickedOut, operatedInfo: t2.createOwnerOperator(), userList: l }), t2.logger.info(a, s.I.KickGroupMembers, r2), { groupID: t2.groupID, kickedUserIDs: e2, errorUserList: n2 };
          });
        }, c.prototype.transferGroupOwner = function(e2) {
          var t2 = this, r2 = { time: /* @__PURE__ */ new Date(), groupID: this.groupID, userID: e2 }, n2 = { group_id: this.groupID, group_name: e2 };
          return this.connMgr.sendRequest(s.c.group_owner_transfer, n2).then(function(n3) {
            var i2;
            return n3.code ? (i2 = Object(o.s)(s.s.GroupModuleTransferOwnerError, n3.message, n3.code), r2.error = i2, t2.logger.warn(a, s.I.TransferGroupOwner, r2), Promise.reject(i2)) : (t2.groupMember.memberRole = s.E.Member, t2.transferGroupOwnerCallback([{ userID: e2, dataSeq: +n3.conv_msg_seq.toString() }, { userID: t2.groupMember.userID, dataSeq: +n3.conv_list_seq.toString() }]), t2.logger.info(a, s.I.TransferGroupOwner, r2), { groupID: t2.groupID, toUserID: e2 });
          });
        }, c.prototype.updateGroupInfo = function(e2, t2) {
          var r2 = this, n2 = { time: /* @__PURE__ */ new Date(), value: e2 }, i2 = t2 == s.z.Name ? s.c.group_modify_name : s.c.group_modify_notice, u2 = t2 == s.z.Name ? s.I.UpdateGroupName : s.I.UpdateGroupNotice, c2 = { group_id: this.groupID, group_name: e2 };
          return this.connMgr.sendRequest(i2, c2).then(function(i3) {
            var c3;
            return i3.code ? (c3 = Object(o.s)(s.s.GroupModuleUpdateGroupInfoError, i3.message, i3.code), n2.error = c3, r2.logger.warn(a, u2, n2), Promise.reject(c3)) : (r2.mergeGroupData(t2, +i3.conv_list_seq.toString(), e2, r2.createOwnerOperator()), r2.logger.info(a, u2, n2), t2 == s.z.Name ? { groupID: r2.groupID, groupName: e2 } : { groupID: r2.groupID, groupNotice: e2 });
          });
        }, c.prototype.updateGroupAvatarUrl = function(e2) {
          var t2 = this, r2 = { time: /* @__PURE__ */ new Date(), value: e2 }, n2 = { user_id: this.groupID, user_name: Object(o.i)(e2) };
          return this.connMgr.sendRequest(s.c.group_modify_avatar, n2).then(function(n3) {
            var i2;
            return n3.code ? (i2 = Object(o.s)(s.s.GroupModuleUpdateGroupInfoError, n3.message, n3.code), r2.error = i2, t2.logger.warn(a, s.I.UpdateGroupAvatarUrl, r2), Promise.reject(i2)) : (t2.mergeGroupData(s.z.Avatar, +n3.conv_list_seq.toString(), e2, t2.createOwnerOperator()), t2.logger.info(a, s.I.UpdateGroupAvatarUrl, r2), { groupID: t2.groupID, groupAvatarUrl: e2 });
          });
        }, c.prototype.queryGroupInfo = function() {
          var e2 = this, t2 = { time: /* @__PURE__ */ new Date(), groupID: this.groupID }, r2 = { group_id: this.groupID };
          return this.connMgr.sendRequest(s.c.group_data, r2).then(function(r3) {
            var n2, i2 = r3.code;
            return i2 && 6000104 != i2 ? (n2 = Object(o.s)(s.s.GroupModuleQueryGroupInfoError, r3.message, i2), t2.error = n2, e2.logger.warn(a, s.I.QueryGroupInfo, t2), Promise.reject(n2)) : (6000104 != i2 && (e2.syncGroupInfo(r3.group_name, Object(o.f)(r3.group_avatar)), e2.dbGroup.groupNotice = r3.group_notice, r3.group_data_seq && (e2.dbGroup.dataSeq = r3.group_data_seq), e2.dbMgr.addGroupList([e2.dbGroup])), e2.logger.info(a, s.I.QueryGroupInfo, t2), { groupInfo: e2.createGroupFullInfo() });
          });
        }, c.prototype.updateGroupAttributes = function(e2) {
          var t2, r2 = this, n2 = { time: /* @__PURE__ */ new Date(), groupID: this.groupID, params: e2 }, i2 = [], u2 = s.x.Set, c2 = Array.isArray(e2) ? (u2 = s.x.Delete, t2 = s.I.DeleteGroupAttributes, e2 = e2.filter(function(e3) {
            return !!Object(o.l)(e3) || (i2.push(e3), false);
          }), (e2 = Array.from(new Set(e2))).map(function(e3) {
            return { key: e3, value: "" };
          })) : (t2 = s.I.SetGroupAttributes, Object.keys(e2).map(function(t3) {
            return { key: t3, value: e2[t3] };
          }));
          c2 = { group_id: this.groupID, attributes: { action: u2, attributes: c2 } };
          return this.connMgr.sendRequest(s.c.group_modify_attributes, c2).then(function(e3) {
            var c3;
            return e3.code ? (c3 = Object(o.s)(s.s.GroupModuleGroupAttributesOperationFailed, e3.message, e3.code), n2.error = c3, r2.logger.warn(a, t2, n2), Promise.reject(c3)) : (r2.mergeGroupAttributes(u2, e3.attributes, r2.createOwnerOperator()), e3.fail_keys.forEach(function(e4) {
              return i2.push(e4.key);
            }), r2.logger.info(a, t2, n2), { groupID: r2.groupID, errorKeys: i2 });
          });
        }, c.prototype.queryGroupAttributes = function(e2) {
          var t2 = this, r2 = { time: /* @__PURE__ */ new Date(), groupID: this.groupID, keys: e2 }, n2 = this.dbGroup.attributes || {}, i2 = (e2 || Object.keys(n2)).map(function(e3) {
            return { key: e3, seq: (null == (e3 = n2[e3]) ? void 0 : e3.seq) || 1 };
          });
          i2 = { group_id: this.groupID, attributes: { seq: this.dbGroup.attributeSeq || 0, attributes: i2 } };
          return this.connMgr.sendRequest(s.c.group_attributes, i2).then(function(n3) {
            var i3, u2 = n3.code;
            return u2 && 6000104 != u2 ? (i3 = Object(o.s)(s.s.GroupModuleGroupAttributesQueryFailed, n3.message, u2), r2.error = i3, t2.logger.warn(a, s.I.QueryGroupAttributes, r2), Promise.reject(i3)) : (6000104 != u2 && t2.mergeGroupAttributes(s.x.Query, n3.attributes), t2.logger.info(a, s.I.QueryGroupAttributes, r2), { groupID: t2.groupID, groupAttributes: t2.createGroupAttributes(e2) });
          });
        }, c.prototype.setGroupMemberInfo = function(e2, t2, r2) {
          var n2 = this, i2 = { time: /* @__PURE__ */ new Date(), userID: e2, value: t2 }, u2 = r2 == s.D.Nickname ? s.c.group_member_nickname_set : s.c.group_member_role_set, c2 = r2 == s.D.Nickname ? s.I.SetGroupMemberNickname : s.I.SetGroupMemberRole, l = { group_id: this.groupID };
          return r2 == s.D.Nickname ? (l.group_name = e2, l.group_notice = t2) : (l.user_id = e2, l.role = t2), this.connMgr.sendRequest(u2, l).then(function(u3) {
            var l2;
            return u3.code ? (l2 = Object(o.s)(s.s.GroupModuleUpdateGroupMemberInfoError, u3.message, u3.code), i2.error = l2, n2.logger.warn(a, c2, i2), Promise.reject(l2)) : (n2.mergeGroupMemberInfo(r2, +u3.conv_list_seq.toString(), t2, e2), n2.logger.info(a, c2, i2), r2 == s.D.Nickname ? { groupID: n2.groupID, forUserID: e2, nickname: t2 } : { groupID: n2.groupID, forUserID: e2, role: t2 });
          });
        }, c.prototype.queryGroupMemberInfo = function(e2) {
          var t2 = this, r2 = { time: /* @__PURE__ */ new Date(), groupID: this.groupID, userID: e2 }, n2 = { group_id: this.groupID, user_id: e2 };
          return this.connMgr.sendRequest(s.c.group_member_data, n2).then(function(n3) {
            var i2 = n3.code;
            if (i2 && 6000104 != i2)
              return u2 = Object(o.s)(s.s.GroupModuleQueryGroupMemberInfoError, n3.message, i2), r2.error = u2, t2.logger.warn(a, s.I.QueryGroupMemberInfo, r2), Promise.reject(u2);
            var u2 = t2.dbGroupMemberMap.get(e2) || { userID: e2 };
            return 6000104 != i2 && (u2 = t2.createDBMember(n3.member), t2.dbMgr.addGroupMemberList(t2.groupID, [u2])), t2.logger.info(a, s.I.QueryGroupMemberInfo, r2), { groupID: t2.groupID, userInfo: u2 };
          });
        }, c.prototype.queryGroupMemberList = function(e2) {
          var t2 = this;
          return new Promise(function(r2, n2) {
            var o2 = { time: /* @__PURE__ */ new Date(), groupID: t2.groupID, config: e2 };
            t2.isFullMembers ? t2.queryGroupMembersCallback(e2, null, o2, r2, n2) : t2.mergeServerMemberList(s.u.Biz, "apicall", function(s2) {
              t2.queryGroupMembersCallback(e2, s2, o2, r2, n2);
            });
          });
        }, c.prototype.queryGroupMemberCount = function() {
          var e2 = { groupID: this.groupID, count: this.tatalMemberCount };
          return this.logger.info(a, s.I.QueryGroupMemberCount, e2), Promise.resolve(e2);
        }, c.prototype.queryReceiptMemberList = function(e2, t2, r2, n2) {
          var i2 = this;
          return new Promise(function(u2) {
            function c2() {
              for (var e3 = {}, c3 = (i2.dbGroupMemberMap.forEach(function(t3) {
                return e3[t3.seq] = t3;
              }), Object.keys(t2.memberSeqs).filter(function(r3) {
                return (n2 ? t2.memberSeqs[r3] : 0 === t2.memberSeqs[r3]) && !e3[r3];
              })), l2 = [], d2 = 0; d2 < c3.length; d2 += 100) {
                var f2 = i2.connMgr.sendRequest(s.c.group_members_by_seq, { conv_id: i2.groupID, conv_msg_seq: c3.slice(d2, d2 + 100) }, s.i.SDK);
                l2.push(f2);
              }
              Promise.all(l2).then(function(t3) {
                var r3 = [];
                t3.forEach(function(t4) {
                  (t4 = t4.members) && t4.length && t4.forEach(function(t5) {
                    t5 = i2.createDBMember(t5), e3[t5.seq] = t5, r3.push(t5);
                  });
                }), i2.dbMgr.addGroupMemberList(i2.groupID, r3);
              }).then(function() {
                var s2 = 0, c4 = [], l3 = (Object.keys(t2.memberSeqs).forEach(function(r3) {
                  var o2;
                  (n2 ? t2.memberSeqs[r3] : 0 === t2.memberSeqs[r3]) && (s2++, (o2 = e3[r3]) ? c4.push(o2) : h.push(r3));
                }), c4.sort(function(e4, t3) {
                  return e4.seq - t3.seq;
                }), c4.length), d3 = (null == (d3 = c4[c4.length - 1]) ? void 0 : d3.seq) || 0, f3 = r2.nextFlag || 0, m2 = 0, _2 = (0 < f3 && f3 < d3 ? m2 = c4.findIndex(function(e4) {
                  return e4.seq == f3;
                }) + 1 : d3 <= f3 && d3 && (m2 = c4.length), m2 + r2.count), v2 = (c4 = c4.slice(m2, _2)).length, b = (null == (b = c4[v2 - 1]) ? void 0 : b.seq) || 0, y = c4.map(function(e4) {
                  return Object(o.q)(i2.memberKeys, e4);
                }), M = v2 == l3 || d3 == b ? 0 : b;
                g.flag = h.join(), Object.assign(g, { start: m2, end: _2, next: b, max: d3, total: l3, totalSeq: s2, count: v2, nextFlag: M }), i2.logger.info(a, p, g), u2({ groupID: i2.groupID, nextFlag: M, userList: y });
              });
            }
            var l = t2.receiptMemberListSeq || 0, d = e2.conversationSeq, p = n2 ? s.I.QueryReceiptReadMemberList : s.I.QueryReceiptUnreadMemberList, h = [], g = { time: /* @__PURE__ */ new Date(), groupID: i2.groupID, msgSeq: d, dbSeq: l, config: r2, flag: "" };
            if (l && t2.receiptStatus != s.M.Processing)
              return c2();
            var f = 1, m = 0, _ = 0, v = ++i2.mergeListSeqs.receiptDetail + i2.groupID;
            i2.fetchServerPageReceiptDetail(l, f, d).then(function e3(r3) {
              var n3 = r3.code && 6000104 != r3.code ? 0 : r3.next_list_seq;
              n3 && (t2.receiptMemberListSeq = n3), r3.read_members && (m += r3.read_members.length, r3.read_members.forEach(function(e4) {
                return t2.memberSeqs[e4.toString()] = 1;
              })), r3.unread_members && (_ += r3.unread_members.length, r3.unread_members.forEach(function(e4) {
                return t2.memberSeqs[e4.toString()] = 0;
              })), t2.readMemberCount = r3.read_count || 0, t2.unreadMemberCount = r3.unread_count || 0, !r3.fetch_end && n3 && i2.engineConfig.token ? i2.fetchServerPageReceiptDetail(n3, ++f, d).then(e3) : (r3.degree = f, r3.read_members_len = m, r3.unread_members_len = _, n3 = s.c.msg_read_receipt_detail.cmd, g.dataReport = i2.dataReport.endNetworkRequest(n3, v, r3), i2.dbMgr.addMessageExtraList([t2], "receiptinfo"), c2());
            });
          });
        }, c.prototype.onPushGroupCreate = function(e2) {
          this.tatalMemberCount = e2.member_count, this.createGroupCallback(e2);
        }, c.prototype.onPushGroupJoin = function(e2, t2, r2) {
          this.tatalMemberCount = e2.member_count, this.groupMember.memberRole = s.E.Member, e2.members = [{ user_id: this.engineConfig.user.userID, member_data: { user_name: this.engineConfig.user.userName, user_avatar: this.engineConfig.user.userAvatarUrl, role: s.E.Member } }], this.joinGroupCallback(e2, t2, r2);
        }, c.prototype.onPushGroupDataModify = function(e2) {
          var t2, r2 = this.dbGroup.dataSeq || 0, n2 = e2.group_data_seq;
          n2 && r2 <= n2 ? (t2 = 2 == e2.modify_type ? Object(o.f)(e2.group_avatar) : 1 == e2.modify_type ? e2.group_name : e2.group_notice, this.mergeGroupData(e2.modify_type || 0, n2, t2, this.createOperator(e2.op_user))) : this.logger.info(a, s.I.PCMD, { dbSeq: r2, svrSeq: n2, type: e2.modify_type });
        }, c.prototype.onPushGroupAttributesModify = function(e2) {
          var t2 = this.dbGroup.attributeSeq || 0, r2 = e2.attributes.seq;
          r2 && t2 <= r2 ? this.mergeGroupAttributes(s.x.Push, e2.attributes, this.createOperator(e2.op_user)) : this.logger.info(a, s.I.PCMD, { dbSeq: t2, svrSeq: r2 });
        }, c.prototype.onPushGroupOwnerTransfer = function(e2) {
          e2.user_id == this.groupMember.userID && (this.groupMember.memberRole = s.E.Owner), this.transferGroupOwnerCallback([{ userID: e2.user_id }, { userID: e2.op_user.user_id }]), this.updateMemberSeq(e2.member_all_seq);
        }, c.prototype.onPushGroupMemberChange = function(e2) {
          var t2 = this, r2 = (this.tatalMemberCount = e2.member_count, this.dbGroup.memberSeq || 0), n2 = e2.member_all_seq;
          if (!n2 || n2 < r2)
            this.logger.info(a, s.I.PCMD, { dbSeq: r2, svrSeq: n2 });
          else
            switch (e2.new_owner_id == this.groupMember.userID && (this.groupMember.memberRole = s.E.Owner), e2.change_type) {
              case s.B.Enter:
                this.joinGroupCallback(e2, s.C.Joined);
                break;
              case s.B.Invited:
                this.eventBus.emit(s.t.GroupMemberState, { groupID: this.groupID, state: s.F.Enter, event: s.C.Invited, operatedInfo: this.createOperator(e2.op_user), userList: this.inviteUsersIntoGroupCallback(e2) });
                break;
              case s.B.Quit:
              case s.B.Kickout:
              case s.B.OwnerQuit:
                var o2 = this.createOperator(e2.op_user);
                this.eventBus.emit(s.t.GroupMemberState, { groupID: this.groupID, state: s.F.Quit, event: e2.change_type === s.B.Kickout ? s.C.KickedOut : s.C.Left, operatedInfo: o2, userList: this.kickGroupMemberCallback(e2) }), e2.change_type == s.B.OwnerQuit && this.groupOwnerQuitCallback(e2.new_owner_id, o2);
                break;
              case s.B.Modify:
                o2 = e2.members.map(function(e3) {
                  return (e3 = t2.createDBMember(e3)).userID == t2.groupMember.userID && (e3.memberNickname && (t2.groupMember.memberNickname = e3.memberNickname), e3.memberRole && (t2.groupMember.memberRole = e3.memberRole)), e3;
                }), this.dbMgr.addGroupMemberList(this.groupID, o2), this.eventBus.emit(s.t.GroupMemberInfo, { groupID: this.groupID, operatedInfo: this.createOperator(e2.op_user), userList: o2 });
            }
        }, c.prototype.onDisConnected = function() {
          this.isFullMembers = false;
        }, c.prototype.onUpdateSelf = function() {
          this.groupMember.userName = this.engineConfig.user.userName, this.groupMember.memberAvatarUrl = this.engineConfig.user.userAvatarUrl;
          var e2 = this.dbGroupMemberMap.get(this.engineConfig.user.userID);
          e2 && (e2.userName = this.engineConfig.user.userName, e2.memberAvatarUrl = this.engineConfig.user.userAvatarUrl, this.dbMgr.addGroupMemberList(this.groupID, [e2]));
        }, c.prototype.createGroupFullInfo = function() {
          return { baseInfo: { groupID: this.dbGroup.groupID, groupName: this.dbGroup.groupName, groupAvatarUrl: this.dbGroup.groupAvatarUrl }, groupNotice: this.dbGroup.groupNotice, notificationStatus: this.dbGroup.notificationStatus, groupAttributes: this.createGroupAttributes() };
        }, c.prototype.createOwnerOperator = function() {
          return i(i({}, this.groupMember), { operatedUserInfo: this.groupMember });
        }, c.prototype.createOperator = function(e2) {
          var t2 = e2.user_id, r2 = e2.user_name, n2 = e2.group_nick_name;
          e2 = e2.role, t2 = Object(o.q)(this.memberKeys, this.dbGroupMemberMap.get(t2) || { userID: t2, userName: "" });
          return r2 && (t2.userName = "string" == typeof r2 ? r2 : Object(o.f)(r2)), t2.memberNickname = n2 || "", t2.memberRole = e2 || s.E.Member, i(i({}, t2), { operatedUserInfo: t2 });
        }, c.prototype.createDBMember = function(e2, t2) {
          var r2 = e2.user_id, n2 = this.dbGroupMemberMap.get(r2) || { userID: r2 }, s2 = (c2 = e2.member_data).user_name, i2 = c2.user_avatar, a2 = c2.group_nick_name, u2 = c2.role, c2 = c2.member_data_seq;
          return !(s2 = (s2 && (n2.userName = s2), i2 && i2.length && (n2.memberAvatarUrl = Object(o.f)(i2)), a2 && (n2.memberNickname = a2), u2 && (n2.memberRole = u2), c2 && (n2.dataSeq = c2), e2.member_seq)) && n2.seq || (n2.seq = s2), t2 ? this.dbGroupMemberMap.delete(r2) : this.dbGroupMemberMap.set(r2, n2), n2;
        }, c.prototype.createErrorUser = function(e2) {
          return { userID: e2.user_id, reason: e2.sub_code };
        }, c.prototype.createGroupAttributes = function(e2) {
          var t2 = this;
          if (!this.dbGroup.attributes)
            return this.dbGroup.attributes = {}, {};
          var r2 = {};
          return (e2 = e2 || Object.keys(this.dbGroup.attributes)).forEach(function(e3) {
            var n2 = t2.dbGroup.attributes[e3];
            n2 && !n2.state && (r2[e3] = n2.value);
          }), r2;
        }, c.prototype.createDBGroupAttributes = function(e2) {
          return (e2 || []).reduce(function(e3, t2) {
            return e3[t2.key] = t2, e3;
          }, {});
        }, c.prototype.mergeMemberList = function(e2, t2, r2) {
          var n2, o2 = this, i2 = [], a2 = (t2 && (n2 = this.engineConfig.user.userID, t2 = this.dbGroupMemberMap.get(n2), Array.from(this.dbGroupMemberMap.keys()).forEach(function(e3) {
            e3 != n2 && i2.push(e3);
          }), this.dbGroupMemberMap.clear(), t2 && this.dbGroupMemberMap.set(t2.userID, t2)), "");
          if (e2.forEach(function(e3) {
            var t3 = e3.event_type;
            e3 = e3.member;
            t3 && t3 !== s.B.Enter && t3 !== s.B.Modify && t3 !== s.B.Invited ? t3 !== s.B.Quit && t3 !== s.B.Kickout && t3 !== s.B.OwnerQuit || (i2.push(e3.user_id), o2.dbGroupMemberMap.delete(e3.user_id)) : (t3 = o2.createDBMember(e3)).memberRole == s.E.Owner && (a2 = t3.userID);
          }), a2 && this.dbGroupMemberMap.forEach(function(e3) {
            e3.memberRole == s.E.Owner && e3.userID != a2 && (e3.memberRole = s.E.Member);
          }), this.tatalMemberCount >= this.dbGroupMemberMap.size)
            return this.dbMgr.deleteGroupMemberList(this.groupID, i2), this.dbMgr.addGroupMemberList(this.groupID, Array.from(this.dbGroupMemberMap.values())), r2 && r2();
          for (var u2 = Array.from(this.dbGroupMemberMap.values()).filter(function(e3) {
            return e3.seq;
          }), c2 = [], l = 0; l < u2.length; l += 100) {
            var d = this.connMgr.sendRequest(s.c.group_members_by_seq, { conv_id: this.groupID, conv_msg_seq: u2.slice(l, l + 100).map(function(e3) {
              return e3.seq;
            }) }, s.i.SDK);
            c2.push(d);
          }
          Promise.all(c2).then(function(e3) {
            e3.forEach(function(e4, t3) {
              if (!e4.code && e4.members)
                for (var r3 = e4.members.map(function(e5) {
                  return e5.user_id;
                }), n3 = 100 * t3; n3 < 100 * t3 + 100 && n3 < u2.length; n3++) {
                  var s2 = u2[n3].userID;
                  -1 == r3.indexOf(s2) && (i2.push(s2), o2.dbGroupMemberMap.delete(s2));
                }
            }), o2.dbMgr.deleteGroupMemberList(o2.groupID, i2), o2.dbMgr.addGroupMemberList(o2.groupID, Array.from(o2.dbGroupMemberMap.values())), r2 && r2();
          });
        }, c.prototype.syncGroupInfo = function(e2, t2) {
          "string" == typeof e2 && (this.groupName = e2, this.dbGroup.groupName = e2), "string" == typeof t2 && (this.groupAvatarUrl = t2, this.dbGroup.groupAvatarUrl = t2), this.eventBus.exec(s.t.ISyncGroupInfo, this.groupID, e2, t2);
        }, c.prototype.mergeGroupData = function(e2, t2, r2, n2) {
          e2 == s.z.Name ? (this.syncGroupInfo(r2, void 0), this.eventBus.emit(s.t.GroupName, { groupID: this.groupID, groupName: r2, operatedInfo: n2 })) : e2 != s.z.Notice && e2 ? e2 == s.z.Avatar && (this.syncGroupInfo(void 0, r2), this.eventBus.emit(s.t.GroupAvatar, { groupID: this.groupID, groupAvatarUrl: r2, operatedInfo: n2 })) : (this.dbGroup.groupNotice = r2, this.eventBus.emit(s.t.GroupNotice, { groupID: this.groupID, groupNotice: r2, operatedInfo: n2 })), t2 && (this.dbGroup.dataSeq = t2), this.dbMgr.addGroupList([this.dbGroup]);
        }, c.prototype.mergeGroupAttributes = function(e2, t2, r2) {
          var n2 = t2.seq, o2 = (t2 = t2.attributes, this.dbGroup.attributes || {}), u2 = {}, c2 = {}, l = [], d = { action: e2, seq: n2, attributes: t2, setAttrs: u2, delAtrrs: c2 };
          t2.forEach(function(t3) {
            var r3, n3 = t3.key, a2 = t3.value;
            t3 = t3.seq;
            e2 != s.x.Delete && t3 ? t3 && (r3 = (null == (r3 = o2[n3]) ? void 0 : r3.state) || 0, (!o2[n3] || t3 > o2[n3].seq) && (r3 = 0, u2[n3] = a2), o2[n3] = { key: n3, value: a2, seq: t3, state: r3 }) : (e2 != s.x.Query && (c2[n3] = a2), o2[n3] = i(i({}, o2[n3]), { key: n3, state: 1 }));
          }), Object.keys(u2).length && l.push({ action: s.y.Set, groupAttributes: u2 }), Object.keys(c2).length && l.push({ action: s.y.Delete, groupAttributes: c2 }), r2 && l.length && this.eventBus.emit(s.t.GroupAttr, { groupID: this.groupID, operatedInfo: r2, infoList: l }), this.dbGroup.attributes = o2, n2 && (this.dbGroup.attributeSeq = n2), this.dbMgr.addGroupList([this.dbGroup]), d.dbSeq = this.dbGroup.attributeSeq, d.dbAttr = o2, this.logger.info(a, "mergeAttr", d);
        }, c.prototype.mergeGroupMemberInfo = function(e2, t2, r2, n2) {
          var o2 = i(i({}, this.dbGroupMemberMap.get(n2)), { userID: n2 });
          t2 && (o2.dataSeq = t2), e2 === s.D.Nickname ? (o2.memberNickname = r2, n2 == this.groupMember.userID && (this.groupMember.memberNickname = o2.memberNickname)) : e2 === s.D.Role && (o2.memberRole = r2, n2 == this.groupMember.userID && (this.groupMember.memberRole = o2.memberRole)), this.dbGroupMemberMap.set(n2, o2), this.dbMgr.addGroupMemberList(this.groupID, [o2]), this.eventBus.emit(s.t.GroupMemberInfo, { groupID: this.groupID, operatedInfo: this.createOwnerOperator(), userList: [o2] });
        }, c.prototype.fetchServerPageMember = function(e2, t2, r2) {
          var n2 = s.c.group_member_list;
          e2 = { group_id: this.groupID, count: 100, cur_member_seq: e2, full_pull: 1, degree: t2, how: r2 }, r2 = r2 == s.u.Biz ? s.i.API : s.i.SDK;
          return 1 == t2 && (t2 = this.mergeListSeqs.member + this.groupID, this.dataReport.beginNetworkRequest(n2.cmd, t2, r2, e2)), this.connMgr.sendRequest(n2, e2, r2);
        }, c.prototype.fetchServerPageReceiptDetail = function(e2, t2, r2) {
          return r2 = { group_id: this.groupID, conv_msg_seq: r2, list_seq: e2, count: 100, degree: t2 }, e2 = s.c.msg_read_receipt_detail, 1 == t2 && (t2 = this.mergeListSeqs.receiptDetail + this.groupID, this.dataReport.beginNetworkRequest(e2.cmd, t2, s.i.API, r2)), this.connMgr.sendRequest(e2, r2);
        }, c.prototype.mergeServerMemberList = function(e2, t2, r2) {
          var n2 = this, o2 = this.dbGroup.memberSeq || 0, i2 = { time: /* @__PURE__ */ new Date(), groupID: this.groupID, dbSeq: o2, how: e2, action: t2, count: 0 }, u2 = 1, c2 = ++this.mergeListSeqs.member + this.groupID, l = [], d = function(e3) {
            n2.logger && (e3.degree = u2, e3.svrCount = l.length, i2.count = l.length, i2.dataReport = n2.dataReport.endNetworkRequest(s.c.group_member_list.cmd, c2, e3), n2.logger.info(a, "mergeSvrMembers", i2));
          }, p = function(t3) {
            if (t3.code || !n2.dbMgr)
              return d(t3), r2 && r2(t3);
            n2.tatalMemberCount = t3.member_count;
            var s2 = t3.member_all_seq;
            if (s2 <= o2)
              return n2.isFullMembers = true, d(t3), r2 && r2();
            var i3 = t3.cur_member_seq;
            l.push.apply(l, function(e3, t4, r3) {
              if (r3 || 2 === arguments.length)
                for (var n3, o3 = 0, s3 = t4.length; o3 < s3; o3++)
                  !n3 && o3 in t4 || ((n3 = n3 || Array.prototype.slice.call(t4, 0, o3))[o3] = t4[o3]);
              return e3.concat(n3 || Array.prototype.slice.call(t4));
            }([], function(e3, t4) {
              var r3 = "function" == typeof Symbol && e3[Symbol.iterator];
              if (!r3)
                return e3;
              var n3, o3, s3 = r3.call(e3), i4 = [];
              try {
                for (; (void 0 === t4 || 0 < t4--) && !(n3 = s3.next()).done; )
                  i4.push(n3.value);
              } catch (e4) {
                o3 = { error: e4 };
              } finally {
                try {
                  n3 && !n3.done && (r3 = s3.return) && r3.call(s3);
                } finally {
                  if (o3)
                    throw o3.error;
                }
              }
              return i4;
            }(t3.change_list), false)), i3 < s2 ? n2.fetchServerPageMember(i3, ++u2, e2).then(p) : (n2.isFullMembers = true, d(t3), n2.updateMemberSeq(s2, true), n2.mergeMemberList(l, t3.full_list, r2));
          };
          this.fetchServerPageMember(o2, u2, e2).then(p);
        }, c.prototype.fetchMembersInfo = function(e2, t2) {
          var r2 = this, n2 = [];
          if (e2.forEach(function(e3) {
            e3.member_data.user_avatar && e3.member_data.user_avatar.length || n2.push(e3.user_id);
          }), n2.length) {
            for (var i2 = [], a2 = 0; a2 < n2.length; a2 += 100) {
              var u2 = this.connMgr.sendRequest(s.c.fetch_user_info, { _ev_: t2, quey_user_id: n2.slice(a2, a2 + 100) }, s.i.SDK);
              i2.push(u2);
            }
            Promise.all(i2).then(function(t3) {
              var n3 = [];
              t3.forEach(function(t4) {
                (t4 = t4.result) && t4.length && t4.forEach(function(t5) {
                  var s2 = t5.user_id, i3 = e2.find(function(e3) {
                    return s2 == e3.user_id;
                  });
                  i3 && (i3.member_data.user_name = Object(o.f)(t5.user_name), i3.member_data.user_avatar = t5.avatar, n3.push(r2.createDBMember(i3)));
                });
              }), r2.dbMgr.addGroupMemberList(r2.groupID, n3);
            });
          }
        }, c.prototype.createGroupCallback = function(e2) {
          return Object.assign(this.dbGroup, { id: this.engineConfig.user.userID + e2.group_id, groupID: e2.group_id, groupNotice: e2.group_notice, notificationStatus: s.G.Notify, attributes: this.createDBGroupAttributes(e2.attributes.attributes) }), e2.group_list_seq && (this.dbGroup.groupSeq = e2.group_list_seq.toString()), e2.attributes.seq && (this.dbGroup.attributeSeq = e2.attributes.seq), e2.member_all_seq && (this.dbGroup.memberSeq = e2.member_all_seq), this.syncGroupInfo(e2.group_name, Object(o.f)(e2.group_avatar)), this.dbMgr.addGroupList([this.dbGroup]), e2.group_notice || this.queryGroupInfo(), this.fetchMembersInfo(e2.members, "createGroupCallback"), this.handleCreateGroupCallback(e2);
        }, c.prototype.handleCreateGroupCallback = function(e2) {
          var t2 = this, r2 = e2.members.map(function(e3) {
            return t2.createDBMember(e3);
          }), n2 = (e2 = (this.dbMgr.addGroupMemberList(this.groupID, r2), e2.op_user ? this.createOperator(e2.op_user) : this.createOwnerOperator())).userID, o2 = (this.groupMember.memberRole = n2 == this.engineConfig.user.userID ? s.E.Owner : s.E.Member, this.eventBus.emit(s.t.GroupState, { state: s.H.Enter, event: s.A.Created, operatedInfo: e2, groupInfo: this.createGroupFullInfo() }), this.dbGroup.attributes && 0 < Object.keys(this.dbGroup.attributes).length && (o2 = { action: s.y.Set, groupAttributes: this.createGroupAttributes() }, this.eventBus.emit(s.t.GroupAttr, { groupID: this.groupID, operatedInfo: e2, infoList: [o2] })), this.eventBus.emit(s.t.GroupMemberState, { groupID: this.groupID, state: s.F.Enter, event: s.C.Joined, operatedInfo: e2, userList: [e2.operatedUserInfo] }), r2.filter(function(e3) {
            return e3.userID != n2;
          }));
          return o2.length && this.eventBus.emit(s.t.GroupMemberState, { groupID: this.groupID, state: s.F.Enter, event: s.C.Invited, operatedInfo: e2, userList: o2 }), r2;
        }, c.prototype.handleJoinGroup = function(e2, t2, r2) {
          var n2 = this, i2 = e2.group_notice, a2 = e2.member_all_seq, u2 = e2.group_data_seq, c2 = e2.group_list_seq, l = e2.properties;
          i2 && (this.dbGroup.groupNotice = i2), c2 && (this.dbGroup.groupSeq = c2.toString()), i2 = e2.members.map(function(e3) {
            return n2.createDBMember(e3);
          }), r2 ? (this.syncGroupInfo(e2.group_name, Object(o.f)(e2.group_avatar)), this.dbGroup.notificationStatus = s.G.Notify, this.mergeServerMemberList(s.u.SDKPush, "joinGroup"), this.dbGroup.attributes = {}, l ? (this.dbGroup.attributes = this.createDBGroupAttributes(l.attributes), l.seq && (this.dbGroup.attributeSeq = l.seq)) : this.queryGroupAttributes([]), this.queryGroupInfo(), u2 && (this.dbGroup.dataSeq = u2)) : (a2 && (this.dbGroup.memberSeq = a2), this.dbMgr.addGroupMemberList(this.groupID, i2)), this.dbMgr.addGroupList([this.dbGroup]), e2.op_user || (e2.op_user = { user_id: this.engineConfig.user.userID, user_name: this.engineConfig.user.userName }), c2 = this.createOperator(e2.op_user);
          return r2 && (this.eventBus.emit(s.t.GroupState, { state: s.H.Enter, event: r2, operatedInfo: c2, groupInfo: this.createGroupFullInfo() }), this.dbGroup.attributes && 0 < Object.keys(this.dbGroup.attributes).length && (l = { action: s.y.Set, groupAttributes: this.createGroupAttributes() }, this.eventBus.emit(s.t.GroupAttr, { groupID: this.groupID, operatedInfo: c2, infoList: [l] }))), i2.length && this.eventBus.emit(s.t.GroupMemberState, { groupID: this.groupID, state: s.F.Enter, event: t2, operatedInfo: c2, userList: i2 }), i2;
        }, c.prototype.joinGroupCallback = function(e2, t2, r2) {
          t2 != s.C.Joined || r2 || this.fetchMembersInfo(e2.members, "joinGroupCallback"), this.handleJoinGroup(e2, t2, r2);
        }, c.prototype.inviteUsersIntoGroupCallback = function(e2) {
          var t2 = this, r2 = e2.members.map(function(e3) {
            return t2.createDBMember(e3);
          });
          return this.dbMgr.addGroupMemberList(this.groupID, r2), this.updateMemberSeq(e2.member_all_seq), r2;
        }, c.prototype.kickGroupMemberCallback = function(e2) {
          var t2 = this, r2 = (e2 = (this.updateMemberSeq(e2.member_all_seq), e2.members.map(function(e3) {
            return t2.createDBMember(e3, true);
          }))).map(function(e3) {
            return e3.userID;
          });
          return this.dbMgr.deleteGroupMemberList(this.groupID, r2), e2;
        }, c.prototype.transferGroupOwnerCallback = function(e2) {
          var t2 = this, r2 = this.dbGroupMemberMap.get(e2[0].userID), n2 = this.dbGroupMemberMap.get(e2[1].userID);
          (r2 && n2 ? Promise.resolve([r2, n2]) : this.dbMgr.getGroupMemberList(this.groupID)).then(function(o2) {
            r2 = o2.find(function(t3) {
              return t3.userID == e2[0].userID;
            }), n2 = o2.find(function(t3) {
              return t3.userID == e2[1].userID;
            }), r2 && n2 && (r2.memberRole = s.E.Owner, n2.memberRole = s.E.Member, e2[0].dataSeq && (r2.dataSeq = e2[0].dataSeq), e2[1].dataSeq && (n2.dataSeq = e2[1].dataSeq), t2.dbGroupMemberMap.set(r2.userID, r2), t2.dbGroupMemberMap.set(n2.userID, n2), t2.dbMgr.addGroupMemberList(t2.groupID, [r2, n2]), o2 = i(i({}, n2), { operatedUserInfo: n2 }), t2.eventBus.emit(s.t.GroupMemberInfo, { groupID: t2.groupID, operatedInfo: o2, userList: [r2, n2] }));
          });
        }, c.prototype.groupOwnerQuitCallback = function(e2, t2) {
          var r2 = i(i({}, this.dbGroupMemberMap.get(e2)), { userID: e2 });
          r2.memberRole = s.E.Owner, this.dbGroupMemberMap.set(e2, r2), this.dbMgr.addGroupMemberList(this.groupID, [r2]), this.eventBus.emit(s.t.GroupMemberInfo, { groupID: this.groupID, operatedInfo: t2, userList: [r2] });
        }, c.prototype.queryGroupMembersCallback = function(e2, t2, r2, n2, i2) {
          var u2 = this, c2 = (r2.total = this.tatalMemberCount, r2.dbTotal = this.dbGroupMemberMap.size, t2 && t2.code);
          if (c2 && 6000104 != c2)
            return c2 = Object(o.s)(s.s.GroupModuleQueryGroupMemberListError, t2.message, t2.code), r2.error = c2, this.logger.info(a, s.I.QueryGroupMemberList, r2), i2(c2);
          this.dbMgr.getGroupMemberList(this.groupID).then(function(t3) {
            r2.dbTotal = t3.length, u2.dbGroupMemberMap.size || t3.forEach(function(e3) {
              return u2.dbGroupMemberMap.set(e3.userID, e3);
            }), t3.sort(function(e3, t4) {
              return e3.seq - t4.seq;
            });
            var i3 = e2.nextFlag, c3 = (null == (c3 = t3[t3.length - 1]) ? void 0 : c3.seq) || 0, l = 0, d = (c3 = (0 < i3 && i3 < c3 ? l = t3.findIndex(function(e3) {
              return e3.seq == i3;
            }) : c3 <= i3 && c3 && (l = t3.length - 1), l + e2.count), (null == (d = t3[c3]) ? void 0 : d.seq) || 0), p = (t3 = t3.slice(l, c3)).map(function(e3) {
              return Object(o.q)(u2.memberKeys, e3);
            });
            Object.assign(r2, { start: l, end: c3, count: t3.length, nextFlag: d }), u2.logger.info(a, s.I.QueryGroupMemberList, r2), n2({ groupID: u2.groupID, userList: p, nextFlag: d });
          });
        }, c.prototype.updateMemberSeq = function(e2, t2) {
          this.dbGroup && e2 && (t2 || !this.dbGroup.memberSeq || this.dbGroup.memberSeq + 1 == e2) && (this.dbGroup.memberSeq = e2, this.dbMgr.addGroupList([this.dbGroup]));
        }, c);
        function c(e2, t2, r2, o2, i2) {
          this.type = s.q.Group, this.groupID = "", this.groupName = void 0, this.groupAvatarUrl = void 0, this.tatalMemberCount = 0, this.mergeListSeqs = { member: 0, receiptDetail: 0 }, this.dbGroup = {}, this.isFullMembers = false, this.dbGroupMemberMap = /* @__PURE__ */ new Map(), this.memberKeys = ["userID", "userName", "memberRole", "memberAvatarUrl", "memberNickname"], this.dbGroup.groupID = e2, this.groupID = e2, this.engineConfig = t2, this.logger = n.a.getInstance().logger, this.settings = n.a.getInstance().settings, this.dataReport = n.a.getInstance().dataReport, this.eventBus = r2, this.dbMgr = o2, this.connMgr = i2, this.groupMember = { userID: this.engineConfig.user.userID, userName: this.engineConfig.user.userName || "", memberAvatarUrl: this.engineConfig.user.userAvatarUrl || "", memberNickname: "", memberRole: s.E.Member };
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return n;
        });
        function n(e2) {
          return "0123456789abcdefghijklmnopqrstuvwxyz".charAt(e2);
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return s;
        }), r.d(t, "b", function() {
          return i;
        }), o.prototype.init = function(e2) {
          for (var t2, r2, n2 = 0; n2 < 256; ++n2)
            this.S[n2] = n2;
          for (n2 = t2 = 0; n2 < 256; ++n2)
            t2 = t2 + this.S[n2] + e2[n2 % e2.length] & 255, r2 = this.S[n2], this.S[n2] = this.S[t2], this.S[t2] = r2;
          this.i = 0, this.j = 0;
        }, o.prototype.next = function() {
          this.i = this.i + 1 & 255, this.j = this.j + this.S[this.i] & 255;
          var e2 = this.S[this.i];
          return this.S[this.i] = this.S[this.j], this.S[this.j] = e2, this.S[e2 + this.S[this.i] & 255];
        };
        var n = o;
        function o() {
          this.i = 0, this.j = 0, this.S = [];
        }
        function s() {
          return new n();
        }
        var i = 256;
      }, function(e, t, r) {
        "use strict";
        r.r(t), r.d(t, "ZIM", function() {
          return a;
        });
        var n = r(2), o = r(1), s = r(8), i = function() {
          return (i = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var o2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, o2) && (e2[o2] = t2[o2]);
            return e2;
          }).apply(this, arguments);
        }, a = (r = function(e2, t2, r2, n2) {
          var o2, s2 = arguments.length, i2 = s2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, r2) : n2;
          if ("object" == typeof Reflect && "function" == typeof Reflect.decorate)
            i2 = Reflect.decorate(e2, t2, r2, n2);
          else
            for (var a2 = e2.length - 1; 0 <= a2; a2--)
              (o2 = e2[a2]) && (i2 = (s2 < 3 ? o2(i2) : 3 < s2 ? o2(t2, r2, i2) : o2(t2, r2)) || i2);
          return 3 < s2 && i2 && Object.defineProperty(t2, r2, i2), i2;
        }, u.setEventHandler = function(e2) {
          u._flutter_handler = e2;
        }, u.toJSON = function(e2) {
          return JSON.stringify(e2);
        }, u.prototype.createNotInitError = function() {
          return this.engine ? void 0 : Object(o.s)(s.i.CommonModuleNotInit);
        }, u.getVersion = function() {
          return n.a.getInstance().getVersion();
        }, u.getInstance = function() {
          return u._instance;
        }, u.setAdvancedConfig = function(e2, t2) {
          n.a.getInstance().setAdvancedConfig(e2, t2);
        }, u.setGeofencingConfig = function(e2, t2) {
          return n.a.getInstance().setGeofencingConfig(e2, t2);
        }, u.create = function(e2) {
          if (!(e2 = "object" == typeof e2 ? e2.appID : e2) || "number" != typeof e2)
            throw t2 = Object(o.s)(s.i.CommonModuleInvalidAppID), new Error(JSON.stringify(i({ appID: e2, version: u.getVersion() }, t2)));
          var t2 = n.a.getInstance().createEngine(e2);
          return t2 ? u._instance = new u(t2) : null;
        }, u.prototype.destroy = function() {
          this.engine && n.a.getInstance().destroyEngine(this.engine), this.engine = null;
        }, u.prototype.setLogConfig = function(e2) {
          this.engine && n.a.getInstance().setLogConfig(e2);
        }, u.prototype.uploadLog = function() {
          return this.engine.uploadLog();
        }, u.prototype.on = function(e2, t2) {
          this.engine && this.engine.on(e2, t2);
        }, u.prototype.off = function(e2) {
          this.engine && this.engine.off(e2);
        }, u.prototype.login = function(e2, t2) {
          return this.engine.login(e2, t2);
        }, u.prototype.logout = function() {
          this.engine && this.engine.logout();
        }, u.prototype.renewToken = function(e2) {
          return this.engine.renewToken(e2);
        }, u.prototype.queryUsersInfo = function(e2, t2) {
          return this.engine.queryUsersInfo(e2, t2);
        }, u.prototype.updateUserName = function(e2) {
          return this.engine.updateUserName(e2);
        }, u.prototype.updateUserAvatarUrl = function(e2) {
          return this.engine.updateUserAvatarUrl(e2);
        }, u.prototype.updateUserExtendedData = function(e2) {
          return this.engine.updateUserExtendedData(e2);
        }, u.prototype.queryConversation = function(e2, t2) {
          return this.engine.queryConversation(e2, t2);
        }, u.prototype.queryConversationList = function(e2) {
          return this.engine.queryConversationList(e2);
        }, u.prototype.queryConversationPinnedList = function(e2) {
          return this.engine.queryConversationPinnedList(e2);
        }, u.prototype.deleteConversation = function(e2, t2, r2) {
          return this.engine.deleteConversation(e2, t2, r2);
        }, u.prototype.deleteAllConversations = function(e2) {
          return this.engine.deleteAllConversations(e2);
        }, u.prototype.setConversationNotificationStatus = function(e2, t2, r2) {
          return this.engine.setConversationNotificationStatus(e2, t2, r2);
        }, u.prototype.updateConversationPinnedState = function(e2, t2, r2) {
          return this.engine.updateConversationPinnedState(e2, t2, r2);
        }, u.prototype.clearConversationUnreadMessageCount = function(e2, t2) {
          return this.engine.clearConversationUnreadMessageCount(e2, t2);
        }, u.prototype.clearConversationTotalUnreadMessageCount = function() {
          return this.engine.clearConversationTotalUnreadMessageCount();
        }, u.prototype.sendPeerMessage = function(e2, t2, r2, n2) {
          return this.engine.sendMessage(e2, t2, s.h.Peer, r2, n2);
        }, u.prototype.sendGroupMessage = function(e2, t2, r2, n2) {
          return this.engine.sendMessage(e2, t2, s.h.Group, r2, n2);
        }, u.prototype.sendRoomMessage = function(e2, t2, r2, n2) {
          return this.engine.sendMessage(e2, t2, s.h.Room, r2, n2);
        }, u.prototype.sendMessage = function(e2, t2, r2, n2, o2) {
          return this.engine.sendMessage(e2, t2, r2, n2, o2);
        }, u.prototype.sendMediaMessage = function(e2, t2, r2, n2, o2) {
          return this.engine.sendMediaMessage(e2, t2, r2, n2, o2);
        }, u.prototype.deleteMessages = function(e2, t2, r2, n2) {
          return this.engine.deleteMessages(e2, t2, r2, n2);
        }, u.prototype.deleteAllMessage = function(e2, t2, r2) {
          return this.engine.deleteAllMessage(e2, t2, r2);
        }, u.prototype.queryHistoryMessage = function(e2, t2, r2) {
          return this.engine.queryHistoryMessage(e2, t2, r2);
        }, u.prototype.insertMessageToLocalDB = function(e2, t2, r2, n2) {
          return this.engine.insertMessageToLocalDB(e2, t2, r2, n2);
        }, u.prototype.updateMessageLocalExtendedData = function(e2, t2) {
          return this.engine.updateMessageLocalExtendedData(e2, t2);
        }, u.prototype.revokeMessage = function(e2, t2) {
          return this.engine.revokeMessage(e2, t2);
        }, u.prototype.sendConversationMessageReceiptRead = function(e2, t2) {
          return this.engine.sendReceiptRead(e2, t2);
        }, u.prototype.sendMessageReceiptsRead = function(e2, t2, r2) {
          return this.engine.sendMessageReceiptsRead(e2, t2, r2);
        }, u.prototype.queryMessageReceiptsInfo = function(e2, t2, r2) {
          return this.engine.queryMessageReceiptsInfo(e2, t2, r2);
        }, u.prototype.queryGroupMessageReceiptReadMemberList = function(e2, t2, r2) {
          return this.engine.queryReceiptMemberList(e2, t2, r2, true);
        }, u.prototype.queryGroupMessageReceiptUnreadMemberList = function(e2, t2, r2) {
          return this.engine.queryReceiptMemberList(e2, t2, r2, false);
        }, u.prototype.addMessageReaction = function(e2, t2) {
          return this.engine.addMessageReaction(e2, t2);
        }, u.prototype.deleteMessageReaction = function(e2, t2) {
          return this.engine.deleteMessageReaction(e2, t2);
        }, u.prototype.queryMessageReactionUserList = function(e2, t2) {
          return this.engine.queryMessageReactionUserList(e2, t2);
        }, u.prototype.createRoom = function(e2, t2) {
          return this.engine.createRoom(e2, t2);
        }, u.prototype.enterRoom = function(e2, t2) {
          return this.engine.enterRoom(e2, t2);
        }, u.prototype.joinRoom = function(e2) {
          return this.engine.joinRoom(e2);
        }, u.prototype.leaveRoom = function(e2) {
          return this.engine.leaveRoom(e2);
        }, u.prototype.queryRoomMemberList = function(e2, t2) {
          return this.engine.queryRoomMemberList(e2, t2);
        }, u.prototype.queryRoomMembers = function(e2, t2) {
          return this.engine.queryRoomMembers(e2, t2);
        }, u.prototype.queryRoomOnlineMemberCount = function(e2) {
          return this.engine.queryRoomOnlineMemberCount(e2);
        }, u.prototype.queryRoomAllAttributes = function(e2) {
          return this.engine.queryRoomAllAttributes(e2);
        }, u.prototype.setRoomAttributes = function(e2, t2, r2) {
          return this.engine.setRoomAttributes(e2, t2, r2);
        }, u.prototype.deleteRoomAttributes = function(e2, t2, r2) {
          return this.engine.deleteRoomAttributes(e2, t2, r2);
        }, u.prototype.beginRoomAttributesBatchOperation = function(e2, t2) {
          this.engine && this.engine.beginRoomAttributesBatchOperation(e2, t2);
        }, u.prototype.endRoomAttributesBatchOperation = function(e2) {
          return this.engine.endRoomAttributesBatchOperation(e2);
        }, u.prototype.setRoomMembersAttributes = function(e2, t2, r2, n2) {
          return this.engine.setRoomMembersAttributes(e2, t2, r2, n2);
        }, u.prototype.queryRoomMembersAttributes = function(e2, t2) {
          return this.engine.queryRoomMembersAttributes(e2, t2);
        }, u.prototype.queryRoomMemberAttributesList = function(e2, t2) {
          return this.engine.queryRoomMemberAttributesList(e2, t2);
        }, u.prototype.createGroup = function(e2, t2, r2) {
          return this.engine.createGroup(e2, t2, r2);
        }, u.prototype.joinGroup = function(e2) {
          return this.engine.joinGroup(e2);
        }, u.prototype.leaveGroup = function(e2) {
          return this.engine.leaveGroup(e2);
        }, u.prototype.dismissGroup = function(e2) {
          return this.engine.dismissGroup(e2);
        }, u.prototype.queryGroupList = function() {
          return this.engine.queryGroupList();
        }, u.prototype.updateGroupNotice = function(e2, t2) {
          return this.engine.updateGroupNotice(e2, t2);
        }, u.prototype.updateGroupName = function(e2, t2) {
          return this.engine.updateGroupName(e2, t2);
        }, u.prototype.updateGroupAvatarUrl = function(e2, t2) {
          return this.engine.updateGroupAvatarUrl(e2, t2);
        }, u.prototype.queryGroupInfo = function(e2) {
          return this.engine.queryGroupInfo(e2);
        }, u.prototype.setGroupAttributes = function(e2, t2) {
          return this.engine.setGroupAttributes(e2, t2);
        }, u.prototype.deleteGroupAttributes = function(e2, t2) {
          return this.engine.deleteGroupAttributes(e2, t2);
        }, u.prototype.queryGroupAttributes = function(e2, t2) {
          return this.engine.queryGroupAttributes(t2, e2);
        }, u.prototype.queryGroupAllAttributes = function(e2) {
          return this.engine.queryGroupAttributes(e2);
        }, u.prototype.setGroupMemberNickname = function(e2, t2, r2) {
          return this.engine.setGroupMemberNickname(e2, t2, r2);
        }, u.prototype.setGroupMemberRole = function(e2, t2, r2) {
          return this.engine.setGroupMemberRole(e2, t2, r2);
        }, u.prototype.transferGroupOwner = function(e2, t2) {
          return this.engine.transferGroupOwner(e2, t2);
        }, u.prototype.queryGroupMemberInfo = function(e2, t2) {
          return this.engine.queryGroupMemberInfo(e2, t2);
        }, u.prototype.inviteUsersIntoGroup = function(e2, t2) {
          return this.engine.inviteUsersIntoGroup(e2, t2);
        }, u.prototype.kickGroupMembers = function(e2, t2) {
          return this.engine.kickGroupMembers(e2, t2);
        }, u.prototype.queryGroupMemberList = function(e2, t2) {
          return this.engine.queryGroupMemberList(e2, t2);
        }, u.prototype.queryGroupMemberCount = function(e2) {
          return this.engine.queryGroupMemberCount(e2);
        }, u.prototype.callInvite = function(e2, t2) {
          return this.engine.callInvite(e2, t2);
        }, u.prototype.callCancel = function(e2, t2, r2) {
          return this.engine.callCancel(e2, t2, r2);
        }, u.prototype.callAccept = function(e2, t2) {
          return this.engine.callAccept(e2, t2);
        }, u.prototype.callReject = function(e2, t2) {
          return this.engine.callReject(e2, t2);
        }, u.prototype.callQuit = function(e2, t2) {
          return this.engine.callQuit(e2, t2);
        }, u.prototype.callEnd = function(e2, t2) {
          return this.engine.callEnd(e2, t2);
        }, u.prototype.callJoin = function(e2, t2) {
          return this.engine.callJoin(e2, t2);
        }, u.prototype.callingInvite = function(e2, t2, r2) {
          return this.engine.callingInvite(e2, t2, r2);
        }, u.prototype.queryCallInvitationList = function(e2) {
          return this.engine.queryCallInvitationList(e2);
        }, u.prototype.searchLocalConversations = function(e2) {
          return this.engine.searchConversations(e2);
        }, u.prototype.searchGlobalLocalMessages = function(e2) {
          return this.engine.searchGlobalMessages(e2);
        }, u.prototype.searchLocalMessages = function(e2, t2, r2) {
          return this.engine.searchMessages(e2, t2, r2);
        }, u.prototype.searchLocalGroups = function(e2) {
          return this.engine.searchGroups(e2);
        }, u.prototype.searchLocalGroupMembers = function(e2, t2) {
          return this.engine.searchGroupMembers(e2, t2);
        }, u.TAG = "2023/11/15 11:37:11", u._instance = null, r([Object(o.o)()], u.prototype, "uploadLog", null), r([Object(o.o)()], u.prototype, "login", null), r([Object(o.o)()], u.prototype, "renewToken", null), r([Object(o.o)()], u.prototype, "queryUsersInfo", null), r([Object(o.o)()], u.prototype, "updateUserName", null), r([Object(o.o)()], u.prototype, "updateUserAvatarUrl", null), r([Object(o.o)()], u.prototype, "updateUserExtendedData", null), r([Object(o.o)()], u.prototype, "queryConversation", null), r([Object(o.o)()], u.prototype, "queryConversationList", null), r([Object(o.o)()], u.prototype, "queryConversationPinnedList", null), r([Object(o.o)()], u.prototype, "deleteConversation", null), r([Object(o.o)()], u.prototype, "deleteAllConversations", null), r([Object(o.o)()], u.prototype, "setConversationNotificationStatus", null), r([Object(o.o)()], u.prototype, "updateConversationPinnedState", null), r([Object(o.o)()], u.prototype, "clearConversationUnreadMessageCount", null), r([Object(o.o)()], u.prototype, "clearConversationTotalUnreadMessageCount", null), r([Object(o.o)()], u.prototype, "sendPeerMessage", null), r([Object(o.o)()], u.prototype, "sendGroupMessage", null), r([Object(o.o)()], u.prototype, "sendRoomMessage", null), r([Object(o.o)()], u.prototype, "sendMessage", null), r([Object(o.o)()], u.prototype, "sendMediaMessage", null), r([Object(o.o)()], u.prototype, "deleteMessages", null), r([Object(o.o)()], u.prototype, "deleteAllMessage", null), r([Object(o.o)()], u.prototype, "queryHistoryMessage", null), r([Object(o.o)()], u.prototype, "insertMessageToLocalDB", null), r([Object(o.o)()], u.prototype, "updateMessageLocalExtendedData", null), r([Object(o.o)()], u.prototype, "revokeMessage", null), r([Object(o.o)()], u.prototype, "sendConversationMessageReceiptRead", null), r([Object(o.o)()], u.prototype, "sendMessageReceiptsRead", null), r([Object(o.o)()], u.prototype, "queryMessageReceiptsInfo", null), r([Object(o.o)()], u.prototype, "queryGroupMessageReceiptReadMemberList", null), r([Object(o.o)()], u.prototype, "queryGroupMessageReceiptUnreadMemberList", null), r([Object(o.o)()], u.prototype, "addMessageReaction", null), r([Object(o.o)()], u.prototype, "deleteMessageReaction", null), r([Object(o.o)()], u.prototype, "queryMessageReactionUserList", null), r([Object(o.o)()], u.prototype, "createRoom", null), r([Object(o.o)()], u.prototype, "enterRoom", null), r([Object(o.o)()], u.prototype, "joinRoom", null), r([Object(o.o)()], u.prototype, "leaveRoom", null), r([Object(o.o)()], u.prototype, "queryRoomMemberList", null), r([Object(o.o)()], u.prototype, "queryRoomMembers", null), r([Object(o.o)()], u.prototype, "queryRoomOnlineMemberCount", null), r([Object(o.o)()], u.prototype, "queryRoomAllAttributes", null), r([Object(o.o)()], u.prototype, "setRoomAttributes", null), r([Object(o.o)()], u.prototype, "deleteRoomAttributes", null), r([Object(o.o)()], u.prototype, "endRoomAttributesBatchOperation", null), r([Object(o.o)()], u.prototype, "setRoomMembersAttributes", null), r([Object(o.o)()], u.prototype, "queryRoomMembersAttributes", null), r([Object(o.o)()], u.prototype, "queryRoomMemberAttributesList", null), r([Object(o.o)()], u.prototype, "createGroup", null), r([Object(o.o)()], u.prototype, "joinGroup", null), r([Object(o.o)()], u.prototype, "leaveGroup", null), r([Object(o.o)()], u.prototype, "dismissGroup", null), r([Object(o.o)()], u.prototype, "queryGroupList", null), r([Object(o.o)()], u.prototype, "updateGroupNotice", null), r([Object(o.o)()], u.prototype, "updateGroupName", null), r([Object(o.o)()], u.prototype, "updateGroupAvatarUrl", null), r([Object(o.o)()], u.prototype, "queryGroupInfo", null), r([Object(o.o)()], u.prototype, "setGroupAttributes", null), r([Object(o.o)()], u.prototype, "deleteGroupAttributes", null), r([Object(o.o)()], u.prototype, "queryGroupAttributes", null), r([Object(o.o)()], u.prototype, "queryGroupAllAttributes", null), r([Object(o.o)()], u.prototype, "setGroupMemberNickname", null), r([Object(o.o)()], u.prototype, "setGroupMemberRole", null), r([Object(o.o)()], u.prototype, "transferGroupOwner", null), r([Object(o.o)()], u.prototype, "queryGroupMemberInfo", null), r([Object(o.o)()], u.prototype, "inviteUsersIntoGroup", null), r([Object(o.o)()], u.prototype, "kickGroupMembers", null), r([Object(o.o)()], u.prototype, "queryGroupMemberList", null), r([Object(o.o)()], u.prototype, "queryGroupMemberCount", null), r([Object(o.o)()], u.prototype, "callInvite", null), r([Object(o.o)()], u.prototype, "callCancel", null), r([Object(o.o)()], u.prototype, "callAccept", null), r([Object(o.o)()], u.prototype, "callReject", null), r([Object(o.o)()], u.prototype, "callQuit", null), r([Object(o.o)()], u.prototype, "callEnd", null), r([Object(o.o)()], u.prototype, "callJoin", null), r([Object(o.o)()], u.prototype, "callingInvite", null), r([Object(o.o)()], u.prototype, "queryCallInvitationList", null), r([Object(o.o)()], u.prototype, "searchLocalConversations", null), r([Object(o.o)()], u.prototype, "searchGlobalLocalMessages", null), r([Object(o.o)()], u.prototype, "searchLocalMessages", null), r([Object(o.o)()], u.prototype, "searchLocalGroups", null), r([Object(o.o)()], u.prototype, "searchLocalGroupMembers", null), u);
        function u(e2) {
          if (!e2 || !e2.setContext)
            throw new Error("Can not use new.");
          (this.engine = e2).setContext(this);
        }
        t.default = a;
      }, function(e, t, r) {
        var n, o, s, i, a;
        e.exports = (e = r(5), r(94), r(95), n = (s = (r = e).lib).Base, o = s.WordArray, i = (s = r.algo).MD5, a = s.EvpKDF = n.extend({ cfg: n.extend({ keySize: 4, hasher: i, iterations: 1 }), init: function(e2) {
          this.cfg = this.cfg.extend(e2);
        }, compute: function(e2, t2) {
          for (var r2, n2 = this.cfg, s2 = n2.hasher.create(), i2 = o.create(), a2 = i2.words, u = n2.keySize, c = n2.iterations; a2.length < u; ) {
            r2 && s2.update(r2), r2 = s2.update(e2).finalize(t2), s2.reset();
            for (var l = 1; l < c; l++)
              r2 = s2.finalize(r2), s2.reset();
            i2.concat(r2);
          }
          return i2.sigBytes = 4 * u, i2;
        } }), r.EvpKDF = function(e2, t2, r2) {
          return a.create(r2).compute(e2, t2);
        }, e.EvpKDF);
      }, function(e, t, r) {
        "use strict";
        e.exports = d;
        var n, o = r(10), s = o.LongBits, i = o.base64, a = o.utf8;
        function u(e2, t2, r2) {
          this.fn = e2, this.len = t2, this.next = void 0, this.val = r2;
        }
        function c() {
        }
        function l(e2) {
          this.head = e2.head, this.tail = e2.tail, this.len = e2.len, this.next = e2.states;
        }
        function d() {
          this.len = 0, this.head = new u(c, 0, 0), this.tail = this.head, this.states = null;
        }
        function p() {
          return o.Buffer ? function() {
            return (d.create = function() {
              return new n();
            })();
          } : function() {
            return new d();
          };
        }
        function h(e2, t2, r2) {
          t2[r2] = 255 & e2;
        }
        function g(e2, t2) {
          this.len = e2, this.next = void 0, this.val = t2;
        }
        function f(e2, t2, r2) {
          for (; e2.hi; )
            t2[r2++] = 127 & e2.lo | 128, e2.lo = (e2.lo >>> 7 | e2.hi << 25) >>> 0, e2.hi >>>= 7;
          for (; 127 < e2.lo; )
            t2[r2++] = 127 & e2.lo | 128, e2.lo = e2.lo >>> 7;
          t2[r2++] = e2.lo;
        }
        function m(e2, t2, r2) {
          t2[r2] = 255 & e2, t2[r2 + 1] = e2 >>> 8 & 255, t2[r2 + 2] = e2 >>> 16 & 255, t2[r2 + 3] = e2 >>> 24;
        }
        d.create = p(), d.alloc = function(e2) {
          return new o.Array(e2);
        }, o.Array !== Array && (d.alloc = o.pool(d.alloc, o.Array.prototype.subarray)), d.prototype._push = function(e2, t2, r2) {
          return this.tail = this.tail.next = new u(e2, t2, r2), this.len += t2, this;
        }, (g.prototype = Object.create(u.prototype)).fn = function(e2, t2, r2) {
          for (; 127 < e2; )
            t2[r2++] = 127 & e2 | 128, e2 >>>= 7;
          t2[r2] = e2;
        }, d.prototype.uint32 = function(e2) {
          return this.len += (this.tail = this.tail.next = new g((e2 >>>= 0) < 128 ? 1 : e2 < 16384 ? 2 : e2 < 2097152 ? 3 : e2 < 268435456 ? 4 : 5, e2)).len, this;
        }, d.prototype.int32 = function(e2) {
          return e2 < 0 ? this._push(f, 10, s.fromNumber(e2)) : this.uint32(e2);
        }, d.prototype.sint32 = function(e2) {
          return this.uint32((e2 << 1 ^ e2 >> 31) >>> 0);
        }, d.prototype.int64 = d.prototype.uint64 = function(e2) {
          return e2 = s.from(e2), this._push(f, e2.length(), e2);
        }, d.prototype.sint64 = function(e2) {
          return e2 = s.from(e2).zzEncode(), this._push(f, e2.length(), e2);
        }, d.prototype.bool = function(e2) {
          return this._push(h, 1, e2 ? 1 : 0);
        }, d.prototype.sfixed32 = d.prototype.fixed32 = function(e2) {
          return this._push(m, 4, e2 >>> 0);
        }, d.prototype.sfixed64 = d.prototype.fixed64 = function(e2) {
          return e2 = s.from(e2), this._push(m, 4, e2.lo)._push(m, 4, e2.hi);
        }, d.prototype.float = function(e2) {
          return this._push(o.float.writeFloatLE, 4, e2);
        }, d.prototype.double = function(e2) {
          return this._push(o.float.writeDoubleLE, 8, e2);
        };
        var _ = o.Array.prototype.set ? function(e2, t2, r2) {
          t2.set(e2, r2);
        } : function(e2, t2, r2) {
          for (var n2 = 0; n2 < e2.length; ++n2)
            t2[r2 + n2] = e2[n2];
        };
        d.prototype.bytes = function(e2) {
          var t2, r2 = e2.length >>> 0;
          return r2 ? (o.isString(e2) && (t2 = d.alloc(r2 = i.length(e2)), i.decode(e2, t2, 0), e2 = t2), this.uint32(r2)._push(_, r2, e2)) : this._push(h, 1, 0);
        }, d.prototype.string = function(e2) {
          var t2 = a.length(e2);
          return t2 ? this.uint32(t2)._push(a.write, t2, e2) : this._push(h, 1, 0);
        }, d.prototype.fork = function() {
          return this.states = new l(this), this.head = this.tail = new u(c, 0, 0), this.len = 0, this;
        }, d.prototype.reset = function() {
          return this.states ? (this.head = this.states.head, this.tail = this.states.tail, this.len = this.states.len, this.states = this.states.next) : (this.head = this.tail = new u(c, 0, 0), this.len = 0), this;
        }, d.prototype.ldelim = function() {
          var e2 = this.head, t2 = this.tail, r2 = this.len;
          return this.reset().uint32(r2), r2 && (this.tail.next = e2.next, this.tail = t2, this.len += r2), this;
        }, d.prototype.finish = function() {
          for (var e2 = this.head.next, t2 = this.constructor.alloc(this.len), r2 = 0; e2; )
            e2.fn(e2.val, t2, r2), r2 += e2.len, e2 = e2.next;
          return t2;
        }, d._configure = function(e2) {
          n = e2, d.create = p(), n._configure();
        };
      }, function(e, t, r) {
        "use strict";
        e.exports = u;
        var n, o = r(10), s = o.LongBits, i = o.utf8;
        function a(e2, t2) {
          return RangeError("index out of range: " + e2.pos + " + " + (t2 || 1) + " > " + e2.len);
        }
        function u(e2) {
          this.buf = e2, this.pos = 0, this.len = e2.length;
        }
        function c() {
          return o.Buffer ? function(e2) {
            return (u.create = function(e3) {
              return o.Buffer.isBuffer(e3) ? new n(e3) : d(e3);
            })(e2);
          } : d;
        }
        var l, d = "undefined" != typeof Uint8Array ? function(e2) {
          if (e2 instanceof Uint8Array || Array.isArray(e2))
            return new u(e2);
          throw Error("illegal buffer");
        } : function(e2) {
          if (Array.isArray(e2))
            return new u(e2);
          throw Error("illegal buffer");
        };
        function p() {
          var e2 = new s(0, 0), t2 = 0;
          if (!(4 < this.len - this.pos)) {
            for (; t2 < 3; ++t2) {
              if (this.pos >= this.len)
                throw a(this);
              if (e2.lo = (e2.lo | (127 & this.buf[this.pos]) << 7 * t2) >>> 0, this.buf[this.pos++] < 128)
                return e2;
            }
            return e2.lo = (e2.lo | (127 & this.buf[this.pos++]) << 7 * t2) >>> 0, e2;
          }
          for (; t2 < 4; ++t2)
            if (e2.lo = (e2.lo | (127 & this.buf[this.pos]) << 7 * t2) >>> 0, this.buf[this.pos++] < 128)
              return e2;
          if (e2.lo = (e2.lo | (127 & this.buf[this.pos]) << 28) >>> 0, e2.hi = (e2.hi | (127 & this.buf[this.pos]) >> 4) >>> 0, this.buf[this.pos++] < 128)
            return e2;
          if (t2 = 0, 4 < this.len - this.pos) {
            for (; t2 < 5; ++t2)
              if (e2.hi = (e2.hi | (127 & this.buf[this.pos]) << 7 * t2 + 3) >>> 0, this.buf[this.pos++] < 128)
                return e2;
          } else
            for (; t2 < 5; ++t2) {
              if (this.pos >= this.len)
                throw a(this);
              if (e2.hi = (e2.hi | (127 & this.buf[this.pos]) << 7 * t2 + 3) >>> 0, this.buf[this.pos++] < 128)
                return e2;
            }
          throw Error("invalid varint encoding");
        }
        function h(e2, t2) {
          return (e2[t2 - 4] | e2[t2 - 3] << 8 | e2[t2 - 2] << 16 | e2[t2 - 1] << 24) >>> 0;
        }
        function g() {
          if (this.pos + 8 > this.len)
            throw a(this, 8);
          return new s(h(this.buf, this.pos += 4), h(this.buf, this.pos += 4));
        }
        u.create = c(), u.prototype._slice = o.Array.prototype.subarray || o.Array.prototype.slice, u.prototype.uint32 = (l = 4294967295, function() {
          if (l = (127 & this.buf[this.pos]) >>> 0, this.buf[this.pos++] < 128)
            return l;
          if (l = (l | (127 & this.buf[this.pos]) << 7) >>> 0, this.buf[this.pos++] < 128)
            return l;
          if (l = (l | (127 & this.buf[this.pos]) << 14) >>> 0, this.buf[this.pos++] < 128)
            return l;
          if (l = (l | (127 & this.buf[this.pos]) << 21) >>> 0, this.buf[this.pos++] < 128)
            return l;
          if (l = (l | (15 & this.buf[this.pos]) << 28) >>> 0, this.buf[this.pos++] < 128)
            return l;
          if ((this.pos += 5) > this.len)
            throw this.pos = this.len, a(this, 10);
          return l;
        }), u.prototype.int32 = function() {
          return 0 | this.uint32();
        }, u.prototype.sint32 = function() {
          var e2 = this.uint32();
          return e2 >>> 1 ^ -(1 & e2) | 0;
        }, u.prototype.bool = function() {
          return 0 !== this.uint32();
        }, u.prototype.fixed32 = function() {
          if (this.pos + 4 > this.len)
            throw a(this, 4);
          return h(this.buf, this.pos += 4);
        }, u.prototype.sfixed32 = function() {
          if (this.pos + 4 > this.len)
            throw a(this, 4);
          return 0 | h(this.buf, this.pos += 4);
        }, u.prototype.float = function() {
          if (this.pos + 4 > this.len)
            throw a(this, 4);
          var e2 = o.float.readFloatLE(this.buf, this.pos);
          return this.pos += 4, e2;
        }, u.prototype.double = function() {
          if (this.pos + 8 > this.len)
            throw a(this, 4);
          var e2 = o.float.readDoubleLE(this.buf, this.pos);
          return this.pos += 8, e2;
        }, u.prototype.bytes = function() {
          var e2 = this.uint32(), t2 = this.pos, r2 = this.pos + e2;
          if (r2 > this.len)
            throw a(this, e2);
          return this.pos += e2, Array.isArray(this.buf) ? this.buf.slice(t2, r2) : t2 === r2 ? new this.buf.constructor(0) : this._slice.call(this.buf, t2, r2);
        }, u.prototype.string = function() {
          var e2 = this.bytes();
          return i.read(e2, 0, e2.length);
        }, u.prototype.skip = function(e2) {
          if ("number" == typeof e2) {
            if (this.pos + e2 > this.len)
              throw a(this, e2);
            this.pos += e2;
          } else
            do {
              if (this.pos >= this.len)
                throw a(this);
            } while (128 & this.buf[this.pos++]);
          return this;
        }, u.prototype.skipType = function(e2) {
          switch (e2) {
            case 0:
              this.skip();
              break;
            case 1:
              this.skip(8);
              break;
            case 2:
              this.skip(this.uint32());
              break;
            case 3:
              for (; 4 != (e2 = 7 & this.uint32()); )
                this.skipType(e2);
              break;
            case 5:
              this.skip(4);
              break;
            default:
              throw Error("invalid wire type " + e2 + " at offset " + this.pos);
          }
          return this;
        }, u._configure = function(e2) {
          n = e2, u.create = c(), n._configure();
          var t2 = o.Long ? "toLong" : "toNumber";
          o.merge(u.prototype, { int64: function() {
            return p.call(this)[t2](false);
          }, uint64: function() {
            return p.call(this)[t2](true);
          }, sint64: function() {
            return p.call(this).zzDecode()[t2](false);
          }, fixed64: function() {
            return g.call(this)[t2](true);
          }, sfixed64: function() {
            return g.call(this)[t2](false);
          } });
        };
      }, function(e, t, r) {
        "use strict";
        r.d(t, "b", function() {
          return n;
        }), r.d(t, "c", function() {
          return o;
        }), r.d(t, "a", function() {
          return s;
        });
        var n = function() {
          return function(e2, t2, r2) {
            return { value: function() {
              for (var t3 = [], n2 = 0; n2 < arguments.length; n2++)
                t3[n2] = arguments[n2];
              var o2 = e2.createNotInitError.call(this);
              return o2 ? Promise.reject(o2) : r2.value.apply(this, t3);
            } };
          };
        }, o = function(e2, t2) {
          return function(r2, n2, o2) {
            return { value: function() {
              for (var n3 = [], s2 = 0; s2 < arguments.length; s2++)
                n3[s2] = arguments[s2];
              var i = r2.createNotLoggedError.call(this, e2, t2);
              return i ? Promise.reject(i) : o2.value.apply(this, n3);
            } };
          };
        }, s = function(e2, t2, r2) {
          var n2, o2 = 0;
          return function(s2, i, a) {
            return { value: function() {
              for (var i2 = [], u = 0; u < arguments.length; u++)
                i2[u] = arguments[u];
              var c = Date.now();
              if (o2++, c - (n2 = n2 || c) < t2) {
                if (e2 < o2)
                  return Promise.reject(s2.createFrequencyLimitError.call(this, r2));
              } else
                n2 = c, o2 = 0;
              return a.value.apply(this, i2);
            } };
          };
        };
      }, function(e, t, r) {
        "use strict";
        r.d(t, "m", function() {
          return a;
        }), r.d(t, "g", function() {
          return u;
        }), r.d(t, "h", function() {
          return c;
        }), r.d(t, "j", function() {
          return l;
        }), r.d(t, "i", function() {
          return d;
        }), r.d(t, "f", function() {
          return p;
        }), r.d(t, "c", function() {
          return h;
        }), r.d(t, "b", function() {
          return g;
        }), r.d(t, "l", function() {
          return f;
        }), r.d(t, "k", function() {
          return m;
        }), r.d(t, "n", function() {
          return _;
        }), r.d(t, "o", function() {
          return b;
        }), r.d(t, "e", function() {
          return y;
        }), r.d(t, "d", function() {
          return M;
        }), r.d(t, "a", function() {
          return k;
        });
        t = r(3);
        var n = r.n(t), o = r(6), s = r(0), i = -1 != "web".indexOf("wx"), a = i ? "undefined" != typeof tt ? (tt._zim_platform = "douyin", tt._zim_env = tt.env.VERSION, tt) : "undefined" != typeof swan ? (swan._zim_platform = "baidu", swan._zim_env = "", swan) : "undefined" != typeof my ? (my._zim_platform = "alipay", my._zim_isAlipay = true, my._zim_env = my.getAccountInfoSync().miniProgram.envVersion, my) : "undefined" != typeof wx ? (wx._zim_platform = "weixin", wx._zim_env = wx.getAccountInfoSync().miniProgram.envVersion, wx) : null : null, u = function() {
          var e2, t2, r2 = "z_deviceID", n2 = (e2 = (/* @__PURE__ */ new Date()).getTime(), "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(t3) {
            var r3 = (e2 + 16 * Math.random()) % 16 | 0;
            return e2 = Math.floor(e2 / 16), ("x" == t3 ? r3 : 3 & r3 | 8).toString(36);
          })), o2 = "";
          try {
            i ? (t2 = a.getStorageSync(a._zim_isAlipay ? { key: r2 } : r2) || "") && t2.data ? o2 = "object" == typeof t2 ? t2.data : t2 : (o2 = n2, a._zim_isAlipay ? a.setStorageSync({ key: r2, data: o2 }) : a.setStorageSync(r2, o2)) : (o2 = localStorage.getItem(r2) || "") || (o2 = n2, localStorage.setItem(r2, o2));
          } catch (t3) {
            o2 = n2;
          }
          return o2;
        }(), c = function() {
          if (!i)
            return navigator.userAgent;
          var e2 = (u2 = a.getSystemInfoSync()).brand, t2 = u2.model, r2 = u2.version, n2 = u2.system, o2 = u2.platform, s2 = u2.SDKVersion, u2 = u2.benchmarkLevel;
          return JSON.stringify({ env: a._zim_env, brand: e2, model: t2, version: r2, system: n2, platform: a._zim_platform + "," + o2, SDKVersion: s2, benchmarkLevel: u2 });
        }(), l = function() {
          return (/* @__PURE__ */ new Date()).getTime() + Math.random().toString().substring(2, 7);
        }, d = function(e2) {
          return "string" == typeof e2 ? new Uint8Array(Array.from(unescape(encodeURIComponent(e2 || ""))).map(function(e3) {
            return e3.charCodeAt(0);
          })) : e2;
        }, p = function(e2) {
          if ("string" == typeof e2)
            return e2;
          if (!e2 || !e2.length)
            return "";
          e2 = String.fromCharCode.apply(String, function(e3, t2, r2) {
            if (r2 || 2 === arguments.length)
              for (var n2, o2 = 0, s2 = t2.length; o2 < s2; o2++)
                !n2 && o2 in t2 || ((n2 = n2 || Array.prototype.slice.call(t2, 0, o2))[o2] = t2[o2]);
            return e3.concat(n2 || Array.prototype.slice.call(t2));
          }([], function(e3, t2) {
            var r2 = "function" == typeof Symbol && e3[Symbol.iterator];
            if (!r2)
              return e3;
            var n2, o2, s2 = r2.call(e3), i2 = [];
            try {
              for (; (void 0 === t2 || 0 < t2--) && !(n2 = s2.next()).done; )
                i2.push(n2.value);
            } catch (e4) {
              o2 = { error: e4 };
            } finally {
              try {
                n2 && !n2.done && (r2 = s2.return) && r2.call(s2);
              } finally {
                if (o2)
                  throw o2.error;
              }
            }
            return i2;
          }(Array.from(e2)), false));
          try {
            return decodeURIComponent(escape(e2));
          } catch (t2) {
            return decodeURIComponent(e2);
          }
        }, h = function(e2) {
          return o.a.fromUint8Array(e2);
        }, g = function(e2) {
          return o.a.toUint8Array(e2);
        }, f = function(e2, t2) {
          return !!e2 && "string" == typeof e2 && e2.length <= s.l.MAX_ID_SIZE && (!t2 || "#" != e2[0]);
        }, m = function(e2, t2) {
          if (!e2 || "string" != typeof e2 || e2.length < 31)
            return [6000103];
          if ("04" !== e2.substring(0, 2))
            return [6000107];
          try {
            var r2 = Date.now() / 1e3, s2 = Array.from(o.a.toUint8Array(e2.substring(2, 14))), i2 = n.a.fromBytes(s2.slice(0, 8)).toInt();
            return [i2 < t2 || i2 < r2 ? 6000106 : i2 < 30 + r2 ? 6000108 : 2073600 + r2 < i2 ? 6000109 : 0, i2];
          } catch (e3) {
            return (0, console.warn)("Parse token fail for invalid Base64.", e3), [6000103];
          }
        }, _ = function(e2, t2) {
          var r2 = {};
          return e2.forEach(function(e3) {
            return r2[e3] = t2[e3];
          }), r2;
        }, v = ((t = {})[s.Q.RevokeSelf] = s.N.SelfRevoke, t[s.Q.RevokeSystem] = s.N.SystemRevoke, t[s.Q.RevokeService] = s.N.ServiceAPIRevoke, t[s.Q.RevokeGroupAdmin] = s.N.GroupAdminRevoke, t[s.Q.RevokeGroupOwner] = s.N.GroupOwnerRevoke, t[s.Q.ReceiptDoing] = s.M.Processing, t[s.Q.ReceiptDone] = s.M.Done, t[s.Q.ReceiptExpired] = s.M.Expired, t[s.Q.ReceiptFailed] = s.M.Failed, t), b = function(e2) {
          for (var t2, r2 = 0, n2 = { revoke: 0, receipt: 0 }; e2; )
            1 & e2 && ((t2 = 1 << r2) >= s.Q.RevokeSelf && t2 <= s.Q.RevokeGroupOwner ? n2.revoke += t2 : t2 >= s.Q.ReceiptDone && t2 <= s.Q.ReceiptDoing && (n2.receipt += t2)), r2++, e2 >>= 1;
          return n2.revoke = n2.revoke >= s.Q.RevokeSelf && n2.revoke <= s.Q.RevokeGroupOwner ? v[n2.revoke] : s.N.Unknown, n2.receipt = n2.receipt >= s.Q.ReceiptDone && n2.receipt <= s.Q.ReceiptDoing ? v[n2.receipt] : s.M.None, n2;
        }, y = function(e2) {
          if (e2 && e2.title && e2.content)
            return { enable_push: 1, title: String(e2.title), content: String(e2.content), payload: String(e2.payload || ""), pushStrategyId: String(e2.resourcesID || ""), custom_map: e2.enableBadge || e2.voIPConfig ? { badge_increment: e2.enableBadge ? String(e2.badgeIncrement || 0) : void 0, sdk_params: e2.voIPConfig ? JSON.stringify({ voip_handle_type: e2.voIPConfig.iOSVoIPHandleType, voip_handle_value: String(e2.voIPConfig.iOSVoIPHandleValue || ""), voip_has_video: !!e2.voIPConfig.iOSVoIPHasVideo }) : void 0 } : void 0 };
        }, M = function(e2, t2) {
          return !!e2.isPinned != !!t2.isPinned ? t2.isPinned ? 1 : -1 : t2.orderKey - e2.orderKey;
        }, I = function(e2, t2) {
          if (!e2 || !t2)
            return false;
          if (Object.keys(e2).length !== Object.keys(t2).length)
            return false;
          var r2, n2 = true;
          for (r2 in e2)
            void 0 === t2[r2] && (n2 = false), "object" == ("object" == typeof e2[r2] && typeof t2[r2]) ? n2 = I(e2[r2], t2[r2]) : e2[r2] !== t2[r2] && (n2 = false);
          return n2;
        }, k = function(e2, t2) {
          if (!e2 || !t2)
            return false;
          if (e2.length !== t2.length)
            return false;
          var r2 = true;
          return e2.forEach(function(e3, n2) {
            I(e3, t2[n2]) || (r2 = false);
          }), r2;
        };
      }, function(e, t, r) {
        "use strict";
        var n;
        r.d(t, "a", function() {
          return n;
        }), (r = n = n || {})[r.Success = 0] = "Success", r[r.Failed = 1] = "Failed", r[r.CommonModuleParamInvalid = 6000001] = "CommonModuleParamInvalid", r[r.CommonModuleNotInit = 6000002] = "CommonModuleNotInit", r[r.CommonModuleInvalidAppID = 6000003] = "CommonModuleInvalidAppID", r[r.CommonModuleTriggerSDKFrequencyLimit = 6000004] = "CommonModuleTriggerSDKFrequencyLimit", r[r.CommonModuleTriggerServerFrequencyLimit = 6000005] = "CommonModuleTriggerServerFrequencyLimit", r[r.CommonModuleSwitchServerError = 6000006] = "CommonModuleSwitchServerError", r[r.CommonModuleIMServerError = 6000007] = "CommonModuleIMServerError", r[r.CommonModuleUploadLogError = 6000010] = "CommonModuleUploadLogError", r[r.CommonModuleUserIsNotExist = 6000011] = "CommonModuleUserIsNotExist", r[r.CommonModuleUserInfoQueriedLimit = 6000012] = "CommonModuleUserInfoQueriedLimit", r[r.CommonModuleUnsupportedRequest = 6000013] = "CommonModuleUnsupportedRequest", r[r.CommonModuleUnactivatedIMServer = 6000014] = "CommonModuleUnactivatedIMServer", r[r.CommonModuleExceedDAULimit = 6000015] = "CommonModuleExceedDAULimit", r[r.CommonModuleExceedMAULimit = 6000016] = "CommonModuleExceedMAULimit", r[r.NetworkModuleCommonError = 6000101] = "NetworkModuleCommonError", r[r.NetworkModuleServerError = 6000102] = "NetworkModuleServerError", r[r.NetworkModuleTokenInvalid = 6000103] = "NetworkModuleTokenInvalid", r[r.NetworkModuleNetworkError = 6000104] = "NetworkModuleNetworkError", r[r.NetworkModuleTokenExpired = 6000106] = "NetworkModuleTokenExpired", r[r.NetworkModuleTokenVersionError = 6000107] = "NetworkModuleTokenVersionError", r[r.NetworkModuleTokenTimeIsTooShort = 6000108] = "NetworkModuleTokenTimeIsTooShort", r[r.NetworkModuleTokenTimeIsTooLong = 6000109] = "NetworkModuleTokenTimeIsTooLong", r[r.NetworkModuleUserHasAlreadyLogged = 6000111] = "NetworkModuleUserHasAlreadyLogged", r[r.NetworkModuleUserIsNotLogged = 6000121] = "NetworkModuleUserIsNotLogged", r[r.ConversationModuleCommonError = 6000601] = "ConversationModuleCommonError", r[r.ConversationModuleServerError = 6000602] = "ConversationModuleServerError", r[r.ConversationModuleConversationDoesNotExist = 6000603] = "ConversationModuleConversationDoesNotExist", r[r.ConversationModulePinnedListReachedLimit = 6000604] = "ConversationModulePinnedListReachedLimit", r[r.MessageModuleCommonError = 6000201] = "MessageModuleCommonError", r[r.MessageModuleServerError = 6000202] = "MessageModuleServerError", r[r.MessageModuleSendMessageFailed = 6000203] = "MessageModuleSendMessageFailed", r[r.MessageModuleTargetDoesNotExist = 6000204] = "MessageModuleTargetDoesNotExist", r[r.MessageModuleFileNotExist = 6000211] = "MessageModuleFileNotExist", r[r.MessageModuleFileServerError = 6000212] = "MessageModuleFileServerError", r[r.MessageModuleFileTypeUnsupported = 6000213] = "MessageModuleFileTypeUnsupported", r[r.MessageModuleFileSizeInvalid = 6000214] = "MessageModuleFileSizeInvalid", r[r.MessageModuleFileDurationInvalid = 6000215] = "MessageModuleFileDurationInvalid", r[r.MessageModuleAuditRejected = 6000221] = "MessageModuleAuditRejected", r[r.MessageModuleAuditFailed = 6000222] = "MessageModuleAuditFailed", r[r.MessageModuleAuditCustomSentRejected = 6000230] = "MessageModuleAuditCustomSentRejected", r[r.MessageModuleReceiptReadError = 6000277] = "MessageModuleReceiptReadError", r[r.MessageModuleMessageExceedsRevokeTime = 6000278] = "MessageModuleMessageExceedsRevokeTime", r[r.MessageModuleMessageHasBeenRevoked = 6000279] = "MessageModuleMessageHasBeenRevoked", r[r.MessageModuleMessageReactionTypeExisted = 6000280] = "MessageModuleMessageReactionTypeExisted", r[r.MessageModuleMessageReceiptLimit = 6000282] = "MessageModuleMessageReceiptLimit", r[r.RoomModuleCommonError = 6000301] = "RoomModuleCommonError", r[r.RoomModuleServerError = 6000302] = "RoomModuleServerError", r[r.RoomModuleCreateRoomError = 6000303] = "RoomModuleCreateRoomError", r[r.RoomModuleJoinRoomError = 6000304] = "RoomModuleJoinRoomError", r[r.RoomModuleLeaveRoomError = 6000306] = "RoomModuleLeaveRoomError", r[r.RoomModuleTheRoomMemberQueryFailed = 6000310] = "RoomModuleTheRoomMemberQueryFailed", r[r.RoomModuleTheRoomMembersQueryFailedCompletely = 6000311] = "RoomModuleTheRoomMembersQueryFailedCompletely", r[r.RoomModuleUserIsNotInTheRoom = 6000321] = "RoomModuleUserIsNotInTheRoom", r[r.RoomModuleTheRoomDoesNotExist = 6000322] = "RoomModuleTheRoomDoesNotExist", r[r.RoomModuleTheRoomAlreadyExists = 6000323] = "RoomModuleTheRoomAlreadyExists", r[r.RoomModuleTheNumberOfExistingRoomsHasReachedLimit = 6000324] = "RoomModuleTheNumberOfExistingRoomsHasReachedLimit", r[r.RoomModuleTheNumberOfJoinedRoomsHasReachedLimit = 6000325] = "RoomModuleTheNumberOfJoinedRoomsHasReachedLimit", r[r.RoomModuleRoomAttributesCommonError = 6000330] = "RoomModuleRoomAttributesCommonError", r[r.RoomModuleRoomAttributesOperationFailedCompletely = 6000331] = "RoomModuleRoomAttributesOperationFailedCompletely", r[r.RoomModuleRoomAttributesQueryFailed = 6000333] = "RoomModuleRoomAttributesQueryFailed", r[r.RoomModuleTheNumberOfRoomAttributesExceedsLimit = 6000334] = "RoomModuleTheNumberOfRoomAttributesExceedsLimit", r[r.RoomModuleTheLengthOfRoomAttributeKeyExceedsLimit = 6000335] = "RoomModuleTheLengthOfRoomAttributeKeyExceedsLimit", r[r.RoomModuleTheLengthOfRoomAttributeValueExceedsLimit = 6000336] = "RoomModuleTheLengthOfRoomAttributeValueExceedsLimit", r[r.RoomModuleTheTotalLengthOfRoomAttributesValueExceedsLimit = 6000337] = "RoomModuleTheTotalLengthOfRoomAttributesValueExceedsLimit", r[r.RoomModuleRoomMemberAttributesCommonError = 6000350] = "RoomModuleRoomMemberAttributesCommonError", r[r.RoomModuleTheTotalLengthOfRoomMemberAttributesExceedsLimit = 6000351] = "RoomModuleTheTotalLengthOfRoomMemberAttributesExceedsLimit", r[r.RoomModuleTheLengthOfRoomMemberAttributesKeyExceedsLimit = 6000352] = "RoomModuleTheLengthOfRoomMemberAttributesKeyExceedsLimit", r[r.RoomModuleTheLengthOfRoomMemberAttributesValueExceedsLimit = 6000353] = "RoomModuleTheLengthOfRoomMemberAttributesValueExceedsLimit", r[r.RoomModuleTheMemberNumberOfRoomMemberAttributesExceedsLimit = 6000357] = "RoomModuleTheMemberNumberOfRoomMemberAttributesExceedsLimit", r[r.GroupModuleCommonError = 6000501] = "GroupModuleCommonError", r[r.GroupModuleServerError = 6000502] = "GroupModuleServerError", r[r.GroupModuleCreateGroupError = 6000503] = "GroupModuleCreateGroupError", r[r.GroupModuleDismissGroupError = 6000504] = "GroupModuleDismissGroupError", r[r.GroupModuleJoinGroupError = 6000505] = "GroupModuleJoinGroupError", r[r.GroupModuleLeaveGroupError = 6000506] = "GroupModuleLeaveGroupError", r[r.GroupModuleKickoutGroupMemberError = 6000507] = "GroupModuleKickoutGroupMemberError", r[r.GroupModuleInviteUserIntoGroupError = 6000508] = "GroupModuleInviteUserIntoGroupError", r[r.GroupModuleTransferOwnerError = 6000509] = "GroupModuleTransferOwnerError", r[r.GroupModuleUpdateGroupInfoError = 6000510] = "GroupModuleUpdateGroupInfoError", r[r.GroupModuleQueryGroupInfoError = 6000511] = "GroupModuleQueryGroupInfoError", r[r.GroupModuleGroupAttributesOperationFailed = 6000512] = "GroupModuleGroupAttributesOperationFailed", r[r.GroupModuleGroupAttributesQueryFailed = 6000513] = "GroupModuleGroupAttributesQueryFailed", r[r.GroupModuleUpdateGroupMemberInfoError = 6000514] = "GroupModuleUpdateGroupMemberInfoError", r[r.GroupModuleQueryGroupMemberInfoError = 6000515] = "GroupModuleQueryGroupMemberInfoError", r[r.GroupModuleQueryGroupListError = 6000516] = "GroupModuleQueryGroupListError", r[r.GroupModuleQueryGroupMemberListError = 6000517] = "GroupModuleQueryGroupMemberListError", r[r.GroupModuleUserIsNotInTheGroup = 6000521] = "GroupModuleUserIsNotInTheGroup", r[r.GroupModuleMemberIsAlreadyInTheGroup = 6000522] = "GroupModuleMemberIsAlreadyInTheGroup", r[r.GroupModuleGroupDoesNotExist = 6000523] = "GroupModuleGroupDoesNotExist", r[r.GroupModuleGroupAlreadyExists = 6000524] = "GroupModuleGroupAlreadyExists", r[r.GroupModuleGroupMemberHasReachedLimit = 6000525] = "GroupModuleGroupMemberHasReachedLimit", r[r.GroupModuleGroupAttributeDoesNotExist = 6000526] = "GroupModuleGroupAttributeDoesNotExist", r[r.GroupModuleCreateGroupWithDismissed = 6000527] = "GroupModuleCreateGroupWithDismissed", r[r.GroupModuleTheNumberOfGroupAttributesExceedsLimit = 6000531] = "GroupModuleTheNumberOfGroupAttributesExceedsLimit", r[r.GroupModuleTheLengthOfGroupAttributeKeyExceedsLimit = 6000532] = "GroupModuleTheLengthOfGroupAttributeKeyExceedsLimit", r[r.GroupModuleTheLengthOfGroupAttributeValueExceedsLimit = 6000533] = "GroupModuleTheLengthOfGroupAttributeValueExceedsLimit", r[r.GroupModuleTheTotalLengthOfGroupAttributesValueExceedsLimit = 6000534] = "GroupModuleTheTotalLengthOfGroupAttributesValueExceedsLimit", r[r.GroupModuleNoCorrespondingOperationAuthority = 6000541] = "GroupModuleNoCorrespondingOperationAuthority", r[r.CallModuleCommonError = 6000270] = "CallModuleCommonError", r[r.CallModuleCancelError = 6000271] = "CallModuleCancelError", r[r.CallModuleServerError = 6000272] = "CallModuleServerError", r[r.CallModuleIsNotInvitor = 6000273] = "CallModuleIsNotInvitor", r[r.CallModuleIsNotInvitee = 6000274] = "CallModuleIsNotInvitee", r[r.CallModuleAlreadyExists = 6000275] = "CallModuleAlreadyExists", r[r.CallModuleDoesNotExist = 6000276] = "CallModuleDoesNotExist", r[r.CallModuleInviteUserDoesNotExist = 6000281] = "CallModuleInviteUserDoesNotExist", r[r.CallModuleUserAlreadyInTheCall = 6000283] = "CallModuleUserAlreadyInTheCall";
      }, function(e, t, r) {
        "use strict";
        var n, o, s, i;
        r.d(t, "b", function() {
          return n;
        }), r.d(t, "a", function() {
          return o;
        }), r.d(t, "d", function() {
          return s;
        }), r.d(t, "c", function() {
          return i;
        }), (r = n = n || {})[r.Disconnected = 0] = "Disconnected", r[r.Connecting = 1] = "Connecting", r[r.Connected = 2] = "Connected", r[r.Reconnecting = 3] = "Reconnecting", (t = o = o || {})[t.Success = 0] = "Success", t[t.ActiveLogin = 1] = "ActiveLogin", t[t.LoginTimeout = 2] = "LoginTimeout", t[t.LoginInterrupted = 3] = "LoginInterrupted", t[t.KickedOut = 4] = "KickedOut", (r = s = s || {})[r.Low = 1] = "Low", r[r.Medium = 2] = "Medium", r[r.High = 3] = "High", (t = i = i || {})[t.None = 0] = "None", t[t.Include = 1] = "Include", t[t.Exclude = 2] = "Exclude";
      }, function(e, t, r) {
        "use strict";
        var n, o, s;
        r.d(t, "a", function() {
          return n;
        }), r.d(t, "b", function() {
          return o;
        }), r.d(t, "c", function() {
          return s;
        }), (r = n = n || {})[r.Unknown = -1] = "Unknown", r[r.General = 0] = "General", r[r.Advanced = 1] = "Advanced", (t = o = o || {})[t.Unknown = -1] = "Unknown", t[t.Started = 1] = "Started", t[t.Ended = 2] = "Ended", (r = s = s || {})[r.Unknown = -1] = "Unknown", r[r.Inviting = 0] = "Inviting", r[r.Accepted = 1] = "Accepted", r[r.Rejected = 2] = "Rejected", r[r.Cancelled = 3] = "Cancelled", r[r.Offline = 4] = "Offline", r[r.Received = 5] = "Received", r[r.Timeout = 6] = "Timeout", r[r.Quit = 7] = "Quit", r[r.Ended = 8] = "Ended";
      }, function(e, t, r) {
        "use strict";
        var n, o, s, i, a, u, c, l, d;
        r.d(t, "c", function() {
          return n;
        }), r.d(t, "a", function() {
          return o;
        }), r.d(t, "b", function() {
          return s;
        }), r.d(t, "h", function() {
          return i;
        }), r.d(t, "g", function() {
          return a;
        }), r.d(t, "d", function() {
          return u;
        }), r.d(t, "e", function() {
          return c;
        }), r.d(t, "f", function() {
          return l;
        }), r.d(t, "i", function() {
          return d;
        }), (r = n = n || {})[r.Unknown = -1] = "Unknown", r[r.Peer = 0] = "Peer", r[r.Room = 1] = "Room", r[r.Group = 2] = "Group", (t = o = o || {})[t.Added = 0] = "Added", t[t.Updated = 1] = "Updated", t[t.Disabled = 2] = "Disabled", t[t.Deleted = 3] = "Deleted", (r = s = s || {})[r.Notify = 1] = "Notify", r[r.DoNotDisturb = 2] = "DoNotDisturb", (t = i = i || {})[t.Unknown = 0] = "Unknown", t[t.Text = 1] = "Text", t[t.Command = 2] = "Command", t[t.Image = 11] = "Image", t[t.File = 12] = "File", t[t.Audio = 13] = "Audio", t[t.Video = 14] = "Video", t[t.Barrage = 20] = "Barrage", t[t.System = 30] = "System", t[t.Revoke = 31] = "Revoke", t[t.Custom = 200] = "Custom", (r = a = a || {})[r.Sending = 0] = "Sending", r[r.Success = 1] = "Success", r[r.Failed = 2] = "Failed", (t = u = u || {})[t.Send = 0] = "Send", t[t.Receive = 1] = "Receive", (r = c = c || {})[r.None = 0] = "None", r[r.Processing = 1] = "Processing", r[r.Done = 2] = "Done", r[r.Expired = 3] = "Expired", r[r.Failed = 4] = "Failed", (t = l = l || {})[t.Unknown = -1] = "Unknown", t[t.SelfRevoke = 0] = "SelfRevoke", t[t.SystemRevoke = 1] = "SystemRevoke", t[t.ServiceAPIRevoke = 2] = "ServiceAPIRevoke", t[t.GroupAdminRevoke = 3] = "GroupAdminRevoke", t[t.GroupOwnerRevoke = 4] = "GroupOwnerRevoke", (r = d = d || {})[r.TwoWay = 0] = "TwoWay", r[r.OneWay = 1] = "OneWay";
      }, function(e, t, r) {
        "use strict";
        var n, o, s, i, a, u;
        r.d(t, "e", function() {
          return n;
        }), r.d(t, "f", function() {
          return o;
        }), r.d(t, "b", function() {
          return s;
        }), r.d(t, "d", function() {
          return i;
        }), r.d(t, "c", function() {
          return a;
        }), r.d(t, "a", function() {
          return u;
        }), (r = n = n || {})[r.Notify = 1] = "Notify", r[r.Disturb = 2] = "Disturb", (t = o = o || {})[t.Quit = 0] = "Quit", t[t.Enter = 1] = "Enter", (r = s = s || {})[r.Created = 1] = "Created", r[r.Dismissed = 2] = "Dismissed", r[r.Joined = 3] = "Joined", r[r.Invited = 4] = "Invited", r[r.Left = 5] = "Left", r[r.KickedOut = 6] = "KickedOut", (t = i = i || {})[t.Quit = 0] = "Quit", t[t.Enter = 1] = "Enter", (r = a = a || {})[r.Joined = 1] = "Joined", r[r.Left = 2] = "Left", r[r.KickedOut = 4] = "KickedOut", r[r.Invited = 5] = "Invited", (t = u = u || {})[t.Set = 0] = "Set", t[t.Delete = 1] = "Delete";
      }, function(e, t, r) {
        "use strict";
        var n, o, s;
        r.d(t, "c", function() {
          return n;
        }), r.d(t, "b", function() {
          return o;
        }), r.d(t, "a", function() {
          return s;
        }), (r = n = n || {})[r.Disconnected = 0] = "Disconnected", r[r.Connecting = 1] = "Connecting", r[r.Connected = 2] = "Connected", (t = o = o || {})[t.Success = 0] = "Success", t[t.NetworkInterrupted = 1] = "NetworkInterrupted", t[t.NetworkDisconnected = 2] = "NetworkDisconnected", t[t.RoomNotExist = 3] = "RoomNotExist", t[t.ActiveCreate = 4] = "ActiveCreate", t[t.CreateFailed = 5] = "CreateFailed", t[t.ActiveEnter = 6] = "ActiveEnter", t[t.EnterFailed = 7] = "EnterFailed", t[t.KickedOut = 8] = "KickedOut", t[t.ConnectTimeout = 9] = "ConnectTimeout", t[t.KickedOutByOtherDevice = 10] = "KickedOutByOtherDevice", (r = s = s || {})[r.Set = 0] = "Set", r[r.Delete = 1] = "Delete";
      }, function(e, t, r) {
      }, function(e, t, r) {
        "use strict";
        var n, o, s, i, a, u, c, l, d, p, h, g, f;
        r.d(t, "c", function() {
          return n;
        }), r.d(t, "e", function() {
          return o;
        }), r.d(t, "h", function() {
          return s;
        }), r.d(t, "k", function() {
          return i;
        }), r.d(t, "g", function() {
          return a;
        }), r.d(t, "i", function() {
          return u;
        }), r.d(t, "j", function() {
          return c;
        }), r.d(t, "f", function() {
          return l;
        }), r.d(t, "l", function() {
          return d;
        }), r.d(t, "m", function() {
          return p;
        }), r.d(t, "d", function() {
          return h;
        }), r.d(t, "b", function() {
          return g;
        }), r.d(t, "a", function() {
          return f;
        }), (r = n = n || {})[r.Cancel = 0] = "Cancel", r[r.Timeout = 1] = "Timeout", (t = o = o || {})[t.Normal = 0] = "Normal", t[t.Disable = 1] = "Disable", t[t.Delete = 2] = "Delete", (r = s = s || {})[r.Notice = 0] = "Notice", r[r.Name = 1] = "Name", r[r.Avatar = 2] = "Avatar", (t = i = i || {})[t.Owner = 1] = "Owner", t[t.Member = 3] = "Member", (r = a = a || {})[r.Set = 0] = "Set", r[r.Delete = 1] = "Delete", r[r.Push = 2] = "Push", r[r.Query = 3] = "Query", (t = u = u || {})[t.None = 0] = "None", t[t.Enter = 1] = "Enter", t[t.Quit = 2] = "Quit", t[t.Modify = 3] = "Modify", t[t.Kickout = 4] = "Kickout", t[t.Invited = 5] = "Invited", t[t.OwnerQuit = 6] = "OwnerQuit", (r = c = c || {})[r.Nickname = 0] = "Nickname", r[r.Role = 1] = "Role", (t = l = l || {})[t.Other = 0] = "Other", t[t.SDKLogin = 1] = "SDKLogin", t[t.SDKPush = 2] = "SDKPush", t[t.SDKHb = 3] = "SDKHb", t[t.Biz = 4] = "Biz", (r = d = d || {}).Insert = "Insert", r.Sending = "Sending", r.Sended = "Sended", r.Fetch = "Fetch", r.Push = "Push", (t = p = p || {})[t.None = 0] = "None", t[t.RevokeSelf = 4] = "RevokeSelf", t[t.RevokeSystem = 8] = "RevokeSystem", t[t.RevokeService = 12] = "RevokeService", t[t.RevokeGroupAdmin = 16] = "RevokeGroupAdmin", t[t.RevokeGroupOwner = 20] = "RevokeGroupOwner", t[t.ReceiptDone = 64] = "ReceiptDone", t[t.ReceiptExpired = 128] = "ReceiptExpired", t[t.ReceiptFailed = 192] = "ReceiptFailed", t[t.ReceiptDoing = 256] = "ReceiptDoing", t[t.VoteDoing = 1024] = "VoteDoing", t[t.VoteDone = 2048] = "VoteDone", (r = h = h || {})[r.DontDisturb = -1] = "DontDisturb", r[r.RecoverDisturb = 0] = "RecoverDisturb", r[r.HandleMessage = 1] = "HandleMessage", (t = g = g || {})[t.Insert = 0] = "Insert", t[t.Remove = 1] = "Remove", (r = f = f || {})[r.FetchAll = 0] = "FetchAll", r[r.FetchMessageList = 1] = "FetchMessageList", r[r.FetchMessageStatusList = 2] = "FetchMessageStatusList";
      }, function(e, t, r) {
        "use strict";
        r.d(t, "d", function() {
          return s;
        }), r.d(t, "c", function() {
          return n;
        }), r.d(t, "b", function() {
          return o;
        }), r.d(t, "a", function() {
          return i;
        });
        var n, o, s = 100021, i = ((r = n = n || {})[r.SDK = 0] = "SDK", r[r.API = 1] = "API", (t = o = o || {})[t.Low = 0] = "Low", t[t.Medium = 1] = "Medium", t[t.High = 2] = "High", t[t.Highest = 3] = "Highest", { Accesshub: { cmd: "Accesshub" }, sw_handshake_req: { cmd: "/sw/handshake_req", req: "HandshakeReq" }, sw_login: { cmd: "/sw/login", req: "LoginReq", rsp: "LoginRsp", w: o.Highest }, sw_logout: { cmd: "/sw/logout", req: "LogoutReq", rsp: "CommonCodeMessage", w: o.Highest }, sw_renew_token: { cmd: "/sw/renew_token", req: "ModifyUserInfoReq", rsp: "CommonCodeMessage", w: o.Highest }, sw_hb: { cmd: "/sw/hb", req: "ModifyUserInfoReq", rsp: "HbRsp", w: o.Highest }, sw_push_kickout: { cmd: "/sw/push_kickout", rsp: "ErrList" }, sw_push_redirect: { cmd: "/sw/push_redirect", rsp: "UserInfo" }, sw_push_list: { cmd: "/sw/push_list", rsp: "PushListRequest" }, sw_push_list_rsp: { cmd: "/sw/push_list_rsp", req: "PushListRsp" }, p_detaillog_report: { cmd: "/im/push_detaillog_report", rsp: "CommonCodeMessage" }, p_user_modify: { cmd: "/im/push_modify_userinfo", rsp: "ModifyUserInfoReq" }, p_msg_delete: { cmd: "/im/push_conv_msg_delete", rsp: "PushDelConvMsg" }, p_conv_delete: { cmd: "/im/push_conv_delete", rsp: "ConvInfo" }, p_conv_readseq: { cmd: "/im/push_update_readseq", rsp: "ConvInfo" }, p_conv_mute: { cmd: "/im/push_group_mute", rsp: "ConvInfo" }, p_conv_pinned: { cmd: "/im/push_conv_pinned", rsp: "PushPinnedConvChange" }, p_group_enter: { cmd: "/im/push_enter_group", rsp: "PushEnterGroup" }, p_group_quit: { cmd: "/im/push_quit_group", rsp: "PushGroupOwnerTransfer" }, p_del_all_conv: { cmd: "/im/push_del_all_conv", rsp: "StMsgClientInfo" }, p_clean_unread: { cmd: "/im/push_clean_unread", rsp: "StMsgClientInfo" }, modify_user_info: { cmd: "/sw/modify_info", req: "ModifyUserInfoReq", rsp: "CommonCodeMessage", w: o.Medium }, fetch_user_info: { cmd: "/im/account/fetch_user_info", req: "UserInfo", rsp: "UserInfoRsp", w: o.Low }, userstate_zpns_report: { cmd: "/im/userstate/zpns_report", req: "StGroupAttribute", rsp: "CommonCodeMessage", w: o.Medium }, usermail_hb: { cmd: "/im/usermail/hb", req: "StMsgClientInfo", rsp: "UserMailHbRsp", w: o.Highest }, usermail_convlist: { cmd: "/im/usermail/convlist", req: "GetConvListReq", rsp: "GetConvListRsp", w: o.Highest }, usermail_del_conv: { cmd: "/im/usermail/del_conv", req: "UpdateReadSeqReq", rsp: "ConvDelRsp", w: o.Medium }, usermail_del_all_conv: { cmd: "/im/usermail/del_all_conv", req: "StMsgClientInfo", rsp: "CommonCodeMessage", w: o.Medium }, usermail_update_read_seq: { cmd: "/im/usermail/update_read_seq", req: "UpdateReadSeqReq", rsp: "CommonCodeMessage", w: o.Medium }, usermail_clean_all_unread: { cmd: "/im/usermail/clean_all_unread", req: "StMsgClientInfo", rsp: "CommonCodeMessage", w: o.Medium }, usermail_modify_conv_pinned_lv: { cmd: "/im/usermail/conv_pinned", req: "ConvModifyPinnedLvReq", rsp: "ConvDelRsp", w: o.High }, usermail_convpinnedlist: { cmd: "/im/usermail/convpinnedlist", req: "GetConvListReq", rsp: "GetConvListRsp", w: o.High }, c2c_msg: { cmd: "/im/c2c/msg", req: "C2CMsgReq", rsp: "C2CMsgRsp", w: o.High }, c2c_command: { cmd: "/im/c2c/command", req: "C2CCommandReq", rsp: "C2CCommandReqRsp", w: o.High }, c2c_msglist: { cmd: "/im/usermail/msglist", req: "FetchConvMsgReq", rsp: "FetchConvMsgRsp", w: o.High }, c2c_query_msg: { cmd: "/im/usermail/query_msg", req: "QueryRoomMsgReq", rsp: "QueryRoomMsgRsp", w: o.High }, c2c_del_msg: { cmd: "/im/usermail/del_msg_by_msgid", req: "ConvDelMsgByMsgIdReq", rsp: "CommonCodeMessage", w: o.Medium }, c2c_del_all_msg: { cmd: "/im/usermail/del_all_msg", req: "UpdateReadSeqReq", rsp: "CommonCodeMessage", w: o.Medium }, c2c_fetch_msg: { cmd: "/im/usermail/fetch_c2c_msg", req: "FetchC2CMsgReq", rsp: "FetchC2CMsgRsp", w: o.Low }, group_msg: { cmd: "/im/group/msg", req: "C2CMsgReq", rsp: "GroupMsgRsp", w: o.High }, group_command: { cmd: "/im/group/command", req: "C2CCommandReq", rsp: "C2CCommandReqRsp", w: o.High }, group_msglist: { cmd: "/im/group/msglist", req: "FetchGroupMsgList", rsp: "FetchGroupMsgListRsp", w: o.High }, group_query_msg: { cmd: "/im/group/query_msg", req: "QueryRoomMsgReq", rsp: "QueryRoomMsgRsp", w: o.High }, group_del_msg: { cmd: "/im/group/del_msg", req: "C2CReadReceiptReq", rsp: "CommonCodeMessage", w: o.Medium }, group_del_all_msg: { cmd: "/im/group/del_all_msg", req: "C2CReadReceiptReq", rsp: "CommonCodeMessage", w: o.Medium }, room_msg: { cmd: "/im/room/msg", req: "RoomMsgReq", rsp: "RoomMsgRsp", w: o.High }, room_command: { cmd: "/im/msg/room_msg", req: "RoomCommandMsgReq", rsp: "RoomMsgRsp", w: o.High }, room_msglist: { cmd: "/im/room/room_msglist", req: "RoomMsglistReq", rsp: "RoomMsglistRsp", w: o.High }, room_query_msg: { cmd: "/im/room/query_msg", req: "QueryRoomMsgReq", rsp: "QueryRoomMsgRsp", w: o.High }, p_c2c_msg: { cmd: "/im/push_c2c_msg", rsp: "PushGroupMsg" }, p_c2c_command: { cmd: "/im/push_c2c_command", rsp: "PushC2CCommand" }, p_group_msg: { cmd: "/im/push_group_msg", rsp: "PushGroupMsg" }, p_group_command: { cmd: "/im/push_group_command_msg", rsp: "PushGroupCommand" }, p_room_msg: { cmd: "/im/push_roommsg", rsp: "PushRoomMsg" }, p_room_command: { cmd: "/im/push_room_msg", rsp: "PushRoomCommand" }, p_msg_to_all_users: { cmd: "/im/push_msg_to_all_users", rsp: "PushGroupMsg" }, file_upload: { cmd: "/im/file/upload", req: "FileUploadReq", rsp: "FileUploadRsp", w: o.High }, file_process: { cmd: "/im/file/process", req: "FileUploadReq", rsp: "FileProcessRsp", w: o.High }, file_del: { cmd: "/im/file/delete", req: "FileUploadReq", rsp: "CommonCodeMessage", w: o.Low }, c2c_msg_state_list: { cmd: "/im/usermail/statemsg_list", req: "GetStatemsgListReq", rsp: "GetStatemsgListRsp", w: o.Medium }, group_msg_state_list: { cmd: "/im/group/statemsg_list", req: "GetStatemsgListReq", rsp: "GetStatemsgListRsp", w: o.Medium }, extra_msglist: { cmd: "/im/usermail/extra_msglist", req: "GetExtraMsgListReq", rsp: "GetExtraMsgListRsp", w: o.Medium }, c2c_conv_read_receipt: { cmd: "/im/usermail/conv_read", req: "GetGroupReadReceiptDetailReq", rsp: "ConvDelRsp", w: o.Medium }, c2c_msg_read_receipt: { cmd: "/im/usermail/read_receipt", req: "C2CReadReceiptReq", rsp: "C2CReadReceiptRsp", w: o.Medium }, group_msg_read_receipt: { cmd: "/im/group/read_receipt", req: "C2CReadReceiptReq", rsp: "C2CReadReceiptRsp", w: o.Medium }, msg_read_receipt_detail: { cmd: "/im/usermail/receipt_detail", req: "GetGroupReadReceiptDetailReq", rsp: "GetGroupReadReceiptDetailRsp", w: o.Medium }, c2c_msg_revoke: { cmd: "/im/usermail/msg_revoke", req: "RevokeMsgReq", rsp: "RevokeMsgRsp", w: o.Medium }, group_msg_revoke: { cmd: "/im/group/msg_revoke", req: "RevokeMsgReq", rsp: "RevokeMsgRsp", w: o.Medium }, c2c_add_reaction: { cmd: "/im/usermail/add_reaction", req: "SetReactionReq", rsp: "SetReactionRsp", w: o.Medium }, c2c_del_reaction: { cmd: "/im/usermail/del_reaction", req: "DelReactionReq", rsp: "SetReactionRsp", w: o.Medium }, c2c_get_reaction: { cmd: "/im/usermail/get_reaction_info", req: "ReactionInfoReq", rsp: "ReactionInfoRsp", w: o.Medium }, c2c_reaction_list: { cmd: "/im/usermail/reaction_list", req: "ReactionListReq", rsp: "ReactionListRsp", w: o.Medium }, group_add_reaction: { cmd: "/im/group/add_reaction", req: "SetReactionReq", rsp: "SetReactionRsp", w: o.Medium }, group_del_reaction: { cmd: "/im/group/del_reaction", req: "DelReactionReq", rsp: "SetReactionRsp", w: o.Medium }, group_get_reaction: { cmd: "/im/group/get_reaction_info", req: "ReactionInfoReq", rsp: "ReactionInfoRsp", w: o.Medium }, group_reaction_list: { cmd: "/im/group/reaction_list", req: "ReactionListReq", rsp: "ReactionListRsp", w: o.Medium }, p_read_receipt: { cmd: "/im/push_read_receipt", rsp: "PushReadReceipt" }, p_msg_revoke: { cmd: "/im/push_msg_revoke", rsp: "PushMsgRevoke" }, p_reaction: { cmd: "/im/push_reaction", rsp: "PushMsgReaction" }, room_create: { cmd: "/im/room/create", req: "RoomCreateReq", rsp: "RoomCreateRsp", w: o.High }, room_enter: { cmd: "/im/room/enter", req: "RoomEnterReq", rsp: "RoomEnterRsp", w: o.High }, room_quit: { cmd: "/im/room/quit", req: "QueryRoomUserInfosReq", rsp: "CommonCodeMessage", w: o.High }, room_info: { cmd: "/im/room/info", req: "QueryRoomUserInfosReq", rsp: "RoomInfoRsp", w: o.Highest }, room_userlist: { cmd: "/im/room/userlist", req: "RoomUserlistReq", rsp: "RoomUserlistRsp", w: o.Medium }, room_userinfos: { cmd: "/im/room/user_infos", req: "QueryRoomUserInfosReq", rsp: "UserInfoRsp", w: o.Medium }, room_attributes: { cmd: "/im/room/get_attributes", req: "GetRoomAttributesReq", rsp: "ModifyRoomAttributesRsp", w: o.Low }, room_attributes_modify: { cmd: "/im/room/modify_attributes", req: "ModifyRoomAttributesReq", rsp: "ModifyRoomAttributesRsp", w: o.Medium }, room_user_attributes_modify: { cmd: "/im/room/modify_user_attributes", req: "ModifyRoomUserAttributesReq", rsp: "ModifyRoomUserAttributesRsp", w: o.Medium }, room_user_attributes_get: { cmd: "/im/room/get_user_attributes", req: "GetRoomUserAttributesReq", rsp: "ModifyRoomUserAttributesRsp", w: o.Medium }, room_user_attributes_list_get: { cmd: "/im/room/get_user_attribute_list", req: "GetRoomUserAttributeListReq", rsp: "GetRoomUserAttributeListRsp", w: o.Medium }, p_room_enter: { cmd: "/im/push_room_enter", rsp: "PushRoomEnter" }, p_room_quit: { cmd: "/im/push_room_quit", rsp: "PushRoomEnter" }, p_room_kickout: { cmd: "/im/push_room_kickout", rsp: "PushRoomKickout" }, p_room_attrs: { cmd: "/im/push_room_attrs_modify", rsp: "PushRoomAttributesModify" }, p_room_user_attrs: { cmd: "/im/push_room_user_attrs_modify", rsp: "PushRoomUserAttributesModify" }, group_create: { cmd: "/im/group/create", req: "GroupCreateReq", rsp: "GroupCreateRsp", w: o.Medium }, group_enter: { cmd: "/im/group/enter", req: "GroupInviteReq", rsp: "GroupEnterRsp", w: o.Medium }, group_invite: { cmd: "/im/group/invite", req: "GroupInviteReq", rsp: "GroupInviteRsp", w: o.Medium }, group_quit: { cmd: "/im/group/quit", req: "GroupInviteReq", rsp: "ConvDelRsp", w: o.Medium }, group_kickout: { cmd: "/im/group/kickout", req: "GroupInviteReq", rsp: "GroupKickOutRsp", w: o.Medium }, group_destroy: { cmd: "/im/group/destroy", req: "GroupInviteReq", rsp: "ConvDelRsp", w: o.Medium }, group_list: { cmd: "/im/usermail/grouplist", req: "GetConvListReq", rsp: "GroupListRsp", w: o.High }, group_infos: { cmd: "/im/group/infos", req: "UserInfo", rsp: "GroupInfosRsp", w: o.Low }, group_owner_transfer: { cmd: "/im/group/owner_transfer", req: "GroupCreateReq", rsp: "ConvDelRsp", w: o.Medium }, group_data: { cmd: "/im/group/data", req: "GroupInviteReq", rsp: "GroupDataRsp", w: o.Medium }, group_attributes: { cmd: "/im/group/get_attributes", req: "GroupGetAttributesReq", rsp: "GroupModifyAttributeRsp", w: o.Low }, group_mute: { cmd: "/im/group/mute", req: "GroupMuteReq", rsp: "ConvDelRsp", w: o.Medium }, group_modify_name: { cmd: "/im/group/modify_group_name", req: "GroupCreateReq", rsp: "ConvDelRsp", w: o.Medium }, group_modify_avatar: { cmd: "/im/group/modify_group_avatar", req: "StUserInfo", rsp: "ConvDelRsp", w: o.Medium }, group_modify_notice: { cmd: "/im/group/modify_group_notice", req: "GroupCreateReq", rsp: "ConvDelRsp", w: o.Medium }, group_modify_attributes: { cmd: "/im/group/modify_attribute", req: "GroupModifyAttributeReq", rsp: "GroupModifyAttributeRsp", w: o.Medium }, group_member_list: { cmd: "/im/group/members", req: "GroupGetMembersReq", rsp: "GroupGetMembersRsp", w: o.Medium }, group_members_by_seq: { cmd: "/im/group/members_by_seq", req: "C2CReadReceiptReq", rsp: "GetGroupMembersByMemberSeqRsp", w: o.Medium }, group_member_data: { cmd: "/im/group/member_data", req: "GroupMemberDataReq", rsp: "GroupMemberDataRsp", w: o.Low }, group_member_nickname_set: { cmd: "/im/group/set_nickname", req: "GroupCreateReq", rsp: "ConvDelRsp", w: o.Medium }, group_member_role_set: { cmd: "/im/group/set_member_role", req: "GroupSetMemberRoleReq", rsp: "ConvDelRsp", w: o.Medium }, p_group_create: { cmd: "/im/push_create_group", rsp: "PushCreateGroup" }, p_group_invite: { cmd: "/im/push_group_invite", rsp: "PushGroupInvite" }, p_group_destroy: { cmd: "/im/push_group_destroy", rsp: "PushModifyGroupData" }, p_group_owner_transfer: { cmd: "/im/push_group_owner_transfer", rsp: "PushGroupOwnerTransfer" }, p_group_modify_attributes: { cmd: "/im/push_modify_group_attribute", rsp: "PushModifyGroupAttribute" }, p_group_modify_data: { cmd: "/im/push_modify_group_data", rsp: "PushModifyGroupData" }, p_group_member_change: { cmd: "/im/push_group_member_change", rsp: "PushGroupMemberChange" }, p_group_member_kickout: { cmd: "/im/push_group_member_kickout", rsp: "PushGroupOwnerTransfer" }, call_create: { cmd: "/im/call/create", req: "CallReq", rsp: "CallRsp", w: o.High }, call_cancel: { cmd: "/im/call/cancel", req: "CallReq", rsp: "CallCancelRsp", w: o.High }, call_accept: { cmd: "/im/call/accept", req: "StUserInfo", rsp: "CallQuitRsp", w: o.High }, call_refuse: { cmd: "/im/call/refuse", req: "CallQuitReq", rsp: "CallQuitRsp", w: o.High }, call_ack: { cmd: "/im/call/ack", req: "CallQuitReq", rsp: "CommonCodeMessage", w: o.High }, call_info: { cmd: "/im/call/call_info", req: "CallQuitReq", rsp: "CallInfoRsp", w: o.Medium }, call_invite: { cmd: "/im/call/invite", req: "CallInviteReq", rsp: "CallInviteRsp", w: o.High }, call_quit: { cmd: "/im/call/quit", req: "CallQuitReq", rsp: "CallQuitRsp", w: o.High }, call_enter: { cmd: "/im/call/enter", req: "CallEnterReq", rsp: "CallEnterRsp", w: o.High }, call_destroy: { cmd: "/im/call/destroy", req: "CallQuitReq", rsp: "CallQuitRsp", w: o.High }, call_list: { cmd: "/im/usermail/call_list", req: "CallListReq", rsp: "CallListRsp", w: o.Medium }, p_call_invite: { cmd: "/im/push_call_invite", rsp: "PushCallInvited" }, p_call_cancel: { cmd: "/im/push_call_cancel", rsp: "PushCallCancel" }, p_call_accept: { cmd: "/im/push_call_accept", rsp: "PushCallAccept" }, p_call_refuse: { cmd: "/im/push_call_refuse", rsp: "PushCallRefuse" }, p_call_quit: { cmd: "/im/push_call_quit", rsp: "PushCallQuit" }, p_call_destroy: { cmd: "/im/push_call_destroy", rsp: "PushCallDestroy" }, p_call_inviting: { cmd: "/im/push_on_call_invite", rsp: "PushOnCallInvited" }, p_call_ack: { cmd: "/im/push_call_ack", rsp: "PushCallAck" }, p_call_enter: { cmd: "/im/push_call_enter", rsp: "PushCallEnter" } });
      }, function(e, t, r) {
        "use strict";
        r.d(t, "b", function() {
          return n;
        }), r.d(t, "a", function() {
          return o;
        }), r.d(t, "c", function() {
          return s;
        }), (r = n = n || {}).ILogined = "logined", r.ILogout = "logout", r.IUpdateSelf = "updateSelf", r.IJoinedGroup = "joinedGroup", r.ILeftGroup = "leftGroup", r.ISyncGroups = "syncGroups", r.ISyncGroupInfo = "syncGroupInfo", r.IUnreadMsgCount = "unreadMsgCount", r.IConnectedRoom = "connectedRoom", r.IConnected = "connected", r.IDisConnected = "disConnected", r.INetworkChange = "networkChange", r.IIdleFetchConvMsg = "idleFetchConvMsg", r.ITriggerHB = "triggerHB", r.IQPSSend = "QPSSend", r.Error = "error", r.ConnState = "connectionStateChanged", r.TokenExpire = "tokenWillExpire", r.UserInfoUpdated = "userInfoUpdated", r.ConvChanged = "conversationChanged", r.ConvUnreadMsgCount = "conversationTotalUnreadMessageCountUpdated", r.ConvMsgReceipt = "conversationMessageReceiptChanged", r.ConvAllDeleted = "conversationsAllDeleted", r.MsgReceipt = "messageReceiptChanged", r.MsgRevoke = "messageRevokeReceived", r.MsgReactions = "messageReactionsChanged", r.MsgDeleted = "messageDeleted", r.MsgSentStatus = "messageSentStatusChanged", r.RecvPeerMsg = "receivePeerMessage", r.RecvGroupMsg = "receiveGroupMessage", r.RecvRoomMsg = "receiveRoomMessage", r.BroadcastMsg = "broadcastMessageReceived", r.RoomState = "roomStateChanged", r.RoomMemberJoined = "roomMemberJoined", r.RoomMemberLeft = "roomMemberLeft", r.RoomAttr = "roomAttributesUpdated", r.RoomAttrBatch = "roomAttributesBatchUpdated", r.RoomMemberAttr = "roomMemberAttributesUpdated", r.GroupState = "groupStateChanged", r.GroupName = "groupNameUpdated", r.GroupNotice = "groupNoticeUpdated", r.GroupAvatar = "groupAvatarUrlUpdated", r.GroupAttr = "groupAttributesUpdated", r.GroupMemberState = "groupMemberStateChanged", r.GroupMemberInfo = "groupMemberInfoUpdated", r.CallRecv = "callInvitationReceived", r.CallCancel = "callInvitationCancelled", r.CallTimeout = "callInvitationTimeout", r.CallEnd = "callInvitationEnded", r.CallUserState = "callUserStateChanged", r.CallAccept = "callInvitationAccepted", r.CallReject = "callInvitationRejected", r.CallAnswerTimeout = "callInviteesAnsweredTimeout";
        var n, o = { MAX_ID_SIZE: 1024, MAX_NAME_SIZE: 2048, MAX_MESSAGE_SIZE: 49152, MESSAGE_SEQ_MULTIPLIER: 100, get_user_attribute_qps: 5, get_user_attribute_interval: 3e4, hbTimeoutMaxCount: 3, needReloginCodeList: [50107, 103015, 103021] }, s = { 2: { relatives: [], host: i(2) }, 3: { relatives: [7], host: i(3) }, 4: { relatives: [7], host: i(4) }, 5: { relatives: [7], host: i(5) }, 6: { relatives: [7], host: i(6) }, 7: { relatives: [3, 4, 5, 6, 1], host: i(7) }, 1: { relatives: [7], host: { accesshub: "wss://accesshub-wss.zego.im/accesshub", logreport: "wss://weblogger-wss.zego.im/zglog/web", detaillog: "https://detaillog-global.zego.im", fileproxy: "https://access-zfpxy-global.zego.im" } } };
        function i(e2) {
          return { accesshub: "wss://accesshub-wss" + (e2 = "-geo-" + e2 + ".zego.im") + "/accesshub", logreport: "wss://weblogger-wss" + e2 + "/zglog/web", detaillog: "https://detaillog" + e2, fileproxy: "https://access-zfpxy" + e2 };
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return n;
        });
        var n = { Log: "Log", DataReport: "DataReport", User: "User", Call: "Call", Conv: "Conversation", Group: "Group", MessageExtra: "MessageExtra", Member: "GroupMember", Message: "Message" };
      }, function(e, t, r) {
        "use strict";
        var n, o;
        r.d(t, "b", function() {
          return n;
        }), r.d(t, "a", function() {
          return o;
        }), (r = n = n || {}).Manager = "MGR", r.Connection = "Conn", r.Database = "DB", r.User = "User", r.Conversation = "Conv", r.Strategy = "ST", r.Room = "Room", r.Group = "Group", r.Call = "Call", (t = o = o || {}).SCMD = "SCMD", t.PCMD = "PCMD", t.Create = "API.create", t.Destroy = "API.destroy", t.SetLogConfig = "API.setLogConfig", t.SetGeoFence = "API.setGeofencingConfig", t.UploadLog = "API.uploadLog", t.Login = "API.login", t.Logout = "API.logout", t.RenewToken = "API.renewToken", t.QueryUsersInfo = "API.queryUsersInfo", t.UpdateUserName = "API.updateUserName", t.UpdateUserAvatarUrl = "API.updateUserAvatarUrl", t.UpdateUserExtendedData = "API.updateUserExtendedData", t.QueryConv = "API.queryConversation", t.QueryConvList = "API.queryConversationList", t.QueryPinnedList = "API.queryConversationPinnedList", t.DeleteConv = "API.deleteConversation", t.DeleteAllConv = "API.deleteAllConversations", t.ClearUnreadCount = "API.clearConversationUnreadMessageCount", t.ClearAllUnreadCount = "API.clearConversationTotalUnreadMessageCount", t.SetNotificationStatus = "API.setConversationNotificationStatus", t.UpdatePinnedState = "API.updateConversationPinnedState", t.SendMessage = "API.sendMessage", t.SendMediaMessage = "API.sendMediaMessage", t.DeleteMessages = "API.deleteMessages", t.DeleteAllMessage = "API.deleteAllMessage", t.QueryHistoryMessage = "API.queryHistoryMessage", t.InsertMessageToLocalDB = "API.insertMessageToLocalDB", t.UpdateMessageLocalExtendedData = "API.updateMessageLocalExtendedData", t.RevokeMessage = "API.revokeMessage", t.SendReceiptRead = "API.sendConversationMessageReceiptRead", t.SendMessageReceiptsRead = "API.sendMessageReceiptsRead", t.QueryReceiptsInfo = "API.queryMessageReceiptsInfo", t.QueryReceiptReadMemberList = "API.queryGroupMessageReceiptReadMemberList", t.QueryReceiptUnreadMemberList = "API.queryGroupMessageReceiptUnreadMemberList", t.AddReaction = "API.addMessageReaction", t.DeleteReaction = "API.deleteMessageReaction", t.QueryReaction = "API.queryMessageReactionUserList", t.CreateRoom = "API.createRoom", t.JoinRoom = "API.joinRoom", t.LeaveRoom = "API.leaveRoom", t.QueryRoomMemberList = "API.queryRoomMemberList", t.QueryRoomMembers = "API.queryRoomMembers", t.QueryRoomOnlineMemberCount = "API.queryRoomOnlineMemberCount", t.SetRoomAttributes = "API.setRoomAttributes", t.DeleteRoomAttributes = "API.deleteRoomAttributes", t.QueryRoomAllAttributes = "API.queryRoomAllAttributes", t.BeginRoomAttributesBatchOperation = "API.beginRoomAttributesBatchOperation", t.EndRoomAttributesBatchOperation = "API.endRoomAttributesBatchOperation", t.SetRoomMembersAttributes = "API.setRoomMembersAttributes", t.QueryRoomMembersAttributes = "API.queryRoomMembersAttributes", t.QueryRoomMemberAttributesList = "API.queryRoomMemberAttributesList", t.CreateGroup = "API.createGroup", t.EnterRoom = "API.enterRoom", t.JoinGroup = "API.joinGroup", t.DismissGroup = "API.dismissGroup", t.LeaveGroup = "API.leaveGroup", t.InviteUsersIntoGroup = "API.inviteUsersIntoGroup", t.KickGroupMembers = "API.kickGroupMembers", t.QueryGroupList = "API.queryGroupList", t.QueryGroupMemberList = "API.queryGroupMemberList", t.QueryGroupMemberCount = "API.queryGroupMemberCount", t.TransferGroupOwner = "API.transferGroupOwner", t.QueryGroupInfo = "API.queryGroupInfo", t.UpdateGroupName = "API.updateGroupName", t.UpdateGroupNotice = "API.updateGroupNotice", t.UpdateGroupAvatarUrl = "API.updateGroupAvatarUrl", t.SetGroupAttributes = "API.setGroupAttributes", t.DeleteGroupAttributes = "API.deleteGroupAttributes", t.QueryGroupAttributes = "API.queryGroupAttributes", t.SetGroupMemberNickname = "API.setGroupMemberNickname", t.SetGroupMemberRole = "API.setGroupMemberRole", t.QueryGroupMemberInfo = "API.queryGroupMemberInfo", t.CallInvite = "API.callInvite", t.CallCancel = "API.callCancel", t.CallAccept = "API.callAccept", t.CallReject = "API.callReject", t.CallQuit = "API.callQuit", t.callJoin = "API.callJoin", t.CallEnd = "API.callEnd", t.CallingInvite = "API.callingInvite", t.QueryCallList = "API.queryCallInvitationList", t.SearchConvs = "API.searchLocalConversations", t.SearchGlobalMessages = "API.searchGlobalLocalMessages", t.SearchMessages = "API.searchLocalMessages", t.SearchGroups = "API.searchLocalGroups", t.SearchGroupMembers = "API.searchLocalGroupMembers";
      }, function(e, t) {
        throw new Error("Module parse failed: Unexpected token (6:29)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n| import { ZIMLogTag } from '../entity';\n| \n> export class ZIMFileStoreBase<T extends Record<string, any>> {\n|     private logger = ZIMManager.getInstance().logger;\n|     private logTags: string;");
      }, function(e, t) {
        throw new Error("Module parse failed: Unexpected token (31:26)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n| } from '../entity';\n| \n> export class ZIMStoreImpl implements ZIMStoreBase {\n|     private userID = '';\n|     private userStore: ZIMFileStoreBase<ZIMDBUser>;");
      }, function(e, t, r) {
        "use strict";
        r.r(t), r.d(t, "ZIMStoreImpl", function() {
          return l;
        });
        t = r(78);
        var n = r.n(t), o = r(2), s = r(15), i = r(0), a = function(e2, t2, r2, n2) {
          return new (r2 = r2 || Promise)(function(o2, s2) {
            function i2(e3) {
              try {
                u2(n2.next(e3));
              } catch (e4) {
                s2(e4);
              }
            }
            function a2(e3) {
              try {
                u2(n2.throw(e3));
              } catch (e4) {
                s2(e4);
              }
            }
            function u2(e3) {
              var t3;
              e3.done ? o2(e3.value) : ((t3 = e3.value) instanceof r2 ? t3 : new r2(function(e4) {
                e4(t3);
              })).then(i2, a2);
            }
            u2((n2 = n2.apply(e2, t2 || [])).next());
          });
        }, u = function(e2, t2) {
          var r2, n2, o2, s2 = { label: 0, sent: function() {
            if (1 & o2[0])
              throw o2[1];
            return o2[1];
          }, trys: [], ops: [] }, i2 = { next: a2(0), throw: a2(1), return: a2(2) };
          return "function" == typeof Symbol && (i2[Symbol.iterator] = function() {
            return this;
          }), i2;
          function a2(i3) {
            return function(a3) {
              var u2 = [i3, a3];
              if (r2)
                throw new TypeError("Generator is already executing.");
              for (; s2; )
                try {
                  if (r2 = 1, n2 && (o2 = 2 & u2[0] ? n2.return : u2[0] ? n2.throw || ((o2 = n2.return) && o2.call(n2), 0) : n2.next) && !(o2 = o2.call(n2, u2[1])).done)
                    return o2;
                  switch (n2 = 0, (u2 = o2 ? [2 & u2[0], o2.value] : u2)[0]) {
                    case 0:
                    case 1:
                      o2 = u2;
                      break;
                    case 4:
                      return s2.label++, { value: u2[1], done: false };
                    case 5:
                      s2.label++, n2 = u2[1], u2 = [0];
                      continue;
                    case 7:
                      u2 = s2.ops.pop(), s2.trys.pop();
                      continue;
                    default:
                      if (!(o2 = 0 < (o2 = s2.trys).length && o2[o2.length - 1]) && (6 === u2[0] || 2 === u2[0])) {
                        s2 = 0;
                        continue;
                      }
                      if (3 === u2[0] && (!o2 || u2[1] > o2[0] && u2[1] < o2[3])) {
                        s2.label = u2[1];
                        break;
                      }
                      if (6 === u2[0] && s2.label < o2[1]) {
                        s2.label = o2[1], o2 = u2;
                        break;
                      }
                      if (o2 && s2.label < o2[2]) {
                        s2.label = o2[2], s2.ops.push(u2);
                        break;
                      }
                      o2[2] && s2.ops.pop(), s2.trys.pop();
                      continue;
                  }
                  u2 = t2.call(e2, s2);
                } catch (a4) {
                  u2 = [6, a4], n2 = 0;
                } finally {
                  r2 = o2 = 0;
                }
              if (5 & u2[0])
                throw u2[1];
              return { value: u2[0] ? u2[1] : void 0, done: true };
            };
          }
        }, c = i.J.Database, l = (d.prototype.destroy = function() {
          this.storeMap.forEach(function(e2) {
            return e2.close();
          }), this.storeMap.clear(), this.unloadDB();
        }, d.prototype.clearDB = function(e2) {
          var t2 = this;
          this.unloadDB(), o.a.getInstance().dataReport.clearDB(), this.createStaticDB().then(function(r2) {
            r2.transaction([i.r.Log], "readwrite").objectStore(i.r.Log).clear(), r2.transaction([i.r.DataReport], "readwrite").objectStore(i.r.DataReport).clear(), r2.transaction([i.r.User], "readwrite").objectStore(i.r.User).put(e2), t2.innerDeleteAllByOwnerID(r2, i.r.Call, t2.userID), t2.innerDeleteAllByOwnerID(r2, i.r.Conv, t2.userID), t2.innerDeleteAllByOwnerID(r2, i.r.Group, t2.userID), t2.innerDeleteAllByOwnerID(r2, i.r.MessageExtra, t2.userID);
          }), this.createGlobalDB().then(function(e3) {
            e3.transaction([i.r.Member], "readwrite").objectStore(i.r.Member).clear(), e3.transaction([i.r.Message], "readwrite").objectStore(i.r.Message).clear();
          });
        }, d.prototype.loadDB = function() {
          var e2 = this, t2 = Date.now();
          this.createGlobalDB().then(function(t3) {
            return e2.innerGetAll(t3, i.r.Member, "loadGDB");
          }).then(function(r2) {
            r2.forEach(function(t3) {
              return e2.globalMemberMap.set(t3.id, t3);
            }), e2.reportLog.memberTime = Date.now() - t2, e2.handleMemberCallbackList(), setTimeout(function() {
              return e2.copyOldDB2GlobalDB();
            }, 1e3);
          });
        }, d.prototype.unloadDB = function() {
          this.isGlobalMsg = false, this.isGlobalMember = false, this.globalMsgMap.clear(), this.globalMemberMap.clear(), this.searchMsgByConvCallbackList.length = 0, this.searchMsgCallbackList.length = 0, this.searchGroupsCallbackList.length = 0, this.searchMembersCallbackList.length = 0, this.getMembersCallbackList.length = 0;
        }, d.prototype.searchConversations = function(e2) {
          var t2 = this;
          return new Promise(function(r2) {
            var n2 = /* @__PURE__ */ new Date();
            t2.innerSearchMessagesByConv(true, e2, function(o2) {
              var s2 = o2.length, a2 = (o2.forEach(function(t3) {
                t3.messageList.sort(function(e3, t4) {
                  return t4.timestamp - e3.timestamp;
                }), t3.totalMessageCount > e2.conversationMessageCount && (t3.messageList = t3.messageList.slice(0, e2.conversationMessageCount));
              }), o2.sort(function(e3, t3) {
                return t3.messageList[0].timestamp - e3.messageList[0].timestamp;
              }), e2.nextFlag), u2 = a2 ? o2.findIndex(function(e3) {
                return e3.messageList[0].timestamp <= a2;
              }) + 1 : 0, l2 = u2 + e2.totalConversationCount, d2 = o2[l2] ? o2[l2 - 1].messageList[0].timestamp : void 0, p = (o2 = o2.slice(u2, l2), t2.globalMsgMap.size);
              p = { time: n2, dbCount: p, start: u2, end: l2, total: s2, count: o2.length, config: e2 };
              t2.logger.info(c, i.I.SearchConvs, p), r2({ conversationSearchInfoList: o2, nextFlag: d2 });
            });
          });
        }, d.prototype.searchGlobalMessages = function(e2) {
          var t2 = this;
          return new Promise(function(r2) {
            t2.innerSearchMessages(true, "", 0, e2, function(e3, n2) {
              t2.logger.info(c, i.I.SearchGlobalMessages, n2), r2(e3);
            });
          });
        }, d.prototype.searchMessages = function(e2, t2, r2) {
          var n2 = this;
          return new Promise(function(o2) {
            n2.innerSearchMessages(true, e2, t2, r2, function(r3, s2) {
              n2.logger.info(c, i.I.SearchMessages, s2), o2({ conversationID: e2, conversationType: t2, messageList: r3.messageList, nextMessage: r3.nextMessage });
            });
          });
        }, d.prototype.searchGroups = function(e2, t2, r2, n2, o2) {
          var s2, i2 = this;
          if (!t2 && !r2)
            return n2([], 0);
          o2 || this.isGlobalMember ? (s2 = [], this.globalMemberMap.forEach(function(n3) {
            (t2 && !r2 && i2.isSomeKeys(n3.userName, e2) || r2 && !t2 && i2.isSomeKeys(n3.memberNickname, e2) || i2.isSomeKeys(n3.userName, e2) && i2.isSomeKeys(n3.memberNickname, e2)) && s2.push(n3);
          }), n2(s2, this.globalMemberMap.size)) : this.searchGroupsCallbackList.push({ keywords: e2, isName: t2, isNick: r2, resolve: n2 });
        }, d.prototype.searchGroupMembers = function(e2, t2) {
          var r2 = this;
          return new Promise(function(n2) {
            var o2 = t2.keywords.filter(function(e3) {
              return "string" == typeof e3 && e3 && e3.trim().length;
            });
            if (!o2.length)
              return n2({ groupID: e2, nextFlag: 0, userList: [] });
            var s2 = /* @__PURE__ */ new Date(), a2 = t2.isAlsoMatchGroupMemberNickname;
            r2.innerSearchGroupMembers(true, e2, o2, a2, function(o3) {
              o3.sort(function(e3, t3) {
                return e3.seq - t3.seq;
              });
              var a3 = o3.length, u2 = t2.nextFlag, l2 = (null == (l2 = o3[o3.length - 1]) ? void 0 : l2.seq) || 0, d2 = 0, p = (l2 = (0 < u2 && u2 < l2 ? d2 = o3.findIndex(function(e3) {
                return e3.seq == u2;
              }) : l2 <= u2 && l2 && (d2 = o3.length - 1), d2 + t2.count), (null == (p = o3[l2]) ? void 0 : p.seq) || 0), h = (o3 = o3.slice(d2, l2).map(function(e3) {
                return { userID: e3.userID, userName: e3.userName, memberAvatarUrl: e3.memberAvatarUrl, memberNickname: e3.memberNickname, memberRole: e3.memberRole };
              }), r2.globalMemberMap.size);
              h = { time: s2, dbCount: h, start: d2, end: l2, total: a3, count: o3.length, nextFlag: p, groupID: e2, config: t2 };
              r2.logger.info(c, i.I.SearchGroupMembers, h), n2({ groupID: e2, nextFlag: p, userList: o3 });
            });
          });
        }, d.prototype.getFileInfo = function(e2) {
          return new Promise(function(t2, r2) {
            try {
              var o2 = e2.size, a2 = File.prototype.slice || File.prototype.mozSlice || File.prototype.webkitSlice, u2 = 1048576, c2 = Math.ceil(o2 / u2), l2 = new n.a.ArrayBuffer(), d2 = new FileReader(), p = 0, h = (d2.onload = function() {
                var n2 = d2.result || d2.content;
                n2 ? (l2.append(n2), ++p < c2 ? h() : t2({ md5: l2.end(), name: e2.name, size: o2 })) : r2(Object(s.a)(i.s.MessageModuleFileSizeInvalid));
              }, d2.onerror = function() {
                r2(Object(s.a)(i.s.MessageModuleFileNotExist));
              }, function() {
                var t3 = p * u2, r3 = Math.min(t3 + u2, o2);
                t3 = a2.call(e2, t3, r3);
                d2.readAsArrayBuffer(t3);
              });
              h();
            } catch (e3) {
              r2(e3);
            }
          });
        }, d.prototype.uploadFile = function(e2, t2, r2) {
          return new Promise(function(n2, o2) {
            var s2 = new XMLHttpRequest(), i2 = (s2.onreadystatechange = function() {
              if (4 == s2.readyState) {
                if (200 != s2.status)
                  return o2({ code: 6000212, message: s2.responseText });
                n2();
              }
            }, s2.upload.addEventListener("progress", r2), s2.onerror = function() {
              return o2({ code: 6000212, message: "upload file onerror." });
            }, s2.ontimeout = function() {
              return o2({ code: 6000104, message: "upload file ontimeout." });
            }, s2.open(e2.method, e2.url, true), s2.timeout = 6e5, e2.headers);
            i2 && (delete i2["User-Agent"], delete i2["user-agent"], Object.keys(i2).forEach(function(e3) {
              return s2.setRequestHeader(e3, i2[e3]);
            })), s2.send(t2);
          });
        }, d.prototype.setUserID = function(e2) {
          this.userID = e2, this.clearOldRoomDB();
        }, d.prototype.setUser = function(e2) {
          var t2 = this;
          this.createStaticDB().then(function(r2) {
            return t2.batchAdd(r2, i.r.User, [e2]);
          });
        }, d.prototype.getUserList = function() {
          var e2 = this;
          return this.createStaticDB().then(function(t2) {
            return e2.innerGetAll(t2, i.r.User);
          });
        }, d.prototype.addUserList = function(e2) {
          var t2 = this;
          this.createStaticDB().then(function(r2) {
            return t2.batchAdd(r2, i.r.User, e2);
          });
        }, d.prototype.addConversationList = function(e2, t2) {
          var r2 = this, n2 = this.userID, o2 = { _action_: t2 };
          e2.forEach(function(t3) {
            t3.id || (t3.id = r2.appendID(t3.type + t3.conversationID)), t3.ownerID || (t3.ownerID = n2), t3.state = t3.state || i.p.Normal, e2.length < 11 && (o2[t3.conversationID] = [t3.state + "," + t3.unreadMessageCount + "," + t3.maxSeq + "," + t3.maxOrderKey, t3.msgSeq + "," + t3.readMsgSeq + "," + t3.sendMsgCount + "," + t3.deletedMsgCount].join(";"));
          }), this.createStaticDB().then(function(t3) {
            return r2.batchAdd(t3, i.r.Conv, e2, o2);
          });
        }, d.prototype.getConversationList = function() {
          var e2 = this;
          return this.createStaticDB().then(function(t2) {
            return e2.innerGetListByOwnerID(t2, i.r.Conv);
          });
        }, d.prototype.addGroupList = function(e2) {
          var t2 = this, r2 = this.userID, n2 = {};
          e2.forEach(function(o2) {
            o2.id || (o2.id = t2.appendID(o2.groupID)), o2.ownerID || (o2.ownerID = r2), e2.length < 11 && (n2[o2.groupID] = [o2.dataSeq, o2.attributeSeq, o2.memberSeq].join());
          }), this.createStaticDB().then(function(r3) {
            return t2.batchAdd(r3, i.r.Group, e2, n2);
          });
        }, d.prototype.deleteGroupList = function(e2) {
          var t2 = this, r2 = (this.isGlobalMember && this.globalMemberMap.forEach(function(r3) {
            -1 != e2.indexOf(r3.ownerID) && t2.globalMemberMap.delete(r3.id);
          }), e2.map(function(e3) {
            return t2.createGlobalDB().then(function(r3) {
              return t2.innerDeleteAllByOwnerID(r3, i.r.Member, e3);
            }), t2.appendID(e3);
          }));
          this.createStaticDB().then(function(e3) {
            return t2.batchDelete(e3, i.r.Group, r2);
          });
        }, d.prototype.getGroupList = function() {
          var e2 = this;
          return this.createStaticDB().then(function(t2) {
            return e2.innerGetListByOwnerID(t2, i.r.Group);
          });
        }, d.prototype.addGroupMemberList = function(e2, t2) {
          var r2 = this, n2 = { _groupID_: e2 };
          t2.forEach(function(o2) {
            o2.id || (o2.id = e2 + "_" + o2.userID), o2.ownerID || (o2.ownerID = e2), t2.length < 11 && (n2[o2.userID] = o2.seq), r2.isGlobalMember && r2.globalMemberMap.set(o2.id, o2);
          }), this.createGlobalDB().then(function(e3) {
            return r2.batchAdd(e3, i.r.Member, t2, n2);
          });
        }, d.prototype.deleteGroupMemberList = function(e2, t2) {
          var r2, n2 = this;
          t2.length && (r2 = t2.map(function(t3) {
            return t3 = e2 + "_" + t3, n2.isGlobalMember && n2.globalMemberMap.delete(t3), t3;
          }), this.createGlobalDB().then(function(e3) {
            return n2.batchDelete(e3, i.r.Member, r2);
          }));
        }, d.prototype.getGroupMemberList = function(e2) {
          var t2, r2 = this;
          return this.isGlobalMember ? (t2 = [], this.globalMemberMap.forEach(function(r3) {
            r3.ownerID == e2 && t2.push(r3);
          }), Promise.resolve(t2)) : new Promise(function(t3) {
            return r2.getMembersCallbackList.push({ groupID: e2, resolve: t3 });
          });
        }, d.prototype.addMessageList = function(e2, t2, r2, n2) {
          var o2 = this, s2 = t2 == i.q.Room, a2 = !s2 && this.isGlobalMsg;
          return r2.forEach(function(e3) {
            e3.id || (e3.id = t2 + "_" + e3.localMessageID + "_" + e3.messageID), a2 && o2.globalMsgMap.set(e3.id, e3);
          }), (s2 ? this.createDynamicDB(e2, t2, 1) : this.createGlobalDB()).then(function(s3) {
            return new Promise(function(u2) {
              var c2;
              n2 ? (c2 = r2.filter(function(e3) {
                return !e3.isUserInserted && e3.direction == i.K.Send;
              }).map(function(e3) {
                return e3 = t2 + "_" + e3.localMessageID + "_" + e3.localMessageID, a2 && o2.globalMsgMap.delete(e3), e3;
              }), o2.batchDelete(s3, i.r.Message, c2, function() {
                o2.batchAdd(s3, i.r.Message, r2, { convID: e2, type: t2 }, u2);
              })) : o2.batchAdd(s3, i.r.Message, r2, { convID: e2, type: t2 }, u2);
            });
          });
        }, d.prototype.deleteAllMessage = function(e2, t2) {
          var r2 = this;
          this.isGlobalMsg && this.globalMsgMap.forEach(function(n2) {
            n2.conversationID == e2 && n2.conversationType == t2 && r2.globalMsgMap.delete(n2.id);
          }), this.createGlobalDB().then(function(n2) {
            return r2.innerDeleteAllByOwnerID(n2, i.r.Message, [t2, e2]);
          });
        }, d.prototype.deleteMessageList = function(e2, t2, r2, n2) {
          var o2 = this, s2 = r2.map(function(e3) {
            return e3 = n2 ? t2 + "_" + e3.localMessageID + "_" + e3.messageID : t2 + "_" + e3.localMessageID + "_" + e3.localMessageID, o2.isGlobalMsg && o2.globalMsgMap.delete(e3), e3;
          });
          return (t2 == i.q.Room ? this.createDynamicDB(e2, t2, 1) : this.createGlobalDB()).then(function(r3) {
            return new Promise(function(a2) {
              o2.batchDelete(r3, i.r.Message, s2, function() {
                if (!n2)
                  return a2(void 0);
                var s3;
                if (o2.isGlobalMsg)
                  return s3 = { orderKey: 0 }, o2.globalMsgMap.forEach(function(r4) {
                    r4.conversationID == e2 && r4.conversationType == t2 && r4.orderKey > s3.orderKey && (s3 = r4);
                  }), a2(s3.messageID ? s3 : void 0);
                var u2 = o2.seq++, l2 = /* @__PURE__ */ new Date(), d2 = r3.transaction([i.r.Message], "readonly").objectStore(i.r.Message).index("ownerID").getAll([t2, e2]);
                d2.onsuccess = function() {
                  var r4 = d2.result || [];
                  r4.sort(function(e3, t3) {
                    return t3.orderKey - e3.orderKey;
                  }), o2.logger.info(c, "getLastMsg", { seq: u2, time: l2, convID: e2, type: t2, msg: r4[0] }), a2(r4[0]);
                }, d2.onerror = function(r4) {
                  r4 = r4.target && r4.target.error && r4.target.error.message, o2.logger.info(c, "getLastMsg", { seq: u2, time: l2, convID: e2, type: t2, onerror: r4 }), a2(void 0);
                };
              });
            });
          });
        }, d.prototype.getDeleteMessageCount = function(e2, t2, r2, n2) {
          var o2;
          this.isGlobalMsg ? (o2 = 0, this.globalMsgMap.forEach(function(n3) {
            n3.conversationID == e2 && n3.conversationType == t2 && n3.direction == i.K.Receive && -1 != r2.indexOf(n3.conversationSeq) && o2++;
          }), n2(o2)) : this.getDelMsgCountCallbackList.push({ convID: e2, type: t2, delSeqs: r2, resolve: n2 });
        }, d.prototype.deleteAllMessageFromRemote = function(e2, t2, r2, n2, o2) {
          var s2, a2, u2 = this;
          this.isGlobalMsg ? (s2 = 0, a2 = [], this.globalMsgMap.forEach(function(o3) {
            o3.conversationID == e2 && o3.conversationType == t2 && (o3.sentStatus == i.P.Success && !o3.isUserInserted && (o3.direction == i.K.Receive && -1 != n2.indexOf(o3.conversationSeq) && s2++, o3.conversationSeq <= r2) ? u2.globalMsgMap.delete(o3.id) : a2.push(o3));
          }), o2 && o2(s2), this.createGlobalDB().then(function(r3) {
            return u2.innerDeleteAllByOwnerID(r3, i.r.Message, [t2, e2], function() {
              return u2.batchAdd(r3, i.r.Message, a2);
            });
          })) : this.delAllMsgCallbackList.push({ convID: e2, type: t2, maxSeq: r2, delSeqs: n2, resolve: o2 });
        }, d.prototype.deleteMessageListFromRemote = function(e2, t2, r2, n2, o2) {
          var s2, a2, u2, c2, l2 = this;
          this.isGlobalMsg ? (a2 = { orderKey: s2 = 0 }, u2 = [], c2 = [], this.globalMsgMap.forEach(function(o3) {
            o3.conversationID == e2 && o3.conversationType == t2 && (o3.sentStatus != i.P.Success || o3.isUserInserted || -1 == r2.indexOf(o3.conversationSeq) ? o3.orderKey > a2.orderKey && (a2 = o3) : (l2.globalMsgMap.delete(o3.id), u2.push(o3.id), c2.push(o3), o3.direction == i.K.Receive && o3.conversationSeq > n2 && s2++));
          }), o2(c2, s2, a2.messageID ? a2 : void 0), this.createGlobalDB().then(function(e3) {
            return l2.batchDelete(e3, i.r.Message, u2);
          })) : this.delMsgsCallbackList.push({ convID: e2, type: t2, seqs: r2, readSeq: n2, resolve: o2 });
        }, d.prototype.clearRoomMessage = function(e2) {
          var t2, r2 = this;
          e2.length && (t2 = e2.map(function(e3) {
            e3 = r2.appendID(i.q.Room + e3);
            var t3 = r2.dbNameMap.dynamic + e3, n2 = (indexedDB.deleteDatabase(t3), r2.storeMap.get(t3));
            return n2 && (n2.close(), r2.storeMap.delete(t3)), e3;
          }), this.createStaticDB().then(function(e3) {
            return r2.batchDelete(e3, i.r.Conv, t2);
          }), this.logger.info(c, this.action.delete, { roomIDs: e2 }));
        }, d.prototype.getMessageList = function(e2, t2) {
          var r2, n2 = this, o2 = t2.count, s2 = t2.reverse, a2 = t2.nextMessage, u2 = e2.conversationID, l2 = e2.type, d2 = l2 == i.q.Room;
          return !d2 && this.isGlobalMsg ? (r2 = [], this.globalMsgMap.forEach(function(e3) {
            e3.conversationID == u2 && e3.conversationType == l2 && r2.push(e3);
          }), t2 = { convID: u2, type: l2, reverse: s2, queryCount: o2, count: r2.length }, this.logger.info(c, "getMsgs", t2), Promise.resolve(r2)) : (d2 ? this.createDynamicDB(u2, l2, 1) : this.createGlobalDB()).then(function(t3) {
            return new Promise(function(r3) {
              var p = n2.seq++, h = /* @__PURE__ */ new Date(), g = a2 ? a2.orderKey : 0, f = 0, m = 0, _ = (s2 ? m = g ? g - 1 : e2.maxOrderKey || 0 : f = g + 1, { seq: p, time: h, convID: u2, type: l2, reverse: s2, queryCount: o2, count: 0, orderKey: g, min: f, max: m }), v = (p = d2 ? Math.max(2 * o2, 60) : void 0, h = d2 ? s2 ? IDBKeyRange.upperBound(m) : IDBKeyRange.lowerBound(f) : [l2, u2], t3.transaction([i.r.Message], "readonly").objectStore(i.r.Message).index(d2 ? "orderKey" : "ownerID").getAll(h, p));
              v.onsuccess = function() {
                var e3 = v.result || [];
                _.count = e3.length, n2.logger.info(c, "getMsgs", _), r3(e3);
              }, v.onerror = function(e3) {
                _.onerror = e3.target && e3.target.error && e3.target.error.message, n2.logger.info(c, "getMsgs", _), r3([]);
              };
            });
          });
        }, d.prototype.getMessageListBySeqs = function(e2, t2, r2) {
          var n2 = this, o2 = /* @__PURE__ */ new Map();
          return this.isGlobalMsg ? (this.globalMsgMap.forEach(function(n3) {
            n3.conversationID != e2 || n3.conversationType != t2 || n3.sentStatus != i.P.Success || n3.isUserInserted || -1 == r2.indexOf(n3.conversationSeq) || o2.set(n3.conversationSeq, n3);
          }), Promise.resolve(o2)) : this.createGlobalDB().then(function(s2) {
            return new Promise(function(a2) {
              var u2 = n2.seq++, l2 = /* @__PURE__ */ new Date(), d2 = s2.transaction([i.r.Message], "readonly").objectStore(i.r.Message).index("ownerID").getAll([t2, e2]);
              d2.onsuccess = function() {
                (d2.result || []).forEach(function(e3) {
                  e3.sentStatus != i.P.Success || e3.isUserInserted || -1 == r2.indexOf(e3.conversationSeq) || o2.set(e3.conversationSeq, e3);
                });
                var s3 = { seq: u2, time: l2, convID: e2, type: t2, count: o2.size, seqs: r2 };
                n2.logger.info(c, "getMsgSeqs", s3), a2(o2);
              }, d2.onerror = function(o3) {
                o3 = o3.target && o3.target.error && o3.target.error.message, n2.logger.info(c, "getMsgSeqs", { seq: u2, time: l2, convID: e2, type: t2, seqs: r2, onerror: o3 }), a2(/* @__PURE__ */ new Map());
              };
            });
          });
        }, d.prototype.checkMessageStatus = function(e2) {
          var t2;
          !e2.receiptStatus || e2.conversationType == i.q.Room || (t2 = this.globalMsgMap.get(e2.conversationType + "_" + e2.localMessageID + "_" + e2.messageID)) && e2.receiptStatus < t2.receiptStatus && (e2.receiptStatus = t2.receiptStatus);
        }, d.prototype.addMessageExtraList = function(e2, t2) {
          var r2 = this;
          this.createStaticDB().then(function(n2) {
            return r2.batchAdd(n2, i.r.MessageExtra, e2, { _action_: t2 });
          });
        }, d.prototype.getMessageExtraList = function() {
          var e2 = this;
          return this.createStaticDB().then(function(t2) {
            return e2.innerGetListByOwnerID(t2, i.r.MessageExtra);
          });
        }, d.prototype.deleteMessageExtraList = function(e2) {
          var t2 = this;
          this.createStaticDB().then(function(r2) {
            return t2.batchDelete(r2, i.r.MessageExtra, e2);
          });
        }, d.prototype.addCallList = function(e2) {
          var t2 = this;
          e2.forEach(function(e3) {
            e3.id || (e3.id = t2.appendID(e3.callID)), e3.ownerID || (e3.ownerID = t2.userID);
          }), this.createStaticDB().then(function(r2) {
            return t2.batchAdd(r2, i.r.Call, e2);
          });
        }, d.prototype.getCallList = function() {
          var e2 = this;
          return this.createStaticDB().then(function(t2) {
            return e2.innerGetListByOwnerID(t2, i.r.Call);
          });
        }, d.prototype.createStaticDB = function() {
          var e2 = this, t2 = this.dbNameMap.static, r2 = this.storeMap.get(t2);
          return r2 ? Promise.resolve(r2) : new Promise(function(r3) {
            return e2.openStaticDB(t2, r3, /* @__PURE__ */ new Date());
          });
        }, d.prototype.createDynamicDB = function(e2, t2, r2) {
          var n2 = this, o2 = this.dbNameMap.dynamic + this.appendID(t2 + e2), s2 = this.storeMap.get(o2);
          return s2 ? Promise.resolve(s2) : new Promise(function(s3) {
            return n2.openDynamicDB(o2, s3, /* @__PURE__ */ new Date(), e2, t2, r2);
          });
        }, d.prototype.createGlobalDB = function() {
          var e2 = this, t2 = this.dbNameMap.global + this.userID, r2 = this.storeMap.get(t2);
          return r2 ? Promise.resolve(r2) : new Promise(function(r3) {
            return e2.openGlobalDB(t2, r3, /* @__PURE__ */ new Date());
          });
        }, d.prototype.openStaticDB = function(e2, t2, r2) {
          var n2 = this, o2 = indexedDB.open(e2, 4);
          o2.onsuccess = function() {
            o2.onsuccess = null, n2.initStaticStore(o2.result, o2.transaction, e2, t2, { time: r2, event: "onsuccess" });
          }, o2.onupgradeneeded = function(s2) {
            o2.onupgradeneeded = null, s2.newVersion && s2.newVersion > s2.oldVersion && (s2 = s2.target.result, n2.initStaticStore(s2, o2.transaction, e2, t2, { time: r2, event: "onupgradeneeded" }));
          }, o2.onerror = function(s2) {
            s2 = "Static open onerror: " + (s2.target && s2.target.error && s2.target.error.message), n2.logger.info(c, n2.action.create, { time: r2, onerror: s2 }), n2.storeMap.delete(e2), indexedDB.deleteDatabase(e2), o2.onsuccess = null, o2.onupgradeneeded = null, o2.onerror = null, n2.openStaticDB(e2, t2, r2);
          }, o2.onblocked = function() {
            n2.logger.info(c, n2.action.create, { time: r2, onerror: "Static open onblocked" });
          };
        }, d.prototype.openDynamicDB = function(e2, t2, r2, n2, o2, s2) {
          var i2 = this, a2 = indexedDB.open(e2, s2);
          a2.onsuccess = function() {
            a2.onsuccess = null, i2.initDynamicStore(a2.result, a2.transaction, e2, t2, { time: r2, convID: n2, type: o2, event: "onsuccess" });
          }, a2.onupgradeneeded = function(s3) {
            a2.onupgradeneeded = null, s3.newVersion && s3.newVersion > s3.oldVersion && (s3 = s3.target.result, i2.initDynamicStore(s3, a2.transaction, e2, t2, { time: r2, convID: n2, type: o2, event: "onupgradeneeded" }));
          }, a2.onerror = function(u2) {
            u2 = "Dynamic open onerror: " + (u2.target && u2.target.error && u2.target.error.message), i2.logger.info(c, i2.action.create, { time: r2, convID: n2, type: o2, onerror: u2 }), i2.storeMap.delete(e2), indexedDB.deleteDatabase(e2), a2.onsuccess = null, a2.onupgradeneeded = null, a2.onerror = null, i2.openDynamicDB(e2, t2, r2, n2, o2, s2);
          }, a2.onblocked = function() {
            i2.logger.info(c, i2.action.create, { time: r2, convID: n2, type: o2, onerror: "Dynamic open onblocked" });
          };
        }, d.prototype.openGlobalDB = function(e2, t2, r2) {
          var n2 = this, o2 = indexedDB.open(e2, 1);
          o2.onsuccess = function() {
            o2.onsuccess = null, n2.initGlobalStore(o2.result, o2.transaction, e2, t2, { time: r2, event: "onsuccess" });
          }, o2.onupgradeneeded = function(s2) {
            o2.onupgradeneeded = null, s2.newVersion && s2.newVersion > s2.oldVersion && (s2 = s2.target.result, n2.initGlobalStore(s2, o2.transaction, e2, t2, { time: r2, event: "onupgradeneeded" }));
          }, o2.onerror = function(s2) {
            s2 = "Global open onerror: " + (s2.target && s2.target.error && s2.target.error.message), n2.logger.info(c, n2.action.create, { time: r2, onerror: s2 }), n2.storeMap.delete(e2), indexedDB.deleteDatabase(e2), o2.onsuccess = null, o2.onupgradeneeded = null, o2.onerror = null, n2.openGlobalDB(e2, t2, r2);
          }, o2.onblocked = function() {
            n2.logger.info(c, n2.action.create, { time: r2, onerror: "Global open onblocked" });
          };
        }, d.prototype.initStaticStore = function(e2, t2, r2, n2, s2) {
          var a2 = this, u2 = !(e2.onclose = function() {
            return a2.storeMap.delete(r2);
          });
          if (u2 = (e2.objectStoreNames.contains(i.r.Log) || (u2 = true, e2.createObjectStore(i.r.Log)), e2.objectStoreNames.contains(i.r.DataReport) || (u2 = true, e2.createObjectStore(i.r.DataReport)), e2.objectStoreNames.contains(i.r.User) || (u2 = true, e2.createObjectStore(i.r.User, { keyPath: "userID" })), e2.objectStoreNames.contains(i.r.Conv) || (u2 = true, e2.createObjectStore(i.r.Conv, { keyPath: "id" }).createIndex("ownerID", "ownerID")), e2.objectStoreNames.contains(i.r.Group) || (u2 = true, e2.createObjectStore(i.r.Group, { keyPath: "id" }).createIndex("ownerID", "ownerID")), e2.objectStoreNames.contains(i.r.MessageExtra) || (u2 = true, e2.createObjectStore(i.r.MessageExtra, { keyPath: "id" }).createIndex("ownerID", "ownerID")), e2.objectStoreNames.contains(i.r.Call) || (u2 = true, e2.createObjectStore(i.r.Call, { keyPath: "id" }).createIndex("ownerID", "ownerID")), s2.isCreate = u2, this.storeMap.get(r2)))
            return s2.db = "Static is opened", this.logger.info(c, this.action.create, s2), n2(u2);
          t2 ? t2.oncomplete = function() {
            a2.storeMap.set(r2, e2), a2.logger.setDB(e2), o.a.getInstance().dataReport.setDB(e2), n2(e2), s2.db = "Static oncomplete", a2.logger.info(c, a2.action.create, s2);
          } : (this.storeMap.set(r2, e2), this.logger.setDB(e2), o.a.getInstance().dataReport.setDB(e2), n2(e2), s2.db = "Static", this.logger.info(c, this.action.create, s2));
        }, d.prototype.initDynamicStore = function(e2, t2, r2, n2, o2) {
          var s2 = this, a2 = !(e2.onclose = function() {
            return s2.storeMap.delete(r2);
          });
          e2.objectStoreNames.contains(i.r.Message) || (a2 = true, e2.createObjectStore(i.r.Message, { keyPath: "id" }).createIndex("orderKey", "orderKey")), t2 ? t2.oncomplete = function() {
            s2.storeMap.set(r2, e2), n2(e2), a2 && (o2.db = "Dynamic oncomplete", s2.logger.info(c, s2.action.create, o2));
          } : (this.storeMap.set(r2, e2), n2(e2), a2 && (o2.db = "Dynamic", this.logger.info(c, this.action.create, o2)));
        }, d.prototype.initGlobalStore = function(e2, t2, r2, n2, o2) {
          var s2 = this, a2 = !(e2.onclose = function() {
            return s2.storeMap.delete(r2);
          });
          e2.objectStoreNames.contains(i.r.Message) || (a2 = true, e2.createObjectStore(i.r.Message, { keyPath: "id" }).createIndex("ownerID", ["conversationType", "conversationID"])), e2.objectStoreNames.contains(i.r.Member) || (a2 = true, e2.createObjectStore(i.r.Member, { keyPath: "id" }).createIndex("ownerID", "ownerID")), t2 ? t2.oncomplete = function() {
            s2.storeMap.set(r2, e2), n2(e2), a2 && (o2.db = "Global oncomplete", s2.logger.info(c, s2.action.create, o2));
          } : (this.storeMap.set(r2, e2), n2(e2), a2 && (o2.db = "Global", this.logger.info(c, this.action.create, o2)));
        }, d.prototype.batchAdd = function(e2, t2, r2, n2, o2) {
          var s2 = this;
          if (!r2.length)
            return o2 && o2();
          var i2 = this.seq++, a2 = /* @__PURE__ */ new Date(), u2 = e2.transaction([t2], "readwrite").objectStore(t2);
          t2 = "ba" + t2, u2.transaction.oncomplete = function() {
            s2.logger.info(c, t2, { seq: i2, time: a2, total: r2.length, flag: n2 }), o2 && o2();
          }, u2.transaction.onerror = function(e3) {
            e3 = e3.target && e3.target.error && e3.target.error.message, s2.logger.info(c, t2, { seq: i2, time: a2, onerror: "onerror: " + e3, flag: n2 }), o2 && o2();
          }, u2.transaction.onabort = function() {
            s2.logger.info(c, t2, { seq: i2, time: a2, onerror: "onabort", flag: n2 }), o2 && o2();
          }, r2.forEach(function(e3) {
            return u2.put(e3);
          });
        }, d.prototype.batchDelete = function(e2, t2, r2, n2) {
          var o2 = this;
          if (!e2.objectStoreNames.contains(t2) || !r2.length)
            return n2 && n2();
          var s2 = this.seq++, i2 = /* @__PURE__ */ new Date(), a2 = e2.transaction([t2], "readwrite").objectStore(t2);
          t2 = "bd" + t2, a2.transaction.oncomplete = function() {
            o2.logger.info(c, t2, { seq: s2, time: i2, total: r2.length }), n2 && n2();
          }, a2.transaction.onerror = function(e3) {
            e3 = e3.target && e3.target.error && e3.target.error.message, e3 = { seq: s2, time: i2, total: r2.length, onerror: "onerror: " + e3 }, o2.logger.info(c, t2, e3);
          }, a2.transaction.onabort = function() {
            var e3 = { seq: s2, time: i2, total: r2.length, onerror: "onabort" };
            o2.logger.info(c, t2, e3);
          }, r2.forEach(function(e3) {
            return a2.delete(e3);
          });
        }, d.prototype.innerDeleteAllByOwnerID = function(e2, t2, r2, n2) {
          var o2, s2, i2, a2, u2 = this;
          e2.objectStoreNames.contains(t2) && (o2 = this.seq++, s2 = /* @__PURE__ */ new Date(), i2 = e2.transaction([t2], "readwrite").objectStore(t2), a2 = i2.index("ownerID").getAllKeys(r2), t2 = "da" + t2, a2.onsuccess = function() {
            var e3 = a2.result || [];
            i2.transaction.oncomplete = function() {
              u2.logger.info(c, t2, { seq: o2, time: s2, total: e3.length, ownerID: r2 }), n2 && n2();
            }, e3.forEach(function(e4) {
              return i2.delete(e4);
            });
          }, a2.onerror = function(e3) {
            e3 = e3.target && e3.target.error && e3.target.error.message, u2.logger.info(c, t2, { seq: o2, time: s2, ownerID: r2, onerror: e3 });
          });
        }, d.prototype.innerGetListByOwnerID = function(e2, t2) {
          var r2 = this;
          return e2.objectStoreNames.contains(t2) ? new Promise(function(n2) {
            var o2 = r2.seq++, s2 = /* @__PURE__ */ new Date(), i2 = e2.transaction([t2], "readonly").objectStore(t2).index("ownerID").getAll(r2.userID);
            t2 = "ga" + t2 + "s", i2.onsuccess = function() {
              var e3 = i2.result || [];
              r2.logger.info(c, t2, { seq: o2, time: s2, total: e3.length }), n2(e3);
            }, i2.onerror = function(e3) {
              e3 = e3.target && e3.target.error && e3.target.error.message, r2.logger.info(c, t2, { seq: o2, time: s2, onerror: e3 }), n2([]);
            };
          }) : Promise.resolve([]);
        }, d.prototype.innerGetAll = function(e2, t2, r2) {
          var n2 = this;
          return e2.objectStoreNames.contains(t2) ? new Promise(function(o2) {
            var s2 = n2.seq++, i2 = /* @__PURE__ */ new Date(), a2 = e2.transaction([t2], "readonly").objectStore(t2).getAll();
            t2 = "ga" + t2, a2.onsuccess = function() {
              var e3 = a2.result || [];
              n2.logger.info(c, t2, { seq: s2, time: i2, total: e3.length, pid: r2 }), o2(e3);
            }, a2.onerror = function(e3) {
              e3 = e3.target && e3.target.error && e3.target.error.message, n2.logger.info(c, t2, { seq: s2, time: i2, onerror: e3, pid: r2 }), o2([]);
            };
          }) : Promise.resolve([]);
        }, d.prototype.appendID = function(e2) {
          return this.userID + e2;
        }, d.prototype.filterKeys = function(e2) {
          return e2 && e2.length && (e2 = e2.filter(function(e3) {
            return "string" == typeof e3 && e3 && e3.trim().length;
          })).length ? e2 : null;
        }, d.prototype.isMsgKeywords = function(e2, t2) {
          var r2;
          return !t2 || !!(r2 = e2.type == i.R.Custom ? e2.searchedContent : e2.message || e2.fileName || e2.fileDownloadUrl) && t2.every(function(e3) {
            return -1 != r2.indexOf(e3);
          });
        }, d.prototype.isMsgType = function(e2, t2, r2, n2) {
          var o2 = !n2 || !n2.length, s2 = !r2 || !r2.length;
          return o2 && s2 || (o2 && !s2 ? -1 != r2.indexOf(e2) : e2 == i.R.Custom && -1 != n2.indexOf(t2));
        }, d.prototype.isMsgTimeRange = function(e2, t2, r2) {
          return !t2 && !r2 || (!r2 && t2 ? t2 < e2 : (!t2 && r2 || t2 < e2) && e2 < r2);
        }, d.prototype.isSomeKeys = function(e2, t2) {
          return !t2 || !!e2 && t2.some(function(t3) {
            return -1 != e2.indexOf(t3);
          });
        }, d.prototype.isEveryKeys = function(e2, t2) {
          return !t2 || !!e2 && t2.every(function(t3) {
            return -1 != e2.indexOf(t3);
          });
        }, d.prototype.handleMsgCallbackList = function() {
          var e2 = this;
          this.isGlobalMsg = true, this.isGlobalMember && (this.reportLog.messageCount = this.globalMsgMap.size, this.dataReport.reportSDKEvent("/sdk/log", { error_message: JSON.stringify(this.reportLog) })), this.searchMsgCallbackList.forEach(function(t2) {
            e2.innerSearchMessages(false, t2.convID, t2.type, t2.config, t2.resolve);
          }), this.searchMsgByConvCallbackList.forEach(function(t2) {
            e2.innerSearchMessagesByConv(false, t2.config, t2.resolve);
          }), this.searchMsgCallbackList.length = 0, this.searchMsgByConvCallbackList.length = 0, this.getDelMsgCountCallbackList.forEach(function(t2) {
            e2.getDeleteMessageCount(t2.convID, t2.type, t2.delSeqs, t2.resolve);
          }), this.delMsgsCallbackList.forEach(function(t2) {
            e2.deleteMessageListFromRemote(t2.convID, t2.type, t2.seqs, t2.readSeq, t2.resolve);
          }), this.delAllMsgCallbackList.forEach(function(t2) {
            e2.deleteAllMessageFromRemote(t2.convID, t2.type, t2.maxSeq, t2.delSeqs, t2.resolve);
          }), this.getDelMsgCountCallbackList.length = 0, this.delMsgsCallbackList.length = 0, this.delAllMsgCallbackList.length = 0;
        }, d.prototype.handleMemberCallbackList = function() {
          var e2 = this;
          this.isGlobalMember = true, this.isGlobalMsg && (this.reportLog.memberCount = this.globalMemberMap.size, this.dataReport.reportSDKEvent("/sdk/log", { error_message: JSON.stringify(this.reportLog) })), this.searchGroupsCallbackList.forEach(function(t2) {
            e2.searchGroups(t2.keywords, t2.isName, t2.isNick, t2.resolve, true);
          }), this.searchMembersCallbackList.forEach(function(t2) {
            e2.innerSearchGroupMembers(false, t2.groupID, t2.keywords, t2.isNick, t2.resolve);
          }), this.searchGroupsCallbackList.length = 0, this.searchMembersCallbackList.length = 0, this.getMembersCallbackList.forEach(function(t2) {
            var r2 = t2.groupID, n2 = (t2 = t2.resolve, []);
            e2.globalMemberMap.forEach(function(e3) {
              e3.ownerID == r2 && n2.push(e3);
            }), t2(n2);
          }), this.getMembersCallbackList.length = 0;
        }, d.prototype.innerSearchMessagesByConv = function(e2, t2, r2) {
          var n2, o2 = this;
          if (t2.keywords = this.filterKeys(t2.keywords), t2.senderUserIDs = this.filterKeys(t2.senderUserIDs), !(t2.keywords && t2.keywords.length || t2.messageTypes && t2.messageTypes.length || t2.subMessageTypes && t2.subMessageTypes.length || t2.senderUserIDs && t2.senderUserIDs.length || t2.startTime && !(t2.startTime < 0) || t2.endTime && !(t2.endTime < 0)))
            return r2([]);
          e2 && !this.isGlobalMsg ? this.searchMsgByConvCallbackList.push({ config: t2, resolve: r2 }) : (n2 = /* @__PURE__ */ new Map(), this.globalMsgMap.forEach(function(e3) {
            var r3, s2;
            e3.type != i.R.Revoke && o2.isMsgKeywords(e3, t2.keywords) && o2.isMsgTimeRange(e3.timestamp, t2.startTime, t2.endTime) && o2.isMsgType(e3.type, e3.subType, t2.messageTypes, t2.subMessageTypes) && o2.isSomeKeys(e3.senderUserID, t2.senderUserIDs) && (r3 = e3.conversationType + e3.conversationID, (s2 = n2.get(r3) || { conversationID: e3.conversationID, conversationType: e3.conversationType, totalMessageCount: 0, messageList: [] }).totalMessageCount += 1, s2.messageList.push(e3), n2.set(r3, s2));
          }), r2(Array.from(n2.values())));
        }, d.prototype.innerSearchMessages = function(e2, t2, r2, n2, o2) {
          var s2, a2, u2, c2, l2, d2, p = this;
          if (n2.keywords = this.filterKeys(n2.keywords), n2.senderUserIDs = this.filterKeys(n2.senderUserIDs), !(n2.keywords && n2.keywords.length || n2.messageTypes && n2.messageTypes.length || n2.subMessageTypes && n2.subMessageTypes.length || n2.senderUserIDs && n2.senderUserIDs.length || n2.startTime && !(n2.startTime < 0) || n2.endTime && !(n2.endTime < 0)))
            return o2({ messageList: [] }, { convID: t2, config: n2 });
          e2 && !this.isGlobalMsg ? this.searchMsgCallbackList.push({ convID: t2, type: r2, config: n2, resolve: o2 }) : (l2 = [], this.globalMsgMap.forEach(function(e3) {
            (!t2 || e3.conversationID == t2 && e3.conversationType == r2) && e3.type != i.R.Revoke && p.isMsgKeywords(e3, n2.keywords) && p.isMsgTimeRange(e3.timestamp, n2.startTime, n2.endTime) && p.isMsgType(e3.type, e3.subType, n2.messageTypes, n2.subMessageTypes) && p.isSomeKeys(e3.senderUserID, n2.senderUserIDs) && l2.push(e3);
          }), e2 = l2.length, n2.order ? l2.sort(function(e3, t3) {
            return e3.timestamp - t3.timestamp;
          }) : l2.sort(function(e3, t3) {
            return t3.timestamp - e3.timestamp;
          }), u2 = (a2 = (s2 = n2.nextMessage ? n2.nextMessage.id : "") ? l2.findIndex(function(e3) {
            return s2 === e3.id;
          }) + 1 : 0) + n2.count, c2 = l2[u2] ? l2[u2 - 1] : void 0, l2 = l2.slice(a2, u2), n2.nextMessage = s2, d2 = this.globalMsgMap.size, d2 = { time: /* @__PURE__ */ new Date(), dbCount: d2, start: a2, end: u2, total: e2, count: l2.length, convID: t2, config: n2 }, o2({ messageList: l2, nextMessage: c2 }, d2));
        }, d.prototype.innerSearchGroupMembers = function(e2, t2, r2, n2, o2) {
          var s2, i2 = this;
          e2 && !this.isGlobalMember ? this.searchMembersCallbackList.push({ groupID: t2, keywords: r2, isNick: n2, resolve: o2 }) : (s2 = [], this.globalMemberMap.forEach(function(e3) {
            e3.ownerID == t2 && (i2.isEveryKeys(e3.userName, r2) || n2 && i2.isEveryKeys(e3.memberNickname, r2)) && s2.push(e3);
          }), o2(s2));
        }, d.prototype.clearOldRoomDB = function() {
          var e2 = this;
          indexedDB.databases && "function" == typeof indexedDB.databases && indexedDB.databases().then(function(t2) {
            var r2 = [];
            t2.forEach(function(t3) {
              var n2 = t3.version || 1;
              t3 = (t3.name || "-1").replace(e2.dbNameMap.dynamic + e2.userID, "");
              Number(t3.charAt(0)) == i.q.Room && 1 < n2 && r2.push(t3.substring(1));
            }), e2.clearRoomMessage(r2);
          });
        }, d.prototype.loadGlobaDB = function(e2, t2, r2, n2) {
          var o2 = this, s2 = (r2.forEach(function(e3) {
            return o2.globalMemberMap.set(e3.id, e3);
          }), this.isGlobalMember = true, Date.now());
          this.innerGetAll(e2, i.r.Message, "loadGDB").then(function(e3) {
            o2.globalMsgMap.clear(), t2.forEach(function(e4) {
              return o2.globalMsgMap.set(e4.id, e4);
            }), e3.forEach(function(e4) {
              return o2.globalMsgMap.set(e4.id, e4);
            }), o2.reportLog.messageTime = Date.now() - s2, o2.handleMsgCallbackList();
          }).then(function() {
            return a(o2, void 0, void 0, function() {
              var o3, s3, a2, l2, d2, p, h = this;
              return u(this, function(g) {
                switch (g.label) {
                  case 0:
                    o3 = { time: /* @__PURE__ */ new Date(), msgs: [], users: [] }, s3 = function(r3) {
                      return u(this, function(n3) {
                        switch (n3.label) {
                          case 0:
                            return [4, new Promise(function(n4) {
                              var s4 = Date.now(), a3 = e2.transaction([i.r.Message], "readwrite").objectStore(i.r.Message);
                              a3.transaction.oncomplete = function() {
                                o3.msgs.push(Date.now() - s4), n4(0);
                              }, t2.slice(r3, r3 + 1e4).forEach(function(e3) {
                                return a3.put(e3);
                              }), r3 += 1e4;
                            })];
                          case 1:
                            return n3.sent(), a2 = r3, [2];
                        }
                      });
                    }, p = 0, g.label = 1;
                  case 1:
                    return p < t2.length ? [5, s3(p)] : [3, 4];
                  case 2:
                    g.sent(), p = a2, g.label = 3;
                  case 3:
                    return [3, 1];
                  case 4:
                    l2 = function(t3) {
                      return u(this, function(n3) {
                        switch (n3.label) {
                          case 0:
                            return [4, new Promise(function(n4) {
                              var s4 = Date.now(), a3 = e2.transaction([i.r.Member], "readwrite").objectStore(i.r.Member);
                              a3.transaction.oncomplete = function() {
                                o3.users.push(Date.now() - s4), n4(0);
                              }, r2.slice(t3, t3 + 1e4).forEach(function(e3) {
                                return a3.put(e3);
                              }), t3 += 1e4;
                            })];
                          case 1:
                            return n3.sent(), d2 = t3, [2];
                        }
                      });
                    }, p = 0, g.label = 5;
                  case 5:
                    return p < r2.length ? [5, l2(p)] : [3, 8];
                  case 6:
                    g.sent(), p = d2, g.label = 7;
                  case 7:
                    return [3, 5];
                  case 8:
                    return n2 && n2.forEach(function(e3) {
                      indexedDB.deleteDatabase(e3), h.storeMap.delete(e3);
                    }), (t2.length || r2.length) && this.logger.info(c, "loadGDB", o3), [2];
                }
              });
            });
          });
        }, d.prototype.copyOldDB2GlobalDB = function() {
          var e2, t2 = this;
          indexedDB.databases && "function" == typeof indexedDB.databases ? (e2 = /* @__PURE__ */ new Date(), indexedDB.databases().then(function(e3) {
            var r2 = [];
            return e3.forEach(function(e4) {
              var n2 = e4.version || 1, o2 = (e4 = (e4.name || "-1").replace(t2.dbNameMap.dynamic + t2.userID, ""), Number(e4.charAt(0)));
              o2 != i.q.Peer && o2 != i.q.Group || r2.push({ type: o2, convID: e4.substring(1), ver: n2 });
            }), r2;
          }).then(function(r2) {
            t2.createGlobalDB().then(function(n2) {
              return a(t2, void 0, void 0, function() {
                var t3, o2, s2, a2, l2, d2, p, h, g = this;
                return u(this, function(f) {
                  switch (f.label) {
                    case 0:
                      if (t3 = r2.length, o2 = [], s2 = [], a2 = [], 0 == t3)
                        return this.loadGlobaDB(n2, o2, s2), [2];
                      l2 = function(e3) {
                        var t4, n3, c2;
                        return u(this, function(u2) {
                          switch (u2.label) {
                            case 0:
                              return c2 = r2[e3], t4 = c2.convID, n3 = c2.type, c2 = c2.ver, [4, d2.createDynamicDB(t4, n3, c2).then(function(e4) {
                                var r3 = [g.innerGetAll(e4, i.r.Message, t4)];
                                return n3 == i.q.Group && r3.push(g.innerGetAll(e4, i.r.Member, t4)), Promise.all(r3).then(function(r4) {
                                  var i2 = (r4 = function(e5, t5) {
                                    var r5 = "function" == typeof Symbol && e5[Symbol.iterator];
                                    if (!r5)
                                      return e5;
                                    var n4, o3, s3 = r5.call(e5), i3 = [];
                                    try {
                                      for (; (void 0 === t5 || 0 < t5--) && !(n4 = s3.next()).done; )
                                        i3.push(n4.value);
                                    } catch (e6) {
                                      o3 = { error: e6 };
                                    } finally {
                                      try {
                                        n4 && !n4.done && (r5 = s3.return) && r5.call(s3);
                                      } finally {
                                        if (o3)
                                          throw o3.error;
                                      }
                                    }
                                    return i3;
                                  }(r4, 2))[0];
                                  r4 = r4[1];
                                  i2.length && i2.forEach(function(e5) {
                                    e5.id = e5.type + "_" + e5.localMessageID + "_" + e5.messageID, o2.push(e5);
                                  }), r4 && r4.length && r4.forEach(function(e5) {
                                    e5.id || (e5.id = t4 + "_" + e5.userID), e5.ownerID || (e5.ownerID = t4), s2.push(e5);
                                  }), e4.close(), a2.push(g.dbNameMap.dynamic + g.appendID(n3 + t4));
                                });
                              })];
                            case 1:
                              return u2.sent(), [2];
                          }
                        });
                      }, d2 = this, p = 0, f.label = 1;
                    case 1:
                      return p < t3 ? [5, l2(p)] : [3, 4];
                    case 2:
                      f.sent(), f.label = 3;
                    case 3:
                      return p++, [3, 1];
                    case 4:
                      return this.loadGlobaDB(n2, o2, s2, a2), h = { time: e2, dbs: t3, msgs: o2.length, users: s2.length }, this.logger.info(c, this.action.delete, h), [2];
                  }
                });
              });
            });
          })) : this.createGlobalDB().then(function(e3) {
            return t2.loadGlobaDB(e3, [], []);
          });
        }, d);
        function d(e2) {
          this.logger = o.a.getInstance().logger, this.dataReport = o.a.getInstance().dataReport, this.dbNameMap = { static: "", dynamic: "", global: "" }, this.storeMap = /* @__PURE__ */ new Map(), this.seq = 1, this.userID = "", this.action = { delete: "delete", create: "create" }, this.isGlobalMsg = false, this.isGlobalMember = false, this.reportLog = { messageTime: 0, memberTime: 0, messageCount: 0, memberCount: 0 }, this.globalMsgMap = /* @__PURE__ */ new Map(), this.globalMemberMap = /* @__PURE__ */ new Map(), this.searchMsgByConvCallbackList = [], this.searchMsgCallbackList = [], this.searchGroupsCallbackList = [], this.searchMembersCallbackList = [], this.getMembersCallbackList = [], this.getDelMsgCountCallbackList = [], this.delMsgsCallbackList = [], this.delAllMsgCallbackList = [], this.dbNameMap.static = "ZIMSDKSTATIC" + e2, this.dbNameMap.dynamic = "ZIMSDKDYNAMIC" + e2, this.dbNameMap.global = "ZIMSDKGLOBAL" + e2, this.createStaticDB();
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return i;
        });
        var n = r(81), o = r(7), s = function() {
          return (s = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var o2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, o2) && (e2[o2] = t2[o2]);
            return e2;
          }).apply(this, arguments);
        }, i = (a.prototype.init = function(e2) {
          return function(e3, t2, r2, n2) {
            return new (r2 = r2 || Promise)(function(o2, s2) {
              function i2(e4) {
                try {
                  u(n2.next(e4));
                } catch (e5) {
                  s2(e5);
                }
              }
              function a2(e4) {
                try {
                  u(n2.throw(e4));
                } catch (e5) {
                  s2(e5);
                }
              }
              function u(e4) {
                var t3;
                e4.done ? o2(e4.value) : ((t3 = e4.value) instanceof r2 ? t3 : new r2(function(e5) {
                  e5(t3);
                })).then(i2, a2);
              }
              u((n2 = n2.apply(e3, t2 || [])).next());
            });
          }(this, void 0, void 0, function() {
            var t2;
            return function(e3, t3) {
              var r2, n2, o2, s2 = { label: 0, sent: function() {
                if (1 & o2[0])
                  throw o2[1];
                return o2[1];
              }, trys: [], ops: [] }, i2 = { next: a2(0), throw: a2(1), return: a2(2) };
              return "function" == typeof Symbol && (i2[Symbol.iterator] = function() {
                return this;
              }), i2;
              function a2(i3) {
                return function(a3) {
                  var u = [i3, a3];
                  if (r2)
                    throw new TypeError("Generator is already executing.");
                  for (; s2; )
                    try {
                      if (r2 = 1, n2 && (o2 = 2 & u[0] ? n2.return : u[0] ? n2.throw || ((o2 = n2.return) && o2.call(n2), 0) : n2.next) && !(o2 = o2.call(n2, u[1])).done)
                        return o2;
                      switch (n2 = 0, (u = o2 ? [2 & u[0], o2.value] : u)[0]) {
                        case 0:
                        case 1:
                          o2 = u;
                          break;
                        case 4:
                          return s2.label++, { value: u[1], done: false };
                        case 5:
                          s2.label++, n2 = u[1], u = [0];
                          continue;
                        case 7:
                          u = s2.ops.pop(), s2.trys.pop();
                          continue;
                        default:
                          if (!(o2 = 0 < (o2 = s2.trys).length && o2[o2.length - 1]) && (6 === u[0] || 2 === u[0])) {
                            s2 = 0;
                            continue;
                          }
                          if (3 === u[0] && (!o2 || u[1] > o2[0] && u[1] < o2[3])) {
                            s2.label = u[1];
                            break;
                          }
                          if (6 === u[0] && s2.label < o2[1]) {
                            s2.label = o2[1], o2 = u;
                            break;
                          }
                          if (o2 && s2.label < o2[2]) {
                            s2.label = o2[2], s2.ops.push(u);
                            break;
                          }
                          o2[2] && s2.ops.pop(), s2.trys.pop();
                          continue;
                      }
                      u = t3.call(e3, s2);
                    } catch (a4) {
                      u = [6, a4], n2 = 0;
                    } finally {
                      r2 = o2 = 0;
                    }
                  if (5 & u[0])
                    throw u[1];
                  return { value: u[0] ? u[1] : void 0, done: true };
                };
              }
            }(this, function(n2) {
              return t2 = this.miniProgram ? "zego.fileHandler" : "zego.storeHandler", this.fileConfig = s({ maxSize: 5e6, maxFiles: 3, dropPer: 1 }, e2), t2 = r(112)("./" + t2).ZegoStoreImpl, this.storeHandler = new t2(this.product, this.fileConfig, this.miniProgram), [2];
            });
          });
        }, a.prototype.setDB = function(e2) {
          this.storeHandler.setDB(e2);
        }, a.prototype.setLogLevel = function(e2) {
          return void 0 !== (e2 = o.a[e2]) && (this.logLevel = e2, true);
        }, a.prototype.setHeaderInfo = function(e2) {
          this.storeHandler.storeData(e2);
        }, a.prototype.setCommonField = function(e2) {
          return "[object Map]" === Object.prototype.toString.call(e2) && null != e2.get("userID") && "string" == typeof e2.get("userID") && "" !== e2.get("userID") && (this.commonField = e2, this.isUserIDExist = true);
        }, a.prototype.write = function(e2, t2, r2, n2) {
          var s2 = o.a[t2];
          return void 0 !== s2 && (e2 = this.logParams(e2, r2, n2), this.logLevel !== o.a.DISABLE && this.logLevel <= s2 && ("debug" == t2 || "report" == t2 || "info" == t2 ? console.info : console.warn)(e2), this.logRemoteLevel !== o.a.DISABLE && this.logRemoteLevel <= s2 && this.storeHandler.storeData(e2), true);
        }, a.prototype.upload = function(e2, t2, r2) {
          return this.storeHandler.upload(e2, t2, r2);
        }, a.prototype.logParams = function(e2, t2, r2) {
          return "[".concat(this.getCurrentTime(), "][").concat(e2, "][").concat(t2, "]:").concat(r2);
        }, a.prototype.getCurrentTime = function() {
          var e2 = /* @__PURE__ */ new Date();
          return "".concat(this.D[e2.getMonth() + 1] || e2.getMonth() + 1).concat(this.D[e2.getDate()] || e2.getDate(), " ").concat(e2.toLocaleTimeString("zh-CN"), ".").concat(e2.getMilliseconds());
        }, a);
        function a(e2, t2, r2) {
          this.product = e2, this.miniProgram = t2, this.logLevel = o.a.INFO, this.logRemoteLevel = 0, this.isUserIDExist = false, this.D = ["00", "01", "02", "03", "04", "05", "06", "07", "08", "09"], this.stateCenter = n.a.getInstance(), this.init(r2);
        }
      }, function(e, t, r) {
        "use strict";
        r.r(t), r.d(t, "convertFormData", function() {
          return i;
        });
        var n = function(e2, t2) {
          var r2 = "function" == typeof Symbol && e2[Symbol.iterator];
          if (!r2)
            return e2;
          var n2, o2, s2 = r2.call(e2), i2 = [];
          try {
            for (; (void 0 === t2 || 0 < t2--) && !(n2 = s2.next()).done; )
              i2.push(n2.value);
          } catch (e3) {
            o2 = { error: e3 };
          } finally {
            try {
              n2 && !n2.done && (r2 = s2.return) && r2.call(s2);
            } finally {
              if (o2)
                throw o2.error;
            }
          }
          return i2;
        }, o = function(e2, t2, r2) {
          if (r2 || 2 === arguments.length)
            for (var n2, o2 = 0, s2 = t2.length; o2 < s2; o2++)
              !n2 && o2 in t2 || ((n2 = n2 || Array.prototype.slice.call(t2, 0, o2))[o2] = t2[o2]);
          return e2.concat(n2 || Array.prototype.slice.call(t2));
        };
        function s(e2) {
          for (var t2 = [], r2 = 0; r2 < e2.length; r2++) {
            t2.push.apply(t2, o([], n(function(e3, t3) {
              var r3 = [], n2 = 0, o2 = e3.charCodeAt(t3);
              return o2 < 128 ? r3[n2++] = o2 : (o2 < 2048 ? r3[n2++] = o2 >> 6 | 192 : (55296 == (64512 & o2) && t3 + 1 < e3.length && 56320 == (64512 & e3.charCodeAt(t3 + 1)) ? (o2 = 65536 + ((1023 & o2) << 10) + (1023 & e3.charCodeAt(++t3)), r3[n2++] = o2 >> 18 | 240, r3[n2++] = o2 >> 12 & 63 | 128) : r3[n2++] = o2 >> 12 | 224, r3[n2++] = o2 >> 6 & 63 | 128), r3[n2++] = 63 & o2 | 128), r3;
            }(e2, r2)), false));
            var s2 = e2.codePointAt(r2);
            s2 && 65535 < s2 && r2++;
          }
          return t2;
        }
        function i(e2, t2, r2, i2) {
          var a, u, c, l, d = "wxmpFormBoundary" + Math.random().toString(16).substring(2), p = "--" + d, h = p + "--", g = [];
          for (a in e2)
            g = g.concat((c = e2[u = a], s("".concat(p, '\r\nContent-Disposition: form-data; name="').concat(u, '"\r\n\r\n').concat(c, "\r\n"))));
          return g = (g = g.concat((t2 = t2, r2 = r2, i2 = i2, (l = (l = s("".concat(l = p, '\r\nContent-Disposition: form-data; name="').concat(t2, '"; filename="').concat(i2, '"\r\nContent-Type: application/x-zip-compressed\r\n\r\n'))).concat(Array.prototype.slice.call(r2))).push.apply(l, o([], n(s("\r\n")), false)), l))).concat(s(h)), ["multipart/form-data; boundary=" + d, new Uint8Array(g).buffer];
        }
      }, function(e, t) {
        throw new Error("Module parse failed: Unexpected token (5:27)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n| import { ZegoStore, FileConfig, UploadRequestParam } from '../zego.entity';\n| \n> export class ZegoStoreImpl implements ZegoStore {\n|     basePath = '';\n|     fileManager: any;");
      }, function(e, t, r) {
        "use strict";
        r.r(t), r.d(t, "ZegoStoreImpl", function() {
          return s;
        });
        t = r(82);
        var n = r.n(t), o = r(7), s = (i.prototype.setDB = function(e2) {
          var t2 = this;
          this.store = e2, this.storeData(this.buffer, function() {
            return t2.buffer.length = 0;
          });
        }, i.prototype.storeData = function(e2, t2) {
          var r2 = this;
          if (e2 && e2.length)
            if (this.store) {
              var n2 = Object(o.b)(), s2 = (/* @__PURE__ */ new Date()).getTime() + "_";
              try {
                var i2 = this.store.transaction([this.tname], "readwrite").objectStore(this.tname);
                "string" == typeof e2 ? i2.put(e2, s2 + n2) : e2.forEach(function(e3, t3) {
                  return i2.put(e3, s2 + n2 + "_" + r2.padStart(t3 / 100));
                });
              } catch (e3) {
              }
              t2 && t2();
            } else
              "string" == typeof e2 ? this.buffer.push(e2) : (t2 = this.buffer).push.apply(t2, function(e3, t3, r3) {
                if (r3 || 2 === arguments.length)
                  for (var n3, o2 = 0, s3 = t3.length; o2 < s3; o2++)
                    !n3 && o2 in t3 || ((n3 = n3 || Array.prototype.slice.call(t3, 0, o2))[o2] = t3[o2]);
                return e3.concat(n3 || Array.prototype.slice.call(t3));
              }([], function(e3, t3) {
                var r3 = "function" == typeof Symbol && e3[Symbol.iterator];
                if (!r3)
                  return e3;
                var n3, o2, s3 = r3.call(e3), i3 = [];
                try {
                  for (; (void 0 === t3 || 0 < t3--) && !(n3 = s3.next()).done; )
                    i3.push(n3.value);
                } catch (e4) {
                  o2 = { error: e4 };
                } finally {
                  try {
                    n3 && !n3.done && (r3 = s3.return) && r3.call(s3);
                  } finally {
                    if (o2)
                      throw o2.error;
                  }
                }
                return i3;
              }(e2), false));
        }, i.prototype.upload = function(e2, t2, r2) {
          var n2 = this, o2 = { time: Date.now(), readTime: 0, appID: e2.appID, userID: e2.userID, version: e2.version, action: t2, apicall: r2, total: 0, files: "", key: "" };
          return this.readData(o2, r2).then(function(t3) {
            var r3, s2;
            if (t3)
              return r3 = (/* @__PURE__ */ new Date()).getTime(), (s2 = new FormData()).append("logs", t3), s2.append("id_name", e2.userID), s2.append("appid", e2.appID), s2.append("timestamp", r3 + ""), s2.append("token", e2.token), s2.append("deviceid", e2.deviceID || ""), s2.append("product", e2.product), s2.append("req_sdk", "1"), new Promise(function(t4, r4) {
                n2.postFile(e2.uploadURL, s2, o2, t4, r4);
              });
          });
        }, i.prototype.postFile = function(e2, t2, r2, n2, o2) {
          var s2 = this, i2 = new XMLHttpRequest();
          i2.open("post", e2), i2.onreadystatechange = function() {
            var a;
            4 == i2.readyState && (200 <= i2.status && i2.status < 300 || 304 == i2.status ? 0 === (a = JSON.parse(i2.responseText)).code ? (r2.time = Date.now() - r2.time, (0, console.log)("ZegoLoggerSDK:upload", JSON.stringify(r2)), s2.postFailCount = 0, s2.clearUploaded(), n2()) : 4 == a.code && (s2.postFailCount++, s2.postFailCount < 3 ? s2.postFile(e2, t2, r2, n2, o2) : (s2.postFailCount = 0, o2(a))) : (s2.postFailCount = 0, o2({ code: 1001, message: "upload fail" })));
          }, i2.send(t2);
        }, i.prototype.readData = function(e2, t2) {
          return function(e3, t3, r2, n2) {
            return new (r2 = r2 || Promise)(function(o2, s2) {
              function i2(e4) {
                try {
                  u(n2.next(e4));
                } catch (e5) {
                  s2(e5);
                }
              }
              function a(e4) {
                try {
                  u(n2.throw(e4));
                } catch (e5) {
                  s2(e5);
                }
              }
              function u(e4) {
                var t4;
                e4.done ? o2(e4.value) : ((t4 = e4.value) instanceof r2 ? t4 : new r2(function(e5) {
                  e5(t4);
                })).then(i2, a);
              }
              u((n2 = n2.apply(e3, t3 || [])).next());
            });
          }(this, void 0, void 0, function() {
            var r2 = this;
            return function(e3, t3) {
              var r3, n2, o2, s2 = { label: 0, sent: function() {
                if (1 & o2[0])
                  throw o2[1];
                return o2[1];
              }, trys: [], ops: [] }, i2 = { next: a(0), throw: a(1), return: a(2) };
              return "function" == typeof Symbol && (i2[Symbol.iterator] = function() {
                return this;
              }), i2;
              function a(i3) {
                return function(a2) {
                  var u = [i3, a2];
                  if (r3)
                    throw new TypeError("Generator is already executing.");
                  for (; s2; )
                    try {
                      if (r3 = 1, n2 && (o2 = 2 & u[0] ? n2.return : u[0] ? n2.throw || ((o2 = n2.return) && o2.call(n2), 0) : n2.next) && !(o2 = o2.call(n2, u[1])).done)
                        return o2;
                      switch (n2 = 0, (u = o2 ? [2 & u[0], o2.value] : u)[0]) {
                        case 0:
                        case 1:
                          o2 = u;
                          break;
                        case 4:
                          return s2.label++, { value: u[1], done: false };
                        case 5:
                          s2.label++, n2 = u[1], u = [0];
                          continue;
                        case 7:
                          u = s2.ops.pop(), s2.trys.pop();
                          continue;
                        default:
                          if (!(o2 = 0 < (o2 = s2.trys).length && o2[o2.length - 1]) && (6 === u[0] || 2 === u[0])) {
                            s2 = 0;
                            continue;
                          }
                          if (3 === u[0] && (!o2 || u[1] > o2[0] && u[1] < o2[3])) {
                            s2.label = u[1];
                            break;
                          }
                          if (6 === u[0] && s2.label < o2[1]) {
                            s2.label = o2[1], o2 = u;
                            break;
                          }
                          if (o2 && s2.label < o2[2]) {
                            s2.label = o2[2], s2.ops.push(u);
                            break;
                          }
                          o2[2] && s2.ops.pop(), s2.trys.pop();
                          continue;
                      }
                      u = t3.call(e3, s2);
                    } catch (a3) {
                      u = [6, a3], n2 = 0;
                    } finally {
                      r3 = o2 = 0;
                    }
                  if (5 & u[0])
                    throw u[1];
                  return { value: u[0] ? u[1] : void 0, done: true };
                };
              }
            }(this, function(o2) {
              return [2, new Promise(function(o3) {
                var s2 = 0, i2 = [{ datas: [], size: 0 }], a = r2.store.transaction([r2.tname], "readonly").objectStore(r2.tname);
                a.getAll().onsuccess = function(u) {
                  if (u.target.result.forEach(function(e3) {
                    i2[s2].size > r2.fileConfig.maxSize && (i2[++s2] = { datas: [], size: 0 }), i2[s2].datas.push(e3), i2[s2].size += e3.length + 1;
                  }), 0 == s2 && !t2)
                    return o3(null);
                  a.getAllKeys().onsuccess = function(t3) {
                    r2.lastUploadKey = t3.target.result.pop();
                    var s3 = (t3 = new n.a()).folder("log");
                    s3 && 1 < i2[0].size ? (e2.readTime = Date.now() - e2.time, e2.files = i2.map(function(e3) {
                      return e3.size;
                    }), e2.key = r2.lastUploadKey, i2[i2.length - 1].datas.push(JSON.stringify(e2)), i2.forEach(function(e3, t4) {
                      return s3.file("".concat(r2.product).concat(t4, ".txt"), e3.datas.join("\n"));
                    }), t3.generateAsync({ type: "blob", compression: "DEFLATE", compressionOptions: { level: 9 } }).then(function(t4) {
                      e2.total = t4.size, o3(t4);
                    })) : o3(null);
                  };
                };
              })];
            });
          });
        }, i.prototype.clearUploaded = function() {
          var e2, t2, r2 = this;
          this.lastUploadKey ? (e2 = IDBKeyRange.lowerBound(this.lastUploadKey, true), this.lastUploadKey = "", t2 = [], this.store.transaction([this.tname], "readonly").objectStore(this.tname).openCursor(e2).onsuccess = function(e3) {
            var n2, s2, i2;
            if (!(e3 = e3.target.result))
              return (n2 = r2.store.transaction([r2.tname], "readwrite").objectStore(r2.tname)).clear(), s2 = Object(o.b)(), i2 = (/* @__PURE__ */ new Date()).getTime() + "_", void t2.forEach(function(e4, t3) {
                return n2.put(e4, i2 + s2 + "_" + r2.padStart(t3 / 100));
              });
            t2.push(e3.value), e3.continue();
          }) : this.store.transaction([this.tname], "readwrite").objectStore(this.tname).clear();
        }, i.prototype.padStart = function(e2) {
          return String(e2).replace(".", "");
        }, i);
        function i(e2, t2) {
          this.product = e2, this.fileConfig = t2, this.buffer = [], this.tname = "Log", this.postFailCount = 0, this.lastUploadKey = "";
        }
      }, function(e, t) {
        var r, n;
        e = e.exports = {};
        function o() {
          throw new Error("setTimeout has not been defined");
        }
        function s() {
          throw new Error("clearTimeout has not been defined");
        }
        try {
          r = "function" == typeof setTimeout ? setTimeout : o;
        } catch (e2) {
          r = o;
        }
        try {
          n = "function" == typeof clearTimeout ? clearTimeout : s;
        } catch (e2) {
          n = s;
        }
        function i(e2) {
          if (r === setTimeout)
            return setTimeout(e2, 0);
          if ((r === o || !r) && setTimeout)
            return (r = setTimeout)(e2, 0);
          try {
            return r(e2, 0);
          } catch (t2) {
            try {
              return r.call(null, e2, 0);
            } catch (t3) {
              return r.call(this, e2, 0);
            }
          }
        }
        var a, u = [], c = false, l = -1;
        function d() {
          c && a && (c = false, a.length ? u = a.concat(u) : l = -1, u.length && p());
        }
        function p() {
          if (!c) {
            for (var e2 = i(d), t2 = (c = true, u.length); t2; ) {
              for (a = u, u = []; ++l < t2; )
                a && a[l].run();
              l = -1, t2 = u.length;
            }
            a = null, c = false, function(e3) {
              if (n === clearTimeout)
                return clearTimeout(e3);
              if ((n === s || !n) && clearTimeout)
                return (n = clearTimeout)(e3);
              try {
                n(e3);
              } catch (t3) {
                try {
                  return n.call(null, e3);
                } catch (t4) {
                  return n.call(this, e3);
                }
              }
            }(e2);
          }
        }
        function h(e2, t2) {
          this.fun = e2, this.array = t2;
        }
        function g() {
        }
        e.nextTick = function(e2) {
          var t2 = new Array(arguments.length - 1);
          if (1 < arguments.length)
            for (var r2 = 1; r2 < arguments.length; r2++)
              t2[r2 - 1] = arguments[r2];
          u.push(new h(e2, t2)), 1 !== u.length || c || i(p);
        }, h.prototype.run = function() {
          this.fun.apply(null, this.array);
        }, e.title = "browser", e.browser = true, e.env = {}, e.argv = [], e.version = "", e.versions = {}, e.on = g, e.addListener = g, e.once = g, e.off = g, e.removeListener = g, e.removeAllListeners = g, e.emit = g, e.prependListener = g, e.prependOnceListener = g, e.listeners = function(e2) {
          return [];
        }, e.binding = function(e2) {
          throw new Error("process.binding is not supported");
        }, e.cwd = function() {
          return "/";
        }, e.chdir = function(e2) {
          throw new Error("process.chdir is not supported");
        }, e.umask = function() {
          return 0;
        };
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return a;
        });
        var n = r(86), o = r(91), s = r(4), i = function() {
          return (i = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var o2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, o2) && (e2[o2] = t2[o2]);
            return e2;
          }).apply(this, arguments);
        }, a = (u.prototype.setDB = function(e2) {
          var t2 = this;
          this.store ? this.store.setDB(e2).then(function(e3) {
            t2.config.isProd && e3.forEach(function(e4) {
              return t2.pendingQueue.enqueue(e4);
            });
          }) : this.db = e2;
        }, u.prototype.clearDB = function() {
          this.pendingQueue.clear(), this.store && this.store.clear();
        }, u.prototype.init = function(e2) {
          return function(e3, t2, r2, n2) {
            return new (r2 = r2 || Promise)(function(o2, s2) {
              function i2(e4) {
                try {
                  u2(n2.next(e4));
                } catch (e5) {
                  s2(e5);
                }
              }
              function a2(e4) {
                try {
                  u2(n2.throw(e4));
                } catch (e5) {
                  s2(e5);
                }
              }
              function u2(e4) {
                var t3;
                e4.done ? o2(e4.value) : ((t3 = e4.value) instanceof r2 ? t3 : new r2(function(e5) {
                  e5(t3);
                })).then(i2, a2);
              }
              u2((n2 = n2.apply(e3, t2 || [])).next());
            });
          }(this, void 0, void 0, function() {
            var t2, o2 = this;
            return function(e3, t3) {
              var r2, n2, o3, s2 = { label: 0, sent: function() {
                if (1 & o3[0])
                  throw o3[1];
                return o3[1];
              }, trys: [], ops: [] }, i2 = { next: a2(0), throw: a2(1), return: a2(2) };
              return "function" == typeof Symbol && (i2[Symbol.iterator] = function() {
                return this;
              }), i2;
              function a2(i3) {
                return function(a3) {
                  var u2 = [i3, a3];
                  if (r2)
                    throw new TypeError("Generator is already executing.");
                  for (; s2; )
                    try {
                      if (r2 = 1, n2 && (o3 = 2 & u2[0] ? n2.return : u2[0] ? n2.throw || ((o3 = n2.return) && o3.call(n2), 0) : n2.next) && !(o3 = o3.call(n2, u2[1])).done)
                        return o3;
                      switch (n2 = 0, (u2 = o3 ? [2 & u2[0], o3.value] : u2)[0]) {
                        case 0:
                        case 1:
                          o3 = u2;
                          break;
                        case 4:
                          return s2.label++, { value: u2[1], done: false };
                        case 5:
                          s2.label++, n2 = u2[1], u2 = [0];
                          continue;
                        case 7:
                          u2 = s2.ops.pop(), s2.trys.pop();
                          continue;
                        default:
                          if (!(o3 = 0 < (o3 = s2.trys).length && o3[o3.length - 1]) && (6 === u2[0] || 2 === u2[0])) {
                            s2 = 0;
                            continue;
                          }
                          if (3 === u2[0] && (!o3 || u2[1] > o3[0] && u2[1] < o3[3])) {
                            s2.label = u2[1];
                            break;
                          }
                          if (6 === u2[0] && s2.label < o3[1]) {
                            s2.label = o3[1], o3 = u2;
                            break;
                          }
                          if (o3 && s2.label < o3[2]) {
                            s2.label = o3[2], s2.ops.push(u2);
                            break;
                          }
                          o3[2] && s2.ops.pop(), s2.trys.pop();
                          continue;
                      }
                      u2 = t3.call(e3, s2);
                    } catch (a4) {
                      u2 = [6, a4], n2 = 0;
                    } finally {
                      r2 = o3 = 0;
                    }
                  if (5 & u2[0])
                    throw u2[1];
                  return { value: u2[0] ? u2[1] : void 0, done: true };
                };
              }
            }(this, function(a2) {
              return this.config = i(i({}, s.b), e2), this.logger = new n.a(this.miniProgram), this.logger.setLogUrlParams({ product: this.product, signature: this.config.token || "", appid: this.config.appID, id_name: this.config.userID || "", deviceid: this.config.deviceID || "" }), this.logger.setLogServer(this.config.serverUrl || ""), this.logger.setPostSucCallback(this.postSucHandler.bind(this)), this.logger.setPostFailCallback(function(e3) {
                e3.push.apply(e3, function(e4, t3, r2) {
                  if (r2 || 2 === arguments.length)
                    for (var n2, o3 = 0, s2 = t3.length; o3 < s2; o3++)
                      !n2 && o3 in t3 || ((n2 = n2 || Array.prototype.slice.call(t3, 0, o3))[o3] = t3[o3]);
                  return e4.concat(n2 || Array.prototype.slice.call(t3));
                }([], function(e4, t3) {
                  var r2 = "function" == typeof Symbol && e4[Symbol.iterator];
                  if (!r2)
                    return e4;
                  var n2, o3, s2 = r2.call(e4), i2 = [];
                  try {
                    for (; (void 0 === t3 || 0 < t3--) && !(n2 = s2.next()).done; )
                      i2.push(n2.value);
                  } catch (e5) {
                    o3 = { error: e5 };
                  } finally {
                    try {
                      n2 && !n2.done && (r2 = s2.return) && r2.call(s2);
                    } finally {
                      if (o3)
                        throw o3.error;
                    }
                  }
                  return i2;
                }(o2.pendingQueue.readStoreData(1)), false)), o2.store.setItems(e3);
              }), this.initPendingQueue(), t2 = r(49)("./" + (this.miniProgram ? "zego.impl.wx" : "zego.impl.web")).createZegoStore, this.store = t2(this.config.appID, this.miniProgram), (this.db || this.miniProgram) && this.store.setDB(this.db).then(function(e3) {
                o2.config.isProd && e3.forEach(function(e4) {
                  return o2.pendingQueue.enqueue(e4);
                });
              }), [2];
            });
          });
        }, u.prototype.pause = function() {
          this.isPaused = true;
        }, u.prototype.startReport = function(e2) {
          var t2 = e2.get("userID"), r2 = e2.get("token");
          return !(!t2 || "string" != typeof t2) && (!(!r2 || "string" != typeof r2) && (this.startCommonField = e2, this.config.userID = t2, this.config.token = r2, this.logger.setLogUrlParams({ product: this.product, signature: this.config.token, appid: this.config.appID, id_name: this.config.userID || "", deviceid: this.config.deviceID || "" }), (t2 = e2.get("serverUrl")) && (this.config.serverUrl = t2, this.logger.setLogServer(this.config.serverUrl)), this.isConfigOK(this.config) && (e2 = (r2 = this.pendingQueue.getPendingDataInfo()).pendingDataSize, t2 = r2.size, this.checkPendingQueue(e2, t2)), true));
        }, u.prototype.resume = function() {
          this.isPaused = false;
          var e2 = (t2 = this.pendingQueue.getPendingDataInfo()).pendingDataSize, t2 = t2.size;
          this.checkPendingQueue(e2, t2);
        }, u.prototype.report = function(e2, t2) {
          void 0 === t2 && (t2 = false);
          var r2 = Object(s.g)();
          r2 = { key: (/* @__PURE__ */ new Date()).getTime() + "_" + r2, value: e2 };
          return this.config.isProd && this.pendingQueue.enqueue(r2), !this.config.isProd && t2 || this.store.setItems([r2]), true;
        }, u.prototype.isConfigOK = function(e2) {
          return "" !== e2.userID && "" !== e2.token && "" !== e2.server;
        }, u.prototype.postSucHandler = function(e2) {
          this.store.removeItems(e2);
          var t2 = (e2 = this.pendingQueue.getPendingDataInfo()).pendingDataSize;
          e2 = e2.size;
          this.checkPendingQueue(t2, e2);
        }, u.prototype.checkPendingQueue = function(e2, t2) {
          if (e2 > this.config.reportSize || t2 > this.config.reportNum) {
            if ((this.isPaused || !this.config.userID || !this.config.token || !this.config.serverUrl) && (e2 >= this.cacheMaxSize || s.a.totalAvailCache <= 0))
              return this.store.setItems(this.pendingQueue.readStoreData(this.cacheDelPer));
            if (!this.logger.reportAllowed() && (e2 >= this.cacheMaxSize || s.a.totalAvailCache <= 0))
              return this.store.setItems(this.pendingQueue.readStoreData(this.cacheDelPer));
            e2 = (t2 = this.pendingQueue.readReportData(this.config.reportSize)).totalLen, t2 = t2.reportDataArr, this.logger.report(t2), this.pendingQueue.refresh(e2);
          }
        }, u.prototype.initPendingQueue = function() {
          var e2 = this;
          this.pendingQueue = new o.a(), this.pendingQueue.setListener({ enCallback: function(t2, r2, n2) {
            e2.checkPendingQueue(n2, r2);
          } });
        }, u);
        function u(e2, t2) {
          this.product = e2, this.miniProgram = t2, this.QUEUE_MAX = 100, this.cacheMaxSize = s.a.cacheMaxSize, this.cacheDelPer = s.a.cacheDelPer, this.forceDataTotalLen = 0, this.isPaused = false;
        }
      }, function(e, t, r) {
        var n = { "./zego.impl.web": 50, "./zego.impl.web.ts": 50, "./zego.impl.wx": 51, "./zego.impl.wx.ts": 51 };
        function o(e2) {
          return e2 = s(e2), r(e2);
        }
        function s(e2) {
          if (r.o(n, e2))
            return n[e2];
          throw (e2 = new Error("Cannot find module '" + e2 + "'")).code = "MODULE_NOT_FOUND", e2;
        }
        o.keys = function() {
          return Object.keys(n);
        }, o.resolve = s, (e.exports = o).id = 49;
      }, function(e, t, r) {
        "use strict";
        r.r(t), r.d(t, "createZegoStore", function() {
          return s;
        }), r.d(t, "createZegoWebSocket", function() {
          return i;
        });
        var n = (o.prototype.setDB = function(e2) {
          return this.store = e2, this.getAll();
        }, o.prototype.clear = function() {
          this.buffer.length = 0;
        }, o.prototype.setItems = function(e2) {
          var t2;
          if (this.store)
            try {
              var r2 = this.store.transaction([this.tname], "readwrite").objectStore(this.tname);
              e2.forEach(function(e3) {
                return r2.put(e3.value, e3.key);
              });
            } catch (e3) {
            }
          else
            (t2 = this.buffer).push.apply(t2, function(e3, t3, r3) {
              if (r3 || 2 === arguments.length)
                for (var n2, o2 = 0, s2 = t3.length; o2 < s2; o2++)
                  !n2 && o2 in t3 || ((n2 = n2 || Array.prototype.slice.call(t3, 0, o2))[o2] = t3[o2]);
              return e3.concat(n2 || Array.prototype.slice.call(t3));
            }([], function(e3, t3) {
              var r3 = "function" == typeof Symbol && e3[Symbol.iterator];
              if (!r3)
                return e3;
              var n2, o2, s2 = r3.call(e3), i2 = [];
              try {
                for (; (void 0 === t3 || 0 < t3--) && !(n2 = s2.next()).done; )
                  i2.push(n2.value);
              } catch (e4) {
                o2 = { error: e4 };
              } finally {
                try {
                  n2 && !n2.done && (r3 = s2.return) && r3.call(s2);
                } finally {
                  if (o2)
                    throw o2.error;
                }
              }
              return i2;
            }(e2), false));
        }, o.prototype.removeItems = function(e2) {
          var t2;
          this.store && (t2 = this.store.transaction([this.tname], "readwrite").objectStore(this.tname), e2.forEach(function(e3) {
            return t2.delete(e3.key);
          }));
        }, o.prototype.getAll = function() {
          var e2 = this;
          return new Promise(function(t2) {
            var r2 = e2.store.transaction([e2.tname], "readonly").objectStore(e2.tname);
            r2.getAllKeys().onsuccess = function(e3) {
              var n2 = e3.target.result;
              r2.getAll().onsuccess = function(e4) {
                e4 = e4.target.result.map(function(e5, t3) {
                  return { key: n2[t3], value: e5 };
                }), t2(e4);
              };
            };
          });
        }, o);
        function o() {
          this.buffer = [], this.tname = "DataReport";
        }
        function s() {
          return new n();
        }
        function i(e2, t2) {
          var r2 = [];
          return (e2 = (Object.keys(t2).forEach(function(e3) {
            r2.push("".concat(e3, "=").concat(t2[e3]));
          }), new WebSocket(e2 + "?" + r2.join("&")))).binaryType = "arraybuffer", e2;
        }
      }, function(e, t) {
        throw new Error("Module parse failed: Unexpected token (4:20)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n| import { ReportDataItem, ZegoStore, ZegoWebSocket } from '../../common/zego.entity';\n| \n> class ZegoStoreImpl implements ZegoStore {\n|     isAlipay = false;\n|     isReadAll = false;");
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return l;
        });
        var n = r(6), o = (t = r(14), r.n(t)), s = (t = r(16), r.n(t)), i = (t = r(17), r.n(t)), a = (t = r(53), r.n(t)), u = (t = r(11), r.n(t)), c = r(54), l = (Object.defineProperty(d.prototype, "publicKey", { get: function() {
          return "-----BEGIN RSA Public Key-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0XCwmB4kWk0ZI9mD8AqU\nKikrV4G8JWpsTeYa6txrQUaZzTtvRzfUco8wKnBe4FI+vtWqscB7/Yp9wdM+ymDX\nd2THFtYqgp2ZpYBrIPr/fBBHXOOmzhu0OW89VW+fmrNHoytBHdEkGYprljIvJtjR\n8mAasd6jSbhYla9soa8ukZgaOnKssgqWlgQOAf0RSSP3aBGS4ldY9lB5jtZDg2VK\n3eTwRg56HrmR7HO+VwCeqaxbwLNUQkgW99ovVwtgCXCcoVOApkiqx3qWNLVrOnTr\nn0H1B6g8t6QijZ3aQHW0I86UaO1SHJ8TOdZnCouWkFUfmJ03dPs7Up59u7wyzNIF\nuQIDAQAB\n-----END RSA Public Key-----";
        }, enumerable: false, configurable: true }), d.prototype.encrypt = function(e2, t2) {
          return e2 = o.a.encrypt(this.uint8Array2WordArray(e2), t2.cryptoConfig.key2, t2.cryptoConfig.iv2).toString(), n.a.toUint8Array(e2);
        }, d.prototype.decrypt = function(e2, t2) {
          return this.wordArray2Uint8Array(o.a.decrypt(n.a.fromUint8Array(e2), t2.cryptoConfig.key2, t2.cryptoConfig.iv2));
        }, d.prototype.encryptString = function(e2, t2) {
          return o.a.encrypt(e2, t2.cryptoConfig.appIDKey, t2.cryptoConfig.appIDIV).toString();
        }, d.prototype.decryptString = function(e2, t2) {
          return o.a.decrypt(e2, t2.cryptoConfig.appIDKey, t2.cryptoConfig.appIDIV).toString(i.a);
        }, d.prototype.generateK1Sign = function(e2) {
          var t2 = this.generateNonce();
          e2.cryptoConfig.key1 = i.a.parse(t2), e2.cryptoConfig.iv1 = { iv: s.a.parse(u()(t2).toString().toLowerCase()) }, e2 = new c.a(this.publicKey).encrypt(t2);
          return this.wordArray2Uint8Array(s.a.parse(e2));
        }, d.prototype.decryptK2Sign = function(e2, t2) {
          try {
            t2.cryptoConfig.key2 = o.a.decrypt(n.a.fromUint8Array(e2), t2.cryptoConfig.key1, t2.cryptoConfig.iv1), t2.cryptoConfig.iv2 = { iv: u()(t2.cryptoConfig.key2) };
          } catch (e3) {
          }
        }, d.prototype.generateNonce = function() {
          var e2 = Math.random().toString().substring(2, 18);
          return e2.length < 16 && (e2 += e2.substring(0, 16 - e2.length)), e2;
        }, d.prototype.generateAppIDKey = function(e2) {
          var t2 = u()(String(e2.appID)).toString().toLowerCase();
          e2.cryptoConfig.appIDKey = i.a.parse(t2), e2.cryptoConfig.appIDIV = { iv: s.a.parse(t2) };
        }, d.prototype.md5 = function(e2) {
          return this.wordArray2Uint8Array(u()(e2));
        }, d.prototype.md5Bytes = function(e2) {
          return this.wordArray2Uint8Array(u()(this.uint8Array2WordArray(e2)));
        }, d.prototype.wordArray2Uint8Array = function(e2) {
          for (var t2 = e2.words, r2 = e2.sigBytes, n2 = new Uint8Array(r2), o2 = 0; o2 < r2; o2++) {
            var s2 = t2[o2 >>> 2] >>> 24 - o2 % 4 * 8 & 255;
            n2[o2] = s2;
          }
          return n2;
        }, d.prototype.uint8Array2WordArray = function(e2) {
          for (var t2 = e2.length, r2 = [], n2 = 0; n2 < t2; n2++)
            r2[n2 >>> 2] |= (255 & e2[n2]) << 24 - n2 % 4 * 8;
          return a.a.create(r2, t2);
        }, d);
        function d() {
        }
      }, function(e, t, r) {
        var n;
        e.exports = (n = r(5), function() {
          var e2, t2;
          "function" == typeof ArrayBuffer && (e2 = n.lib.WordArray, t2 = e2.init, (e2.init = function(e3) {
            if ((e3 = (e3 = e3 instanceof ArrayBuffer ? new Uint8Array(e3) : e3) instanceof Int8Array || "undefined" != typeof Uint8ClampedArray && e3 instanceof Uint8ClampedArray || e3 instanceof Int16Array || e3 instanceof Uint16Array || e3 instanceof Int32Array || e3 instanceof Uint32Array || e3 instanceof Float32Array || e3 instanceof Float64Array ? new Uint8Array(e3.buffer, e3.byteOffset, e3.byteLength) : e3) instanceof Uint8Array) {
              for (var r2 = e3.byteLength, n2 = [], o = 0; o < r2; o++)
                n2[o >>> 2] |= e3[o] << 24 - o % 4 * 8;
              t2.call(this, n2, r2);
            } else
              t2.apply(this, arguments);
          }).prototype = e2);
        }(), n.lib.WordArray);
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return u;
        });
        var n = r(18), o = r(55), s = r(56), i = r(57), a = r(58), u = (c.prototype.parseKey = function(e2) {
          try {
            var t2 = 0, r2 = 0, o2 = /^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(e2) ? s.a.decode(e2) : i.a.unarmor(e2), u2 = a.a.decode(o2);
            if (9 === (u2 = 3 === u2.sub.length ? u2.sub[2].sub[0] : u2).sub.length)
              t2 = u2.sub[1].getHexStringValue(), this.n = Object(n.b)(t2, 16), r2 = u2.sub[2].getHexStringValue(), this.e = parseInt(r2, 16);
            else {
              if (2 !== u2.sub.length)
                return false;
              var c2 = u2.sub[1].sub[0];
              t2 = c2.sub[0].getHexStringValue();
              this.n = Object(n.b)(t2, 16), r2 = c2.sub[1].getHexStringValue(), this.e = parseInt(r2, 16);
            }
            return true;
          } catch (e3) {
            return false;
          }
        }, c.prototype.pkcs1pad2 = function(e2, t2) {
          for (var r2 = [], s2 = e2.length - 1; 0 <= s2 && 0 < t2; ) {
            var i2 = e2.charCodeAt(s2--);
            i2 < 128 ? r2[--t2] = i2 : 127 < i2 && i2 < 2048 ? (r2[--t2] = 63 & i2 | 128, r2[--t2] = i2 >> 6 | 192) : (r2[--t2] = 63 & i2 | 128, r2[--t2] = i2 >> 6 & 63 | 128, r2[--t2] = i2 >> 12 | 224);
          }
          r2[--t2] = 0;
          for (var a2 = new o.a(), u2 = []; 2 < t2; ) {
            for (u2[0] = 0; 0 == u2[0]; )
              a2.nextBytes(u2);
            r2[--t2] = u2[0];
          }
          return r2[--t2] = 2, r2[--t2] = 0, new n.a(r2);
        }, c.prototype.encrypt = function(e2) {
          for (var t2 = this.n.bitLength() + 7 >> 3, r2 = this.pkcs1pad2(e2, t2).modPowInt(this.e, this.n).toString(16), n2 = r2.length, o2 = 0; o2 < 2 * t2 - n2; o2++)
            r2 = "0" + r2;
          return r2;
        }, c);
        function c(e2) {
          this.e = 0, this.parseKey(e2);
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return c;
        });
        var n, o = r(21), s = [], i = 0, a = void 0;
        if ("undefined" != typeof window && window.crypto && window.crypto.getRandomValues) {
          var u = new Uint32Array(256);
          for (window.crypto.getRandomValues(u), a = 0; a < u.length; ++a)
            s[i++] = 255 & u[a];
        }
        l.prototype.nextBytes = function(e2) {
          for (var t2 = 0; t2 < e2.length; ++t2)
            e2[t2] = function() {
              if (null == n) {
                for (n = Object(o.a)(); i < o.b; ) {
                  var e3 = Math.floor(65536 * Math.random());
                  s[i++] = 255 & e3;
                }
                for (n.init(s), i = 0; i < s.length; ++i)
                  s[i] = 0;
                i = 0;
              }
              return n.next();
            }();
        };
        var c = l;
        function l() {
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return o;
        });
        var n, o = { decode: function(e2) {
          if (void 0 === n) {
            var t2 = "0123456789ABCDEF", r2 = " \f\n\r	 \u2028\u2029";
            for (n = {}, a = 0; a < 16; ++a)
              n[t2.charAt(a)] = a;
            for (t2 = t2.toLowerCase(), a = 10; a < 16; ++a)
              n[t2.charAt(a)] = a;
            for (a = 0; a < r2.length; ++a)
              n[r2.charAt(a)] = -1;
          }
          for (var o2 = [], s = 0, i = 0, a = 0; a < e2.length; ++a) {
            var u = e2.charAt(a);
            if ("=" == u)
              break;
            if (-1 != (u = n[u])) {
              if (void 0 === u)
                throw new Error("Illegal character at offset " + a);
              s |= u, 2 <= ++i ? (o2[o2.length] = s, i = s = 0) : s <<= 4;
            }
          }
          if (i)
            throw new Error("Hex encoding incomplete: 4 bits missing");
          return o2;
        } };
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return o;
        });
        var n, o = { decode: function(e2) {
          if (void 0 === n) {
            var t2 = "= \f\n\r	 \u2028\u2029";
            for (n = /* @__PURE__ */ Object.create(null), i = 0; i < 64; ++i)
              n["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i)] = i;
            for (n["-"] = 62, n._ = 63, i = 0; i < t2.length; ++i)
              n[t2.charAt(i)] = -1;
          }
          for (var r2 = [], o2 = 0, s = 0, i = 0; i < e2.length; ++i) {
            var a = e2.charAt(i);
            if ("=" == a)
              break;
            if (-1 != (a = n[a])) {
              if (void 0 === a)
                throw new Error("Illegal character at offset " + i);
              o2 |= a, 4 <= ++s ? (r2[r2.length] = o2 >> 16, r2[r2.length] = o2 >> 8 & 255, r2[r2.length] = 255 & o2, s = o2 = 0) : o2 <<= 6;
            }
          }
          switch (s) {
            case 1:
              throw new Error("Base64 encoding incomplete: at least 2 bits missing");
            case 2:
              r2[r2.length] = o2 >> 10;
              break;
            case 3:
              r2[r2.length] = o2 >> 16, r2[r2.length] = o2 >> 8 & 255;
          }
          return r2;
        }, re: /-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/, unarmor: function(e2) {
          var t2 = o.re.exec(e2);
          if (t2)
            if (t2[1])
              e2 = t2[1];
            else {
              if (!t2[2])
                throw new Error("RegExp out of sync");
              e2 = t2[2];
            }
          return o.decode(e2);
        } };
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return i;
        });
        var n = r(59), o = (s.prototype.get = function(e2) {
          if ((e2 = void 0 === e2 ? this.pos++ : e2) >= this.enc.length)
            throw new Error("Requesting byte offset " + e2 + " on a stream of length " + this.enc.length);
          return "string" == typeof this.enc ? this.enc.charCodeAt(e2) : this.enc[e2];
        }, s.prototype.hexByte = function(e2) {
          return this.hexDigits.charAt(e2 >> 4 & 15) + this.hexDigits.charAt(15 & e2);
        }, s.prototype.hexDump = function(e2, t2, r2) {
          for (var n2 = "", o2 = e2; o2 < t2; ++o2)
            if (n2 += this.hexByte(this.get(o2)), true !== r2)
              switch (15 & o2) {
                case 7:
                  n2 += "  ";
                  break;
                case 15:
                  n2 += "\n";
                  break;
                default:
                  n2 += " ";
              }
          return n2;
        }, s);
        function s(e2, t2) {
          this.hexDigits = "0123456789ABCDEF", e2 instanceof s ? (this.enc = e2.enc, this.pos = e2.pos) : (this.enc = e2, this.pos = t2);
        }
        a.prototype.posStart = function() {
          return this.stream.pos;
        }, a.prototype.posEnd = function() {
          return this.stream.pos + this.header + Math.abs(this.length);
        }, a.prototype.toHexString = function() {
          return this.stream.hexDump(this.posStart(), this.posEnd(), true);
        }, a.decodeLength = function(e2) {
          var t2 = 127 & (r2 = e2.get());
          if (t2 == r2)
            return t2;
          if (6 < t2)
            throw new Error("Length over 48 bits not supported at position " + (e2.pos - 1));
          if (0 == t2)
            return null;
          for (var r2 = 0, n2 = 0; n2 < t2; ++n2)
            r2 = 256 * r2 + e2.get();
          return r2;
        }, a.prototype.getHexStringValue = function() {
          var e2 = this.toHexString(), t2 = 2 * this.header, r2 = 2 * this.length;
          return e2.substr(t2, r2);
        }, a.decode = function(e2) {
          function t2() {
            var e3 = [];
            if (null !== s2) {
              for (var t3 = i2 + s2; r2.pos < t3; )
                e3[e3.length] = a.decode(r2);
              if (r2.pos != t3)
                throw new Error("Content size is not correct for container starting at offset " + i2);
            } else
              try {
                for (; ; ) {
                  var n3 = a.decode(r2);
                  if (n3.tag.isEOC())
                    break;
                  e3[e3.length] = n3;
                }
                s2 = i2 - r2.pos;
              } catch (e4) {
                throw new Error("Exception while decoding undefined length content: " + e4);
              }
            return e3;
          }
          var r2 = e2 instanceof o ? e2 : new o(e2, 0), n2 = (e2 = new o(r2), new u(r2)), s2 = a.decodeLength(r2), i2 = r2.pos, c2 = i2 - e2.pos, l = null;
          if (n2.tagConstructed)
            l = t2();
          else if (n2.isUniversal() && (3 == n2.tagNumber || 4 == n2.tagNumber))
            try {
              if (3 == n2.tagNumber && 0 != r2.get())
                throw new Error("BIT STRINGs with unused bits cannot encapsulate.");
              l = t2();
              for (var d = 0; d < l.length; ++d)
                if (l[d].tag.isEOC())
                  throw new Error("EOC is not supposed to be actual content.");
            } catch (e3) {
              l = null;
            }
          if (null === l) {
            if (null === s2)
              throw new Error("We can't skip over an invalid tag with undefined length at offset " + i2);
            r2.pos = i2 + Math.abs(s2);
          }
          return new a(e2, c2, s2, n2, l);
        };
        var i = a;
        function a(e2, t2, r2, n2, o2) {
          if (!(n2 instanceof u))
            throw new Error("Invalid tag value.");
          this.stream = e2, this.header = t2, this.length = r2, this.tag = n2, this.sub = o2;
        }
        c.prototype.isUniversal = function() {
          return 0 === this.tagClass;
        }, c.prototype.isEOC = function() {
          return 0 === this.tagClass && 0 === this.tagNumber;
        };
        var u = c;
        function c(e2) {
          var t2 = e2.get();
          if (this.tagClass = t2 >> 6, this.tagConstructed = 0 != (32 & t2), this.tagNumber = 31 & t2, 31 == this.tagNumber) {
            for (var r2 = new n.a(); t2 = e2.get(), r2.mulAdd(128, 127 & t2), 128 & t2; )
              ;
            this.tagNumber = r2.simplify();
          }
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return n;
        }), o.prototype.mulAdd = function(e2, t2) {
          for (var r2, n2 = this.buf, o2 = n2.length, s = 0; s < o2; ++s)
            (r2 = n2[s] * e2 + t2) < 1e13 ? t2 = 0 : r2 -= 1e13 * (t2 = 0 | r2 / 1e13), n2[s] = r2;
          0 < t2 && (n2[s] = t2);
        }, o.prototype.sub = function(e2) {
          for (var t2, r2 = this.buf, n2 = r2.length, o2 = 0; o2 < n2; ++o2)
            e2 = (t2 = r2[o2] - e2) < 0 ? (t2 += 1e13, 1) : 0, r2[o2] = t2;
          for (; 0 === r2[r2.length - 1]; )
            r2.pop();
        }, o.prototype.simplify = function() {
          var e2 = this.buf;
          return 1 == e2.length ? e2[0] : this;
        };
        var n = o;
        function o(e2) {
          this.buf = [+e2 || 0];
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return a;
        });
        var n = r(61), o = r(1), s = r(0), i = function() {
          return (i = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var o2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, o2) && (e2[o2] = t2[o2]);
            return e2;
          }).apply(this, arguments);
        }, a = (u.prototype.encodeRequest = function(e2, t2, r2, n2) {
          var o2 = ((a2 = e2.cmd != s.c.sw_handshake_req.cmd && e2.cmd != s.c.sw_login.cmd) || (e2.flags[0] = 0), this.encode(this.protoInstance.proto_zim.Header, e2)), i2 = o2.length, a2 = (t2 = this.encode(this.getProtoBeanInstance(e2.cmd, "req"), t2), (t2 = a2 ? this.crypto.encrypt(t2, n2) : t2).length);
          return (n2 = new Uint8Array(7 + i2 + a2))[0] = 33, n2[1] = i2 >> 8, n2[2] = i2 - (n2[1] << 8), n2.set(new Uint8Array(new Int32Array([a2]).buffer).reverse(), 3), n2.set(o2, 7), n2.set(t2, 7 + i2), r2 ? this.encodeAccesshubPCUpwardMessage(r2, e2, n2) : n2;
        }, u.prototype.decodeAccesshubResponse = function(e2, t2) {
          return 21 == e2 ? this.decode(this.protoInstance.proto_accesshub.PCDownwardMessage, t2.slice(13)).payload : (e2 = this.accesshubDecodeTypeMap[e2]) && this.decode(this.protoInstance.proto_accesshub[e2], t2.slice(13));
        }, u.prototype.decodeResponseHeader = function(e2) {
          var t2 = (e2[1] << 8) + e2[2];
          return [this.decode(this.protoInstance.proto_zim.Header, e2.slice(7, 7 + t2)), t2];
        }, u.prototype.decodeResponseBody = function(e2, t2, r2, n2) {
          var o2, i2 = this;
          e2 = e2.slice(7 + r2);
          if (t2 != s.c.sw_login.cmd)
            try {
              e2 = this.crypto.decrypt(e2, n2);
            } catch (r3) {
              o2 = true;
            }
          var a2 = [];
          try {
            var u2 = this.decode(this.getProtoBeanInstance(t2, "rsp"), e2);
            return t2 === s.c.sw_push_list.cmd && u2.push_requests && u2.push_requests.forEach(function(e3) {
              a2.push(e3.sub_cmd), e3.msg_body = i2.decode(i2.getProtoBeanInstance(e3.sub_cmd, "rsp"), e3.msg_body);
            }), u2;
          } catch (r3) {
            return (0, console.warn)("Rsp body decrypt error or Protobuf decode error", { cmd: t2, decryptError: o2, decodeError: true, rspBody: e2 }, r3), { code: 1, message: "Protobuf decode error for " + t2, subCmds: a2 };
          }
        }, u.prototype.encodeMediaMsgBody = function(e2, t2) {
          return e2 = e2 == s.R.Image ? "PictureMsgBody" : "VideoMsgBody", this.encode(this.protoInstance.proto_zim[e2], t2);
        }, u.prototype.decodeMsgBody = function(e2, t2, r2, n2) {
          var i2 = e2.type;
          if (i2 >= s.R.Image && i2 <= s.R.Video) {
            e2.message = "";
            var a2, u2, c, l = null, d = i2 == s.R.Image ? "PictureMsgBody" : "VideoMsgBody";
            if (1 == r2)
              try {
                l = this.decode(this.protoInstance.proto_zim[d], t2);
              } catch (e3) {
                try {
                  l = JSON.parse(Object(o.f)(t2));
                } catch (e4) {
                }
              }
            else
              try {
                l = JSON.parse(Object(o.f)(t2));
              } catch (e3) {
                try {
                  l = this.decode(this.protoInstance.proto_zim[d], t2);
                } catch (e4) {
                }
              }
            l && (r2 = !n2 && l.file_uid, d = this.handleFileProxyHost(r2, l.file_download_url || ""), (a2 = e2).fileUID = !n2 && l.file_uid || "", a2.fileName = l.file_name || "", a2.fileSize = +l.file_size || 0, a2.fileDownloadUrl = d, i2 == s.R.Image ? (u2 = e2, (c = l.large_image_download_url) ? u2.largeImageDownloadUrl = this.handleFileProxyHost(r2, c) : l.large && (u2.largeImageDownloadUrl = d + l.large), (c = l.thumbnail_download_url) ? u2.thumbnailDownloadUrl = this.handleFileProxyHost(r2, c) : l.thumbnail && (u2.thumbnailDownloadUrl = d + l.thumbnail), u2.originalImageWidth = l.origin_width || 0, u2.originalImageHeight = l.origin_height || 0, u2.thumbnailWidth = l.small_width || 0, u2.thumbnailHeight = l.small_height || 0, u2.largeImageWidth = l.big_width || 0, u2.largeImageHeight = l.big_height || 0) : i2 == s.R.Audio ? (u2 = e2).audioDuration = +l.media_duration || 0 : i2 == s.R.Video && ((u2 = e2).videoDuration = +l.media_duration || 0, (c = l.video_first_frame_download_url) ? u2.videoFirstFrameDownloadUrl = this.handleFileProxyHost(r2, c) : l.thumbnail && (u2.videoFirstFrameDownloadUrl = d + l.thumbnail), u2.videoFirstFrameWidth = l.frame_width || 0, u2.videoFirstFrameHeight = l.frame_height || 0));
          } else
            i2 == s.R.Revoke ? (e2.message = "", n2 = t2, a2 = Object(o.r)(n2.msg_status).revoke, r2 = n2.msg_type, Object.assign(e2, { revokeType: n2.revoke_type, revokeStatus: a2, revokeTimestamp: n2.revoke_time, operatedUserID: n2.user_id, revokeExtendedData: Object(o.f)(n2.payload), originalMessageType: 200 <= r2 && r2 <= 400 ? s.R.Custom : r2, originalTextMessageContent: "" })) : e2.message = Object(o.f)(t2);
        }, u.prototype.encodeAccesshubHTTPRequest = function(e2, t2, r2, n2, s2, i2) {
          var a2 = n2.url.replace(/^(https?):\/\/[\w\-\.]+\//, "/"), u2 = (u2 = n2.headers) && Object.keys(u2).map(function(e3) {
            return { name: e3, val: String(u2[e3]) };
          });
          t2 = { txid: t2, appid: r2.appID, id_name: r2.user.userID, location: a2, headers: u2, body: s2 ? Object(o.i)(JSON.stringify(s2)) : null, mode_no: 1, service_no: i2, method_no: "GET" == n2.method ? 1 : 2, sdk_type: 3, zegoconn_version: 2, zegoconn_run_env: o.n ? 2 : 1 }, r2 = this.encode(this.protoInstance.proto_accesshub.HTTPRequest, t2);
          return this.createAccesshubBody(4, e2, r2);
        }, u.prototype.encodeAccesshubDispatchRequest = function(e2, t2, r2) {
          return t2 = { txid: t2, appid: r2.appID, id_name: r2.user.userID, mode_no: 1, sdk_type: 3, zegoconn_version: 2, zegoconn_run_env: o.n ? 2 : 1 }, this.geoFence.type && (t2.geofencing_type = this.geoFence.type, t2.geofencings = this.geoFence.areas), r2 = this.encode(this.protoInstance.proto_accesshub.AccesshubDispatchRequest, t2), this.createAccesshubBody(26, e2, r2);
        }, u.prototype.encodeAccesshubGetConfigRequest = function(e2, t2, r2) {
          return t2 = { txid: t2, appid: r2.appID, mode: "online", id_name: r2.user.userID, zegoconn_version: 2, sdk_type: 3, zegoconn_run_env: o.n ? 2 : 1, mode_no: 1 }, this.geoFence.type && (t2.geofencing_type = this.geoFence.type, t2.geofencings = this.geoFence.areas), r2 = this.encode(this.protoInstance.proto_accesshub.GetConfigRequest, t2), this.createAccesshubBody(14, e2, r2);
        }, u.prototype.encodeAccesshubPCUpwardMessage = function(e2, t2, r2) {
          return t2 = { txid: t2.seq, appid: t2.app_id, mode_no: 1, id_name: t2.user_id, service_no: 9, payload: r2, sdk_type: 3, wss_message_type: 1, wss_path: "/ws", zegoconn_version: 2, zegoconn_run_env: o.n ? 2 : 1 }, this.geoFence.type && (t2.geofencing_type = this.geoFence.type, t2.geofencings = this.geoFence.areas), r2 = this.encode(this.protoInstance.proto_accesshub.PCUpwardMessage, t2), this.createAccesshubBody(17, e2, r2);
        }, u.prototype.createAccesshubBody = function(e2, t2, r2) {
          var n2 = new Uint8Array(13 + r2.length);
          return n2[0] = 175, n2[1] = 0, n2[2] = e2 >> 8, n2[3] = e2 - (n2[2] << 8), n2.set(new Uint8Array(new Int32Array([r2.length]).buffer).reverse(), 4), n2.set(new Uint8Array(new Int32Array([t2]).buffer).reverse(), 8), n2[12] = 0, n2.set(r2, 13), n2;
        }, u.prototype.encode = function(e2, t2) {
          return e2.encode(new e2(t2)).finish();
        }, u.prototype.decode = function(e2, t2) {
          return e2 ? i({}, e2.decode(t2 || [])) : {};
        }, u.prototype.getProtoBeanInstance = function(e2, t2) {
          return e2 = (e2 = this.protoBeanMap[e2]) && e2[t2], this.protoInstance.proto_zim[e2];
        }, u.prototype.handleFileProxyHost = function(e2, t2) {
          var r2 = this.geoFence.host.fileproxy;
          return e2 && r2 && t2 ? t2.replace(this.geoFence.reg, r2 + "$4") : t2;
        }, u);
        function u(e2, t2) {
          this.crypto = e2, this.geoFence = t2, this.protoInstance = n.a, this.protoBeanMap = Object.values(s.c).reduce(function(e3, t3) {
            return e3[t3.cmd] = t3, e3;
          }, {}), this.accesshubDecodeTypeMap = { 5: "HTTPResponse", 27: "AccesshubDispatchResponse", 15: "GetConfigResponse", 3: "CloseConnection", 22: "Redirect", 19: "PCEstablished", 30: "PushException" };
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return u;
        });
        t = r(9);
        var n = r(3);
        function o(e2, t2) {
          if (t2)
            for (let r2 = Object.keys(t2), n2 = 0; n2 < r2.length; ++n2)
              null != t2[r2[n2]] && (e2[r2[n2]] = t2[r2[n2]]);
        }
        t.util.Long = r.n(n).a, t.configure();
        const s = t.Reader, i = t.Writer, a = t.util, u = t.roots.default || (t.roots.default = {});
        u.proto_accesshub = (() => {
          const e2 = {};
          function t2(e3) {
            this.headers = [], o(this, e3);
          }
          function r2(e3) {
            o(this, e3);
          }
          function n2() {
            this.headers = [], this.txid = 0;
          }
          function a2(e3) {
            o(this, e3);
          }
          function c() {
          }
          function l() {
          }
          function d() {
            this.groups = [], this.opt_ports = [], this.wss_groups = [];
          }
          function p() {
            this.txid = 0;
          }
          function h() {
          }
          function g(e3) {
            o(this, e3);
          }
          function f() {
            this.quic_nodes = [], this.mtcp_nodes = [], this.wss_nodes = [];
          }
          function m() {
          }
          function _() {
            this.txid = 0, this.groups = [], this.opt_ports = [], this.wss_groups = [];
          }
          function v() {
          }
          function b(e3) {
            o(this, e3);
          }
          function y() {
          }
          function M() {
          }
          return e2.HTTPRequest = (t2.encode = function(e3, t3) {
            if (t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "txid") && t3.uint32(8).uint64(e3.txid), Object.hasOwnProperty.call(e3, "appid") && t3.uint32(16).uint32(e3.appid), Object.hasOwnProperty.call(e3, "mode") && t3.uint32(34).string(e3.mode), Object.hasOwnProperty.call(e3, "id_name") && t3.uint32(42).string(e3.id_name), Object.hasOwnProperty.call(e3, "stick") && t3.uint32(58).string(e3.stick), Object.hasOwnProperty.call(e3, "service") && t3.uint32(66).string(e3.service), Object.hasOwnProperty.call(e3, "location") && t3.uint32(74).string(e3.location), Object.hasOwnProperty.call(e3, "method") && t3.uint32(82).string(e3.method), e3.headers && e3.headers.length)
              for (let r3 = 0; r3 < e3.headers.length; ++r3)
                u.proto_accesshub.HTTPRequest.HTTPHeader.encode(e3.headers[r3], t3.uint32(90).fork()).ldelim();
            return Object.hasOwnProperty.call(e3, "body") && t3.uint32(98).bytes(e3.body), Object.hasOwnProperty.call(e3, "mode_no") && t3.uint32(112).int32(e3.mode_no), Object.hasOwnProperty.call(e3, "service_no") && t3.uint32(120).int32(e3.service_no), Object.hasOwnProperty.call(e3, "method_no") && t3.uint32(128).int32(e3.method_no), Object.hasOwnProperty.call(e3, "sdk_type") && t3.uint32(136).int32(e3.sdk_type), Object.hasOwnProperty.call(e3, "zegoconn_run_env") && t3.uint32(144).int32(e3.zegoconn_run_env), Object.hasOwnProperty.call(e3, "zegoconn_version") && t3.uint32(152).uint32(e3.zegoconn_version), t3;
          }, t2.HTTPHeader = (r2.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "name") && t3.uint32(10).string(e3.name), Object.hasOwnProperty.call(e3, "val") && t3.uint32(18).string(e3.val), t3;
          }, r2.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_accesshub.HTTPRequest.HTTPHeader();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.name = e3.string();
                  break;
                case 2:
                  n3.val = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, r2), t2), e2.HTTPResponse = (n2.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_accesshub.HTTPResponse();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.txid = e3.uint64();
                  break;
                case 2:
                  n3.headers.push(u.proto_accesshub.HTTPRequest.HTTPHeader.decode(e3, e3.uint32()));
                  break;
                case 3:
                  n3.status_code = e3.int32();
                  break;
                case 4:
                  n3.body = e3.bytes();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.txid = +n3.txid.toString(), n3;
          }, n2), e2.PCUpwardMessage = (a2.encode = function(e3, t3) {
            if (t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "txid") && t3.uint32(8).uint64(e3.txid), Object.hasOwnProperty.call(e3, "appid") && t3.uint32(16).uint32(e3.appid), Object.hasOwnProperty.call(e3, "mode_no") && t3.uint32(32).int32(e3.mode_no), Object.hasOwnProperty.call(e3, "id_name") && t3.uint32(42).string(e3.id_name), Object.hasOwnProperty.call(e3, "service_no") && t3.uint32(48).int32(e3.service_no), Object.hasOwnProperty.call(e3, "payload") && t3.uint32(66).bytes(e3.payload), Object.hasOwnProperty.call(e3, "sdk_type") && t3.uint32(72).int32(e3.sdk_type), Object.hasOwnProperty.call(e3, "wss_message_type") && t3.uint32(80).uint32(e3.wss_message_type), Object.hasOwnProperty.call(e3, "wss_path") && t3.uint32(90).string(e3.wss_path), Object.hasOwnProperty.call(e3, "zegoconn_version") && t3.uint32(104).uint32(e3.zegoconn_version), Object.hasOwnProperty.call(e3, "zegoconn_run_env") && t3.uint32(112).int32(e3.zegoconn_run_env), Object.hasOwnProperty.call(e3, "geofencing_type") && t3.uint32(136).uint32(e3.geofencing_type), e3.geofencings && e3.geofencings.length)
              for (let r3 = 0; r3 < e3.geofencings.length; ++r3)
                t3.uint32(144).uint32(e3.geofencings[r3]);
            return t3;
          }, a2), e2.PCDownwardMessage = (c.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_accesshub.PCDownwardMessage();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.payload = e3.bytes();
                  break;
                case 2:
                  n3.wss_message_type = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, c), e2.PCEstablished = (l.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_accesshub.PCEstablished();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.elapse = e3.uint32();
                  break;
                case 2:
                  n3.from = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, l), e2.Redirect = (d.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_accesshub.Redirect();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.rand = e3.string();
                  break;
                case 2:
                  n3.secret = e3.string();
                  break;
                case 3:
                  n3.groups.push(u.proto_accesshub.AccesshubDispatchGroup.decode(e3, e3.uint32()));
                  break;
                case 4:
                  if (2 == (7 & o2))
                    for (var i2 = e3.uint32() + e3.pos; e3.pos < i2; )
                      n3.opt_ports.push(e3.uint32());
                  else
                    n3.opt_ports.push(e3.uint32());
                  break;
                case 5:
                  n3.wss_groups.push(u.proto_accesshub.WssAccesshubDispatchGroup.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, d), e2.PushException = (p.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_accesshub.PushException();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.reason = e3.int32();
                  break;
                case 2:
                  n3.msg = e3.string();
                  break;
                case 3:
                  n3.txid = e3.uint64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.txid = +n3.txid.toString(), n3;
          }, p), e2.CloseConnection = (h.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_accesshub.CloseConnection();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.reason = e3.int32();
                  break;
                case 2:
                  n3.msg = e3.string();
                  break;
                case 3:
                  n3.action = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, h), e2.AccesshubDispatchRequest = (g.encode = function(e3, t3) {
            if (t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "txid") && t3.uint32(8).uint64(e3.txid), Object.hasOwnProperty.call(e3, "appid") && t3.uint32(16).uint32(e3.appid), Object.hasOwnProperty.call(e3, "mode_no") && t3.uint32(32).int32(e3.mode_no), Object.hasOwnProperty.call(e3, "id_name") && t3.uint32(42).string(e3.id_name), Object.hasOwnProperty.call(e3, "sdk_type") && t3.uint32(48).int32(e3.sdk_type), Object.hasOwnProperty.call(e3, "zegoconn_version") && t3.uint32(56).uint32(e3.zegoconn_version), Object.hasOwnProperty.call(e3, "zegoconn_run_env") && t3.uint32(64).int32(e3.zegoconn_run_env), Object.hasOwnProperty.call(e3, "geofencing_type") && t3.uint32(88).uint32(e3.geofencing_type), e3.geofencings && e3.geofencings.length)
              for (let r3 = 0; r3 < e3.geofencings.length; ++r3)
                t3.uint32(96).uint32(e3.geofencings[r3]);
            return t3;
          }, g), e2.AccesshubDispatchGroup = (f.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_accesshub.AccesshubDispatchGroup();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.group = e3.string();
                  break;
                case 2:
                  n3.quic_nodes.push(e3.string());
                  break;
                case 3:
                  n3.mtcp_nodes.push(e3.string());
                  break;
                case 4:
                  n3.wss_nodes.push(e3.string());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, f), e2.WssAccesshubDispatchGroup = (m.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_accesshub.WssAccesshubDispatchGroup();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.group = e3.string();
                  break;
                case 2:
                  n3.host = e3.string();
                  break;
                case 3:
                  n3.main_domain = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, m), e2.AccesshubDispatchResponseData = (_.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_accesshub.AccesshubDispatchResponseData();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.txid = e3.uint64();
                  break;
                case 2:
                  n3.rand = e3.string();
                  break;
                case 3:
                  n3.secret = e3.string();
                  break;
                case 4:
                  n3.groups.push(u.proto_accesshub.AccesshubDispatchGroup.decode(e3, e3.uint32()));
                  break;
                case 5:
                  if (2 == (7 & o2))
                    for (var i2 = e3.uint32() + e3.pos; e3.pos < i2; )
                      n3.opt_ports.push(e3.uint32());
                  else
                    n3.opt_ports.push(e3.uint32());
                  break;
                case 6:
                  n3.wss_groups.push(u.proto_accesshub.WssAccesshubDispatchGroup.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.txid = +n3.txid.toString(), n3;
          }, _), e2.AccesshubDispatchResponse = (v.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_accesshub.AccesshubDispatchResponse();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.int32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  Object.assign(n3, u.proto_accesshub.AccesshubDispatchResponseData.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, v), e2.GetConfigRequest = (b.encode = function(e3, t3) {
            if (t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "txid") && t3.uint32(8).uint64(e3.txid), Object.hasOwnProperty.call(e3, "appid") && t3.uint32(16).uint32(e3.appid), Object.hasOwnProperty.call(e3, "mode") && t3.uint32(34).string(e3.mode), Object.hasOwnProperty.call(e3, "id_name") && t3.uint32(42).string(e3.id_name), Object.hasOwnProperty.call(e3, "zegoconn_version") && t3.uint32(56).uint32(e3.zegoconn_version), Object.hasOwnProperty.call(e3, "sdk_type") && t3.uint32(64).int32(e3.sdk_type), Object.hasOwnProperty.call(e3, "zegoconn_run_env") && t3.uint32(72).int32(e3.zegoconn_run_env), Object.hasOwnProperty.call(e3, "mode_no") && t3.uint32(88).int32(e3.mode_no), Object.hasOwnProperty.call(e3, "geofencing_type") && t3.uint32(96).uint32(e3.geofencing_type), e3.geofencings && e3.geofencings.length)
              for (let r3 = 0; r3 < e3.geofencings.length; ++r3)
                t3.uint32(104).uint32(e3.geofencings[r3]);
            return t3;
          }, b), e2.GetConfigResponseData = (y.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_accesshub.GetConfigResponseData();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.txid = e3.uint64();
                  break;
                case 2:
                  n3.quic_hb_interval = e3.uint32();
                  break;
                case 3:
                  n3.quic_hb_timeout = e3.uint32();
                  break;
                case 4:
                  n3.logic_hb_interval = e3.uint32();
                  break;
                case 5:
                  n3.logic_hb_timeout = e3.uint32();
                  break;
                case 6:
                  n3.pc_establish_timeout = e3.uint32();
                  break;
                case 7:
                  n3.sdk_link_detect_interval = e3.uint32();
                  break;
                case 8:
                  n3.sdk_link_detect_duration = e3.uint32();
                  break;
                case 9:
                  n3.client_outer_ip = e3.string();
                  break;
                case 10:
                  n3.ntp_time = e3.uint64();
                  break;
                case 11:
                  n3.root_rsa_certs_ver = e3.uint32();
                  break;
                case 12:
                  n3.geofencing_id = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.txid = +n3.txid.toString(), n3;
          }, y), e2.GetConfigResponse = (M.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_accesshub.GetConfigResponse();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.int32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  Object.assign(n3, u.proto_accesshub.GetConfigResponseData.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, M), e2;
        })(), u.proto_zim = (() => {
          const e2 = {};
          function t2() {
          }
          function r2(e3) {
            o(this, e3);
          }
          function n2() {
            this.server_timestamp = 0;
          }
          function c(e3) {
            this.forward_ip = [], o(this, e3);
          }
          function l(e3) {
            o(this, e3);
          }
          function d() {
            this.server_ips = [], this.redirect_server = [], this.server_timestamp = 0;
          }
          function p(e3) {
            o(this, e3);
          }
          function h() {
            this.push_requests = [], this.send_time = 0;
          }
          function g() {
          }
          function f(e3) {
            this.push_responses = [], o(this, e3);
          }
          function m(e3) {
            this.conv_sid = "", this.client_msg_seq = 0, o(this, e3);
          }
          function _(e3) {
            o(this, e3);
          }
          function v(e3) {
            o(this, e3);
          }
          function b(e3) {
            o(this, e3);
          }
          function y(e3) {
            this.at = [], o(this, e3);
          }
          function M() {
            this.msg_id = "", this.conv_msg_seq = 0, this.msg_time = 0;
          }
          function I() {
          }
          function k(e3) {
            o(this, e3);
          }
          function w() {
            this.msg_id = "", this.msg_time = 0;
          }
          function C() {
          }
          function S() {
            this.msglist_seq = 0;
          }
          function D() {
          }
          function q(e3) {
            this.user_ids = [], o(this, e3);
          }
          function R() {
            this.err_list = [], this.new_err_list = [], this.call_seq = 0, this.call_list_seq = 0, this.create_time = 0;
          }
          function O(e3) {
            this.user_ids = [], o(this, e3);
          }
          function A(e3) {
            this.err_list = [], this.new_err_list = [], this.call_seq = 0, this.call_list_seq = 0, this.call_user_session_id = 0;
          }
          function x() {
            this.user_state = 0, this.accept_time = 0, this.quit_time = 0, this.residue_timeout_time = 0;
          }
          function P() {
            this.user_list = [], this.call_seq = 0, this.now_time = 0;
          }
          function T(e3) {
            o(this, e3);
          }
          function E() {
            this.calls = [], this.cur_list_seq = 0, this.max_list_seq = 0;
          }
          function L() {
          }
          function j() {
            this.call_user_list = [], this.create_time = 0, this.call_list_seq = 0, this.call_status = 0, this.now_time = 0, this.destroy_time = 0, this.accept_time = 0, this.quit_time = 0, this.invite_time = 0;
          }
          function G(e3) {
            this.user_ids = [], o(this, e3);
          }
          function U() {
            this.err_list = [], this.call_seq = 0, this.call_user_session_id = 0;
          }
          function B(e3) {
            o(this, e3);
          }
          function z() {
            this.call_list_seq = 0, this.talk_time = 0, this.quit_time = 0, this.call_seq = 0, this.call_user_session_id = 0;
          }
          function N(e3) {
            o(this, e3);
          }
          function F(e3) {
            this.user_state_list = [], this.call_seq = 0, this.call_user_session_id = 0, this.create_time = 0, this.timeout = 0;
          }
          function K() {
            this.user_state_list = [], this.call_seq = 0, this.call_list_seq = 0, this.create_time = 0, this.call_user_session_id = 0;
          }
          function H() {
            this.call_seq = 0, this.call_list_seq = 0, this.accept_time = 0, this.call_user_session_id = 0;
          }
          function Q() {
            this.call_seq = 0, this.call_list_seq = 0, this.accept_time = 0, this.call_user_session_id = 0;
          }
          function V() {
            this.user_ids = [], this.call_seq = 0, this.call_list_seq = 0, this.call_user_session_id = 0;
          }
          function Z() {
            this.user_state_list = [], this.create_time = 0, this.call_seq = 0, this.call_list_seq = 0, this.call_user_session_id = 0;
          }
          function J() {
            this.call_seq = 0, this.accept_time = 0, this.quit_time = 0, this.call_user_session_id = 0;
          }
          function W() {
            this.call_list_seq = 0, this.talk_time = 0, this.destroy_time = 0, this.call_user_session_id = 0;
          }
          function Y(e3) {
            this.call_seq = 0, this.call_user_session_id = 0;
          }
          function X(e3) {
            this.user_state_list = [], this.timeout = 0, this.call_seq = 0, this.call_user_session_id = 0;
          }
          function $() {
            this.conv_type = 0, this.conv_list_seq = 0, this.conv_msg_seq = 0, this.read_seq = 0, this.send_count_after_read = 0, this.last_del_msg_seq = 0, this.statemsg_seq = 0, this.receipt_max_conv_msg_seq = 0, this.at_max_conv_msg_seq = 0, this.at_all_max_conv_msg_seq = 0, this.update_time = 0, this.sub_read_count = 0, this.last_revoke_msg_seq = 0, this.last_msg_time = 0;
          }
          function ee(e3) {
            o(this, e3);
          }
          function te() {
            this.conv_list = [], this.conv_list_seq = 0, this.max_list_seq = 0, this.max_del_conv_list_seq = 0;
          }
          function re(e3) {
            o(this, e3);
          }
          function ne() {
            this.msgs = [], this.max_conv_msg_seq = 0, this.next_conv_msg_seq = 0;
          }
          function oe(e3) {
            o(this, e3);
          }
          function se() {
            this.msgs = [], this.c2c_msg_seq = 0, this.svr_c2c_msg_seq = 0;
          }
          function ie(e3) {
            o(this, e3);
          }
          function ae() {
            this.conv_list_seq = 0, this.group_list_seq = 0, this.c2c_msg_seq = 0, this.c2c_statemsg_seq = 0, this.extra_msg_list_seq = 0, this.conv_pinned_list_seq = 0, this.call_list_seq = 0;
          }
          function ue() {
            this.conv_list_seq = 0, this.conv_msg_seq = 0, this.conv_pinned_list_seq = 0;
          }
          function ce(e3) {
            o(this, e3);
          }
          function le(e3) {
            this.msg_ids = [], o(this, e3);
          }
          function de(e3) {
            this.conv_msg_seq = [], o(this, e3);
          }
          function pe() {
            this.conv_msg_seq2_receipt_seq = {};
          }
          function he(e3) {
            o(this, e3);
          }
          function ge() {
            this.read_members = [], this.unread_members = [];
          }
          function fe(e3) {
            o(this, e3);
          }
          function me() {
            this.list = [], this.next_list_seq = 0;
          }
          function _e() {
            this.conv_type = 0, this.conv_msg_seq = 0, this.receipt_seq = 0;
          }
          function ve() {
            this.read_count = 0, this.unread_count = 0;
          }
          function be() {
            this.del_conv_msg_seqs = [];
          }
          function ye() {
            this.PushItems = [];
          }
          function Me() {
            this.conv_type = 0, this.conv_msg_seq = 0, this.receipt_seq = 0, this.read_count = 0, this.unread_count = 0;
          }
          function Ie(e3) {
            o(this, e3);
          }
          function ke() {
            this.statemsg_list = [], this.next_statemsg_seq = 0;
          }
          function we() {
            this.conv_type = 0, this.conv_msg_seq = 0, this.statemsg_seq = 0, this.reaction_seq = 0;
          }
          function Ce() {
            this.reaction_briefs = [];
          }
          function Se(e3) {
            o(this, e3);
          }
          function De() {
            this.statemsg_seq = 0, this.revoke_time = 0;
          }
          function qe() {
            this.revoke_time = 0, this.revoke_type = 0;
          }
          function Re() {
            this.conv_type = 0, this.statemsg_seq = 0;
          }
          function Oe() {
            this.headers = {}, this.forms = {};
          }
          function Ae(e3) {
            o(this, e3);
          }
          function xe() {
          }
          function Pe() {
          }
          function Te() {
            this.member_data_seq = 0;
          }
          function Ee() {
            this.member_seq = 0, this.group_list_seq = 0;
          }
          function Le(e3) {
            this.user_ids = [], this.attributes = [], o(this, e3);
          }
          function je() {
            this.members = [], this.error_users = [], this.member_all_seq = 0, this.group_list_seq = 0, this.group_data_seq = 0, this.group_attribute_seq = 0;
          }
          function Ge(e3) {
            this.value = "", this.seq = 0, o(this, e3);
          }
          function Ue(e3) {
            this.attributes = [], o(this, e3);
          }
          function Be(e3) {
            this.seq = 0, this.attributes = [], o(this, e3);
          }
          function ze() {
            this.group_data_seq = 0;
          }
          function Ne(e3) {
            o(this, e3);
          }
          function Fe() {
            this.fail_keys = [];
          }
          function Ke(e3) {
            o(this, e3);
          }
          function He() {
            this.member_all_seq = 0, this.group_list_seq = 0, this.group_data_seq = 0, this.group_attribute_seq = 0, this.conv_msg_seq = 0;
          }
          function Qe(e3) {
            this.user_ids = [], o(this, e3);
          }
          function Ve() {
            this.members = [], this.error_users = [], this.member_all_seq = 0, this.group_data_seq = 0, this.group_attribute_seq = 0;
          }
          function Ze() {
            this.error_users = [], this.member_all_seq = 0;
          }
          function Je(e3) {
            o(this, e3);
          }
          function We() {
            this.event_type = 0;
          }
          function Ye() {
            this.change_list = [], this.member_all_seq = 0, this.cur_member_seq = 0;
          }
          function Xe() {
            this.members = [];
          }
          function $e(e3) {
            this.attributes = [], o(this, e3);
          }
          function et() {
          }
          function tt2(e3) {
            o(this, e3);
          }
          function rt() {
          }
          function nt() {
            this.group_list_seq = 0, this.group_data_seq = 0, this.all_member_seq = 0, this.attribute_seq = 0, this.member_count = 0;
          }
          function ot() {
            this.group_infos = [], this.fail_keys = [];
          }
          function st() {
            this.groups = [], this.cur_list_seq = 0, this.max_list_seq = 0;
          }
          function it(e3) {
            o(this, e3);
          }
          function at() {
          }
          function ut() {
            this.members = [], this.member_all_seq = 0;
          }
          function ct() {
          }
          function lt() {
            this.members = [], this.change_type = 0, this.member_all_seq = 0;
          }
          function dt() {
            this.modify_type = 0, this.group_data_seq = 0;
          }
          function pt() {
            this.member_all_seq = 0;
          }
          function ht() {
            this.conv_msg_seq = 0;
          }
          function gt(e3) {
            o(this, e3);
          }
          function ft() {
            this.send_count_after_read = 0;
          }
          function mt(e3) {
            o(this, e3);
          }
          function _t() {
          }
          function vt(e3) {
            o(this, e3);
          }
          function bt() {
            this.msg_id = "";
          }
          function yt(e3) {
            o(this, e3);
          }
          function Mt() {
            this.msgs = [], this.next_conv_msg_seq = 0, this.max_conv_msg_seq = 0;
          }
          function It(e3) {
            o(this, e3);
          }
          function kt(e3) {
            o(this, e3);
          }
          function wt() {
            this.cur_reaction_seq = 0, this.user_total_count = 0;
          }
          function Ct(e3) {
            o(this, e3);
          }
          function St() {
            this.succ_list = [], this.error_list = [];
          }
          function Dt(e3) {
            o(this, e3);
          }
          function qt(e3) {
            o(this, e3);
          }
          function Rt() {
            this.reaction_list = [], this.conv_msg_seq = 0, this.msg_next_reaction_seq = 0, this.msg_max_reaction_seq = 0;
          }
          function Ot(e3) {
            o(this, e3);
          }
          function At() {
            this.user_reaction = [], this.max_reaction_seq = 0, this.total_user_count = 0;
          }
          function xt() {
            this.conv_type = 0, this.msg_reactions = [];
          }
          function Pt() {
            this.reaction_infos = [], this.conv_msg_seq = 0, this.start_reaction_seq = 0, this.end_reaction_seq = 0;
          }
          function Tt() {
            this.send_count_after_read = 0, this.receipt_seq = 0;
          }
          function Et(e3) {
            o(this, e3);
          }
          function Lt() {
            this.msgs = [], this.max_conv_msg_seq = 0, this.next_conv_msg_seq = 0, this.fetch_end = 0;
          }
          function jt() {
            this.conv_type = 0, this.conv_pinned_list_seq = 0;
          }
          function Gt() {
            this.conv_msg_seq = 0, this.group_list_seq = 0;
          }
          function Ut() {
            this.del_conv_msg_seqs = [], this.conv_type = 0, this.max_del_conv_msg_seq = 0;
          }
          function Bt(e3) {
            o(this, e3);
          }
          function zt() {
            this.state_list = [], this.next_state_seq = 0;
          }
          function Nt() {
            this.conv_type = 0, this.conv_msg_seq = 0, this.state_seq = 0;
          }
          function Ft() {
          }
          function Kt() {
          }
          function Ht() {
          }
          function Qt() {
          }
          function Vt() {
            this.send_count_after_read = 0;
          }
          function Zt(e3) {
            this.attributes = [], o(this, e3);
          }
          function Jt() {
            this.conv_msg_seq = 0;
          }
          function Wt(e3) {
            this.attributes = [], o(this, e3);
          }
          function Yt() {
            this.conv_msg_seq = 0;
          }
          function Xt(e3) {
            this.user_ids = [], o(this, e3);
          }
          function $t(e3) {
            o(this, e3);
          }
          function er() {
            this.users = [];
          }
          function tr(e3) {
            o(this, e3);
          }
          function rr(e3) {
            o(this, e3);
          }
          function nr() {
            this.max_conv_msg_seq = 0;
          }
          function or(e3) {
            this.value = "", o(this, e3);
          }
          function sr(e3) {
            o(this, e3);
          }
          function ir(e3) {
            this.attributes = [], o(this, e3);
          }
          function ar(e3) {
            this.attributes = [], o(this, e3);
          }
          function ur(e3) {
            o(this, e3);
          }
          function cr() {
            this.err_list = [];
          }
          function lr(e3) {
            o(this, e3);
          }
          function dr(e3) {
            o(this, e3);
          }
          function pr() {
            this.user_attributes = [], this.user_err_list = [];
          }
          function hr(e3) {
            this.user_ids = [], this.modify_attribute = [], o(this, e3);
          }
          function gr(e3) {
            this.attributes = [], this.err_list = [], o(this, e3);
          }
          function fr(e3) {
            this.req_attributes = [], o(this, e3);
          }
          function mr(e3) {
            o(this, e3);
          }
          function _r() {
            this.user_attributes = [];
          }
          function vr() {
          }
          function br() {
          }
          function yr() {
            this.attributes = [];
          }
          function Mr() {
            this.push_attributes = [];
          }
          function Ir(e3) {
            this.quey_user_id = [], o(this, e3);
          }
          function kr() {
            this.result = [], this.err_list = [];
          }
          function wr(e3) {
            o(this, e3);
          }
          function Cr() {
          }
          function Sr() {
            this.reaction_list = [], this.msg_max_reaction_seq = 0;
          }
          function Dr() {
            this.user_reaction = [], this.max_reaction_seq = 0, this.total_user_count = 0;
          }
          function qr(e3) {
            this.user_state = 0, this.user_session_id = 0, this.extended_data = "", this.accept_time = 0, this.quit_time = 0, this.residue_timeout_time = 0;
          }
          function Rr(e3) {
            o(this, e3);
          }
          function Or() {
            this.msgs = [], this.fail_list = [];
          }
          return e2.CommonCodeMessage = (t2.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.CommonCodeMessage();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, t2), e2.Header = (r2.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "cmd") && t3.uint32(10).string(e3.cmd), Object.hasOwnProperty.call(e3, "seq") && t3.uint32(16).uint32(e3.seq), Object.hasOwnProperty.call(e3, "timestamp") && t3.uint32(24).int64(e3.timestamp), Object.hasOwnProperty.call(e3, "app_id") && t3.uint32(32).uint32(e3.app_id), Object.hasOwnProperty.call(e3, "user_id") && t3.uint32(42).string(e3.user_id), Object.hasOwnProperty.call(e3, "session_id") && t3.uint32(48).int64(e3.session_id), Object.hasOwnProperty.call(e3, "user_nid") && t3.uint32(56).int64(e3.user_nid), Object.hasOwnProperty.call(e3, "controls") && t3.uint32(66).bytes(e3.controls), Object.hasOwnProperty.call(e3, "product") && t3.uint32(72).int32(e3.product), Object.hasOwnProperty.call(e3, "flags") && t3.uint32(82).bytes(e3.flags), Object.hasOwnProperty.call(e3, "caller_type") && t3.uint32(88).int32(e3.caller_type), t3;
          }, r2.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.Header();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.cmd = e3.string();
                  break;
                case 2:
                  n3.seq = e3.uint32();
                  break;
                case 3:
                  n3.timestamp = e3.int64();
                  break;
                case 4:
                  n3.app_id = e3.uint32();
                  break;
                case 5:
                  n3.user_id = e3.string();
                  break;
                case 6:
                  n3.session_id = e3.int64();
                  break;
                case 7:
                  n3.user_nid = e3.int64();
                  break;
                case 8:
                  n3.controls = e3.bytes();
                  break;
                case 9:
                  n3.product = e3.int32();
                  break;
                case 10:
                  n3.flags = e3.bytes();
                  break;
                case 11:
                  n3.caller_type = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, r2), e2.HbRsp = (n2.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.HbRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.heartbeat_interval = e3.uint32();
                  break;
                case 4:
                  n3.hb_timeout = e3.uint32();
                  break;
                case 5:
                  n3.server_timestamp = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.server_timestamp = +n3.server_timestamp.toString(), n3;
          }, n2), e2.HandshakeReq = (c.encode = function(e3, t3) {
            if (t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "term_type") && t3.uint32(8).int32(e3.term_type), Object.hasOwnProperty.call(e3, "net_type") && t3.uint32(16).int32(e3.net_type), Object.hasOwnProperty.call(e3, "sdk_ver") && t3.uint32(24).uint32(e3.sdk_ver), e3.forward_ip && e3.forward_ip.length)
              for (let r3 = 0; r3 < e3.forward_ip.length; ++r3)
                t3.uint32(34).string(e3.forward_ip[r3]);
            return Object.hasOwnProperty.call(e3, "device_id") && t3.uint32(42).string(e3.device_id), Object.hasOwnProperty.call(e3, "server_addr") && t3.uint32(50).string(e3.server_addr), Object.hasOwnProperty.call(e3, "channel_index") && t3.uint32(56).uint32(e3.channel_index), t3;
          }, c), e2.LoginReq = (l.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "sdk_ver") && t3.uint32(8).uint32(e3.sdk_ver), Object.hasOwnProperty.call(e3, "user_name") && t3.uint32(18).bytes(e3.user_name), Object.hasOwnProperty.call(e3, "term_type") && t3.uint32(24).int32(e3.term_type), Object.hasOwnProperty.call(e3, "net_type") && t3.uint32(32).int32(e3.net_type), Object.hasOwnProperty.call(e3, "device_id") && t3.uint32(42).string(e3.device_id), Object.hasOwnProperty.call(e3, "server_ip") && t3.uint32(50).string(e3.server_ip), Object.hasOwnProperty.call(e3, "channel_index") && t3.uint32(56).uint32(e3.channel_index), Object.hasOwnProperty.call(e3, "client_stamp") && t3.uint32(66).bytes(e3.client_stamp), Object.hasOwnProperty.call(e3, "k1_sign") && t3.uint32(74).bytes(e3.k1_sign), Object.hasOwnProperty.call(e3, "login_token") && t3.uint32(82).bytes(e3.login_token), Object.hasOwnProperty.call(e3, "relogin_token") && t3.uint32(90).bytes(e3.relogin_token), Object.hasOwnProperty.call(e3, "zpns_push_id") && t3.uint32(98).string(e3.zpns_push_id), Object.hasOwnProperty.call(e3, "login_sign") && t3.uint32(106).bytes(e3.login_sign), Object.hasOwnProperty.call(e3, "old_session_id") && t3.uint32(120).int64(e3.old_session_id), t3;
          }, l), e2.LoginRsp = (d.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.LoginRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.k2_sign = e3.bytes();
                  break;
                case 4:
                  n3.hb_interval = e3.uint32();
                  break;
                case 5:
                  n3.hb_timeout = e3.uint32();
                  break;
                case 6:
                  n3.server_timestamp = e3.int64();
                  break;
                case 7:
                  n3.redirect_server_ip = e3.string();
                  break;
                case 8:
                  n3.server_ips.push(e3.string());
                  break;
                case 9:
                  n3.login_server_ip = e3.string();
                  break;
                case 10:
                  n3.relogin_token = e3.bytes();
                  break;
                case 11:
                  n3.redirect_server.push(e3.string());
                  break;
                case 12:
                  n3.usermail_hb_interval = e3.uint32();
                  break;
                case 13:
                  n3.fetch_c2c_msg_list = e3.int32();
                  break;
                case 14:
                  n3.fetch_conv_list = e3.int32();
                  break;
                case 15:
                  n3.fetch_conv_msg_list = e3.int32();
                  break;
                case 16:
                  n3.fetch_group_list = e3.int32();
                  break;
                case 17:
                  n3.im_conf_json = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.server_timestamp = +n3.server_timestamp.toString(), n3;
          }, d), e2.LogoutReq = (p.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "logout_reason") && t3.uint32(8).uint32(e3.logout_reason), Object.hasOwnProperty.call(e3, "logout_check") && t3.uint32(18).bytes(e3.logout_check), t3;
          }, p), e2.PushListRequest = (h.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushListRequest();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.push_requests.push(u.proto_zim.PushRequest.decode(e3, e3.uint32()));
                  break;
                case 2:
                  n3.qos_flag = e3.uint32();
                  break;
                case 3:
                  n3.send_time = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.send_time = +n3.send_time.toString(), n3;
          }, h), e2.PushRequest = (g.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushRequest();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.sub_cmd = e3.string();
                  break;
                case 2:
                  n3.msg_body = e3.bytes();
                  break;
                case 3:
                  n3.sender_user_id = e3.string();
                  break;
                case 4:
                  n3.msg_id = e3.string();
                  break;
                case 5:
                  n3.sender_user_nid = e3.uint64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, g), e2.PushListRsp = (f.encode = function(e3, t3) {
            if (t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "code") && t3.uint32(8).uint32(e3.code), Object.hasOwnProperty.call(e3, "message") && t3.uint32(18).string(e3.message), e3.push_responses && e3.push_responses.length)
              for (let r3 = 0; r3 < e3.push_responses.length; ++r3)
                u.proto_zim.StGroupAttribute.encode(e3.push_responses[r3], t3.uint32(26).fork()).ldelim();
            return Object.hasOwnProperty.call(e3, "server_send_time") && t3.uint32(32).int64(e3.server_send_time), t3;
          }, f), e2.StMsgClientInfo = (m.encode = function(e3, t3) {
            return "object" == typeof e3 && (e3 = new u.proto_zim.StMsgClientInfo(e3)), t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "conv_sid") && t3.uint32(8).int64(e3.conv_sid), Object.hasOwnProperty.call(e3, "client_msg_seq") && t3.uint32(16).int64(e3.client_msg_seq), t3;
          }, m.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.StMsgClientInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.conv_sid = e3.int64();
                  break;
                case 2:
                  n3.client_msg_seq = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.conv_sid = n3.conv_sid.toString(), n3.client_msg_seq = +n3.client_msg_seq.toString(), n3;
          }, m), e2.StOfflinePushInfo = (_.encode = function(e3, t3) {
            if ("object" == typeof e3 && (e3 = new u.proto_zim.StOfflinePushInfo(e3)), t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "enable_push") && t3.uint32(8).int32(e3.enable_push), Object.hasOwnProperty.call(e3, "title") && t3.uint32(18).string(e3.title), Object.hasOwnProperty.call(e3, "content") && t3.uint32(26).string(e3.content), Object.hasOwnProperty.call(e3, "payload") && t3.uint32(34).string(e3.payload), Object.hasOwnProperty.call(e3, "pushStrategyId") && t3.uint32(42).string(e3.pushStrategyId), e3.custom_map)
              for (let n3 = Object.keys(e3.custom_map), o2 = 0; o2 < n3.length; ++o2) {
                var r3 = e3.custom_map[n3[o2]];
                r3 && t3.uint32(50).fork().uint32(10).string(n3[o2]).uint32(18).string(r3).ldelim();
              }
            return t3;
          }, _.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3, n3, o2 = void 0 === t3 ? e3.len : e3.pos + t3, i2 = new u.proto_zim.StOfflinePushInfo();
            for (; e3.pos < o2; ) {
              var a2 = e3.uint32();
              switch (a2 >>> 3) {
                case 1:
                  i2.enable_push = e3.int32();
                  break;
                case 2:
                  i2.title = e3.string();
                  break;
                case 3:
                  i2.content = e3.string();
                  break;
                case 4:
                  i2.payload = e3.string();
                  break;
                case 5:
                  i2.pushStrategyId = e3.string();
                  break;
                case 6:
                  i2.custom_map || (i2.custom_map = {});
                  var c2 = e3.uint32() + e3.pos;
                  for (r3 = "", n3 = ""; e3.pos < c2; ) {
                    var l2 = e3.uint32();
                    switch (l2 >>> 3) {
                      case 1:
                        r3 = e3.string();
                        break;
                      case 2:
                        n3 = e3.string();
                        break;
                      default:
                        e3.skipType(7 & l2);
                    }
                  }
                  i2.custom_map[r3] = n3;
                  break;
                case 7:
                  i2.priority = e3.int32();
                  break;
                default:
                  e3.skipType(7 & a2);
              }
            }
          }, _), e2.PictureMsgBody = (v.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "version") && t3.uint32(10).string(e3.version), Object.hasOwnProperty.call(e3, "file_type") && t3.uint32(16).int32(e3.file_type), Object.hasOwnProperty.call(e3, "file_uid") && t3.uint32(26).string(e3.file_uid), Object.hasOwnProperty.call(e3, "file_name") && t3.uint32(34).string(e3.file_name), Object.hasOwnProperty.call(e3, "file_size") && t3.uint32(42).string(e3.file_size), Object.hasOwnProperty.call(e3, "file_download_url") && t3.uint32(50).string(e3.file_download_url), Object.hasOwnProperty.call(e3, "large_image_download_url") && t3.uint32(58).string(e3.large_image_download_url), Object.hasOwnProperty.call(e3, "thumbnail_download_url") && t3.uint32(66).string(e3.thumbnail_download_url), Object.hasOwnProperty.call(e3, "large") && t3.uint32(74).string(e3.large), Object.hasOwnProperty.call(e3, "thumbnail") && t3.uint32(82).string(e3.thumbnail), Object.hasOwnProperty.call(e3, "origin_width") && t3.uint32(88).uint32(e3.origin_width), Object.hasOwnProperty.call(e3, "origin_height") && t3.uint32(96).uint32(e3.origin_height), Object.hasOwnProperty.call(e3, "big_width") && t3.uint32(104).uint32(e3.big_width), Object.hasOwnProperty.call(e3, "big_height") && t3.uint32(112).uint32(e3.big_height), Object.hasOwnProperty.call(e3, "small_width") && t3.uint32(120).uint32(e3.small_width), Object.hasOwnProperty.call(e3, "small_height") && t3.uint32(128).uint32(e3.small_height), t3;
          }, v.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PictureMsgBody();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.version = e3.string();
                  break;
                case 2:
                  n3.file_type = e3.int32();
                  break;
                case 3:
                  n3.file_uid = e3.string();
                  break;
                case 4:
                  n3.file_name = e3.string();
                  break;
                case 5:
                  n3.file_size = e3.string();
                  break;
                case 6:
                  n3.file_download_url = e3.string();
                  break;
                case 7:
                  n3.large_image_download_url = e3.string();
                  break;
                case 8:
                  n3.thumbnail_download_url = e3.string();
                  break;
                case 9:
                  n3.large = e3.string();
                  break;
                case 10:
                  n3.thumbnail = e3.string();
                  break;
                case 11:
                  n3.origin_width = e3.uint32();
                  break;
                case 12:
                  n3.origin_height = e3.uint32();
                  break;
                case 13:
                  n3.big_width = e3.uint32();
                  break;
                case 14:
                  n3.big_height = e3.uint32();
                  break;
                case 15:
                  n3.small_width = e3.uint32();
                  break;
                case 16:
                  n3.small_height = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, v), e2.VideoMsgBody = (b.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "version") && t3.uint32(10).string(e3.version), Object.hasOwnProperty.call(e3, "file_type") && t3.uint32(16).int32(e3.file_type), Object.hasOwnProperty.call(e3, "file_uid") && t3.uint32(26).string(e3.file_uid), Object.hasOwnProperty.call(e3, "file_name") && t3.uint32(34).string(e3.file_name), Object.hasOwnProperty.call(e3, "file_size") && t3.uint32(42).string(e3.file_size), Object.hasOwnProperty.call(e3, "file_download_url") && t3.uint32(50).string(e3.file_download_url), Object.hasOwnProperty.call(e3, "media_duration") && t3.uint32(58).string(e3.media_duration), Object.hasOwnProperty.call(e3, "video_first_frame_download_url") && t3.uint32(66).string(e3.video_first_frame_download_url), Object.hasOwnProperty.call(e3, "thumbnail") && t3.uint32(74).string(e3.thumbnail), Object.hasOwnProperty.call(e3, "frame_width") && t3.uint32(80).uint32(e3.frame_width), Object.hasOwnProperty.call(e3, "frame_height") && t3.uint32(88).uint32(e3.frame_height), t3;
          }, b.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.VideoMsgBody();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.version = e3.string();
                  break;
                case 2:
                  n3.file_type = e3.int32();
                  break;
                case 3:
                  n3.file_uid = e3.string();
                  break;
                case 4:
                  n3.file_name = e3.string();
                  break;
                case 5:
                  n3.file_size = e3.string();
                  break;
                case 6:
                  n3.file_download_url = e3.string();
                  break;
                case 7:
                  n3.media_duration = e3.string();
                  break;
                case 8:
                  n3.video_first_frame_download_url = e3.string();
                  break;
                case 9:
                  n3.thumbnail = e3.string();
                  break;
                case 10:
                  n3.frame_width = e3.uint32();
                  break;
                case 11:
                  n3.frame_height = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, b), e2.StConvMsgInfo = (y.encode = function(e3, t3) {
            return "object" == typeof e3 && (e3 = new u.proto_zim.StConvMsgInfo(e3)), t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "msg_type") && t3.uint32(8).int32(e3.msg_type), Object.hasOwnProperty.call(e3, "msg") && t3.uint32(18).bytes(e3.msg), Object.hasOwnProperty.call(e3, "priority_type") && t3.uint32(24).int32(e3.priority_type), Object.hasOwnProperty.call(e3, "conv_id") && t3.uint32(34).string(e3.conv_id), Object.hasOwnProperty.call(e3, "msg_client_info") && u.proto_zim.StMsgClientInfo.encode(e3.msg_client_info, t3.uint32(42).fork()).ldelim(), Object.hasOwnProperty.call(e3, "payload") && t3.uint32(50).bytes(e3.payload), e3.offline_push && Object.hasOwnProperty.call(e3, "offline_push") && u.proto_zim.StOfflinePushInfo.encode(e3.offline_push, t3.uint32(58).fork()).ldelim(), Object.hasOwnProperty.call(e3, "has_receipt") && t3.uint32(80).int32(e3.has_receipt), Object.hasOwnProperty.call(e3, "sub_msg_type") && t3.uint32(104).int32(e3.sub_msg_type), Object.hasOwnProperty.call(e3, "searched_content") && t3.uint32(122).string(e3.searched_content), t3;
          }, y.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.StConvMsgInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.msg_type = e3.int32();
                  break;
                case 2:
                  n3.msg = e3.bytes();
                  break;
                case 3:
                  n3.priority_type = e3.int32();
                  break;
                case 4:
                  n3.conv_id = e3.string();
                  break;
                case 5:
                  n3.msg_client_info = u.proto_zim.StMsgClientInfo.decode(e3, e3.uint32());
                  break;
                case 6:
                  n3.payload = e3.bytes();
                  break;
                case 7:
                  n3.offline_push = u.proto_zim.StOfflinePushInfo.decode(e3, e3.uint32());
                  break;
                case 8:
                  n3.pack_count = e3.int32();
                  break;
                case 9:
                  n3.pack_index = e3.int32();
                  break;
                case 10:
                  n3.has_receipt = e3.int32();
                  break;
                case 11:
                  n3.at.push(e3.string());
                  break;
                case 12:
                  n3.at_all = e3.bool();
                  break;
                case 13:
                  n3.sub_msg_type = e3.int32();
                  break;
                case 14:
                  n3.save = e3.int32();
                  break;
                case 15:
                  n3.searched_content = e3.string();
                  break;
                case 17:
                  n3.sender_unaware = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return 31 == n3.msg_type && (n3.msg = u.proto_zim.StRevokeContent.decode(n3.msg)), n3;
          }, y), e2.StMsgSvrInfo = (M.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.StMsgSvrInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.msg_id = e3.int64();
                  break;
                case 2:
                  n3.conv_msg_seq = e3.int64();
                  break;
                case 3:
                  n3.c2c_msg_seq = e3.int64();
                  break;
                case 4:
                  n3.sender_user_id = e3.string();
                  break;
                case 5:
                  n3.sender_user_name = e3.bytes();
                  break;
                case 6:
                  n3.msg_time = e3.int64();
                  break;
                case 7:
                  n3.has_content = e3.int32();
                  break;
                case 9:
                  n3.msg_rsp = e3.bytes();
                  break;
                case 10:
                  n3.version = e3.uint32();
                  break;
                case 11:
                  n3.is_server = e3.uint32();
                  break;
                case 12:
                  n3.reactions = u.proto_zim.StReactions.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.msg_id = n3.msg_id.toString(), n3.conv_msg_seq = +n3.conv_msg_seq.toString(), n3.msg_time = +n3.msg_time.toString(), n3;
          }, M), e2.StRecvMsgInfo = (I.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.StRecvMsgInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.msg_info = u.proto_zim.StConvMsgInfo.decode(e3, e3.uint32());
                  break;
                case 2:
                  n3.msg_svr_info = u.proto_zim.StMsgSvrInfo.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, I), e2.StCommandMsgInfo = (k.encode = function(e3, t3) {
            return "object" == typeof e3 && (e3 = new u.proto_zim.StCommandMsgInfo(e3)), t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "msg_type") && t3.uint32(8).int32(e3.msg_type), Object.hasOwnProperty.call(e3, "msg") && t3.uint32(18).bytes(e3.msg), Object.hasOwnProperty.call(e3, "priority_type") && t3.uint32(24).int32(e3.priority_type), Object.hasOwnProperty.call(e3, "payload") && t3.uint32(34).bytes(e3.payload), Object.hasOwnProperty.call(e3, "conv_id") && t3.uint32(42).string(e3.conv_id), t3;
          }, k.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.StCommandMsgInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.msg_type = e3.int32();
                  break;
                case 2:
                  n3.msg = e3.bytes();
                  break;
                case 3:
                  n3.priority_type = e3.int32();
                  break;
                case 4:
                  n3.payload = e3.bytes();
                  break;
                case 5:
                  n3.conv_id = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, k), e2.StCommandSvrInfo = (w.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.StCommandSvrInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.msg_id = e3.int64();
                  break;
                case 2:
                  n3.sender_user_id = e3.string();
                  break;
                case 3:
                  n3.sender_user_name = e3.bytes();
                  break;
                case 4:
                  n3.msg_time = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.msg_id = n3.msg_id.toString(), n3.msg_time = +n3.msg_time.toString(), n3;
          }, w), e2.StRecvCommandInfo = (C.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.StRecvCommandInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.command_msg_info = u.proto_zim.StCommandMsgInfo.decode(e3, e3.uint32());
                  break;
                case 2:
                  n3.command_svr_info = u.proto_zim.StCommandSvrInfo.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, C), e2.FetchMsgInfo = (S.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.FetchMsgInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.msg_body = e3.bytes();
                  break;
                case 2:
                  n3.msg_dyn_info = u.proto_zim.MsgDynInfo.decode(e3, e3.uint32());
                  break;
                case 3:
                  n3.msglist_seq = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            const i2 = u.proto_zim.StRecvMsgInfo.decode(n3.msg_body);
            return Object.assign(i2.msg_info, n3.msg_dyn_info), i2.msg_svr_info.conv_msg_seq ? i2.msg_svr_info.c2c_msg_seq = n3.msglist_seq : i2.msg_svr_info.conv_msg_seq = +n3.msglist_seq.toString(), i2;
          }, S), e2.MsgDynInfo = (D.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.MsgDynInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.msg_status = e3.int32();
                  break;
                case 2:
                  n3.has_receipt = e3.bool() ? 1 : 0;
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, D), e2.CallReq = (q.encode = function(e3, t3) {
            if (t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "call_id") && t3.uint32(10).string(e3.call_id), e3.user_ids.length)
              for (let r3 = 0; r3 < e3.user_ids.length; ++r3)
                t3.uint32(18).string(e3.user_ids[r3]);
            return Object.hasOwnProperty.call(e3, "timeout") && t3.uint32(24).int32(e3.timeout), Object.hasOwnProperty.call(e3, "payload") && t3.uint32(34).bytes(e3.payload), e3.offline_info && Object.hasOwnProperty.call(e3, "offline_info") && u.proto_zim.StOfflinePushInfo.encode(e3.offline_info, t3.uint32(42).fork()).ldelim(), Object.hasOwnProperty.call(e3, "call_mode") && t3.uint32(48).int32(e3.call_mode), t3;
          }, q), e2.CallRsp = (R.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.CallRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.timeout = e3.int32();
                  break;
                case 4:
                  n3.call_id = e3.string();
                  break;
                case 5:
                  n3.err_list.push(u.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                case 6:
                  n3.call_seq = e3.int64();
                  break;
                case 7:
                  n3.call_list_seq = e3.int64();
                  break;
                case 8:
                  n3.create_time = e3.int64();
                  break;
                case 9:
                  n3.new_err_list.push(u.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, R), e2.CallCancelReq = (O.encode = function(e3, t3) {
            if (t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "call_id") && t3.uint32(10).string(e3.call_id), e3.user_ids.length)
              for (let r3 = 0; r3 < e3.user_ids.length; ++r3)
                t3.uint32(18).string(e3.user_ids[r3]);
            return Object.hasOwnProperty.call(e3, "state") && t3.uint32(24).int32(e3.state), Object.hasOwnProperty.call(e3, "extended_data") && t3.uint32(34).bytes(e3.extended_data), e3.offline_info && Object.hasOwnProperty.call(e3, "offline_info") && u.proto_zim.StOfflinePushInfo.encode(e3.offline_info, t3.uint32(42).fork()).ldelim(), t3;
          }, O), e2.CallCancelRsp = (A.prototype.code = 0, A.prototype.message = "", A.prototype.err_list = a.emptyArray, A.prototype.call_seq = a.Long ? a.Long.fromBits(0, 0, false) : 0, A.prototype.call_list_seq = a.Long ? a.Long.fromBits(0, 0, false) : 0, A.prototype.new_err_list = a.emptyArray, A.prototype.call_user_session_id = a.Long ? a.Long.fromBits(0, 0, false) : 0, A.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.CallCancelRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.err_list && n3.err_list.length || (n3.err_list = []), n3.err_list.push(u.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n3.call_seq = e3.int64();
                  break;
                case 5:
                  n3.call_list_seq = e3.int64();
                  break;
                case 6:
                  n3.new_err_list && n3.new_err_list.length || (n3.new_err_list = []), n3.new_err_list.push(u.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                case 7:
                  n3.call_user_session_id = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, A), e2.CallUserInfo = (x.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.CallUserInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.user_id = e3.string();
                  break;
                case 2:
                  n3.user_state = e3.uint32();
                  break;
                case 3:
                  n3.extended_data = e3.bytes();
                  break;
                case 4:
                  n3.is_timeout = e3.int64();
                  break;
                case 5:
                  n3.accept_time = e3.int64();
                  break;
                case 6:
                  n3.quit_time = e3.int64();
                  break;
                case 7:
                  n3.residue_timeout_time = e3.int64();
                  break;
                case 8:
                  n3.user_session_id = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, x), e2.CallInfoRsp = (P.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.CallInfoRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.user_list.push(u.proto_zim.CallUserInfo.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n3.call_seq = e3.int64();
                  break;
                case 5:
                  n3.now_time = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, P), e2.CallListReq = (T.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "cur_list_seq") && t3.uint32(8).int64(e3.cur_list_seq), Object.hasOwnProperty.call(e3, "count") && t3.uint32(16).uint32(e3.count), Object.hasOwnProperty.call(e3, "degree") && t3.uint32(24).uint32(e3.degree), t3;
          }, T), e2.CallListRsp = (E.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.CallListRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.cur_list_seq = e3.int64();
                  break;
                case 4:
                  n3.max_list_seq = e3.int64();
                  break;
                case 5:
                  n3.calls.push(u.proto_zim.CallInfo.decode(e3, e3.uint32()));
                  break;
                case 6:
                  n3.fetch_end = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, E), e2.CallUserState = (L.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.CallUserState();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.user_id = e3.string();
                  break;
                case 2:
                  n3.user_state = e3.uint32();
                  break;
                case 3:
                  n3.session_id = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, L), e2.CallInfo = (j.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.CallInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.call_id = e3.string();
                  break;
                case 2:
                  n3.caller = e3.string();
                  break;
                case 3:
                  n3.create_time = e3.int64();
                  break;
                case 4:
                  n3.call_list_seq = e3.int64();
                  break;
                case 5:
                  n3.call_status = e3.int64();
                  break;
                case 6:
                  n3.call_user_list.push(u.proto_zim.UserMailCallUserInfo.decode(e3, e3.uint32()));
                  break;
                case 7:
                  n3.now_time = e3.int64();
                  break;
                case 8:
                  n3.call_mode = e3.int32();
                  break;
                case 9:
                  n3.payload = e3.bytes();
                  break;
                case 10:
                  n3.destroy_time = e3.int64();
                  break;
                case 11:
                  n3.accept_time = e3.int64();
                  break;
                case 12:
                  n3.quit_time = e3.int64();
                  break;
                case 13:
                  n3.user_timeout = e3.int32();
                  break;
                case 14:
                  n3.invite_time = e3.int64();
                  break;
                case 15:
                  n3.inviter = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, j), e2.CallInviteReq = (G.encode = function(e3, t3) {
            if (t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "call_id") && t3.uint32(10).string(e3.call_id), e3.user_ids.length)
              for (let r3 = 0; r3 < e3.user_ids.length; ++r3)
                t3.uint32(18).string(e3.user_ids[r3]);
            return e3.offline_info && Object.hasOwnProperty.call(e3, "offline_info") && u.proto_zim.StOfflinePushInfo.encode(e3.offline_info, t3.uint32(26).fork()).ldelim(), t3;
          }, G), e2.CallInviteRsp = (U.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.CallInviteRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.call_id = e3.string();
                  break;
                case 4:
                  n3.call_seq = e3.int64();
                  break;
                case 5:
                  n3.err_list.push(u.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                case 6:
                  n3.timeout = e3.int32();
                  break;
                case 7:
                  n3.call_user_session_id = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, U), e2.CallQuitReq = (B.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "call_id") && t3.uint32(10).string(e3.call_id), e3.offline_info && Object.hasOwnProperty.call(e3, "offline_info") && u.proto_zim.StOfflinePushInfo.encode(e3.offline_info, t3.uint32(18).fork()).ldelim(), Object.hasOwnProperty.call(e3, "payload") && t3.uint32(26).bytes(e3.payload), t3;
          }, B), e2.CallQuitRsp = (z.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.CallQuitRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.call_list_seq = e3.int64();
                  break;
                case 4:
                  n3.talk_time = e3.int64();
                  break;
                case 5:
                  n3.quit_time = e3.int64();
                  break;
                case 6:
                  n3.call_seq = e3.int64();
                  break;
                case 7:
                  n3.call_user_session_id = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, z), e2.CallEnterReq = (N.encode = function(e3, t3) {
            return t3 = t3 || i.create(), null != e3.call_id && Object.hasOwnProperty.call(e3, "call_id") && t3.uint32(10).string(e3.call_id), null != e3.payload && Object.hasOwnProperty.call(e3, "payload") && t3.uint32(18).bytes(e3.payload), t3;
          }, N), e2.CallEnterRsp = (F.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.CallEnterRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.call_seq = e3.int64();
                  break;
                case 4:
                  n3.timeout = e3.int32();
                  break;
                case 5:
                  n3.create_time = e3.int64();
                  break;
                case 6:
                  n3.call_list_seq = e3.int64();
                  break;
                case 7:
                  n3.caller = e3.string();
                  break;
                case 8:
                  n3.accept_time = e3.int64();
                  break;
                case 9:
                  n3.extended_data = e3.bytes();
                  break;
                case 10:
                  n3.user_state_list && n3.user_state_list.length || (n3.user_state_list = []), n3.user_state_list.push(u.proto_zim.CallUserInfo.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, F), e2.PushCallInvited = (K.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushCallInvited();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.call_id = e3.string();
                  break;
                case 2:
                  n3.timeout = e3.int32();
                  break;
                case 3:
                  n3.caller = e3.string();
                  break;
                case 4:
                  n3.payload = e3.bytes();
                  break;
                case 5:
                  n3.call_seq = e3.int64();
                  break;
                case 6:
                  n3.call_list_seq = e3.int64();
                  break;
                case 7:
                  n3.user_state_list.push(u.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                case 8:
                  n3.call_mode = e3.int32();
                  break;
                case 9:
                  n3.create_time = e3.int64();
                  break;
                case 10:
                  n3.call_user_session_id = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, K), e2.PushCallAccept = (H.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushCallAccept();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.call_id = e3.string();
                  break;
                case 2:
                  n3.invitee = e3.string();
                  break;
                case 3:
                  n3.caller = e3.string();
                  break;
                case 4:
                  n3.extended_data = e3.bytes();
                  break;
                case 5:
                  n3.call_seq = e3.int64();
                  break;
                case 6:
                  n3.call_list_seq = e3.int64();
                  break;
                case 7:
                  n3.accept_time = e3.int64();
                  break;
                case 9:
                  n3.call_user_session_id = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, H), e2.PushCallRefuse = (Q.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushCallRefuse();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.call_id = e3.string();
                  break;
                case 2:
                  n3.invitee = e3.string();
                  break;
                case 3:
                  n3.caller = e3.string();
                  break;
                case 4:
                  n3.call_state = e3.uint32();
                  break;
                case 5:
                  n3.extended_data = e3.bytes();
                  break;
                case 6:
                  n3.call_seq = e3.int64();
                  break;
                case 7:
                  n3.call_list_seq = e3.int64();
                  break;
                case 9:
                  n3.call_user_session_id = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, Q), e2.PushCallCancel = (V.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushCallCancel();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.call_id = e3.string();
                  break;
                case 2:
                  n3.caller = e3.string();
                  break;
                case 4:
                  n3.state = e3.int32();
                  break;
                case 5:
                  n3.extended_data = e3.bytes();
                  break;
                case 6:
                  n3.call_seq = e3.int64();
                  break;
                case 7:
                  n3.call_list_seq = e3.int64();
                  break;
                case 9:
                  n3.user_ids.push(e3.string());
                  break;
                case 10:
                  n3.operator = e3.string();
                  break;
                case 11:
                  n3.call_user_session_id = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, V), e2.PushOnCallInvited = (Z.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushOnCallInvited();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.call_id = e3.string();
                  break;
                case 2:
                  n3.create_time = e3.int64();
                  break;
                case 3:
                  n3.timeout = e3.int32();
                  break;
                case 4:
                  n3.caller = e3.string();
                  break;
                case 5:
                  n3.invitee = e3.string();
                  break;
                case 6:
                  n3.call_seq = e3.int64();
                  break;
                case 7:
                  n3.call_list_seq = e3.int64();
                  break;
                case 8:
                  n3.payload = e3.bytes();
                  break;
                case 9:
                  n3.user_state_list.push(u.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                case 11:
                  n3.call_user_session_id = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, Z), e2.PushCallQuit = (J.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushCallQuit();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.call_id = e3.string();
                  break;
                case 2:
                  n3.invitee = e3.string();
                  break;
                case 3:
                  n3.caller = e3.string();
                  break;
                case 4:
                  n3.call_seq = e3.int64();
                  break;
                case 5:
                  n3.payload = e3.bytes();
                  break;
                case 6:
                  n3.accept_time = e3.int64();
                  break;
                case 7:
                  n3.quit_time = e3.int64();
                  break;
                case 8:
                  n3.call_user_session_id = e3.int64();
                  break;
                case 9:
                  n3.call_list_seq = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, J), e2.PushCallDestroy = (W.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushCallDestroy();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.call_id = e3.string();
                  break;
                case 2:
                  n3.caller = e3.string();
                  break;
                case 3:
                  n3.call_list_seq = e3.int64();
                  break;
                case 4:
                  n3.payload = e3.bytes();
                  break;
                case 5:
                  n3.talk_time = e3.int64();
                  break;
                case 6:
                  n3.destroy_time = e3.int64();
                  break;
                case 7:
                  n3.operator = e3.string();
                  break;
                case 8:
                  n3.call_user_session_id = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, W), e2.PushCallAck = (Y.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushCallAck();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.call_id = e3.string();
                  break;
                case 2:
                  n3.caller = e3.string();
                  break;
                case 3:
                  n3.invitee = e3.string();
                  break;
                case 4:
                  n3.call_seq = e3.int64();
                  break;
                case 6:
                  n3.call_user_session_id = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, Y), e2.PushCallEnter = (X.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushCallEnter();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.call_id = e3.string();
                  break;
                case 2:
                  n3.caller = e3.string();
                  break;
                case 3:
                  n3.create_time = e3.int64();
                  break;
                case 4:
                  n3.enter_time = e3.int64();
                  break;
                case 5:
                  n3.call_list_seq = e3.int64();
                  break;
                case 6:
                  n3.call_payload = e3.bytes();
                  break;
                case 7:
                  n3.call_seq = e3.int64();
                  break;
                case 8:
                  n3.payload = e3.bytes();
                  break;
                case 9:
                  n3.user_id = e3.string();
                  break;
                case 10:
                  n3.user_state_list && n3.user_state_list.length || (n3.user_state_list = []), n3.user_state_list.push(u.proto_zim.UserMailCallUserInfo.decode(e3, e3.uint32()));
                  break;
                case 11:
                  n3.timeout = e3.int32();
                  break;
                case 12:
                  n3.call_user_session_id = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, X), e2.ConvInfo = ($.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.ConvInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.conv_id = e3.string();
                  break;
                case 2:
                  n3.conv_type = e3.int32();
                  break;
                case 3:
                  n3.conv_list_seq = e3.int64();
                  break;
                case 4:
                  n3.conv_msg_seq = e3.int64();
                  break;
                case 5:
                  n3.read_seq = e3.int64();
                  break;
                case 6:
                  n3.is_del = e3.bool();
                  break;
                case 7:
                  n3.last_msg = u.proto_zim.StRecvMsgInfo.decode(e3, e3.uint32());
                  break;
                case 8:
                  n3.send_count_after_read = e3.int64();
                  break;
                case 9:
                  n3.last_msg_del = e3.bool();
                  break;
                case 10:
                  n3.last_del_msg_seq = e3.int64();
                  break;
                case 11:
                  n3.statemsg_seq = e3.int64();
                  break;
                case 12:
                  n3.receipt_max_conv_msg_seq = e3.int64();
                  break;
                case 13:
                  n3.at_max_conv_msg_seq = e3.int64();
                  break;
                case 14:
                  n3.at_all_max_conv_msg_seq = e3.int64();
                  break;
                case 15:
                  n3.update_time = e3.int64();
                  break;
                case 16:
                  n3.sub_read_count = e3.int64();
                  break;
                case 17:
                  n3.last_revoke_msg_seq = e3.int64();
                  break;
                case 18:
                  n3.last_msg_time = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.conv_msg_seq = +n3.conv_msg_seq.toString(), n3.read_seq = +n3.read_seq.toString(), n3.send_count_after_read = +n3.send_count_after_read.toString(), n3.statemsg_seq = +n3.statemsg_seq.toString(), n3.update_time = +n3.update_time.toString(), n3.sub_read_count = +n3.sub_read_count.toString(), n3.last_revoke_msg_seq = +n3.last_revoke_msg_seq.toString(), n3.last_msg_time = +n3.last_msg_time.toString(), n3;
          }, $), e2.GetConvListReq = (ee.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "conv_list_seq") && t3.uint32(8).int64(e3.conv_list_seq), Object.hasOwnProperty.call(e3, "count") && t3.uint32(16).uint32(e3.count), Object.hasOwnProperty.call(e3, "full_pull") && t3.uint32(24).int32(e3.full_pull), Object.hasOwnProperty.call(e3, "degree") && t3.uint32(32).uint32(e3.degree), t3;
          }, ee), e2.GetConvListRsp = (te.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.GetConvListRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.conv_list.push(u.proto_zim.ConvInfo.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n3.conv_list_seq = e3.int64();
                  break;
                case 5:
                  n3.max_list_seq = e3.int64();
                  break;
                case 6:
                  n3.full_list = e3.int32();
                  break;
                case 7:
                  n3.fetch_end = e3.int32();
                  break;
                case 8:
                  n3.max_del_conv_list_seq = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, te), e2.FetchConvMsgReq = (re.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "conv_id") && t3.uint32(10).string(e3.conv_id), Object.hasOwnProperty.call(e3, "conv_type") && t3.uint32(16).int32(e3.conv_type), Object.hasOwnProperty.call(e3, "conv_msg_seq") && t3.uint32(24).int64(e3.conv_msg_seq), Object.hasOwnProperty.call(e3, "count") && t3.uint32(32).int32(e3.count), Object.hasOwnProperty.call(e3, "mode") && t3.uint32(40).int32(e3.mode), Object.hasOwnProperty.call(e3, "login_fetch") && t3.uint32(48).int32(e3.login_fetch), Object.hasOwnProperty.call(e3, "how") && t3.uint32(56).int32(e3.how), Object.hasOwnProperty.call(e3, "degree") && t3.uint32(64).uint32(e3.degree), t3;
          }, re), e2.FetchConvMsgRsp = (ne.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.FetchConvMsgRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.max_conv_msg_seq = e3.int64();
                  break;
                case 4:
                  n3.next_conv_msg_seq = e3.int64();
                  break;
                case 5:
                  n3.msgs.push(u.proto_zim.FetchMsgInfo.decode(e3, e3.uint32()));
                  break;
                case 6:
                  n3.fetch_end = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.max_conv_msg_seq = +n3.max_conv_msg_seq.toString(), n3.next_conv_msg_seq = +n3.next_conv_msg_seq.toString(), n3;
          }, ne), e2.FetchC2CMsgReq = (oe.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "c2c_msg_seq") && t3.uint32(8).int64(e3.c2c_msg_seq), Object.hasOwnProperty.call(e3, "count") && t3.uint32(16).int32(e3.count), Object.hasOwnProperty.call(e3, "login_fetch") && t3.uint32(24).int32(e3.login_fetch), Object.hasOwnProperty.call(e3, "how") && t3.uint32(32).int32(e3.how), Object.hasOwnProperty.call(e3, "degree") && t3.uint32(40).uint32(e3.degree), t3;
          }, oe), e2.FetchC2CMsgRsp = (se.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.FetchC2CMsgRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.msgs.push(u.proto_zim.FetchMsgInfo.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n3.c2c_msg_seq = e3.int64();
                  break;
                case 5:
                  n3.svr_c2c_msg_seq = e3.int64();
                  break;
                case 6:
                  n3.fetch_end = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, se), e2.UpdateReadSeqReq = (ie.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "conv_id") && t3.uint32(10).string(e3.conv_id), Object.hasOwnProperty.call(e3, "conv_type") && t3.uint32(16).int32(e3.conv_type), Object.hasOwnProperty.call(e3, "read_seq") && t3.uint32(24).int64(e3.read_seq), t3;
          }, ie), e2.UserMailHbRsp = (ae.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.UserMailHbRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.conv_list_seq = e3.int64();
                  break;
                case 4:
                  n3.group_list_seq = e3.int64();
                  break;
                case 5:
                  n3.c2c_msg_seq = e3.int64();
                  break;
                case 7:
                  n3.seq_fallback_timeout = e3.uint32();
                  break;
                case 8:
                  n3.msg_to = e3.uint32();
                  break;
                case 9:
                  n3.msg_itvl = e3.uint32();
                  break;
                case 10:
                  n3.list_to = e3.uint32();
                  break;
                case 11:
                  n3.list_itvl = e3.uint32();
                  break;
                case 12:
                  n3.conv_to = e3.uint32();
                  break;
                case 13:
                  n3.conv_itvl = e3.uint32();
                  break;
                case 14:
                  n3.group_to = e3.uint32();
                  break;
                case 15:
                  n3.group_itvl = e3.uint32();
                  break;
                case 16:
                  n3.c2c_statemsg_seq = e3.int64();
                  break;
                case 17:
                  n3.extra_msg_list_seq = e3.int64();
                  break;
                case 18:
                  n3.conv_pinned_list_seq = e3.int64();
                  break;
                case 19:
                  n3.call_list_seq = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.conv_pinned_list_seq = +n3.conv_pinned_list_seq.toString(), n3;
          }, ae), e2.ConvDelRsp = (ue.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.ConvDelRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.conv_list_seq = e3.int64();
                  break;
                case 4:
                  n3.conv_msg_seq = e3.int64();
                  break;
                case 5:
                  n3.conv_pinned_list_seq = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, ue), e2.ConvModifyPinnedLvReq = (ce.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "conv_id") && t3.uint32(10).string(e3.conv_id), Object.hasOwnProperty.call(e3, "conv_type") && t3.uint32(16).int32(e3.conv_type), Object.hasOwnProperty.call(e3, "pinned_type") && t3.uint32(24).int32(e3.pinned_type), t3;
          }, ce), e2.ConvDelMsgByMsgIdReq = (le.encode = function(e3, t3) {
            if (t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "conv_id") && t3.uint32(10).string(e3.conv_id), Object.hasOwnProperty.call(e3, "conv_type") && t3.uint32(16).int32(e3.conv_type), e3.msg_ids && e3.msg_ids.length) {
              t3.uint32(26).fork();
              for (let r3 = 0; r3 < e3.msg_ids.length; ++r3)
                t3.int64(e3.msg_ids[r3]);
              t3.ldelim();
            }
            return t3;
          }, le), e2.C2CReadReceiptReq = (de.encode = function(e3, t3) {
            if (t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "conv_id") && t3.uint32(10).string(e3.conv_id), e3.conv_msg_seq && e3.conv_msg_seq.length) {
              t3.uint32(18).fork();
              for (let r3 = 0; r3 < e3.conv_msg_seq.length; ++r3)
                t3.int64(e3.conv_msg_seq[r3]);
              t3.ldelim();
            }
            return t3;
          }, de), e2.C2CReadReceiptRsp = (pe.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3, n3, o2 = void 0 === t3 ? e3.len : e3.pos + t3, i2 = new u.proto_zim.C2CReadReceiptRsp();
            for (; e3.pos < o2; ) {
              var a2 = e3.uint32();
              switch (a2 >>> 3) {
                case 1:
                  i2.code = e3.uint32();
                  break;
                case 2:
                  i2.message = e3.string();
                  break;
                case 3:
                  var c2 = e3.uint32() + e3.pos;
                  for (r3 = 0, n3 = 0; e3.pos < c2; ) {
                    var l2 = e3.uint32();
                    switch (l2 >>> 3) {
                      case 1:
                        r3 = e3.int64();
                        break;
                      case 2:
                        n3 = e3.int64().toString();
                        break;
                      default:
                        e3.skipType(7 & l2);
                    }
                  }
                  i2.conv_msg_seq2_receipt_seq[r3.toString()] = n3;
                  break;
                default:
                  e3.skipType(7 & a2);
              }
            }
            return i2;
          }, pe), e2.GetGroupReadReceiptDetailReq = (he.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "group_id") && t3.uint32(10).string(e3.group_id), Object.hasOwnProperty.call(e3, "conv_msg_seq") && t3.uint32(16).int64(e3.conv_msg_seq), Object.hasOwnProperty.call(e3, "list_seq") && t3.uint32(24).uint32(e3.list_seq), Object.hasOwnProperty.call(e3, "count") && t3.uint32(32).uint32(e3.count), Object.hasOwnProperty.call(e3, "degree") && t3.uint32(40).uint32(e3.degree), t3;
          }, he), e2.GetGroupReadReceiptDetailRsp = (ge.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.GetGroupReadReceiptDetailRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  if (2 == (7 & o2))
                    for (var i2 = e3.uint32() + e3.pos; e3.pos < i2; )
                      n3.read_members.push(+e3.int64().toString());
                  else
                    n3.read_members.push(+e3.int64().toString());
                  break;
                case 4:
                  if (2 == (7 & o2))
                    for (var a2 = e3.uint32() + e3.pos; e3.pos < a2; )
                      n3.unread_members.push(+e3.int64().toString());
                  else
                    n3.unread_members.push(+e3.int64().toString());
                  break;
                case 5:
                  n3.next_list_seq = e3.uint32();
                  break;
                case 6:
                  n3.read_count = e3.sint32();
                  break;
                case 7:
                  n3.unread_count = e3.sint32();
                  break;
                case 8:
                  n3.fetch_end = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, ge), e2.GetExtraMsgListReq = (fe.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "list_seq") && t3.uint32(8).int64(e3.list_seq), Object.hasOwnProperty.call(e3, "count") && t3.uint32(16).sint32(e3.count), Object.hasOwnProperty.call(e3, "degree") && t3.uint32(24).uint32(e3.degree), t3;
          }, fe), e2.GetExtraMsgListRsp = (me.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.GetExtraMsgListRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.list.push(u.proto_zim.ExtraMsgContent.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n3.next_list_seq = e3.int64();
                  break;
                case 5:
                  n3.fetch_end = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.next_list_seq = +n3.next_list_seq.toString(), n3;
          }, me), e2.ExtraMsgContent = (_e.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.ExtraMsgContent();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.conv_id = e3.string();
                  break;
                case 2:
                  n3.conv_type = e3.int32();
                  break;
                case 3:
                  n3.conv_msg_seq = e3.int64();
                  break;
                case 4:
                  n3.receipt_seq = e3.int64();
                  break;
                case 5:
                  n3.type = e3.int32();
                  break;
                case 6:
                  Object.assign(n3, u.proto_zim.StReceiptContent.decode(e3, e3.uint32()));
                  break;
                case 7:
                case 8:
                  Object.assign(n3, u.proto_zim.StDeleteContent.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.conv_msg_seq = +n3.conv_msg_seq.toString(), n3;
          }, _e), e2.StReceiptContent = (ve.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.StReceiptContent();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.read_count = e3.sint32();
                  break;
                case 2:
                  n3.unread_count = e3.sint32();
                  break;
                case 3:
                  n3.is_conv_read = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, ve), e2.StDeleteContent = (be.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.StDeleteContent();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              if (o2 >>> 3 == 1)
                if (2 == (7 & o2))
                  for (var i2 = e3.uint32() + e3.pos; e3.pos < i2; )
                    n3.del_conv_msg_seqs.push(+e3.int64().toString());
                else
                  n3.del_conv_msg_seqs.push(+e3.int64().toString());
              else
                e3.skipType(7 & o2);
            }
            return n3;
          }, be), e2.PushReadReceipt = (ye.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushReadReceipt();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              o2 >>> 3 == 1 ? n3.PushItems.push(u.proto_zim.PushReadReceipt.PushItem.decode(e3, e3.uint32())) : e3.skipType(7 & o2);
            }
            return n3;
          }, ye.PushItem = (Me.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushReadReceipt.PushItem();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.conv_msg_seq = e3.int64();
                  break;
                case 2:
                  n3.conv_id = e3.string();
                  break;
                case 3:
                  n3.conv_type = e3.int32();
                  break;
                case 4:
                  n3.read_count = e3.sint32();
                  break;
                case 5:
                  n3.unread_count = e3.sint32();
                  break;
                case 6:
                  n3.receipt_seq = e3.int64();
                  break;
                case 7:
                  n3.is_conv_read = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.conv_msg_seq = +n3.conv_msg_seq.toString(), n3;
          }, Me), ye), e2.GetStatemsgListReq = (Ie.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "conv_id") && t3.uint32(10).string(e3.conv_id), Object.hasOwnProperty.call(e3, "statemsg_seq") && t3.uint32(16).int64(e3.statemsg_seq), Object.hasOwnProperty.call(e3, "count") && t3.uint32(24).sint32(e3.count), Object.hasOwnProperty.call(e3, "degree") && t3.uint32(32).uint32(e3.degree), Object.hasOwnProperty.call(e3, "max_msg_seq") && t3.uint32(40).int64(e3.max_msg_seq), Object.hasOwnProperty.call(e3, "min_msg_seq") && t3.uint32(48).int64(e3.min_msg_seq), t3;
          }, Ie), e2.GetStatemsgListRsp = (ke.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.GetStatemsgListRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.statemsg_list.push(u.proto_zim.StStatemsgContent.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n3.next_statemsg_seq = e3.int64();
                  break;
                case 5:
                  n3.fetch_end = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, ke), e2.StStatemsgContent = (we.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3, n3, o2 = void 0 === t3 ? e3.len : e3.pos + t3, i2 = new u.proto_zim.StStatemsgContent();
            for (; e3.pos < o2; ) {
              var a2 = e3.uint32();
              switch (a2 >>> 3) {
                case 1:
                  i2.conv_msg_seq = e3.int64();
                  break;
                case 2:
                  i2.msg_status = e3.int32();
                  break;
                case 3:
                  i2.statemsg_seq = e3.int64();
                  break;
                case 4:
                  i2.conv_id = e3.string();
                  break;
                case 5:
                  i2.conv_type = e3.int32();
                  break;
                case 6:
                  Object.assign(i2, u.proto_zim.StRevokeContent.decode(e3.bytes()));
                  break;
                case 7:
                  i2.reaction_seq = e3.int64();
                  break;
                case 8:
                  var c2 = e3.uint32() + e3.pos;
                  for (r3 = 0, n3 = []; e3.pos < c2; ) {
                    var l2 = e3.uint32();
                    switch (l2 >>> 3) {
                      case 1:
                        r3 = e3.int32();
                        break;
                      case 2:
                        n3 = e3.bytes();
                        break;
                      default:
                        e3.skipType(7 & l2);
                    }
                  }
                  1 == r3 && Object.assign(i2, u.proto_zim.StStateMsgReactionBrief.decode(n3));
                  break;
                default:
                  e3.skipType(7 & a2);
              }
            }
            return i2.conv_msg_seq = +i2.conv_msg_seq.toString(), i2.reaction_seq = +i2.reaction_seq.toString(), i2;
          }, we), e2.StStateMsgReactionBrief = (Ce.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.StStateMsgReactionBrief();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              o2 >>> 3 == 1 ? n3.reaction_briefs.push(u.proto_zim.StReactionBrief.decode(e3, e3.uint32())) : e3.skipType(7 & o2);
            }
            return n3;
          }, Ce), e2.RevokeMsgReq = (Se.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "conv_id") && t3.uint32(10).string(e3.conv_id), Object.hasOwnProperty.call(e3, "conv_msg_seq") && t3.uint32(16).int64(e3.conv_msg_seq), e3.offline_push && Object.hasOwnProperty.call(e3, "offline_push") && u.proto_zim.StOfflinePushInfo.encode(e3.offline_push, t3.uint32(26).fork()).ldelim(), Object.hasOwnProperty.call(e3, "payload") && t3.uint32(34).bytes(e3.payload), t3;
          }, Se), e2.RevokeMsgRsp = (De.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.RevokeMsgRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.statemsg_seq = e3.int64();
                  break;
                case 4:
                  n3.msg_status = e3.int32();
                  break;
                case 5:
                  n3.revoke_time = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.revoke_time = +n3.revoke_time.toString(), n3;
          }, De), e2.StRevokeContent = (qe.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.StRevokeContent();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.user_id = e3.string();
                  break;
                case 2:
                  n3.revoke_time = e3.int64();
                  break;
                case 3:
                  n3.msg_type = e3.int32();
                  break;
                case 4:
                  n3.revoke_type = e3.uint32();
                  break;
                case 5:
                  n3.payload = e3.bytes();
                  break;
                case 6:
                  n3.msg_status = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.revoke_time = +n3.revoke_time.toString(), n3;
          }, qe), e2.PushMsgRevoke = (Re.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushMsgRevoke();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.recv_msg_info = u.proto_zim.StRecvMsgInfo.decode(e3, e3.uint32());
                  break;
                case 2:
                  n3.msg_status = e3.int32();
                  break;
                case 3:
                  n3.statemsg_seq = e3.int64();
                  break;
                case 4:
                  n3.conv_type = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, Re), e2.HttpRequest = (Oe.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3, n3, o2 = void 0 === t3 ? e3.len : e3.pos + t3, i2 = new u.proto_zim.HttpRequest();
            for (; e3.pos < o2; ) {
              var a2 = e3.uint32();
              switch (a2 >>> 3) {
                case 1:
                  i2.url = e3.string();
                  break;
                case 2:
                  i2.method = e3.string();
                  break;
                case 3:
                  var c2 = e3.uint32() + e3.pos;
                  for (r3 = "", n3 = ""; e3.pos < c2; ) {
                    var l2 = e3.uint32();
                    switch (l2 >>> 3) {
                      case 1:
                        r3 = e3.string();
                        break;
                      case 2:
                        n3 = e3.string();
                        break;
                      default:
                        e3.skipType(7 & l2);
                    }
                  }
                  i2.headers[r3] = n3;
                  break;
                case 4:
                  var d2 = e3.uint32() + e3.pos;
                  for (r3 = "", n3 = ""; e3.pos < d2; ) {
                    var p2 = e3.uint32();
                    switch (p2 >>> 3) {
                      case 1:
                        r3 = e3.string();
                        break;
                      case 2:
                        n3 = e3.string();
                        break;
                      default:
                        e3.skipType(7 & p2);
                    }
                  }
                  i2.forms[r3] = n3;
                  break;
                default:
                  e3.skipType(7 & a2);
              }
            }
            return i2;
          }, Oe), e2.FileUploadReq = (Ae.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "md5") && t3.uint32(10).string(e3.md5), Object.hasOwnProperty.call(e3, "file_type") && t3.uint32(16).int32(e3.file_type), Object.hasOwnProperty.call(e3, "name") && t3.uint32(26).string(e3.name), Object.hasOwnProperty.call(e3, "size") && t3.uint32(32).int64(e3.size), Object.hasOwnProperty.call(e3, "duration") && t3.uint32(40).int64(e3.duration), t3;
          }, Ae), e2.FileUploadRsp = (xe.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.FileUploadRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.state = e3.uint32();
                  break;
                case 4:
                  n3.upload_req = u.proto_zim.HttpRequest.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, xe), e2.FileProcessRsp = (Pe.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.FileProcessRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.state = e3.uint32();
                  break;
                case 4:
                  n3.download_url = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, Pe), e2.StGroupMemberData = (Te.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.StGroupMemberData();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.member_data_seq = e3.int64();
                  break;
                case 2:
                  n3.user_name = e3.string();
                  break;
                case 3:
                  n3.group_nick_name = e3.string();
                  break;
                case 4:
                  n3.role = e3.int32();
                  break;
                case 5:
                  n3.mute = e3.int32();
                  break;
                case 6:
                  n3.not_notify = e3.int32();
                  break;
                case 7:
                  n3.not_recv_msg = e3.int32();
                  break;
                case 8:
                  n3.user_avatar = e3.bytes();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.member_data_seq = +n3.member_data_seq.toString(), n3;
          }, Te), e2.StGroupMember = (Ee.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.StGroupMember();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.user_id = e3.string();
                  break;
                case 2:
                  n3.user_nid = e3.int64();
                  break;
                case 3:
                  n3.member_seq = e3.int64();
                  break;
                case 4:
                  n3.member_data = u.proto_zim.StGroupMemberData.decode(e3, e3.uint32());
                  break;
                case 5:
                  n3.attributes = u.proto_zim.StGroupAttributes.decode(e3, e3.uint32());
                  break;
                case 6:
                  n3.group_list_seq = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.member_seq = +n3.member_seq.toString(), n3;
          }, Ee), e2.GroupCreateReq = (Le.encode = function(e3, t3) {
            if (t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "group_id") && t3.uint32(10).string(e3.group_id), Object.hasOwnProperty.call(e3, "group_name") && t3.uint32(18).string(e3.group_name), Object.hasOwnProperty.call(e3, "group_notice") && t3.uint32(26).string(e3.group_notice), e3.user_ids && e3.user_ids.length)
              for (let r3 = 0; r3 < e3.user_ids.length; ++r3)
                t3.uint32(34).string(e3.user_ids[r3]);
            if (e3.attributes && e3.attributes.length)
              for (let r3 = 0; r3 < e3.attributes.length; ++r3)
                u.proto_zim.StGroupAttribute.encode(e3.attributes[r3], t3.uint32(42).fork()).ldelim();
            return Object.hasOwnProperty.call(e3, "group_avatar") && t3.uint32(50).bytes(e3.group_avatar), t3;
          }, Le), e2.GroupCreateRsp = (je.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.GroupCreateRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.group_id = e3.string();
                  break;
                case 4:
                  n3.members.push(u.proto_zim.StGroupMember.decode(e3, e3.uint32()));
                  break;
                case 5:
                  n3.member_all_seq = e3.int64();
                  break;
                case 6:
                  n3.error_users.push(u.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                case 7:
                  n3.group_list_seq = e3.int64();
                  break;
                case 8:
                  n3.group_data_seq = e3.int64();
                  break;
                case 9:
                  n3.group_attribute_seq = e3.int64();
                  break;
                case 10:
                  n3.member_count = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.member_all_seq = +n3.member_all_seq.toString(), n3.group_data_seq = +n3.group_data_seq.toString(), n3.group_attribute_seq = +n3.group_attribute_seq.toString(), n3;
          }, je), e2.StGroupAttribute = (Ge.encode = function(e3, t3) {
            return "object" == typeof e3 && (e3 = new u.proto_zim.StGroupAttribute(e3)), t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "key") && t3.uint32(10).string(e3.key), Object.hasOwnProperty.call(e3, "value") && t3.uint32(18).string(e3.value), Object.hasOwnProperty.call(e3, "seq") && t3.uint32(24).int64(e3.seq), t3;
          }, Ge.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.StGroupAttribute();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.key = e3.string();
                  break;
                case 2:
                  n3.value = e3.string();
                  break;
                case 3:
                  n3.seq = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.seq = +n3.seq.toString(), n3;
          }, Ge), e2.StModifyGroupAttribute = (Ue.encode = function(e3, t3) {
            if (t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "action") && t3.uint32(8).int32(e3.action), e3.attributes && e3.attributes.length)
              for (let r3 = 0; r3 < e3.attributes.length; ++r3)
                u.proto_zim.StGroupAttribute.encode(e3.attributes[r3], t3.uint32(18).fork()).ldelim();
            return t3;
          }, Ue.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.StModifyGroupAttribute();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.action = e3.int32();
                  break;
                case 2:
                  n3.attributes.push(u.proto_zim.StGroupAttribute.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, Ue), e2.StGroupAttributes = (Be.encode = function(e3, t3) {
            if ("object" == typeof e3 && (e3 = new u.proto_zim.StGroupAttributes(e3)), t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "seq") && t3.uint32(8).int64(e3.seq), e3.attributes && e3.attributes.length)
              for (let r3 = 0; r3 < e3.attributes.length; ++r3)
                u.proto_zim.StGroupAttribute.encode(e3.attributes[r3], t3.uint32(18).fork()).ldelim();
            return t3;
          }, Be.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.StGroupAttributes();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.seq = e3.int64();
                  break;
                case 2:
                  n3.attributes.push(u.proto_zim.StGroupAttribute.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.seq = +n3.seq.toString(), n3;
          }, Be), e2.GroupDataRsp = (ze.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.GroupDataRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.group_name = e3.string();
                  break;
                case 4:
                  n3.group_notice = e3.string();
                  break;
                case 5:
                  n3.group_data_seq = e3.int64();
                  break;
                case 6:
                  n3.group_avatar = e3.bytes();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.group_data_seq = +n3.group_data_seq.toString(), n3;
          }, ze), e2.GroupModifyAttributeReq = (Ne.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "group_id") && t3.uint32(10).string(e3.group_id), Object.hasOwnProperty.call(e3, "attributes") && u.proto_zim.StModifyGroupAttribute.encode(e3.attributes, t3.uint32(18).fork()).ldelim(), t3;
          }, Ne), e2.GroupModifyAttributeRsp = (Fe.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.GroupModifyAttributeRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.attributes = u.proto_zim.StGroupAttributes.decode(e3, e3.uint32());
                  break;
                case 4:
                  n3.fail_keys.push(u.proto_zim.StGroupAttribute.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, Fe), e2.GroupGetAttributesReq = (Ke.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "group_id") && t3.uint32(10).string(e3.group_id), Object.hasOwnProperty.call(e3, "attributes") && u.proto_zim.StGroupAttributes.encode(e3.attributes, t3.uint32(18).fork()).ldelim(), t3;
          }, Ke), e2.GroupEnterRsp = (He.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.GroupEnterRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.group_name = e3.string();
                  break;
                case 4:
                  n3.properties = u.proto_zim.StGroupAttributes.decode(e3, e3.uint32());
                  break;
                case 5:
                  n3.member = u.proto_zim.StGroupMember.decode(e3, e3.uint32());
                  break;
                case 6:
                  n3.member_all_seq = e3.int64();
                  break;
                case 7:
                  n3.group_list_seq = e3.int64();
                  break;
                case 8:
                  n3.group_data_seq = e3.int64();
                  break;
                case 9:
                  n3.group_attribute_seq = e3.int64();
                  break;
                case 10:
                  n3.conv_msg_seq = e3.int64();
                  break;
                case 11:
                  n3.member_count = e3.uint32();
                  break;
                case 12:
                  n3.group_avatar = e3.bytes();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.member_all_seq = +n3.member_all_seq.toString(), n3.group_data_seq = +n3.group_data_seq.toString(), n3.group_attribute_seq = +n3.group_attribute_seq.toString(), n3.conv_msg_seq = +n3.conv_msg_seq.toString(), n3;
          }, He), e2.GroupInviteReq = (Qe.encode = function(e3, t3) {
            if (t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "group_id") && t3.uint32(10).string(e3.group_id), e3.user_ids && e3.user_ids.length)
              for (let r3 = 0; r3 < e3.user_ids.length; ++r3)
                t3.uint32(18).string(e3.user_ids[r3]);
            return t3;
          }, Qe), e2.GroupInviteRsp = (Ve.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.GroupInviteRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.member_all_seq = e3.int64();
                  break;
                case 4:
                  n3.members.push(u.proto_zim.StGroupMember.decode(e3, e3.uint32()));
                  break;
                case 5:
                  n3.error_users.push(u.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                case 6:
                  n3.group_data_seq = e3.int64();
                  break;
                case 7:
                  n3.group_attribute_seq = e3.int64();
                  break;
                case 8:
                  n3.member_count = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.member_all_seq = +n3.member_all_seq.toString(), n3.group_data_seq = +n3.group_data_seq.toString(), n3.group_attribute_seq = +n3.group_attribute_seq.toString(), n3;
          }, Ve), e2.GroupKickOutRsp = (Ze.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.GroupKickOutRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.member_all_seq = e3.int64();
                  break;
                case 4:
                  n3.error_users.push(u.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                case 5:
                  n3.member_count = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.member_all_seq = +n3.member_all_seq.toString(), n3;
          }, Ze), e2.GroupGetMembersReq = (Je.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "group_id") && t3.uint32(10).string(e3.group_id), Object.hasOwnProperty.call(e3, "cur_member_seq") && t3.uint32(16).int64(e3.cur_member_seq), Object.hasOwnProperty.call(e3, "count") && t3.uint32(24).uint32(e3.count), Object.hasOwnProperty.call(e3, "full_pull") && t3.uint32(32).int32(e3.full_pull), Object.hasOwnProperty.call(e3, "degree") && t3.uint32(40).uint32(e3.degree), t3;
          }, Je), e2.StGroupMemberChangeEvent = (We.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.StGroupMemberChangeEvent();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.group_id = e3.string();
                  break;
                case 2:
                  n3.member = u.proto_zim.StGroupMember.decode(e3, e3.uint32());
                  break;
                case 3:
                  n3.event_type = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, We), e2.GroupGetMembersRsp = (Ye.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.GroupGetMembersRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.member_all_seq = e3.int64();
                  break;
                case 4:
                  n3.change_list.push(u.proto_zim.StGroupMemberChangeEvent.decode(e3, e3.uint32()));
                  break;
                case 5:
                  n3.full_list = e3.int32();
                  break;
                case 6:
                  n3.cur_member_seq = e3.int64();
                  break;
                case 7:
                  n3.fetch_end = e3.int32();
                  break;
                case 8:
                  n3.member_count = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.member_all_seq = +n3.member_all_seq.toString(), n3.cur_member_seq = +n3.cur_member_seq.toString(), n3;
          }, Ye), e2.GetGroupMembersByMemberSeqRsp = (Xe.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.GetGroupMembersByMemberSeqRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.members.push(u.proto_zim.StGroupMember.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, Xe), e2.GroupMemberDataReq = ($e.encode = function(e3, t3) {
            if (t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "group_id") && t3.uint32(10).string(e3.group_id), Object.hasOwnProperty.call(e3, "user_id") && t3.uint32(18).string(e3.user_id), e3.attributes && e3.attributes.length)
              for (let r3 = 0; r3 < e3.attributes.length; ++r3)
                u.proto_zim.StGroupAttribute.encode(e3.attributes[r3], t3.uint32(26).fork()).ldelim();
            return t3;
          }, $e), e2.GroupMemberDataRsp = (et.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.GroupMemberDataRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.member = u.proto_zim.StGroupMember.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, et), e2.GroupSetMemberRoleReq = (tt2.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "group_id") && t3.uint32(10).string(e3.group_id), Object.hasOwnProperty.call(e3, "user_id") && t3.uint32(18).string(e3.user_id), Object.hasOwnProperty.call(e3, "role") && t3.uint32(24).int32(e3.role), t3;
          }, tt2), e2.GroupUpdate = (rt.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.GroupUpdate();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.type = e3.int32();
                  break;
                case 2:
                  n3.info = u.proto_zim.GroupInfo.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, rt), e2.GroupInfo = (nt.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.GroupInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.group_id = e3.string();
                  break;
                case 2:
                  n3.group_name = e3.string();
                  break;
                case 3:
                  n3.group_list_seq = e3.int64();
                  break;
                case 4:
                  n3.group_data_seq = e3.int64();
                  break;
                case 5:
                  n3.all_member_seq = e3.int64();
                  break;
                case 6:
                  n3.attribute_seq = e3.int64();
                  break;
                case 7:
                  n3.not_notify = e3.bool();
                  break;
                case 8:
                  n3.member_count = e3.uint32();
                  break;
                case 9:
                  n3.group_avatar = e3.bytes();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.group_data_seq = +n3.group_data_seq.toString(), n3.all_member_seq = +n3.all_member_seq.toString(), n3.attribute_seq = +n3.attribute_seq.toString(), n3;
          }, nt), e2.GroupInfosRsp = (ot.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.GroupInfosRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.group_infos.push(u.proto_zim.GroupUpdate.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n3.fail_keys.push(u.proto_zim.FailKey.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, ot), e2.GroupListRsp = (st.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.GroupListRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.cur_list_seq = e3.int64();
                  break;
                case 4:
                  n3.max_list_seq = e3.int64();
                  break;
                case 5:
                  n3.groups.push(u.proto_zim.GroupUpdate.decode(e3, e3.uint32()));
                  break;
                case 6:
                  n3.full_list = e3.int32();
                  break;
                case 7:
                  n3.fetch_end = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, st), e2.GroupMuteReq = (it.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "group_id") && t3.uint32(10).string(e3.group_id), Object.hasOwnProperty.call(e3, "enable") && t3.uint32(16).bool(e3.enable), t3;
          }, it), e2.GroupOperator = (at.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.GroupOperator();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.user_id = e3.string();
                  break;
                case 2:
                  n3.user_name = e3.bytes();
                  break;
                case 3:
                  n3.group_nick_name = e3.string();
                  break;
                case 4:
                  n3.role = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, at), e2.PushCreateGroup = (ut.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushCreateGroup();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.group_id = e3.string();
                  break;
                case 2:
                  n3.group_name = e3.string();
                  break;
                case 3:
                  n3.members.push(u.proto_zim.StGroupMember.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n3.member_all_seq = e3.int64();
                  break;
                case 5:
                  n3.attributes = u.proto_zim.StGroupAttributes.decode(e3, e3.uint32());
                  break;
                case 6:
                  n3.op_user = u.proto_zim.GroupOperator.decode(e3, e3.uint32());
                  break;
                case 7:
                  n3.member_count = e3.uint32();
                  break;
                case 8:
                  n3.group_avatar = e3.bytes();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.member_all_seq = +n3.member_all_seq.toString(), n3;
          }, ut), e2.PushModifyGroupAttribute = (ct.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushModifyGroupAttribute();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.group_id = e3.string();
                  break;
                case 2:
                  n3.attributes = u.proto_zim.StGroupAttributes.decode(e3, e3.uint32());
                  break;
                case 3:
                  n3.op_user = u.proto_zim.GroupOperator.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, ct), e2.PushGroupMemberChange = (lt.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushGroupMemberChange();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.group_id = e3.string();
                  break;
                case 2:
                  n3.member_all_seq = e3.int64();
                  break;
                case 3:
                  n3.members.push(u.proto_zim.StGroupMember.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n3.change_type = e3.int32();
                  break;
                case 5:
                  n3.op_user = u.proto_zim.GroupOperator.decode(e3, e3.uint32());
                  break;
                case 6:
                  n3.new_owner_id = e3.string();
                  break;
                case 7:
                  n3.member_count = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.member_all_seq = +n3.member_all_seq.toString(), n3;
          }, lt), e2.PushModifyGroupData = (dt.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushModifyGroupData();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.group_id = e3.string();
                  break;
                case 2:
                  n3.op_user = u.proto_zim.GroupOperator.decode(e3, e3.uint32());
                  break;
                case 3:
                  n3.group_data_seq = e3.int64();
                  break;
                case 4:
                  n3.group_notice = e3.string();
                  break;
                case 5:
                  n3.group_name = e3.string();
                  break;
                case 7:
                  n3.group_avatar = e3.bytes();
                  break;
                case 6:
                  n3.modify_type = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.group_data_seq = +n3.group_data_seq.toString(), n3;
          }, dt), e2.PushGroupOwnerTransfer = (pt.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushGroupOwnerTransfer();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.group_id = e3.string();
                  break;
                case 2:
                  n3.user_id = e3.string();
                  break;
                case 3:
                  n3.op_user = u.proto_zim.GroupOperator.decode(e3, e3.uint32());
                  break;
                case 4:
                  n3.member_all_seq = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.member_all_seq = +n3.member_all_seq.toString(), n3;
          }, pt), e2.PushGroupInvite = (ht.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushGroupInvite();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.group_id = e3.string();
                  break;
                case 2:
                  n3.group_name = e3.string();
                  break;
                case 3:
                  n3.group_notice = e3.string();
                  break;
                case 4:
                  n3.op_user = u.proto_zim.GroupOperator.decode(e3, e3.uint32());
                  break;
                case 5:
                  n3.conv_msg_seq = e3.int64();
                  break;
                case 6:
                  n3.member_count = e3.uint32();
                  break;
                case 7:
                  n3.group_avatar = e3.bytes();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.conv_msg_seq = +n3.conv_msg_seq.toString(), n3;
          }, ht), e2.C2CMsgReq = (gt.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "conv_id") && t3.uint32(10).string(e3.conv_id), Object.hasOwnProperty.call(e3, "msg_info") && u.proto_zim.StConvMsgInfo.encode(e3.msg_info, t3.uint32(18).fork()).ldelim(), Object.hasOwnProperty.call(e3, "fetch_peer_user_info") && t3.uint32(24).int32(e3.fetch_peer_user_info), t3;
          }, gt), e2.C2CMsgRsp = (ft.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.C2CMsgRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.msg_svr_info = u.proto_zim.StMsgSvrInfo.decode(e3, e3.uint32());
                  break;
                case 4:
                  n3.peer_user_name = e3.bytes();
                  break;
                case 5:
                  n3.send_count_after_read = e3.int64();
                  break;
                case 6:
                  n3.conv_disable = e3.bool();
                  break;
                case 7:
                  n3.peer_user_avatar = e3.bytes();
                  break;
                case 8:
                  n3.msg_status = e3.int32();
                  break;
                case 9:
                  n3.audit_info = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.send_count_after_read = +n3.send_count_after_read.toString(), n3;
          }, ft), e2.C2CCommandReq = (mt.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "conv_id") && t3.uint32(10).string(e3.conv_id), Object.hasOwnProperty.call(e3, "command_msg_info") && u.proto_zim.StCommandMsgInfo.encode(e3.command_msg_info, t3.uint32(18).fork()).ldelim(), t3;
          }, mt), e2.C2CCommandReqRsp = (_t.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.C2CCommandReqRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.command_svr_info = u.proto_zim.StCommandSvrInfo.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, _t), e2.RoomMsgReq = (vt.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "conv_id") && t3.uint32(10).string(e3.conv_id), Object.hasOwnProperty.call(e3, "room_session_id") && t3.uint32(16).int64(e3.room_session_id), Object.hasOwnProperty.call(e3, "room_user_session_id") && t3.uint32(24).int64(e3.room_user_session_id), Object.hasOwnProperty.call(e3, "msg_info") && u.proto_zim.StConvMsgInfo.encode(e3.msg_info, t3.uint32(34).fork()).ldelim(), Object.hasOwnProperty.call(e3, "sub_room_id") && t3.uint32(402).string(e3.sub_room_id), t3;
          }, vt), e2.RoomMsgRsp = (bt.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.RoomMsgRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.msg_id = e3.int64();
                  break;
                case 4:
                  n3.msg_svr_info = u.proto_zim.StMsgSvrInfo.decode(e3, e3.uint32());
                  break;
                case 5:
                  n3.audit_info = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.msg_id = n3.msg_id.toString(), n3;
          }, bt), e2.RoomMsglistReq = (yt.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "room_id") && t3.uint32(10).string(e3.room_id), Object.hasOwnProperty.call(e3, "room_session_id") && t3.uint32(16).int64(e3.room_session_id), Object.hasOwnProperty.call(e3, "room_user_session_id") && t3.uint32(24).int64(e3.room_user_session_id), Object.hasOwnProperty.call(e3, "conv_msg_seq") && t3.uint32(32).int64(e3.conv_msg_seq), Object.hasOwnProperty.call(e3, "count") && t3.uint32(40).int32(e3.count), Object.hasOwnProperty.call(e3, "sort_type") && t3.uint32(48).int32(e3.sort_type), Object.hasOwnProperty.call(e3, "how") && t3.uint32(64).int32(e3.how), Object.hasOwnProperty.call(e3, "degree") && t3.uint32(72).uint32(e3.degree), Object.hasOwnProperty.call(e3, "sub_room_id") && t3.uint32(402).string(e3.sub_room_id), t3;
          }, yt), e2.RoomMsglistRsp = (Mt.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.RoomMsglistRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.next_conv_msg_seq = e3.int64();
                  break;
                case 4:
                  n3.max_conv_msg_seq = e3.int64();
                  break;
                case 6:
                  n3.msgs.push(u.proto_zim.FetchMsgInfo.decode(e3, e3.uint32()));
                  break;
                case 7:
                  n3.fetch_end = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.next_conv_msg_seq = +n3.next_conv_msg_seq.toString(), n3.max_conv_msg_seq = +n3.max_conv_msg_seq.toString(), n3;
          }, Mt), e2.StMsgInfo = (It.encode = function(e3, t3) {
            return "object" == typeof e3 && (e3 = new u.proto_zim.StMsgInfo(e3)), t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "msg_type") && t3.uint32(8).int32(e3.msg_type), Object.hasOwnProperty.call(e3, "msg") && t3.uint32(18).bytes(e3.msg), Object.hasOwnProperty.call(e3, "priority_type") && t3.uint32(24).int32(e3.priority_type), Object.hasOwnProperty.call(e3, "msg_id") && t3.uint32(32).int64(e3.msg_id), Object.hasOwnProperty.call(e3, "sender_user_id") && t3.uint32(42).string(e3.sender_user_id), Object.hasOwnProperty.call(e3, "msg_time") && t3.uint32(48).int64(e3.msg_time), Object.hasOwnProperty.call(e3, "payload") && t3.uint32(58).bytes(e3.payload), t3;
          }, It.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.StMsgInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.msg_type = e3.int32();
                  break;
                case 2:
                  n3.msg = e3.bytes();
                  break;
                case 3:
                  n3.priority_type = e3.int32();
                  break;
                case 4:
                  n3.msg_id = e3.int64();
                  break;
                case 5:
                  n3.sender_user_id = e3.string();
                  break;
                case 6:
                  n3.msg_time = e3.int64();
                  break;
                case 7:
                  n3.payload = e3.bytes();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.msg_id = n3.msg_id ? n3.msg_id.toString() : "", n3.msg_time = n3.msg_time ? +n3.msg_time.toString() : 0, n3;
          }, It), e2.RoomCommandMsgReq = (kt.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "conv_id") && t3.uint32(10).string(e3.conv_id), Object.hasOwnProperty.call(e3, "room_session_id") && t3.uint32(16).int64(e3.room_session_id), Object.hasOwnProperty.call(e3, "room_user_session_id") && t3.uint32(24).int64(e3.room_user_session_id), Object.hasOwnProperty.call(e3, "command_msg_info") && u.proto_zim.StMsgInfo.encode(e3.command_msg_info, t3.uint32(34).fork()).ldelim(), Object.hasOwnProperty.call(e3, "sub_room_id") && t3.uint32(402).string(e3.sub_room_id), t3;
          }, kt), e2.StReaction = (wt.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.StReaction();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.reaction_key = e3.string();
                  break;
                case 2:
                  n3.cur_reaction_seq = e3.int64();
                  break;
                case 3:
                  n3.user_total_count = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.cur_reaction_seq = +n3.cur_reaction_seq.toString(), n3;
          }, wt), e2.SetReactionReq = (Ct.encode = function(e3, t3) {
            if (t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "conv_id") && t3.uint32(10).string(e3.conv_id), Object.hasOwnProperty.call(e3, "conv_msg_seq") && t3.uint32(16).int64(e3.conv_msg_seq), Object.hasOwnProperty.call(e3, "reaction_into_map"))
              for (let r3 = Object.keys(e3.reaction_into_map), n3 = 0; n3 < r3.length; ++n3)
                t3.uint32(26).fork().uint32(10).string(r3[n3]), u.proto_zim.C2CReadReceiptReq.encode(e3.reaction_into_map[r3[n3]], t3.uint32(18).fork()).ldelim().ldelim();
            return Object.hasOwnProperty.call(e3, "operate_type") && t3.uint32(32).int32(e3.operate_type), t3;
          }, Ct), e2.SetReactionRsp = (St.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.SetReactionRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.succ_list.push(u.proto_zim.StReaction.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n3.error_list.push(u.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, St), e2.DelReactionReq = (Dt.encode = function(e3, t3) {
            if (t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "conv_id") && t3.uint32(10).string(e3.conv_id), Object.hasOwnProperty.call(e3, "conv_msg_seq") && t3.uint32(16).int64(e3.conv_msg_seq), e3.reaction_key.length)
              for (let r3 = 0; r3 < e3.reaction_key.length; ++r3)
                t3.uint32(26).string(e3.reaction_key[r3]);
            return t3;
          }, Dt), e2.ReactionListReq = (qt.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "conv_id") && t3.uint32(10).string(e3.conv_id), Object.hasOwnProperty.call(e3, "degree") && t3.uint32(16).uint32(e3.degree), Object.hasOwnProperty.call(e3, "conv_msg_seq") && t3.uint32(24).int64(e3.conv_msg_seq), Object.hasOwnProperty.call(e3, "start_reaction_seq") && t3.uint32(32).int64(e3.start_reaction_seq), t3;
          }, qt), e2.ReactionListRsp = (Rt.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.ReactionListRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.fetch_end = e3.uint32();
                  break;
                case 4:
                  n3.conv_msg_seq = e3.int64();
                  break;
                case 5:
                  n3.msg_next_reaction_seq = e3.int64();
                  break;
                case 6:
                  n3.msg_max_reaction_seq = e3.int64();
                  break;
                case 7:
                  n3.reaction_list.push(u.proto_zim.StReactionBrief.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.conv_msg_seq = +n3.conv_msg_seq.toString(), n3.msg_next_reaction_seq = +n3.msg_next_reaction_seq.toString(), n3.msg_max_reaction_seq = +n3.msg_max_reaction_seq.toString(), n3;
          }, Rt), e2.ReactionInfoReq = (Ot.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "conv_id") && t3.uint32(10).string(e3.conv_id), Object.hasOwnProperty.call(e3, "conv_msg_seq") && t3.uint32(16).int64(e3.conv_msg_seq), Object.hasOwnProperty.call(e3, "reaction_key") && t3.uint32(26).string(e3.reaction_key), Object.hasOwnProperty.call(e3, "max_reaction_seq") && t3.uint32(32).int64(e3.max_reaction_seq), Object.hasOwnProperty.call(e3, "is_detail") && t3.uint32(40).bool(e3.is_detail), t3;
          }, Ot), e2.ReactionInfoRsp = (At.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.ReactionInfoRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.max_reaction_seq = e3.int64();
                  break;
                case 4:
                  n3.total_user_count = e3.uint32();
                  break;
                case 5:
                  n3.user_reaction.push(u.proto_zim.StGroupAttribute.decode(e3, e3.uint32()));
                  break;
                case 6:
                  n3.include_self = e3.bool();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.max_reaction_seq = +n3.max_reaction_seq.toString(), n3.user_reaction = n3.user_reaction.map((e4) => ({ userID: e4.key, seq: +e4.seq.toString() })), n3.user_reaction.sort((e4, t4) => e4.seq - t4.seq), n3;
          }, At), e2.PushMsgReaction = (xt.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushMsgReaction();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.conv_id = e3.string();
                  break;
                case 2:
                  n3.conv_type = e3.int32();
                  break;
                case 3:
                  n3.msg_reactions.push(u.proto_zim.StPushMsgReaction.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, xt), e2.StPushMsgReaction = (Pt.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.StPushMsgReaction();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.conv_msg_seq = e3.int64();
                  break;
                case 2:
                  n3.start_reaction_seq = e3.int64();
                  break;
                case 3:
                  n3.end_reaction_seq = e3.int64();
                  break;
                case 4:
                  n3.reaction_infos.push(u.proto_zim.StReactionBrief.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.conv_msg_seq = +n3.conv_msg_seq.toString(), n3.start_reaction_seq = +n3.start_reaction_seq.toString(), n3.end_reaction_seq = +n3.end_reaction_seq.toString(), n3;
          }, Pt), e2.GroupMsgRsp = (Tt.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.GroupMsgRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.msg_svr_info = u.proto_zim.StMsgSvrInfo.decode(e3, e3.uint32());
                  break;
                case 4:
                  n3.send_count_after_read = e3.int64();
                  break;
                case 5:
                  n3.msg_status = e3.int32();
                  break;
                case 6:
                  n3.receipt_seq = e3.int64();
                  break;
                case 7:
                  n3.unread_count = e3.sint32();
                  break;
                case 8:
                  n3.audit_info = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.send_count_after_read = +n3.send_count_after_read.toString(), n3;
          }, Tt), e2.FetchGroupMsgList = (Et.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "group_id") && t3.uint32(10).string(e3.group_id), Object.hasOwnProperty.call(e3, "conv_msg_seq") && t3.uint32(16).int64(e3.conv_msg_seq), Object.hasOwnProperty.call(e3, "count") && t3.uint32(24).int32(e3.count), Object.hasOwnProperty.call(e3, "sort_type") && t3.uint32(32).int32(e3.sort_type), Object.hasOwnProperty.call(e3, "max_conv_msg_seq") && t3.uint32(40).int64(e3.max_conv_msg_seq), Object.hasOwnProperty.call(e3, "how") && t3.uint32(48).int32(e3.how), Object.hasOwnProperty.call(e3, "degree") && t3.uint32(56).uint32(e3.degree), t3;
          }, Et), e2.FetchGroupMsgListRsp = (Lt.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.FetchGroupMsgListRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.max_conv_msg_seq = e3.int64();
                  break;
                case 4:
                  n3.next_conv_msg_seq = e3.int64();
                  break;
                case 5:
                  n3.msgs.push(u.proto_zim.FetchMsgInfo.decode(e3, e3.uint32()));
                  break;
                case 6:
                  n3.fetch_end = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.max_conv_msg_seq = +n3.max_conv_msg_seq.toString(), n3.next_conv_msg_seq = +n3.next_conv_msg_seq.toString(), n3;
          }, Lt), e2.PushPinnedConvChange = (jt.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushPinnedConvChange();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.conv_id = e3.string();
                  break;
                case 2:
                  n3.conv_type = e3.int32();
                  break;
                case 3:
                  n3.conv_pinned_list_seq = e3.int64();
                  break;
                case 4:
                  n3.pinned_type = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.conv_pinned_list_seq = +n3.conv_pinned_list_seq.toString(), n3;
          }, jt), e2.PushEnterGroup = (Gt.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushEnterGroup();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.group_id = e3.string();
                  break;
                case 2:
                  n3.group_name = e3.string();
                  break;
                case 3:
                  n3.group_notice = e3.string();
                  break;
                case 4:
                  n3.conv_msg_seq = e3.int64();
                  break;
                case 5:
                  n3.member_count = e3.uint32();
                  break;
                case 6:
                  n3.group_avatar = e3.bytes();
                  break;
                case 7:
                  n3.group_list_seq = e3.int64();
                  break;
                case 8:
                  n3.user_id = e3.string();
                  break;
                case 9:
                  n3.member = u.proto_zim.StGroupMember.decode(e3, e3.uint32());
                  break;
                case 10:
                  n3.properties = u.proto_zim.StGroupAttributes.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.conv_msg_seq = +n3.conv_msg_seq.toString(), n3;
          }, Gt), e2.PushDelConvMsg = (Ut.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushDelConvMsg();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.conv_id = e3.string();
                  break;
                case 2:
                  n3.conv_type = e3.int32();
                  break;
                case 3:
                  n3.is_del_all = e3.uint32();
                  break;
                case 4:
                  if (2 == (7 & o2))
                    for (var i2 = e3.uint32() + e3.pos; e3.pos < i2; )
                      n3.del_conv_msg_seqs.push(+e3.int64().toString());
                  else
                    n3.del_conv_msg_seqs.push(+e3.int64().toString());
                  break;
                case 5:
                  n3.max_del_conv_msg_seq = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.max_del_conv_msg_seq = +n3.max_del_conv_msg_seq.toString(), n3;
          }, Ut), e2.GetMsgStateListReq = (Bt.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "conv_id") && t3.uint32(10).string(e3.conv_id), Object.hasOwnProperty.call(e3, "state_seq") && t3.uint32(16).int64(e3.state_seq), Object.hasOwnProperty.call(e3, "count") && t3.uint32(24).sint32(e3.count), Object.hasOwnProperty.call(e3, "degree") && t3.uint32(32).uint32(e3.degree), Object.hasOwnProperty.call(e3, "max_msg_seq") && t3.uint32(40).int64(e3.max_msg_seq), Object.hasOwnProperty.call(e3, "min_msg_seq") && t3.uint32(48).int64(e3.min_msg_seq), t3;
          }, Bt), e2.GetMsgStateListRsp = (zt.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.GetMsgStateListRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.state_list.push(u.proto_zim.StMsgStateContent.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n3.next_state_seq = e3.int64();
                  break;
                case 5:
                  n3.fetch_end = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, zt), e2.StMsgStateContent = (Nt.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.StMsgStateContent();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.conv_msg_seq = e3.int64();
                  break;
                case 3:
                  n3.state = e3.int32();
                  break;
                case 4:
                  n3.state_seq = e3.int64();
                  break;
                case 5:
                  n3.conv_id = e3.string();
                  break;
                case 6:
                  n3.conv_type = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, Nt), e2.PushC2CCommand = (Ft.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushC2CCommand();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              o2 >>> 3 == 1 ? n3.recv_command_info = u.proto_zim.StRecvCommandInfo.decode(e3, e3.uint32()) : e3.skipType(7 & o2);
            }
            return n3;
          }, Ft), e2.PushRoomMsg = (Kt.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushRoomMsg();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.room_id = e3.string();
                  break;
                case 2:
                  n3.room_session_id = e3.int64();
                  break;
                case 3:
                  n3.recv_msg_info = u.proto_zim.StRecvMsgInfo.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, Kt), e2.PushRoomCommand = (Ht.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushRoomCommand();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.room_id = e3.string();
                  break;
                case 2:
                  n3.room_session_id = e3.int64();
                  break;
                case 3:
                  n3.msg_info = u.proto_zim.StMsgInfo.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, Ht), e2.PushGroupCommand = (Qt.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushGroupCommand();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              o2 >>> 3 == 2 ? n3.recv_command_info = u.proto_zim.StRecvCommandInfo.decode(e3, e3.uint32()) : e3.skipType(7 & o2);
            }
            return n3;
          }, Qt), e2.PushGroupMsg = (Vt.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushGroupMsg();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.recv_msg_info = u.proto_zim.StRecvMsgInfo.decode(e3, e3.uint32());
                  break;
                case 2:
                  n3.msg_status = e3.int32();
                  break;
                case 3:
                  n3.send_count_after_read = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.send_count_after_read = +n3.send_count_after_read.toString(), n3;
          }, Vt), e2.RoomCreateReq = (Zt.encode = function(e3, t3) {
            if (t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "room_id") && t3.uint32(10).string(e3.room_id), Object.hasOwnProperty.call(e3, "room_name") && t3.uint32(18).bytes(e3.room_name), e3.attributes && e3.attributes.length)
              for (let r3 = 0; r3 < e3.attributes.length; ++r3)
                u.proto_zim.StRoomAttribute.encode(e3.attributes[r3], t3.uint32(26).fork()).ldelim();
            return Object.hasOwnProperty.call(e3, "destroy_delay") && t3.uint32(32).uint32(e3.destroy_delay), t3;
          }, Zt), e2.RoomCreateRsp = (Jt.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.RoomCreateRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.room_session_id = e3.int64();
                  break;
                case 4:
                  n3.room_user_session_id = e3.int64();
                  break;
                case 5:
                  n3.room_info_interval = e3.uint32();
                  break;
                case 6:
                  n3.userlist_enable = e3.uint32();
                  break;
                case 7:
                  n3.userlist_merge_timeout = e3.uint32();
                  break;
                case 8:
                  n3.userlist_interval = e3.uint32();
                  break;
                case 9:
                  n3.attributes = u.proto_zim.StRoomAttributes.decode(e3, e3.uint32());
                  break;
                case 10:
                  n3.attributes_pull_interval = e3.uint32();
                  break;
                case 11:
                  n3.attributes_merge_timeout = e3.uint32();
                  break;
                case 13:
                  n3.conv_msg_seq = e3.int64();
                  break;
                case 14:
                  n3.enabled_offline_msg = e3.uint32();
                  break;
                case 15:
                  n3.msg_merge_timeout = e3.uint32();
                  break;
                case 16:
                  n3.msg_pull_interval = e3.uint32();
                  break;
                case 17:
                  n3.destroy_delay = e3.uint32();
                  break;
                case 18:
                  n3.sub_room_id = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.conv_msg_seq = +n3.conv_msg_seq.toString(), n3;
          }, Jt), e2.RoomEnterReq = (Wt.encode = function(e3, t3) {
            if (t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "room_id") && t3.uint32(10).string(e3.room_id), Object.hasOwnProperty.call(e3, "room_user_session_id") && t3.uint32(16).int64(e3.room_user_session_id), Object.hasOwnProperty.call(e3, "room_name") && t3.uint32(26).bytes(e3.room_name), e3.attributes && e3.attributes.length)
              for (let r3 = 0; r3 < e3.attributes.length; ++r3)
                u.proto_zim.StRoomAttribute.encode(e3.attributes[r3], t3.uint32(34).fork()).ldelim();
            return Object.hasOwnProperty.call(e3, "destroy_delay") && t3.uint32(40).uint32(e3.destroy_delay), Object.hasOwnProperty.call(e3, "create_if_not_exist") && t3.uint32(48).bool(e3.create_if_not_exist), t3;
          }, Wt), e2.RoomEnterRsp = (Yt.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.RoomEnterRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.room_name = e3.bytes();
                  break;
                case 4:
                  n3.room_session_id = e3.int64();
                  break;
                case 5:
                  n3.room_user_session_id = e3.int64();
                  break;
                case 6:
                  n3.userlist_seq = e3.uint32();
                  break;
                case 7:
                  n3.user_count = e3.uint32();
                  break;
                case 8:
                  n3.room_info_interval = e3.uint32();
                  break;
                case 9:
                  n3.userlist_enable = e3.uint32();
                  break;
                case 10:
                  n3.userlist_merge_timeout = e3.uint32();
                  break;
                case 11:
                  n3.userlist_interval = e3.uint32();
                  break;
                case 12:
                  n3.attribute_seq = e3.uint32();
                  break;
                case 13:
                  n3.attributes_pull_interval = e3.uint32();
                  break;
                case 14:
                  n3.attributes_merge_timeout = e3.uint32();
                  break;
                case 15:
                  n3.sub_room_id = e3.string();
                  break;
                case 17:
                  n3.conv_msg_seq = e3.int64();
                  break;
                case 18:
                  n3.enabled_offline_msg = e3.uint32();
                  break;
                case 19:
                  n3.msg_merge_timeout = e3.uint32();
                  break;
                case 20:
                  n3.msg_pull_interval = e3.uint32();
                  break;
                case 21:
                  n3.destroy_delay = e3.uint32();
                  break;
                case 22:
                  n3.attributes = u.proto_zim.StRoomAttributes.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.conv_msg_seq = +n3.conv_msg_seq.toString(), n3;
          }, Yt), e2.QueryRoomUserInfosReq = (Xt.encode = function(e3, t3) {
            if (t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "room_id") && t3.uint32(10).string(e3.room_id), Object.hasOwnProperty.call(e3, "room_session_id") && t3.uint32(16).int64(e3.room_session_id), Object.hasOwnProperty.call(e3, "room_user_session_id") && t3.uint32(24).int64(e3.room_user_session_id), e3.user_ids && e3.user_ids.length)
              for (let r3 = 0; r3 < e3.user_ids.length; ++r3)
                t3.uint32(34).string(e3.user_ids[r3]);
            return Object.hasOwnProperty.call(e3, "sub_room_id") && t3.uint32(402).string(e3.sub_room_id), t3;
          }, Xt), e2.RoomUserlistReq = ($t.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "room_id") && t3.uint32(10).string(e3.room_id), Object.hasOwnProperty.call(e3, "room_session_id") && t3.uint32(16).int64(e3.room_session_id), Object.hasOwnProperty.call(e3, "pos_flag") && t3.uint32(26).string(e3.pos_flag), Object.hasOwnProperty.call(e3, "count") && t3.uint32(32).int32(e3.count), Object.hasOwnProperty.call(e3, "mode") && t3.uint32(40).int32(e3.mode), Object.hasOwnProperty.call(e3, "expect_seq") && t3.uint32(48).uint32(e3.expect_seq), Object.hasOwnProperty.call(e3, "sub_room_id") && t3.uint32(402).string(e3.sub_room_id), t3;
          }, $t), e2.RoomUserlistRsp = (er.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.RoomUserlistRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.pos_flag = e3.string();
                  break;
                case 4:
                  n3.userlist_seq = e3.uint32();
                  break;
                case 5:
                  n3.user_count = e3.uint32();
                  break;
                case 6:
                  n3.users.push(u.proto_zim.StUserInfo.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, er), e2.StUserInfo = (tr.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "user_id") && t3.uint32(10).string(e3.user_id), Object.hasOwnProperty.call(e3, "user_name") && t3.uint32(18).bytes(e3.user_name), Object.hasOwnProperty.call(e3, "online_state") && t3.uint32(24).int32(e3.online_state), Object.hasOwnProperty.call(e3, "extra") && t3.uint32(34).bytes(e3.extra), Object.hasOwnProperty.call(e3, "avatar") && t3.uint32(42).bytes(e3.avatar), t3;
          }, tr.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.StUserInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.user_id = e3.string();
                  break;
                case 2:
                  n3.user_name = e3.bytes();
                  break;
                case 3:
                  n3.online_state = e3.int32();
                  break;
                case 4:
                  n3.extra = e3.bytes();
                  break;
                case 5:
                  n3.avatar = e3.bytes();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, tr), e2.ErrorUser = (rr.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "user_id") && t3.uint32(10).string(e3.user_id), Object.hasOwnProperty.call(e3, "sub_code") && t3.uint32(16).uint32(e3.sub_code), t3;
          }, rr.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.ErrorUser();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.user_id = e3.string();
                  break;
                case 2:
                  n3.sub_code = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, rr), e2.RoomInfoRsp = (nr.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.RoomInfoRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.userlist_seq = e3.uint32();
                  break;
                case 4:
                  n3.user_count = e3.uint32();
                  break;
                case 5:
                  n3.room_info_interval = e3.uint32();
                  break;
                case 6:
                  n3.attribute_seq = e3.uint32();
                  break;
                case 7:
                  n3.max_conv_msg_seq = e3.int64();
                  break;
                case 9:
                  n3.ulist_to = e3.uint32();
                  break;
                case 10:
                  n3.ulist_itvl = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.max_conv_msg_seq = +n3.max_conv_msg_seq.toString(), n3;
          }, nr), e2.StRoomAttribute = (or.encode = function(e3, t3) {
            return "object" == typeof e3 && (e3 = new u.proto_zim.StRoomAttribute(e3)), t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "key") && t3.uint32(10).string(e3.key), Object.hasOwnProperty.call(e3, "value") && t3.uint32(18).string(e3.value), Object.hasOwnProperty.call(e3, "seq") && t3.uint32(24).uint32(e3.seq), Object.hasOwnProperty.call(e3, "auto_delete") && t3.uint32(32).int32(e3.auto_delete), t3;
          }, or.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.StRoomAttribute();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.key = e3.string();
                  break;
                case 2:
                  n3.value = e3.string();
                  break;
                case 3:
                  n3.seq = e3.uint32();
                  break;
                case 4:
                  n3.auto_delete = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, or), e2.StModifyRoomAttribute = (sr.encode = function(e3, t3) {
            return "object" == typeof e3 && (e3 = new u.proto_zim.StModifyRoomAttribute(e3)), t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "action") && t3.uint32(8).int32(e3.action), Object.hasOwnProperty.call(e3, "attribute") && u.proto_zim.StRoomAttribute.encode(e3.attribute, t3.uint32(18).fork()).ldelim(), t3;
          }, sr), e2.StRoomAttributes = (ir.encode = function(e3, t3) {
            if ("object" == typeof e3 && (e3 = new u.proto_zim.StRoomAttributes(e3)), t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "attribute_seq") && t3.uint32(8).uint32(e3.attribute_seq), e3.attributes && e3.attributes.length)
              for (let r3 = 0; r3 < e3.attributes.length; ++r3)
                u.proto_zim.StRoomAttribute.encode(e3.attributes[r3], t3.uint32(18).fork()).ldelim();
            return t3;
          }, ir.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.StRoomAttributes();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.attribute_seq = e3.uint32();
                  break;
                case 2:
                  n3.attributes.push(u.proto_zim.StRoomAttribute.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, ir), e2.ModifyRoomAttributesReq = (ar.encode = function(e3, t3) {
            if (t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "room_id") && t3.uint32(10).string(e3.room_id), Object.hasOwnProperty.call(e3, "room_session_id") && t3.uint32(16).int64(e3.room_session_id), Object.hasOwnProperty.call(e3, "force_modify") && t3.uint32(24).int32(e3.force_modify), Object.hasOwnProperty.call(e3, "set_member") && t3.uint32(32).int32(e3.set_member), Object.hasOwnProperty.call(e3, "attribute_seq") && t3.uint32(40).uint32(e3.attribute_seq), Object.hasOwnProperty.call(e3, "op_fail_fast") && t3.uint32(48).uint32(e3.op_fail_fast), e3.attributes && e3.attributes.length)
              for (let r3 = 0; r3 < e3.attributes.length; ++r3)
                u.proto_zim.StModifyRoomAttribute.encode(e3.attributes[r3], t3.uint32(58).fork()).ldelim();
            return Object.hasOwnProperty.call(e3, "sub_room_id") && t3.uint32(402).string(e3.sub_room_id), t3;
          }, ar), e2.ErrList = (ur.encode = function(e3, t3) {
            return "object" == typeof e3 && (e3 = new u.proto_zim.ErrList(e3)), t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "code") && t3.uint32(8).uint32(e3.code), Object.hasOwnProperty.call(e3, "key") && t3.uint32(18).string(e3.key), Object.hasOwnProperty.call(e3, "seq") && t3.uint32(24).uint32(e3.seq), t3;
          }, ur.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.ErrList();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.key = e3.string();
                  break;
                case 3:
                  n3.seq = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, ur), e2.ModifyRoomAttributesRsp = (cr.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.ModifyRoomAttributesRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.attributes = u.proto_zim.StRoomAttributes.decode(e3, e3.uint32());
                  break;
                case 4:
                  n3.err_list.push(u.proto_zim.ErrList.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, cr), e2.GetRoomAttributesReq = (lr.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "room_id") && t3.uint32(10).string(e3.room_id), Object.hasOwnProperty.call(e3, "room_session_id") && t3.uint32(16).int64(e3.room_session_id), Object.hasOwnProperty.call(e3, "attributes") && u.proto_zim.StRoomAttributes.encode(e3.attributes, t3.uint32(26).fork()).ldelim(), Object.hasOwnProperty.call(e3, "sub_room_id") && t3.uint32(402).string(e3.sub_room_id), t3;
          }, lr), e2.ModifyRoomUserAttributesReq = (dr.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "room_id") && t3.uint32(10).string(e3.room_id), Object.hasOwnProperty.call(e3, "room_session_id") && t3.uint32(16).int64(e3.room_session_id), Object.hasOwnProperty.call(e3, "room_user_session_id") && t3.uint32(24).int64(e3.room_user_session_id), Object.hasOwnProperty.call(e3, "force_modify") && t3.uint32(32).int32(e3.force_modify), Object.hasOwnProperty.call(e3, "op_fail_fast") && t3.uint32(40).uint32(e3.op_fail_fast), Object.hasOwnProperty.call(e3, "attributes") && u.proto_zim.StModifyRoomUserAttributes.encode(e3.attributes, t3.uint32(50).fork()).ldelim(), Object.hasOwnProperty.call(e3, "auto_save") && t3.uint32(56).int32(e3.auto_save), Object.hasOwnProperty.call(e3, "sub_room_id") && t3.uint32(402).string(e3.sub_room_id), t3;
          }, dr), e2.ModifyRoomUserAttributesRsp = (pr.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.ModifyRoomUserAttributesRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.user_attributes.push(u.proto_zim.StModifyRoomUserAttributeRsp.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n3.user_err_list.push(u.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, pr), e2.StModifyRoomUserAttributes = (hr.encode = function(e3, t3) {
            if ("object" == typeof e3 && (e3 = new u.proto_zim.StModifyRoomUserAttributes(e3)), t3 = t3 || i.create(), e3.user_ids && e3.user_ids.length)
              for (let r3 = 0; r3 < e3.user_ids.length; ++r3)
                t3.uint32(10).string(e3.user_ids[r3]);
            if (e3.modify_attribute && e3.modify_attribute.length)
              for (let r3 = 0; r3 < e3.modify_attribute.length; ++r3)
                u.proto_zim.StModifyRoomAttribute.encode(e3.modify_attribute[r3], t3.uint32(18).fork()).ldelim();
            return t3;
          }, hr), e2.StModifyRoomUserAttributeRsp = (gr.encode = function(e3, t3) {
            if ("object" == typeof e3 && (e3 = new u.proto_zim.StModifyRoomUserAttributeRsp(e3)), t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "user_id") && t3.uint32(10).string(e3.user_id), Object.hasOwnProperty.call(e3, "user_attributes_seq") && t3.uint32(16).uint32(e3.user_attributes_seq), e3.attributes && e3.attributes.length)
              for (let r3 = 0; r3 < e3.attributes.length; ++r3)
                u.proto_zim.StRoomAttribute.encode(e3.attributes[r3], t3.uint32(26).fork()).ldelim();
            if (e3.err_list && e3.err_list.length)
              for (let r3 = 0; r3 < e3.err_list.length; ++r3)
                u.proto_zim.ErrList.encode(e3.err_list[r3], t3.uint32(34).fork()).ldelim();
            return t3;
          }, gr.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.StModifyRoomUserAttributeRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.user_id = e3.string();
                  break;
                case 2:
                  n3.user_attributes_seq = e3.uint32();
                  break;
                case 3:
                  n3.attributes.push(u.proto_zim.StRoomAttribute.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n3.err_list.push(u.proto_zim.ErrList.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, gr), e2.GetRoomUserAttributesReq = (fr.encode = function(e3, t3) {
            if (t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "room_id") && t3.uint32(10).string(e3.room_id), Object.hasOwnProperty.call(e3, "room_session_id") && t3.uint32(16).int64(e3.room_session_id), Object.hasOwnProperty.call(e3, "room_user_session_id") && t3.uint32(24).int64(e3.room_user_session_id), e3.req_attributes.length)
              for (let r3 = 0; r3 < e3.req_attributes.length; ++r3)
                u.proto_zim.StModifyRoomUserAttributeRsp.encode(e3.req_attributes[r3], t3.uint32(34).fork()).ldelim();
            return Object.hasOwnProperty.call(e3, "sub_room_id") && t3.uint32(402).string(e3.sub_room_id), t3;
          }, fr), e2.GetRoomUserAttributeListReq = (mr.encode = function(e3, t3) {
            return t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "room_id") && t3.uint32(10).string(e3.room_id), Object.hasOwnProperty.call(e3, "room_session_id") && t3.uint32(16).int64(e3.room_session_id), Object.hasOwnProperty.call(e3, "room_user_session_id") && t3.uint32(24).int64(e3.room_user_session_id), Object.hasOwnProperty.call(e3, "pos_flag") && t3.uint32(34).string(e3.pos_flag), Object.hasOwnProperty.call(e3, "count") && t3.uint32(40).int32(e3.count), Object.hasOwnProperty.call(e3, "sub_room_id") && t3.uint32(402).string(e3.sub_room_id), t3;
          }, mr), e2.GetRoomUserAttributeListRsp = (_r.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.GetRoomUserAttributeListRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.pos_flag = e3.string();
                  break;
                case 4:
                  n3.user_attributes_list_seq = e3.uint32();
                  break;
                case 5:
                  n3.user_count = e3.uint32();
                  break;
                case 6:
                  n3.user_attributes.push(u.proto_zim.StModifyRoomUserAttributeRsp.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, _r), e2.PushRoomEnter = (vr.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushRoomEnter();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.room_id = e3.string();
                  break;
                case 2:
                  n3.room_session_id = e3.int64();
                  break;
                case 3:
                  n3.user_id = e3.string();
                  break;
                case 4:
                  n3.user_name = e3.bytes();
                  break;
                case 5:
                  n3.enter_time = e3.int64();
                  break;
                case 6:
                  n3.userlist_seq = e3.uint32();
                  break;
                case 7:
                  n3.user_count = e3.uint32();
                  break;
                case 8:
                  n3.sub_room_id = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, vr), e2.PushRoomKickout = (br.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushRoomKickout();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.room_id = e3.string();
                  break;
                case 2:
                  n3.reason = e3.uint32();
                  break;
                case 3:
                  n3.message = e3.string();
                  break;
                case 4:
                  n3.sub_room_id = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, br), e2.PushRoomAttributesModify = (yr.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushRoomAttributesModify();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.attributes.push(u.proto_zim.StRoomAttribute.decode(e3, e3.uint32()));
                  break;
                case 2:
                  n3.room_id = e3.string();
                  break;
                case 3:
                  n3.room_session_id = e3.int64();
                  break;
                case 4:
                  n3.user_id = e3.string();
                  break;
                case 5:
                  n3.attributes_seq = e3.uint32();
                  break;
                case 6:
                  n3.sub_room_id = e3.string();
                  break;
                case 7:
                  n3.old_attributes_seq = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, yr), e2.PushRoomUserAttributesModify = (Mr.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.PushRoomUserAttributesModify();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.push_attributes.push(u.proto_zim.StModifyRoomUserAttributeRsp.decode(e3, e3.uint32()));
                  break;
                case 2:
                  n3.room_id = e3.string();
                  break;
                case 3:
                  n3.room_session_id = e3.int64();
                  break;
                case 4:
                  n3.user_id = e3.string();
                  break;
                case 6:
                  n3.sub_room_id = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, Mr), e2.UserInfo = (Ir.encode = function(e3, t3) {
            if (t3 = t3 || i.create(), e3.quey_user_id && e3.quey_user_id.length)
              for (let r3 = 0; r3 < e3.quey_user_id.length; ++r3)
                t3.uint32(10).string(e3.quey_user_id[r3]);
            return t3;
          }, Ir.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.UserInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              o2 >>> 3 == 1 ? n3.quey_user_id.push(e3.string()) : e3.skipType(7 & o2);
            }
            return n3;
          }, Ir), e2.UserInfoRsp = (kr.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.UserInfoRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.result.push(u.proto_zim.StUserInfo.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n3.err_list.push(u.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, kr), e2.ModifyUserInfoReq = (wr.encode = function(e3, t3) {
            return t3 = t3 || i.create(), !e3.user_name || e3.set_flag && 1 != e3.set_flag || t3.uint32(10).bytes(e3.user_name), 10 == e3.set_flag && t3.uint32(18).bytes(e3.user_name), Object.hasOwnProperty.call(e3, "set_flag") && t3.uint32(24).uint32(e3.set_flag), 16 == e3.set_flag && t3.uint32(34).bytes(e3.user_name), t3;
          }, wr.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.ModifyUserInfoReq();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.userName = e3.bytes();
                  break;
                case 2:
                  n3.extendedData = e3.bytes();
                  break;
                case 3:
                  n3.set_flag = e3.uint32();
                  break;
                case 4:
                  n3.userAvatarUrl = e3.bytes();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, wr), e2.MsgStatusFail = (Cr.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.MsgStatusFail();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.client_info = u.proto_zim.StMsgClientInfo.decode(e3, e3.uint32());
                  break;
                case 2:
                  n3.reason = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, Cr), e2.StReactions = (Sr.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.StReactions();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.is_detail = e3.bool();
                  break;
                case 2:
                  n3.reaction_list.push(u.proto_zim.StReactionBrief.decode(e3, e3.uint32()));
                  break;
                case 3:
                  n3.msg_max_reaction_seq = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.msg_max_reaction_seq = +n3.msg_max_reaction_seq.toString(), n3;
          }, Sr), e2.StReactionBrief = (Dr.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.StReactionBrief();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.max_reaction_seq = e3.int64();
                  break;
                case 2:
                  n3.reaction_key = e3.string();
                  break;
                case 3:
                  n3.total_user_count = e3.int32();
                  break;
                case 4:
                  n3.include_self = e3.bool();
                  break;
                case 5:
                  n3.user_reaction.push(u.proto_zim.StGroupAttribute.decode(e3, e3.uint32()));
                  break;
                case 6:
                  n3.is_multi = e3.bool();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3.max_reaction_seq = +n3.max_reaction_seq.toString(), n3.user_reaction = n3.user_reaction.map((e4) => ({ userID: e4.key, seq: +e4.seq.toString() })), n3.user_reaction.sort((e4, t4) => e4.seq - t4.seq), n3;
          }, Dr), e2.UserMailCallUserInfo = (qr.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.UserMailCallUserInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.user_id = e3.string();
                  break;
                case 2:
                  n3.user_state = e3.uint32();
                  break;
                case 3:
                  n3.user_session_id = e3.int64();
                  break;
                case 4:
                  n3.extended_data = e3.bytes();
                  break;
                case 5:
                  n3.is_timeout = e3.int64();
                  break;
                case 6:
                  n3.accept_time = e3.int64();
                  break;
                case 7:
                  n3.quit_time = e3.int64();
                  break;
                case 8:
                  n3.residue_timeout_time = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, qr), e2.QueryRoomMsgReq = (Rr.encode = function(e3, t3) {
            if (t3 = t3 || i.create(), Object.hasOwnProperty.call(e3, "room_id") && t3.uint32(10).string(e3.room_id), Object.hasOwnProperty.call(e3, "room_session_id") && t3.uint32(16).int64(e3.room_session_id), Object.hasOwnProperty.call(e3, "room_user_session_id") && t3.uint32(24).int64(e3.room_user_session_id), e3.client_infos.length)
              for (let r3 = 0; r3 < e3.client_infos.length; ++r3)
                u.proto_zim.StMsgClientInfo.encode(e3.client_infos[r3], t3.uint32(34).fork()).ldelim();
            return Object.hasOwnProperty.call(e3, "sub_room_id") && t3.uint32(402).string(e3.sub_room_id), t3;
          }, Rr), e2.QueryRoomMsgRsp = (Or.decode = function(e3, t3) {
            e3 instanceof s || (e3 = s.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n3 = new u.proto_zim.QueryRoomMsgRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n3.code = e3.uint32();
                  break;
                case 2:
                  n3.message = e3.string();
                  break;
                case 3:
                  n3.msgs.push(u.proto_zim.FetchMsgInfo.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n3.fail_list.push(u.proto_zim.MsgStatusFail.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n3;
          }, Or), e2;
        })();
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return y;
        });
        var n = r(6), o = r(2), s = r(63), i = r(64), a = r(65), u = r(68), c = r(74), l = r(76), d = r(77), p = r(1), h = r(0), g = (t = function(e2, t2, r2, n2) {
          var o2, s2 = arguments.length, i2 = s2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, r2) : n2;
          if ("object" == typeof Reflect && "function" == typeof Reflect.decorate)
            i2 = Reflect.decorate(e2, t2, r2, n2);
          else
            for (var a2 = e2.length - 1; 0 <= a2; a2--)
              (o2 = e2[a2]) && (i2 = (s2 < 3 ? o2(i2) : 3 < s2 ? o2(t2, r2, i2) : o2(t2, r2)) || i2);
          return 3 < s2 && i2 && Object.defineProperty(t2, r2, i2), i2;
        }, h.J.User), f = h.J.Conversation, m = h.J.Room, _ = h.J.Group, v = h.J.Call, b = h.J.Database, y = (M.prototype.handleBizPushEvent = function(e2, t2, r2) {
          var n2 = "";
          switch (e2) {
            case h.c.p_c2c_msg.cmd:
            case h.c.p_room_msg.cmd:
            case h.c.p_group_msg.cmd:
              n2 = this.convMgr.onPushMessage(t2, e2), this.addMsgPushEvent(e2, r2, n2, t2);
              break;
            case h.c.p_c2c_command.cmd:
            case h.c.p_room_command.cmd:
            case h.c.p_group_command.cmd:
              n2 = this.convMgr.onPushCommand(t2, e2), this.addMsgPushEvent(e2, r2, n2, t2);
              break;
            case h.c.p_msg_to_all_users.cmd:
              this.convMgr.onPushBroadcastMessage(t2), this.addMsgPushEvent(e2, r2, "", t2);
              break;
            case h.c.p_read_receipt.cmd:
              this.convMgr.onPushReadReceipt(t2);
              break;
            case h.c.p_msg_revoke.cmd:
              this.convMgr.onPushMsgRevoke(t2);
              break;
            case h.c.p_reaction.cmd:
              this.convMgr.onPushReaction(t2);
            case h.c.p_room_enter.cmd:
              this.groupMgr.onPushRoomEnter(t2);
              break;
            case h.c.p_room_quit.cmd:
              this.groupMgr.onPushRoomQuit(t2);
              break;
            case h.c.p_room_kickout.cmd:
              this.groupMgr.onPushRoomKickout(t2);
              break;
            case h.c.p_room_attrs.cmd:
              this.groupMgr.onPushRoomAttributesModify(t2);
              break;
            case h.c.p_room_user_attrs.cmd:
              this.groupMgr.onPushRoomUserAttributesModify(t2);
              break;
            case h.c.p_group_create.cmd:
              this.groupMgr.onPushGroupCreate(t2);
              break;
            case h.c.p_group_invite.cmd:
              this.groupMgr.onPushGroupJoin(t2, false);
              break;
            case h.c.p_group_member_kickout.cmd:
              this.groupMgr.onPushGroupDestroy(t2, h.A.KickedOut);
              break;
            case h.c.p_group_destroy.cmd:
              this.groupMgr.onPushGroupDestroy(t2, h.A.Dismissed);
              break;
            case h.c.p_group_modify_data.cmd:
              this.groupMgr.onPushGroupDataModify(t2);
              break;
            case h.c.p_group_modify_attributes.cmd:
              this.groupMgr.onPushGroupAttributesModify(t2);
              break;
            case h.c.p_group_owner_transfer.cmd:
              this.groupMgr.onPushGroupOwnerTransfer(t2);
              break;
            case h.c.p_group_member_change.cmd:
              this.groupMgr.onPushGroupMemberChange(t2);
              break;
            case h.c.p_call_invite.cmd:
              this.callMgr.onPushCallInvited(t2);
              break;
            case h.c.p_call_cancel.cmd:
              this.callMgr.onPushCallCancel(t2);
              break;
            case h.c.p_call_accept.cmd:
              this.callMgr.onPushCallAccept(t2);
              break;
            case h.c.p_call_refuse.cmd:
              this.callMgr.onPushCallReject(t2);
              break;
            case h.c.p_call_inviting.cmd:
              this.callMgr.onPushCallingInvite(t2);
              break;
            case h.c.p_call_quit.cmd:
              this.callMgr.onPushCallQuit(t2);
              break;
            case h.c.p_call_destroy.cmd:
              this.callMgr.onPushCallEnd(t2);
              break;
            case h.c.p_call_ack.cmd:
              this.callMgr.onPushCallAck(t2);
              break;
            case h.c.p_call_enter.cmd:
              this.callMgr.onPushCallEnter(t2);
              break;
            case h.c.p_detaillog_report.cmd:
              this.logger.upload("push", true);
              break;
            case h.c.p_user_modify.cmd:
              this.userMgr.onPushUpdateUserInfo(t2);
              break;
            case h.c.p_msg_delete.cmd:
              this.convMgr.onPushMsgDelete(t2);
              break;
            case h.c.p_conv_delete.cmd:
              this.convMgr.onPushConvDelete(t2);
              break;
            case h.c.p_conv_readseq.cmd:
              this.convMgr.onPushConvRead(t2);
              break;
            case h.c.p_conv_pinned.cmd:
              this.convMgr.onPushConvPinned(t2);
              break;
            case h.c.p_conv_mute.cmd:
              this.convMgr.onPushConvMute(t2);
              break;
            case h.c.p_group_enter.cmd:
              this.groupMgr.onPushGroupJoin(t2, true);
              break;
            case h.c.p_group_quit.cmd:
              this.groupMgr.onPushGroupDestroy(t2, h.A.Left);
              break;
            case h.c.p_del_all_conv.cmd:
              this.convMgr.onPushConvAllDelete(t2);
              break;
            case h.c.p_clean_unread.cmd:
              this.convMgr.onPushCleanAllUnread(t2);
          }
        }, M.prototype.addMsgPushEvent = function(e2, t2, r2, n2) {
          (t2 < -200 || 200 < t2) && this.dataReport.reportPushEvent(e2, t2, r2, n2), 0 < t2 && this.msgPushMap[e2].times.push(t2);
        }, M.prototype.addMessagePushDelay = function(e2, t2, r2) {
          var n2, o2, s2, i2 = t2.length;
          i2 < 1 || (o2 = t2[n2 = 0], s2 = 0, t2.forEach(function(e3) {
            n2 += e3, e3 < o2 && (o2 = e3), s2 < e3 && (s2 = e3);
          }), t2.length = 0, r2.flag = true, r2[e2 + "_count"] = i2, r2[e2 + "_ave_time_consumed"] = Math.floor(n2 / i2), r2[e2 + "_max_time_consumed"] = s2, r2[e2 + "_min_time_consumed"] = o2);
        }, M.prototype.createNotLoggedError = function(e2, t2) {
          var r2;
          if (!this.engineConfig.user.userID || !this.engineConfig.token)
            return r2 = Object(p.s)(h.s.NetworkModuleUserIsNotLogged), this.logger.warn(e2, t2, r2), r2;
        }, M.prototype.setContext = function(e2) {
          this.eventBus.setContext(e2);
        }, M.prototype.setZPNsContext = function(e2) {
          var t2 = e2.pushSDKVersion.length, r2 = e2.pushID.length, o2 = new Uint8Array(9 + t2 + r2);
          o2[0] = 175, o2[1] = 0, o2[2] = 1, o2[3] = 1, o2[4] = 7, o2[5] = 0, o2[6] = t2, o2[7] = r2 >> 8, o2[8] = r2 - (o2[7] << 8), o2.set(Object(p.i)(e2.pushSDKVersion), 9), o2.set(Object(p.i)(e2.pushID), 9 + t2), r2 = n.a.fromUint8Array(o2);
          this.engineConfig.ZPNsPushID = r2, this.userMgr && this.userMgr.reportZPNs(), e2.base64 = r2, this.logger.info(h.J.Manager, "reportZPNs", e2);
        }, M.prototype.destroy = function() {
          this.eventBus && this.eventBus.off(), this.eventBus = null, this.connMgr.destroy(), this.connMgr = null, this.groupMgr.destroy(), this.groupMgr = null, this.convMgr.destroy(), this.convMgr = null, this.userMgr.destroy(), this.userMgr = null, this.callMgr.destroy(), this.callMgr = null, this.logger = null, this.engineConfig = null;
        }, M.prototype.uploadLog = function() {
          return this.logger.upload("apicall", true);
        }, M.prototype.on = function(e2, t2) {
          "function" == typeof t2 && (this.eventBus.on(e2, t2), this.logger.info(h.J.Manager, "API.on", e2));
        }, M.prototype.off = function(e2) {
          this.eventBus.off(e2), this.logger.info(h.J.Manager, "API.off", e2);
        }, M.prototype.login = function(e2, t2) {
          var r2 = this.paramValid.login(e2);
          return r2 ? Promise.reject(r2) : this.userMgr.login(e2, t2);
        }, M.prototype.logout = function() {
          this.userMgr.logout();
        }, M.prototype.renewToken = function(e2) {
          return this.userMgr.renewToken(e2);
        }, M.prototype.queryUsersInfo = function(e2, t2) {
          var r2 = this.paramValid.queryUsersInfo(e2);
          return r2 ? Promise.reject(r2) : this.convMgr.queryUsersInfo(e2, t2);
        }, M.prototype.updateUserName = function(e2) {
          var t2 = this.paramValid.validName("userName", e2, g, h.I.UpdateUserName);
          return t2 ? Promise.reject(t2) : this.userMgr.updateUserName(e2);
        }, M.prototype.updateUserAvatarUrl = function(e2) {
          var t2 = this.paramValid.validName("userAvatarUrl", e2, g, h.I.UpdateUserAvatarUrl);
          return t2 ? Promise.reject(t2) : this.userMgr.updateUserAvatarUrl(e2);
        }, M.prototype.updateUserExtendedData = function(e2) {
          var t2 = this.paramValid.validName("extendedData", e2, g, h.I.UpdateUserExtendedData);
          return t2 ? Promise.reject(t2) : this.userMgr.updateUserExtendedData(e2);
        }, M.prototype.queryConversation = function(e2, t2) {
          var r2 = this.paramValid.validConvIDAndType(e2, t2, h.I.QueryConv);
          return r2 ? Promise.reject(r2) : this.convMgr.query(e2, t2);
        }, M.prototype.queryConversationList = function(e2) {
          var t2 = this.paramValid.queryConversationList(e2, h.I.QueryConvList);
          return t2 ? Promise.reject(t2) : this.convMgr.queryList(e2);
        }, M.prototype.queryConversationPinnedList = function(e2) {
          var t2 = this.paramValid.queryConversationList(e2, h.I.QueryPinnedList);
          return t2 ? Promise.reject(t2) : this.convMgr.queryPinnedList(e2);
        }, M.prototype.deleteConversation = function(e2, t2, r2) {
          var n2 = this.paramValid.validConvIDAndType(e2, t2, h.I.DeleteConv);
          return n2 ? Promise.reject(n2) : this.convMgr.delete(e2, t2, r2);
        }, M.prototype.deleteAllConversations = function(e2) {
          return this.convMgr.deleteAll(e2);
        }, M.prototype.setConversationNotificationStatus = function(e2, t2, r2) {
          var n2 = this.paramValid.setNotificationStatus(e2, t2, r2);
          return n2 ? Promise.reject(n2) : this.convMgr.setNotificationStatus(e2, t2, r2);
        }, M.prototype.updateConversationPinnedState = function(e2, t2, r2) {
          var n2 = this.paramValid.updatePinnedState(e2, t2, r2);
          return n2 ? Promise.reject(n2) : this.convMgr.updatePinnedState(e2, t2, r2);
        }, M.prototype.clearConversationUnreadMessageCount = function(e2, t2) {
          var r2 = this.paramValid.validConvIDAndType(e2, t2, h.I.ClearUnreadCount);
          return r2 ? Promise.reject(r2) : this.convMgr.clearUnreadCount(e2, t2);
        }, M.prototype.clearConversationTotalUnreadMessageCount = function() {
          return this.convMgr.clearAllUnreadCount();
        }, M.prototype.sendMessage = function(e2, t2, r2, n2, o2) {
          var s2, i2 = this.paramValid.sendMessage(e2, t2, r2, n2);
          return i2 ? (s2 = { status: h.P.Failed, message: e2 }, this.eventBus.emit(h.t.MsgSentStatus, { infos: [s2] }), Promise.reject(i2)) : this.convMgr.sendMessage(e2, t2, r2, n2, o2);
        }, M.prototype.sendMediaMessage = function(e2, t2, r2, n2, o2) {
          var s2, i2 = e2;
          return (e2 = this.paramValid.sendMediaMessage(e2, t2, r2, n2)) ? (s2 = { status: h.P.Failed, message: i2 }, this.eventBus.emit(h.t.MsgSentStatus, { infos: [s2] }), Promise.reject(e2)) : this.convMgr.sendMediaMessage(i2, t2, r2, n2, o2);
        }, M.prototype.deleteMessages = function(e2, t2, r2, n2) {
          n2 = Object.assign({ isAlsoDeleteServerMessage: true }, n2);
          var o2 = this.paramValid.deleteMessages(e2, t2, r2, n2);
          return o2 ? Promise.reject(o2) : e2.length || n2.isAlsoDeleteServerMessage ? this.convMgr.deleteMessages(e2, t2, r2, n2) : Promise.resolve({ conversationID: t2, conversationType: r2 });
        }, M.prototype.deleteAllMessage = function(e2, t2, r2) {
          var n2 = this.paramValid.validConvIDAndType(e2, t2, h.I.DeleteAllMessage);
          return n2 ? Promise.reject(n2) : this.convMgr.deleteAllMessage(e2, t2, r2);
        }, M.prototype.queryHistoryMessage = function(e2, t2, r2) {
          var n2 = this.paramValid.queryHistoryMessage(e2, t2, r2);
          return n2 ? Promise.reject(n2) : r2.count < 1 ? Promise.resolve({ conversationID: e2, conversationType: t2, messageList: [] }) : this.convMgr.queryHistoryMessage(e2, t2, r2);
        }, M.prototype.insertMessageToLocalDB = function(e2, t2, r2, n2) {
          var o2 = this.paramValid.insertMessageToLocalDB(e2, t2, r2, n2);
          return o2 ? Promise.reject(o2) : this.convMgr.insertMessageToLocalDB(e2, t2, r2, n2);
        }, M.prototype.updateMessageLocalExtendedData = function(e2, t2) {
          var r2 = this.paramValid.updateMessageLocalExtendedData(e2, t2);
          return r2 ? Promise.reject(r2) : this.convMgr.updateMessageLocalExtendedData(e2, t2);
        }, M.prototype.revokeMessage = function(e2, t2) {
          var r2 = this.paramValid.revokeMessage(e2);
          return r2 ? Promise.reject(r2) : this.convMgr.revokeMessage(e2, t2);
        }, M.prototype.sendReceiptRead = function(e2, t2) {
          var r2 = this.paramValid.sendReceiptRead(e2, t2);
          return r2 ? Promise.reject(r2) : this.convMgr.sendReceiptRead(e2, t2);
        }, M.prototype.sendMessageReceiptsRead = function(e2, t2, r2) {
          var n2 = this.paramValid.sendMessageReceiptsRead(e2, t2, r2);
          return n2 ? Promise.reject(n2) : this.convMgr.sendMessageReceiptsRead(e2, t2, r2);
        }, M.prototype.queryMessageReceiptsInfo = function(e2, t2, r2) {
          var n2 = this.paramValid.queryReceiptsInfo(e2, t2, r2);
          return n2 ? Promise.reject(n2) : this.convMgr.queryReceiptsInfo(e2, t2, r2);
        }, M.prototype.queryReceiptMemberList = function(e2, t2, r2, n2) {
          var o2 = this.engineConfig.user.userID;
          return (o2 = this.paramValid.queryReceiptMemberList(e2, t2, r2, n2, o2)) ? Promise.reject(o2) : r2.count < 1 || e2.direction == h.K.Receive ? Promise.resolve({ groupID: t2, nextFlag: 0, userList: [] }) : this.groupMgr.queryReceiptMemberList(e2, t2, r2, n2);
        }, M.prototype.addMessageReaction = function(e2, t2) {
          var r2 = this.paramValid.messageReaction(e2, t2, true);
          return r2 ? Promise.reject(r2) : this.convMgr.addMessageReaction(e2, t2);
        }, M.prototype.deleteMessageReaction = function(e2, t2) {
          var r2 = this.paramValid.messageReaction(e2, t2);
          return r2 ? Promise.reject(r2) : this.convMgr.deleteMessageReaction(e2, t2);
        }, M.prototype.queryMessageReactionUserList = function(e2, t2) {
          var r2 = this.paramValid.queryMessageReactionUserList(e2, t2);
          return r2 ? Promise.reject(r2) : t2.count < 1 ? (r2 = { totalCount: 0, nextFlag: 0, reactionType: t2.reactionType, userList: [], message: e2 }, Promise.resolve(r2)) : this.convMgr.queryMessageReactionUserList(e2, t2);
        }, M.prototype.createRoom = function(e2, t2) {
          var r2 = this.paramValid.createRoom(e2, t2);
          return r2 ? Promise.reject(r2) : this.groupMgr.createRoom(e2, t2);
        }, M.prototype.enterRoom = function(e2, t2) {
          var r2 = this.paramValid.createRoom(e2, t2, true);
          return r2 ? Promise.reject(r2) : this.groupMgr.createRoom(e2, t2, true);
        }, M.prototype.joinRoom = function(e2) {
          var t2 = this.paramValid.validID("roomID", e2, m, h.I.JoinRoom);
          return t2 ? Promise.reject(t2) : this.groupMgr.joinRoom(e2);
        }, M.prototype.leaveRoom = function(e2) {
          var t2 = this.paramValid.validID("roomID", e2, m, h.I.LeaveRoom);
          return t2 ? Promise.reject(t2) : this.groupMgr.leaveRoom(e2);
        }, M.prototype.queryRoomMemberList = function(e2, t2) {
          var r2 = this.paramValid.queryRoomMemberList(e2, t2);
          return r2 ? Promise.reject(r2) : t2.count < 1 ? Promise.resolve({ roomID: e2, memberList: [], nextFlag: t2.nextFlag || "" }) : this.groupMgr.queryRoomMemberList(e2, t2);
        }, M.prototype.queryRoomMembers = function(e2, t2) {
          var r2 = this.paramValid.queryRoomMembers(e2, t2);
          return r2 ? Promise.reject(r2) : this.groupMgr.queryRoomMembers(e2, t2);
        }, M.prototype.queryRoomOnlineMemberCount = function(e2) {
          var t2 = this.paramValid.validID("roomID", e2, m, h.I.QueryRoomOnlineMemberCount);
          return t2 ? Promise.reject(t2) : this.groupMgr.queryRoomOnlineMemberCount(e2);
        }, M.prototype.queryRoomAllAttributes = function(e2) {
          var t2 = this.paramValid.validID("roomID", e2, m, h.I.QueryRoomAllAttributes);
          return t2 ? Promise.reject(t2) : this.groupMgr.queryRoomAllAttributes(e2);
        }, M.prototype.setRoomAttributes = function(e2, t2, r2) {
          var n2 = this.paramValid.setRoomAttributes(e2, t2);
          return n2 ? Promise.reject(n2) : this.groupMgr.setRoomAttributes(e2, t2, r2);
        }, M.prototype.deleteRoomAttributes = function(e2, t2, r2) {
          var n2 = this.paramValid.deleteRoomAttributes(e2, t2);
          return n2 ? Promise.reject(n2) : this.groupMgr.deleteRoomAttributes(e2, t2, r2);
        }, M.prototype.beginRoomAttributesBatchOperation = function(e2, t2) {
          this.groupMgr.beginRoomAttributesBatchOperation(e2, t2);
        }, M.prototype.endRoomAttributesBatchOperation = function(e2) {
          var t2 = this.paramValid.validID("roomID", e2, m, h.I.EndRoomAttributesBatchOperation);
          return t2 ? Promise.reject(t2) : this.groupMgr.endRoomAttributesBatchOperation(e2);
        }, M.prototype.setRoomMembersAttributes = function(e2, t2, r2, n2) {
          var o2 = this.paramValid.setRoomMembersAttributes(e2, t2, r2);
          return o2 ? Promise.reject(o2) : this.groupMgr.setRoomMembersAttributes(e2, t2, r2, n2);
        }, M.prototype.queryRoomMembersAttributes = function(e2, t2) {
          var r2 = this.paramValid.queryRoomMembersAttributes(e2, t2);
          return r2 ? Promise.reject(r2) : this.groupMgr.queryRoomMembersAttributes(e2, t2);
        }, M.prototype.queryRoomMemberAttributesList = function(e2, t2) {
          var r2 = this.paramValid.validID("roomID", e2, m, h.I.QueryRoomMemberAttributesList);
          return r2 ? Promise.reject(r2) : this.groupMgr.queryRoomMemberAttributesList(e2, t2);
        }, M.prototype.createGroup = function(e2, t2, r2) {
          e2 = Object.assign({}, e2), r2 = Object.assign({ groupAttributes: {}, groupNotice: "" }, r2);
          var n2 = this.paramValid.createGroup(e2, t2, r2);
          return n2 ? Promise.reject(n2) : this.groupMgr.createGroup(e2, t2, r2);
        }, M.prototype.joinGroup = function(e2) {
          var t2 = this.paramValid.validID("groupID", e2, _, h.I.JoinGroup);
          return t2 ? Promise.reject(t2) : this.groupMgr.joinGroup(e2);
        }, M.prototype.leaveGroup = function(e2) {
          var t2 = this.paramValid.validID("groupID", e2, _, h.I.LeaveGroup);
          return t2 ? Promise.reject(t2) : this.groupMgr.leaveGroup(e2);
        }, M.prototype.dismissGroup = function(e2) {
          var t2 = this.paramValid.validID("groupID", e2, _, h.I.DismissGroup);
          return t2 ? Promise.reject(t2) : this.groupMgr.dismissGroup(e2);
        }, M.prototype.queryGroupList = function() {
          return this.groupMgr.queryGroupList();
        }, M.prototype.updateGroupName = function(e2, t2) {
          var r2 = this.paramValid.validIDAndName("groupID", t2, "groupName", e2, _, h.I.UpdateGroupName);
          return r2 ? Promise.reject(r2) : this.groupMgr.updateGroupName(e2, t2);
        }, M.prototype.updateGroupNotice = function(e2, t2) {
          var r2 = this.paramValid.validIDAndName("groupID", t2, "groupNotice", e2, _, h.I.UpdateGroupNotice);
          return r2 ? Promise.reject(r2) : this.groupMgr.updateGroupNotice(e2, t2);
        }, M.prototype.updateGroupAvatarUrl = function(e2, t2) {
          var r2 = this.paramValid.validIDAndName("groupID", t2, "groupAvatarUrl", e2, _, h.I.UpdateGroupAvatarUrl);
          return r2 ? Promise.reject(r2) : this.groupMgr.updateGroupAvatarUrl(e2, t2);
        }, M.prototype.queryGroupInfo = function(e2) {
          var t2 = this.paramValid.validID("groupID", e2, _, h.I.QueryGroupInfo);
          return t2 ? Promise.reject(t2) : this.groupMgr.queryGroupInfo(e2);
        }, M.prototype.setGroupAttributes = function(e2, t2) {
          var r2 = this.paramValid.setGroupAttributes(e2, t2);
          return r2 ? Promise.reject(r2) : this.groupMgr.setGroupAttributes(e2, t2);
        }, M.prototype.deleteGroupAttributes = function(e2, t2) {
          var r2 = this.paramValid.deleteGroupAttributes(e2, t2);
          return r2 ? Promise.reject(r2) : this.groupMgr.deleteGroupAttributes(e2, t2);
        }, M.prototype.queryGroupAttributes = function(e2, t2) {
          var r2 = this.paramValid.queryGroupAttributes(e2, t2);
          return r2 ? Promise.reject(r2) : this.groupMgr.queryGroupAttributes(e2, t2);
        }, M.prototype.setGroupMemberNickname = function(e2, t2, r2) {
          var n2 = this.paramValid.setGroupMemberNickname(e2, t2, r2);
          return n2 ? Promise.reject(n2) : this.groupMgr.setGroupMemberNickname(e2, t2, r2);
        }, M.prototype.setGroupMemberRole = function(e2, t2, r2) {
          var n2 = this.paramValid.setGroupMemberRole(e2, t2, r2);
          return n2 ? Promise.reject(n2) : this.groupMgr.setGroupMemberRole(e2, t2, r2);
        }, M.prototype.transferGroupOwner = function(e2, t2) {
          var r2 = this.paramValid.validTwoID("toUserID", e2, "groupID", t2, _, h.I.TransferGroupOwner);
          return r2 ? Promise.reject(r2) : this.groupMgr.transferGroupOwner(e2, t2);
        }, M.prototype.queryGroupMemberInfo = function(e2, t2) {
          var r2 = this.paramValid.validTwoID("userID", e2, "groupID", t2, _, h.I.QueryGroupMemberInfo);
          return r2 ? Promise.reject(r2) : this.groupMgr.queryGroupMemberInfo(e2, t2);
        }, M.prototype.inviteUsersIntoGroup = function(e2, t2) {
          var r2 = this.paramValid.validGroupUserIDs(e2, t2, h.I.InviteUsersIntoGroup);
          return r2 ? Promise.reject(r2) : this.groupMgr.inviteUsersIntoGroup(e2, t2);
        }, M.prototype.kickGroupMembers = function(e2, t2) {
          var r2 = this.paramValid.validGroupUserIDs(e2, t2, h.I.KickGroupMembers);
          return r2 ? Promise.reject(r2) : this.groupMgr.kickGroupMembers(e2, t2);
        }, M.prototype.queryGroupMemberList = function(e2, t2) {
          t2 = Object.assign({ count: 100, nextFlag: 0 }, t2);
          var r2 = this.paramValid.validID("groupID", e2, _, h.I.QueryGroupMemberList);
          return r2 ? Promise.reject(r2) : t2.count < 1 ? Promise.resolve({ groupID: e2, userList: [], nextFlag: t2.nextFlag }) : this.groupMgr.queryGroupMemberList(e2, t2);
        }, M.prototype.queryGroupMemberCount = function(e2) {
          var t2 = this.paramValid.validID("groupID", e2, _, h.I.QueryGroupMemberCount);
          return t2 ? Promise.reject(t2) : this.groupMgr.queryGroupMemberCount(e2);
        }, M.prototype.callInvite = function(e2, t2) {
          var r2 = this.paramValid.callInvite(e2, t2);
          return r2 ? Promise.reject(r2) : this.callMgr.callInvite(e2, t2);
        }, M.prototype.callCancel = function(e2, t2, r2) {
          var n2 = this.paramValid.callIDAndInvitees(e2, t2, h.I.CallCancel);
          return n2 ? Promise.reject(n2) : this.callMgr.callCancel(e2, t2, r2);
        }, M.prototype.callAccept = function(e2, t2) {
          var r2 = this.paramValid.validID("callID", e2, v, h.I.CallAccept);
          return r2 ? Promise.reject(r2) : this.callMgr.callAccept(e2, t2);
        }, M.prototype.callReject = function(e2, t2) {
          var r2 = this.paramValid.validID("callID", e2, v, h.I.CallReject);
          return r2 ? Promise.reject(r2) : this.callMgr.callReject(e2, t2);
        }, M.prototype.callQuit = function(e2, t2) {
          var r2 = this.paramValid.validID("callID", e2, v, h.I.CallQuit);
          return r2 ? Promise.reject(r2) : this.callMgr.callQuit(e2, t2);
        }, M.prototype.callJoin = function(e2, t2) {
          var r2 = this.paramValid.validID("callID", e2, v, h.I.callJoin);
          return r2 ? Promise.reject(r2) : this.callMgr.callJoin(e2, t2);
        }, M.prototype.callEnd = function(e2, t2) {
          var r2 = this.paramValid.validID("callID", e2, v, h.I.CallEnd);
          return r2 ? Promise.reject(r2) : this.callMgr.callEnd(e2, t2);
        }, M.prototype.callingInvite = function(e2, t2, r2) {
          var n2 = this.paramValid.callIDAndInvitees(e2, t2, h.I.CallingInvite);
          return n2 ? Promise.reject(n2) : this.callMgr.callingInvite(e2, t2, r2);
        }, M.prototype.queryCallInvitationList = function(e2) {
          return this.callMgr.queryList(e2);
        }, M.prototype.searchConversations = function(e2) {
          if (p.n)
            return Promise.resolve({ conversationSearchInfoList: [] });
          var t2 = this.paramValid.searchConversations(e2);
          return t2 ? Promise.reject(t2) : this.dbMgr.searchConversations(e2);
        }, M.prototype.searchGlobalMessages = function(e2) {
          if (p.n)
            return Promise.resolve({ messageList: [] });
          var t2 = this.paramValid.searchMessages(e2, h.I.SearchGlobalMessages);
          return t2 ? Promise.reject(t2) : this.dbMgr.searchGlobalMessages(e2);
        }, M.prototype.searchMessages = function(e2, t2, r2) {
          if (p.n)
            return Promise.resolve({ conversationID: e2, conversationType: t2, messageList: [] });
          var n2 = this.paramValid.validConvIDAndType(e2, t2, h.I.SearchMessages) || this.paramValid.searchMessages(r2, h.I.SearchMessages);
          return n2 ? Promise.reject(n2) : this.dbMgr.searchMessages(e2, t2, r2);
        }, M.prototype.searchGroups = function(e2) {
          if (p.n)
            return Promise.resolve({ nextFlag: 0, groupSearchInfoList: [] });
          var t2 = this.paramValid.searchGroups(e2);
          return t2 ? Promise.reject(t2) : this.groupMgr.searchGroups(e2);
        }, M.prototype.searchGroupMembers = function(e2, t2) {
          if (p.n)
            return Promise.resolve({ nextFlag: 0, groupID: e2, userList: [] });
          var r2 = this.paramValid.searchGroupMembers(e2, t2);
          return r2 ? Promise.reject(r2) : this.dbMgr.searchGroupMembers(e2, t2);
        }, t([Object(p.p)(g, h.I.RenewToken)], M.prototype, "renewToken", null), t([Object(p.p)(g, h.I.QueryUsersInfo)], M.prototype, "queryUsersInfo", null), t([Object(p.p)(g, h.I.UpdateUserName)], M.prototype, "updateUserName", null), t([Object(p.p)(g, h.I.UpdateUserAvatarUrl)], M.prototype, "updateUserAvatarUrl", null), t([Object(p.p)(g, h.I.UpdateUserExtendedData)], M.prototype, "updateUserExtendedData", null), t([Object(p.p)(f, h.I.QueryConv)], M.prototype, "queryConversation", null), t([Object(p.p)(f, h.I.QueryConvList)], M.prototype, "queryConversationList", null), t([Object(p.p)(f, h.I.QueryPinnedList)], M.prototype, "queryConversationPinnedList", null), t([Object(p.p)(f, h.I.DeleteConv)], M.prototype, "deleteConversation", null), t([Object(p.p)(f, h.I.DeleteAllConv)], M.prototype, "deleteAllConversations", null), t([Object(p.p)(f, h.I.SetNotificationStatus)], M.prototype, "setConversationNotificationStatus", null), t([Object(p.p)(f, h.I.UpdatePinnedState)], M.prototype, "updateConversationPinnedState", null), t([Object(p.p)(f, h.I.ClearUnreadCount)], M.prototype, "clearConversationUnreadMessageCount", null), t([Object(p.p)(f, h.I.ClearAllUnreadCount)], M.prototype, "clearConversationTotalUnreadMessageCount", null), t([Object(p.p)(f, h.I.SendMessage)], M.prototype, "sendMessage", null), t([Object(p.p)(f, h.I.SendMediaMessage)], M.prototype, "sendMediaMessage", null), t([Object(p.p)(f, h.I.DeleteMessages)], M.prototype, "deleteMessages", null), t([Object(p.p)(f, h.I.DeleteAllMessage)], M.prototype, "deleteAllMessage", null), t([Object(p.p)(f, h.I.QueryHistoryMessage)], M.prototype, "queryHistoryMessage", null), t([Object(p.p)(f, h.I.InsertMessageToLocalDB)], M.prototype, "insertMessageToLocalDB", null), t([Object(p.p)(f, h.I.InsertMessageToLocalDB)], M.prototype, "updateMessageLocalExtendedData", null), t([Object(p.p)(f, h.I.RevokeMessage)], M.prototype, "revokeMessage", null), t([Object(p.p)(f, h.I.SendReceiptRead)], M.prototype, "sendReceiptRead", null), t([Object(p.p)(f, h.I.SendMessageReceiptsRead)], M.prototype, "sendMessageReceiptsRead", null), t([Object(p.p)(f, h.I.QueryReceiptsInfo)], M.prototype, "queryMessageReceiptsInfo", null), t([Object(p.p)(f, "API.queryReceiptMemberList")], M.prototype, "queryReceiptMemberList", null), t([Object(p.p)(f, h.I.AddReaction)], M.prototype, "addMessageReaction", null), t([Object(p.p)(f, h.I.DeleteReaction)], M.prototype, "deleteMessageReaction", null), t([Object(p.p)(f, h.I.QueryReaction)], M.prototype, "queryMessageReactionUserList", null), t([Object(p.p)(m, h.I.CreateRoom)], M.prototype, "createRoom", null), t([Object(p.p)(m, h.I.EnterRoom)], M.prototype, "enterRoom", null), t([Object(p.p)(m, h.I.JoinRoom)], M.prototype, "joinRoom", null), t([Object(p.p)(m, h.I.LeaveRoom)], M.prototype, "leaveRoom", null), t([Object(p.p)(m, h.I.QueryRoomMemberList)], M.prototype, "queryRoomMemberList", null), t([Object(p.p)(m, h.I.QueryRoomMemberList)], M.prototype, "queryRoomMembers", null), t([Object(p.p)(m, h.I.QueryRoomOnlineMemberCount)], M.prototype, "queryRoomOnlineMemberCount", null), t([Object(p.p)(m, h.I.QueryRoomAllAttributes)], M.prototype, "queryRoomAllAttributes", null), t([Object(p.p)(m, h.I.SetRoomAttributes)], M.prototype, "setRoomAttributes", null), t([Object(p.p)(m, h.I.DeleteRoomAttributes)], M.prototype, "deleteRoomAttributes", null), t([Object(p.p)(m, h.I.EndRoomAttributesBatchOperation)], M.prototype, "endRoomAttributesBatchOperation", null), t([Object(p.p)(m, h.I.SetRoomMembersAttributes)], M.prototype, "setRoomMembersAttributes", null), t([Object(p.p)(m, h.I.QueryRoomMembersAttributes)], M.prototype, "queryRoomMembersAttributes", null), t([Object(p.p)(m, h.I.QueryRoomMemberAttributesList)], M.prototype, "queryRoomMemberAttributesList", null), t([Object(p.p)(_, h.I.CreateGroup)], M.prototype, "createGroup", null), t([Object(p.p)(_, h.I.JoinGroup)], M.prototype, "joinGroup", null), t([Object(p.p)(_, h.I.LeaveGroup)], M.prototype, "leaveGroup", null), t([Object(p.p)(_, h.I.DismissGroup)], M.prototype, "dismissGroup", null), t([Object(p.p)(_, h.I.QueryGroupList)], M.prototype, "queryGroupList", null), t([Object(p.p)(_, h.I.UpdateGroupName)], M.prototype, "updateGroupName", null), t([Object(p.p)(_, h.I.UpdateGroupNotice)], M.prototype, "updateGroupNotice", null), t([Object(p.p)(_, h.I.UpdateGroupAvatarUrl)], M.prototype, "updateGroupAvatarUrl", null), t([Object(p.p)(_, h.I.QueryGroupInfo)], M.prototype, "queryGroupInfo", null), t([Object(p.p)(_, h.I.SetGroupAttributes)], M.prototype, "setGroupAttributes", null), t([Object(p.p)(_, h.I.DeleteGroupAttributes)], M.prototype, "deleteGroupAttributes", null), t([Object(p.p)(_, h.I.QueryGroupAttributes)], M.prototype, "queryGroupAttributes", null), t([Object(p.p)(_, h.I.SetGroupMemberNickname)], M.prototype, "setGroupMemberNickname", null), t([Object(p.p)(_, h.I.SetGroupMemberRole)], M.prototype, "setGroupMemberRole", null), t([Object(p.p)(_, h.I.TransferGroupOwner)], M.prototype, "transferGroupOwner", null), t([Object(p.p)(_, h.I.QueryGroupMemberInfo)], M.prototype, "queryGroupMemberInfo", null), t([Object(p.p)(_, h.I.InviteUsersIntoGroup)], M.prototype, "inviteUsersIntoGroup", null), t([Object(p.p)(_, h.I.KickGroupMembers)], M.prototype, "kickGroupMembers", null), t([Object(p.p)(_, h.I.QueryGroupMemberList)], M.prototype, "queryGroupMemberList", null), t([Object(p.p)(_, h.I.QueryGroupMemberCount)], M.prototype, "queryGroupMemberCount", null), t([Object(p.p)(v, h.I.CallInvite)], M.prototype, "callInvite", null), t([Object(p.p)(v, h.I.CallCancel)], M.prototype, "callCancel", null), t([Object(p.p)(v, h.I.CallAccept)], M.prototype, "callAccept", null), t([Object(p.p)(v, h.I.CallReject)], M.prototype, "callReject", null), t([Object(p.p)(v, h.I.CallQuit)], M.prototype, "callQuit", null), t([Object(p.p)(v, h.I.callJoin)], M.prototype, "callJoin", null), t([Object(p.p)(v, h.I.CallEnd)], M.prototype, "callEnd", null), t([Object(p.p)(v, h.I.CallingInvite)], M.prototype, "callingInvite", null), t([Object(p.p)(v, h.I.QueryCallList)], M.prototype, "queryCallInvitationList", null), t([Object(p.p)(b, h.I.SearchConvs)], M.prototype, "searchConversations", null), t([Object(p.p)(b, h.I.SearchGlobalMessages)], M.prototype, "searchGlobalMessages", null), t([Object(p.p)(b, h.I.SearchMessages)], M.prototype, "searchMessages", null), t([Object(p.p)(b, h.I.SearchGroups)], M.prototype, "searchGroups", null), t([Object(p.p)(b, h.I.SearchGroupMembers)], M.prototype, "searchGroupMembers", null), M);
        function M(e2, t2) {
          var n2 = this, g2 = (this.repeatedPushMap = {}, this.pushTimer = 0, this.msgPushMap = ((g2 = {})[h.c.p_c2c_msg.cmd] = { name: "peer_msg", times: [] }, g2[h.c.p_room_msg.cmd] = { name: "room_msg", times: [] }, g2[h.c.p_group_msg.cmd] = { name: "group_msg", times: [] }, g2[h.c.p_c2c_command.cmd] = { name: "peer_cmd", times: [] }, g2[h.c.p_room_command.cmd] = { name: "room_cmd", times: [] }, g2[h.c.p_group_command.cmd] = { name: "group_cmd", times: [] }, g2[h.c.p_msg_to_all_users.cmd] = { name: "broadcast", times: [] }, g2), this.onConnectedEvent = function(e3) {
            n2.userMgr.onConnected(e3);
          }, this.onDisConnectedEvent = function(e3) {
            n2.userMgr.onDisConnected(e3);
          }, this.onPushEvent = function(e3, t3, r2) {
            var o2;
            e3 === h.c.sw_push_list.cmd ? (1 == t3.qos_flag && (o2 = { code: 0, message: "", server_send_time: t3.send_time, push_responses: t3.push_requests.map(function(e4) {
              return { key: e4.sub_cmd, value: e4.msg_id };
            }) }, n2.connMgr.sendRequestWithNoRsp(h.c.sw_push_list_rsp.cmd, o2)), t3.push_requests.forEach(function(e4) {
              n2.handleBizPushEvent(e4.sub_cmd, e4.msg_body, r2);
              var t4 = n2.repeatedPushMap[e4.sub_cmd + e4.msg_id] || 0;
              n2.repeatedPushMap[e4.sub_cmd + e4.msg_id] = t4 + 1;
            })) : e3 === h.c.Accesshub.cmd ? n2.userMgr.onPushAccesshub(t3) : (n2.dataReport.reportNetworkRequest(e3, t3), e3 === h.c.sw_push_kickout.cmd ? n2.userMgr.onPushKickout(t3) : e3 === h.c.sw_push_redirect.cmd && n2.userMgr.onPushRedirect(t3.quey_user_id));
          }, this.onLogined = function() {
            n2.pushTimer || (n2.pushTimer = setInterval(n2.reportPushEvent, 6e4));
          }, this.onLogout = function() {
            n2.pushTimer && clearInterval(n2.pushTimer), n2.pushTimer = 0;
          }, this.reportPushEvent = function() {
            var e3;
            n2.dataReport && (e3 = { flag: false }, Object.values(n2.msgPushMap).forEach(function(t3) {
              var r2 = t3.name;
              t3 = t3.times;
              return n2.addMessagePushDelay(r2, t3, e3);
            }), e3.flag && (delete e3.flag, n2.dataReport.reportSDKEvent("/sdk/msg/push_delay", e3)), e3 = { flag: false }, Object.keys(n2.repeatedPushMap).forEach(function(t3) {
              1 < n2.repeatedPushMap[t3] && (e3.flag = true, e3[t3] = n2.repeatedPushMap[t3]);
            }), (n2.repeatedPushMap = e3).flag && n2.dataReport.reportPushEvent("repeated", 0, "", e3));
          }, this.eventBus = new i.a(), this.engineConfig = o.a.getInstance().settings.initEngine(e2, t2, this.eventBus), this.logger = o.a.getInstance().logger, this.dataReport = o.a.getInstance().dataReport, this.paramValid = new s.a(this.logger), this.eventBus.add(h.t.ILogined, this.onLogined), this.eventBus.add(h.t.ILogout, this.onLogout), r(111)("./" + (p.n ? "ZIMFileStoreImpl" : "ZIMIDBImpl")).ZIMStoreImpl);
          this.dbMgr = new g2(t2), this.connMgr = new a.a(this.engineConfig, this.eventBus), this.connMgr.initEvent(this.onConnectedEvent, this.onDisConnectedEvent, this.onPushEvent), this.groupMgr = new c.a(this.engineConfig, this.eventBus, this.connMgr, this.dbMgr), this.userMgr = new l.a(this.engineConfig, this.eventBus, this.connMgr, this.dbMgr), this.callMgr = new d.a(this.engineConfig, this.eventBus, this.connMgr, this.dbMgr), this.convMgr = new u.a(this.engineConfig, this.eventBus, this.connMgr, this.dbMgr, this.groupMgr);
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return l;
        });
        var n = r(1), o = r(0), s = 6000001, i = o.J.Conversation, a = o.J.Room, u = o.J.Group, c = o.J.Database, l = (d.prototype.validID = function(e2, t2, r2, o2) {
          var i2;
          if (!Object(n.l)(e2))
            return i2 = Object(n.s)(s, e2 + " is invalid."), this.logger.warn(r2, o2, ((r2 = { error: i2 })[e2] = t2, r2)), i2;
        }, d.prototype.validName = function(e2, t2, r2, o2) {
          var i2;
          if (!this._isValidName(t2))
            return i2 = Object(n.s)(s, e2 + " is invalid."), this.logger.warn(r2, o2, ((r2 = { error: i2 })[e2] = t2, r2)), i2;
        }, d.prototype.validTwoID = function(e2, t2, r2, o2, i2, a2) {
          var u2 = "";
          if (!Object(n.l)(t2) && (u2 = e2 + " is invalid.") || !Object(n.l)(o2) && (u2 = r2 + " is invalid."))
            return u2 = Object(n.s)(s, u2), this.logger.warn(i2, a2, ((i2 = { error: u2 })[e2] = t2, i2[r2] = o2, i2)), u2;
        }, d.prototype.validTwoName = function(e2, t2, r2, o2, i2, a2) {
          var u2 = "";
          if (!this._isValidName(t2) && (u2 = e2 + " is invalid.") || !this._isValidName(o2) && (u2 = r2 + " is invalid."))
            return u2 = Object(n.s)(s, u2), this.logger.warn(i2, a2, ((i2 = { error: u2 })[e2] = t2, i2[r2] = o2, i2)), u2;
        }, d.prototype.validIDAndName = function(e2, t2, r2, o2, i2, a2) {
          var u2 = "";
          if (!Object(n.l)(t2) && (u2 = e2 + " is invalid.") || !this._isValidName(o2) && (u2 = r2 + " is invalid."))
            return u2 = Object(n.s)(s, u2), this.logger.warn(i2, a2, ((i2 = { error: u2 })[e2] = t2, i2[r2] = o2, i2)), u2;
        }, d.prototype.login = function(e2) {
          var t2 = "";
          if ((e2 ? !Object(n.l)(e2.userID) && (t2 = "The userInfo instance of userID is invalid.") : t2 = "userInfo is invalid.") || !this._isValidName(e2.userName) && (t2 = "The userInfo instance of userName is invalid."))
            return t2 = Object(n.s)(s, t2), this.logger.warn(o.J.User, o.I.Login, { error: t2, userInfo: e2 }), t2;
        }, d.prototype.queryUsersInfo = function(e2) {
          var t2;
          if (!Array.isArray(e2) || !e2.length)
            return t2 = Object(n.s)(s, "userIDs is invalid."), this.logger.warn(o.J.User, o.I.QueryUsersInfo, { error: t2, userIDs: e2 }), t2;
        }, d.prototype.validConvIDAndType = function(e2, t2, r2) {
          var a2 = "";
          if (Object(n.l)(e2) ? t2 !== o.q.Peer && t2 !== o.q.Group && (a2 = "conversationType is invalid.") : a2 = "conversationID is invalid.")
            return a2 = Object(n.s)(s, a2), this.logger.warn(i, r2, { error: a2, conversationID: e2, conversationType: t2 }), a2;
        }, d.prototype.queryConversationList = function(e2, t2) {
          var r2 = "";
          if ((!e2 || "number" != typeof e2.count || e2.count < 0) && (r2 = "The config or config instance of count is invalid."))
            return r2 = Object(n.s)(s, r2), this.logger.warn(i, t2, { error: r2, config: e2 }), r2;
        }, d.prototype.setNotificationStatus = function(e2, t2, r2) {
          var a2 = "";
          if ((Object(n.l)(t2) ? r2 !== o.q.Group && (a2 = "conversationType is not support.") : a2 = "conversationID is invalid.") || e2 !== o.o.Notify && e2 !== o.o.DoNotDisturb && (a2 = "status is invalid."))
            return a2 = Object(n.s)(s, a2), this.logger.warn(i, o.I.SetNotificationStatus, { error: a2, conversationID: t2, conversationType: r2, status: e2 }), a2;
        }, d.prototype.updatePinnedState = function(e2, t2, r2) {
          var a2 = this.validConvIDAndType(t2, r2, o.I.UpdatePinnedState);
          return a2 || ("boolean" != typeof e2 ? (a2 = Object(n.s)(s, "isPinned is invalid"), this.logger.warn(i, o.I.UpdatePinnedState, { error: a2, conversationID: t2, conversationType: r2, isPinned: e2 }), a2) : void 0);
        }, d.prototype.sendMessage = function(e2, t2, r2, a2) {
          var u2 = "";
          if ((Object(n.l)(t2) ? !this._checkConvType(r2) && (u2 = "conversationType is invalid.") : u2 = "toConversationID is invalid.") || !e2 && (u2 = "message is invalid.") || !a2 && (u2 = "config is invalid.") || !this._checkMesageType(e2.type, r2) && (u2 = "message type is invalid.") || !this._checkMesagePriority(a2.priority) && (u2 = "config priority is invalid.") || !this._checkMesageContent(r2, e2.type, e2.message) && (u2 = "The message instance of message is invalid.") || !this._checkMessageReceipt(r2, e2.type, a2.hasReceipt) && (u2 = "The message type is not support setting receipt.") || !this._checkSubType(e2) && (u2 = "The message subType is invalid"))
            return u2 = Object(n.s)(s, u2), this.logger.warn(i, o.I.SendMessage, { error: u2, toConversationID: t2, conversationType: r2, message: e2, config: a2 }), u2;
        }, d.prototype.sendMediaMessage = function(e2, t2, r2, a2) {
          var u2 = "";
          if ((Object(n.l)(t2) ? !this._checkConvType(r2) && (u2 = "conversationType is invalid.") : u2 = "toConversationID is invalid.") || !e2 && (u2 = "message is invalid.") || !a2 && (u2 = "config is invalid.") || !this._checkMediaMesageType(e2.type) && (u2 = "message type is invalid.") || !this._checkMesagePriority(a2.priority) && (u2 = "config priority is invalid.") || !this._checkMessageReceipt(r2, e2.type, a2.hasReceipt) && (u2 = "The message type is not support setting receipt.") || !e2.fileLocalPath && !e2.fileDownloadUrl && (u2 = "The message instance of fileLocalPath and fileDownloadUrl is empty."))
            return u2 = Object(n.s)(s, u2), this.logger.warn(i, o.I.SendMediaMessage, { error: u2, toConversationID: t2, conversationType: r2, message: e2, config: a2 }), u2;
        }, d.prototype.deleteMessages = function(e2, t2, r2, a2) {
          return (t2 = this.validConvIDAndType(t2, r2, o.I.DeleteMessages)) || (!Array.isArray(e2) || !e2.length && a2 && a2.isAlsoDeleteServerMessage ? (r2 = Object(n.s)(s, "messageList is invalid."), this.logger.warn(i, o.I.DeleteMessages, { error: r2, messageList: e2, config: a2 }), r2) : void 0);
        }, d.prototype.queryHistoryMessage = function(e2, t2, r2) {
          var a2 = "";
          if ((Object(n.l)(e2) ? !this._checkConvType(t2) && (a2 = "conversationType is invalid.") : a2 = "conversationID is invalid.") || (!r2 || "number" != typeof r2.count || r2.count < 0) && (a2 = "The config or config instance of count is invalid."))
            return r2 = Object(n.s)(s, a2), this.logger.warn(i, o.I.QueryHistoryMessage, { error: r2, conversationID: e2, conversationType: t2 }), r2;
        }, d.prototype.insertMessageToLocalDB = function(e2, t2, r2, a2) {
          if (u2 = this.validConvIDAndType(t2, r2, o.I.InsertMessageToLocalDB))
            return u2;
          var u2 = "";
          return (Object(n.l)(a2) ? !e2 && (u2 = "message is invalid.") : u2 = "senderUserID is invalid.") || !this._checkInsertMesageType(e2.type) && (u2 = "message type is invalid.") || !this._checkInsertMesageContent(e2) && (u2 = "The message instance of message is invalid.") ? (u2 = Object(n.s)(s, u2), this.logger.warn(i, o.I.InsertMessageToLocalDB, { error: u2, conversationID: t2, conversationType: r2, senderUserID: a2, message: e2 }), u2) : void 0;
        }, d.prototype.updateMessageLocalExtendedData = function(e2, t2) {
          var r2 = "";
          if (this._isValidName(e2) ? (!t2 || !t2.conversationID || !t2.messageID) && (r2 = "message is invalid.") : r2 = "localExtendedData is invalid.")
            return r2 = Object(n.s)(s, r2), this.logger.warn(i, o.I.UpdateMessageLocalExtendedData, { error: r2, localExtendedData: e2, message: t2 }), r2;
        }, d.prototype.revokeMessage = function(e2) {
          var t2 = "";
          if ((!e2 || e2.isUserInserted || e2.isBroadcastMessage || e2.sentStatus != o.P.Success ? t2 = "The message instance is not a successful message." : (e2.type == o.R.Command || e2.type == o.R.Revoke || e2.type == o.R.Barrage) && (t2 = "The message type is not support.")) || e2.conversationType !== o.q.Peer && e2.conversationType !== o.q.Group && (t2 = "Only peer and group message can be revoked."))
            return t2 = Object(n.s)(s, t2), this.logger.warn(i, o.I.RevokeMessage, { error: t2, message: e2 }), t2;
        }, d.prototype.sendReceiptRead = function(e2, t2) {
          var r2 = "";
          if (Object(n.l)(e2) ? t2 !== o.q.Peer && (r2 = "conversationType is invalid.") : r2 = "conversationID is invalid.")
            return r2 = Object(n.s)(s, r2), this.logger.warn(i, o.I.SendReceiptRead, { error: r2, conversationID: e2, conversationType: t2 }), r2;
        }, d.prototype.sendMessageReceiptsRead = function(e2, t2, r2) {
          if (a2 = this.validConvIDAndType(t2, r2, o.I.SendMessageReceiptsRead))
            return a2;
          var a2 = "";
          return Array.isArray(e2) && 0 != e2.length ? e2.some(function(e3) {
            return e3.conversationID == t2 && e3.conversationType == r2 && e3.direction == o.K.Receive && e3.receiptStatus == o.M.Processing;
          }) || (a2 = "Every one of message list is not a received receipt message in the conversationID.") : a2 = "messageList is invalid.", a2 ? (a2 = Object(n.s)(s, a2), this.logger.warn(i, o.I.SendMessageReceiptsRead, { error: a2, conversationID: t2, conversationType: r2, messageList: e2 }), a2) : void 0;
        }, d.prototype.queryReceiptsInfo = function(e2, t2, r2) {
          if (a2 = this.validConvIDAndType(t2, r2, o.I.QueryReceiptsInfo))
            return a2;
          var a2 = "";
          return Array.isArray(e2) && 0 != e2.length ? e2.every(function(e3) {
            return !e3.receiptStatus || e3.conversationID !== t2 || e3.conversationType !== r2;
          }) && (a2 = "Every one of message list is not a receipt message in the conversationID.") : a2 = "messageList is invalid.", a2 ? (a2 = Object(n.s)(s, a2), this.logger.warn(i, o.I.QueryReceiptsInfo, { error: a2, conversationID: t2, conversationType: r2, messageList: e2 }), a2) : void 0;
        }, d.prototype.queryReceiptMemberList = function(e2, t2, r2, a2, u2) {
          var c2 = "";
          if ((Object(n.l)(t2) ? (!r2 || "number" != typeof r2.count || r2.count < 0) && (c2 = "config or the config instance of count is invalid.") : c2 = "groupID is invalid.") || (!e2 || e2.senderUserID != u2 || e2.sentStatus != o.P.Success || !e2.receiptStatus) && (c2 = "The message instance is not a successful receipt message sent by self.") || (e2.type == o.R.Command || e2.type == o.R.Revoke) && (c2 = "The message type is not support.") || (e2.conversationID !== t2 || e2.conversationType !== o.q.Group) && (c2 = "The message instance is not belong the groupID."))
            return u2 = Object(n.s)(s, c2), c2 = a2 ? o.I.QueryReceiptReadMemberList : o.I.QueryReceiptUnreadMemberList, this.logger.warn(i, c2, { error: u2, groupID: t2, message: e2, config: r2 }), u2;
        }, d.prototype.messageReaction = function(e2, t2, r2) {
          r2 = r2 ? o.I.AddReaction : o.I.DeleteReaction;
          var a2 = "";
          if (("string" != typeof e2 ? a2 = "reactionType is invalid" : (!t2 || t2.isUserInserted || t2.isBroadcastMessage || t2.sentStatus != o.P.Success) && (a2 = "The message instance is not a successful message.")) || (t2.type == o.R.Command || t2.type == o.R.Revoke || t2.type == o.R.Barrage) && (a2 = "The message type is not support.") || t2.conversationType !== o.q.Peer && t2.conversationType !== o.q.Group && (a2 = "Only peer and group message can have reaction."))
            return e2 = Object(n.s)(s, a2), this.logger.warn(i, r2, { error: e2, message: t2 }), e2;
        }, d.prototype.queryMessageReactionUserList = function(e2, t2) {
          var r2 = "";
          if ((!t2 || "number" != typeof t2.count || t2.count < 0 || 100 < t2.count ? r2 = "config or the config instance of count is invalid." : (!e2 || e2.isUserInserted || e2.isBroadcastMessage || e2.sentStatus != o.P.Success) && (r2 = "The message instance is not a successful message.")) || (e2.type == o.R.Command || e2.type == o.R.Revoke || e2.type == o.R.Barrage) && (r2 = "The message type is not support.") || e2.conversationType !== o.q.Peer && e2.conversationType !== o.q.Group && (r2 = "Only peer and group message can have reaction."))
            return r2 = Object(n.s)(s, r2), this.logger.warn(i, o.I.QueryReaction, { error: r2, message: e2, config: t2 }), r2;
        }, d.prototype.createRoom = function(e2, t2, r2) {
          var i2 = "";
          if ((e2 ? !Object(n.l)(e2.roomID) && (i2 = "The roomInfo instance of roomID is invalid.") : i2 = "roomInfo is invalid.") || !this._isValidName(e2.roomName) && (i2 = "The roomInfo instance of roomName is invalid.") || t2 && t2.roomAttributes && !this._isValidAttribute(t2.roomAttributes, true) && (i2 = "The Key and Value of the roomAttributes property of the config instance only support string types."))
            return i2 = Object(n.s)(s, i2), r2 = r2 ? o.I.EnterRoom : o.I.CreateRoom, this.logger.warn(a, r2, { error: i2, roomInfo: e2, config: t2 }), i2;
        }, d.prototype.queryRoomMemberList = function(e2, t2) {
          var r2 = "";
          if (Object(n.l)(e2) ? (!t2 || "number" != typeof t2.count || t2.count < 0) && (r2 = "config or the config instance of count is invalid.") : r2 = "roomID is invalid.")
            return r2 = Object(n.s)(s, r2), this.logger.warn(a, o.I.QueryRoomMemberList, { error: r2, roomID: e2, config: t2 }), r2;
        }, d.prototype.queryRoomMembers = function(e2, t2) {
          var r2 = "";
          if (Object(n.l)(t2) ? (!Array.isArray(e2) || !e2.length) && (r2 = "userIDs is invalid.") : r2 = "roomID is invalid.")
            return r2 = Object(n.s)(s, r2), this.logger.warn(a, o.I.QueryRoomMembers, { error: r2, roomID: t2, userIDs: e2 }), r2;
        }, d.prototype.setRoomAttributes = function(e2, t2) {
          var r2 = "";
          if (Object(n.l)(t2) ? !this._isValidAttribute(e2) && (r2 = "The Key and Value of the roomAttributes only support string types.") : r2 = "roomID is invalid.")
            return r2 = Object(n.s)(s, r2), this.logger.warn(a, o.I.SetRoomAttributes, { error: r2, roomID: t2, roomAttributes: e2 }), r2;
        }, d.prototype.deleteRoomAttributes = function(e2, t2) {
          var r2 = "";
          if (Object(n.l)(t2) ? (!Array.isArray(e2) || !e2.length || e2.some(function(e3) {
            return !e3 || "string" != typeof e3;
          })) && (r2 = "Every one of keys must be a valid string type.") : r2 = "roomID is invalid.")
            return r2 = Object(n.s)(s, r2), this.logger.warn(a, o.I.DeleteRoomAttributes, { error: r2, roomID: t2, keys: e2 }), r2;
        }, d.prototype.setRoomMembersAttributes = function(e2, t2, r2) {
          var i2 = "";
          if ((Object(n.l)(r2) ? !this._isValidAttribute(e2) && (i2 = "The Key and Value of the attributes only support string types.") : i2 = "roomID is invalid.") || (!Array.isArray(t2) || !t2.length || t2.some(function(e3) {
            return !e3 || "string" != typeof e3;
          })) && (i2 = "Every one of userIDs must be a valid string type."))
            return t2 = Object(n.s)(s, i2), this.logger.warn(a, o.I.SetRoomMembersAttributes, { error: t2, roomID: r2, attributes: e2 }), t2;
        }, d.prototype.queryRoomMembersAttributes = function(e2, t2) {
          var r2 = "";
          if (Object(n.l)(t2) ? (!Array.isArray(e2) || !e2.length || e2.some(function(e3) {
            return !e3 || "string" != typeof e3;
          })) && (r2 = "Every one of userIDs must be a valid string type.") : r2 = "roomID is invalid.")
            return r2 = Object(n.s)(s, r2), this.logger.warn(a, o.I.QueryRoomMembersAttributes, { error: r2, roomID: t2, userIDs: e2 }), r2;
        }, d.prototype.queryRoomMemberAttributesList = function(e2, t2) {
          var r2 = "";
          if (Object(n.l)(e2) ? (!t2 || "number" != typeof t2.count || t2.count < 0) && (r2 = "config or the config instance of count is invalid.") : r2 = "roomID is invalid.")
            return r2 = Object(n.s)(s, r2), this.logger.warn(a, o.I.QueryRoomMemberAttributesList, { error: r2, roomID: e2, config: t2 }), r2;
        }, d.prototype.validGroupUserIDs = function(e2, t2, r2) {
          var o2 = "";
          if (Array.isArray(e2) && e2.length && !e2.some(function(e3) {
            return !e3 || "string" != typeof e3;
          }) ? !Object(n.l)(t2) && (o2 = "groupID is invalid.") : o2 = "Every one of userIDs must be a valid string type.")
            return o2 = Object(n.s)(s, o2), this.logger.warn(u, r2, { error: o2, groupID: t2, userIDs: e2 }), o2;
        }, d.prototype.createGroup = function(e2, t2, r2) {
          var i2 = String(e2.groupID || "").trim(), a2 = "";
          if ((i2 && !Object(n.l)(i2, true) ? a2 = "The groupInfo instance of groupID is invalid." : !this._isValidName(e2.groupName) && (a2 = "The groupInfo instance of groupName is invalid.")) || !this._isValidName(e2.groupAvatarUrl) && (a2 = "The groupInfo instance of groupAvatarUrl is invalid.") || !this._isValidName(r2.groupNotice) && (a2 = "The config instance of groupNotice is invalid.") || t2 && !Array.isArray(t2) && (a2 = "Every one of userIDs must be a valid string type.") || !this._isValidAttribute(r2.groupAttributes, true) && (a2 = "The Key and Value of the groupAttributes property of the config instance only support string types."))
            return i2 = Object(n.s)(s, a2), this.logger.warn(u, o.I.CreateGroup, { error: i2, groupInfo: e2, config: r2, userIDs: t2 }), i2;
        }, d.prototype.setGroupAttributes = function(e2, t2) {
          var r2 = "";
          if (Object(n.l)(t2) ? !this._isValidAttribute(e2) && (r2 = "The Key and Value of the groupAttributes only support string types.") : r2 = "groupID is invalid.")
            return r2 = Object(n.s)(s, r2), this.logger.warn(u, o.I.SetGroupAttributes, { error: r2, groupID: t2, groupAttributes: e2 }), r2;
        }, d.prototype.deleteGroupAttributes = function(e2, t2) {
          var r2 = "";
          if (Object(n.l)(t2) ? (!Array.isArray(e2) || !e2.length || e2.some(function(e3) {
            return !e3 || "string" != typeof e3;
          })) && (r2 = "Every one of kyes must be a valid string type.") : r2 = "groupID is invalid.")
            return r2 = Object(n.s)(s, r2), this.logger.warn(u, o.I.DeleteGroupAttributes, { error: r2, groupID: t2, keys: e2 }), r2;
        }, d.prototype.queryGroupAttributes = function(e2, t2) {
          var r2 = "";
          if (Object(n.l)(e2) ? Array.isArray(t2) && (!t2.length || t2.some(function(e3) {
            return !e3 || "string" != typeof e3;
          })) && (r2 = "Every one of kyes must be a valid string type.") : r2 = "groupID is invalid.")
            return r2 = Object(n.s)(s, r2), this.logger.warn(u, o.I.QueryGroupAttributes, { error: r2, groupID: e2, keys: t2 }), r2;
        }, d.prototype.setGroupMemberNickname = function(e2, t2, r2) {
          var i2 = "";
          if ((this._isValidName(e2) ? !Object(n.l)(t2) && (i2 = "forUserID is invalid.") : i2 = "nickname is invalid.") || !Object(n.l)(r2) && (i2 = "groupID is invalid."))
            return i2 = Object(n.s)(s, i2), this.logger.warn(u, o.I.SetGroupMemberNickname, { error: i2, groupID: r2, forUserID: t2, nickname: e2 }), i2;
        }, d.prototype.setGroupMemberRole = function(e2, t2, r2) {
          var i2 = "";
          if (("number" != typeof e2 ? i2 = "role is invalid." : !Object(n.l)(t2) && (i2 = "forUserID is invalid.")) || !Object(n.l)(r2) && (i2 = "groupID is invalid."))
            return i2 = Object(n.s)(s, i2), this.logger.warn(u, o.I.SetGroupMemberRole, { error: i2, groupID: r2, forUserID: t2, role: e2 }), i2;
        }, d.prototype.callInvite = function(e2, t2) {
          var r2 = "";
          if (Array.isArray(e2) && e2.length ? t2 && "number" == typeof t2.timeout && (t2.timeout % 1 != 0 || t2.timeout < 1 || 600 < t2.timeout) && (r2 = "The config instance of timeout is invalid.") : r2 = "invitees is invalid.")
            return r2 = Object(n.s)(s, r2), this.logger.warn(o.J.Call, o.I.CallInvite, { error: r2, invitees: e2, config: t2 }), r2;
        }, d.prototype.callIDAndInvitees = function(e2, t2, r2) {
          var i2 = "";
          if (Object(n.l)(t2) ? (!Array.isArray(e2) || !e2.length) && (i2 = "invitees is invalid.") : i2 = "callID is invalid.")
            return i2 = Object(n.s)(s, i2), this.logger.warn(o.J.Call, r2, { error: i2, callID: t2, invitees: e2 }), i2;
        }, d.prototype.searchConversations = function(e2) {
          var t2 = "";
          if ((e2 ? ("number" != typeof e2.totalConversationCount || e2.totalConversationCount < 1) && (t2 = "The config instance of totalConversationCount is invalid.") : t2 = "config is invalid.") || ("number" != typeof e2.conversationMessageCount || e2.conversationMessageCount < 1) && (t2 = "The config instance of count is invalid.") || Array.isArray(e2.keywords) && (5 < e2.keywords.length || e2.keywords.some(function(e3) {
            return !e3;
          })) && (t2 = "The config instance of keywords is invalid.") || Array.isArray(e2.senderUserIDs) && (5 < e2.senderUserIDs.length || e2.senderUserIDs.some(function(e3) {
            return !e3;
          })) && (t2 = "The config instance of senderUserIDs is invalid."))
            return t2 = Object(n.s)(s, t2), this.logger.warn(c, o.I.SearchConvs, { config: e2, error: t2 }), t2;
        }, d.prototype.searchMessages = function(e2, t2) {
          var r2 = "";
          if ((e2 ? ("number" != typeof e2.count || e2.count < 1) && (r2 = "The config instance of count is invalid.") : r2 = "config is invalid.") || Array.isArray(e2.keywords) && (5 < e2.keywords.length || e2.keywords.some(function(e3) {
            return !e3;
          })) && (r2 = "The config instance of keywords is invalid.") || Array.isArray(e2.senderUserIDs) && (5 < e2.senderUserIDs.length || e2.senderUserIDs.some(function(e3) {
            return !e3;
          })) && (r2 = "The config instance of senderUserIDs is invalid."))
            return r2 = Object(n.s)(s, r2), this.logger.warn(c, t2, { config: e2, error: r2 }), r2;
        }, d.prototype.searchGroups = function(e2) {
          var t2 = "";
          if ((e2 ? ("number" != typeof e2.count || e2.count < 1) && (t2 = "The config instance of count is invalid.") : t2 = "config is invalid.") || (!Array.isArray(e2.keywords) || !e2.keywords.length || 5 < e2.keywords.length || e2.keywords.some(function(e3) {
            return !e3;
          })) && (t2 = "The config instance of keywords is invalid."))
            return t2 = Object(n.s)(s, t2), this.logger.warn(c, o.I.SearchGroups, { error: t2, config: e2 }), t2;
        }, d.prototype.searchGroupMembers = function(e2, t2) {
          var r2 = "";
          if ((Object(n.l)(e2) ? !t2 && (r2 = "config is invalid.") : r2 = "groupID is invalid.") || ("number" != typeof t2.count || t2.count < 1) && (r2 = "The config instance of count is invalid.") || (!Array.isArray(t2.keywords) || !t2.keywords.length || 5 < t2.keywords.length || t2.keywords.some(function(e3) {
            return !e3;
          })) && (r2 = "The config instance of keywords is invalid."))
            return r2 = Object(n.s)(s, r2), this.logger.warn(c, o.I.SearchGroupMembers, { error: r2, groupID: e2, config: t2 }), r2;
        }, d.prototype._checkMesageContent = function(e2, t2, r2) {
          return !((t2 === o.R.Text || t2 === o.R.Custom || t2 === o.R.Barrage && e2 === o.q.Room) && ("string" != typeof r2 || !r2 || !r2.trim() || Object(n.i)(r2).length > o.l.MAX_MESSAGE_SIZE) || !(t2 !== o.R.Command || r2 instanceof Uint8Array && r2.length && !(r2.length > o.l.MAX_MESSAGE_SIZE) && Object(n.f)(r2).trim()));
        }, d.prototype._checkMesagePriority = function(e2) {
          return e2 === o.L.Low || e2 === o.L.Medium || e2 === o.L.High;
        }, d.prototype._checkMesageType = function(e2, t2) {
          return e2 === o.R.Text || e2 === o.R.Command || e2 === o.R.Custom || t2 === o.q.Room && e2 === o.R.Barrage;
        }, d.prototype._checkMediaMesageType = function(e2) {
          return e2 === o.R.Image || e2 === o.R.File || e2 === o.R.Audio || e2 === o.R.Video;
        }, d.prototype._checkInsertMesageType = function(e2) {
          return e2 === o.R.Text || e2 === o.R.System || e2 === o.R.Custom || e2 === o.R.Image || e2 === o.R.File || e2 === o.R.Audio || e2 === o.R.Video;
        }, d.prototype._checkInsertMesageContent = function(e2) {
          var t2 = e2.message;
          return !(!(e2.type !== o.R.Text && e2.type !== o.R.System && e2.type !== o.R.Custom || "string" == typeof t2 && t2 && t2.trim() && !(Object(n.i)(t2).length > o.l.MAX_MESSAGE_SIZE)) || e2.type >= o.R.Image && e2.type <= o.R.Video && !e2.fileLocalPath && !e2.fileDownloadUrl);
        }, d.prototype._checkConvType = function(e2) {
          return e2 === o.q.Peer || e2 === o.q.Room || e2 === o.q.Group;
        }, d.prototype._checkMessageReceipt = function(e2, t2, r2) {
          return !r2 || e2 != o.q.Room && t2 != o.R.Command && t2 != o.R.Barrage;
        }, d.prototype._checkSubType = function(e2) {
          return e2.type !== o.R.Custom || e2.type == o.R.Custom && 0 <= e2.subType && e2.subType <= 200;
        }, d);
        function d(e2) {
          this.logger = e2, this._isValidName = function(e3) {
            return "string" == typeof e3 && e3.length <= o.l.MAX_NAME_SIZE;
          }, this._isValidAttribute = function(e3, t2) {
            return !(!e3 || "[object Object]" !== Object.prototype.toString.call(e3)) && (e3 = Object.values(e3), !(!t2 && !e3.length) && e3.every(function(e4) {
              return "string" == typeof e4;
            }));
          };
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return a;
        }), r(22);
        var n = r(2), o = r(0), s = function(e2, t2) {
          var r2 = "function" == typeof Symbol && e2[Symbol.iterator];
          if (!r2)
            return e2;
          var n2, o2, s2 = r2.call(e2), i2 = [];
          try {
            for (; (void 0 === t2 || 0 < t2--) && !(n2 = s2.next()).done; )
              i2.push(n2.value);
          } catch (e3) {
            o2 = { error: e3 };
          } finally {
            try {
              n2 && !n2.done && (r2 = s2.return) && r2.call(s2);
            } finally {
              if (o2)
                throw o2.error;
            }
          }
          return i2;
        }, i = function(e2, t2, r2) {
          if (r2 || 2 === arguments.length)
            for (var n2, o2 = 0, s2 = t2.length; o2 < s2; o2++)
              !n2 && o2 in t2 || ((n2 = n2 || Array.prototype.slice.call(t2, 0, o2))[o2] = t2[o2]);
          return e2.concat(n2 || Array.prototype.slice.call(t2));
        }, a = (u.prototype.setContext = function(e2) {
          this.context = e2;
        }, u.prototype.on = function(e2, t2) {
          this.listenerMap.set(e2, t2);
        }, u.prototype.off = function(e2) {
          e2 ? this.listenerMap.delete(e2) : (this.listenerMap.clear(), this.innerEvents[o.t.ILogined].length = 0, this.innerEvents[o.t.ILogout].length = 0, this.innerEvents[o.t.IUpdateSelf].length = 0, this.innerEvents[o.t.IJoinedGroup].length = 0, this.innerEvents[o.t.ILeftGroup].length = 0, this.innerEvents[o.t.ISyncGroups].length = 0, this.innerEvents[o.t.ISyncGroupInfo].length = 0, this.innerEvents[o.t.IUnreadMsgCount].length = 0, this.innerEvents[o.t.IConnectedRoom].length = 0, this.innerEvents[o.t.IConnected].length = 0, this.innerEvents[o.t.IDisConnected].length = 0, this.innerEvents[o.t.INetworkChange].length = 0, this.innerEvents[o.t.IIdleFetchConvMsg].length = 0, this.innerEvents[o.t.ITriggerHB].length = 0, this.innerEvents[o.t.IQPSSend].length = 0, this.context = null);
        }, u.prototype.emit = function(e2, t2, r2) {
          var s2 = this, i2 = this.listenerMap.get(e2);
          "function" == typeof i2 && (r2 = r2 ? "EV." + e2 + ":" + r2 : "EV." + e2, n.a.getInstance().logger.info(o.J.Manager, r2, t2), setTimeout(function() {
            try {
              i2(s2.context, t2);
            } catch (e3) {
              throw e3;
            }
          }, 0));
        }, u.prototype.add = function(e2, t2) {
          this.innerEvents[e2].push(t2);
        }, u.prototype.remove = function(e2, t2) {
          var r2;
          t2 ? -1 !== (r2 = this.innerEvents[e2].findIndex(function(e3) {
            return e3 === t2;
          })) && this.innerEvents[e2].splice(r2, 1) : this.innerEvents[e2].length = 0;
        }, u.prototype.exec = function(e2) {
          for (var t2, r2 = [], a2 = 1; a2 < arguments.length; a2++)
            r2[a2 - 1] = arguments[a2];
          -1 == this.unlogEvents.indexOf(e2) && (t2 = e2 == o.t.ILogined ? void 0 : r2.length <= 1 ? r2[0] : r2, n.a.getInstance().logger.info(o.J.Manager, "IE." + e2, t2)), this.innerEvents[e2].forEach(function(e3) {
            return e3.apply(void 0, i([], s(r2), false));
          });
        }, u);
        function u() {
          var e2;
          this.listenerMap = /* @__PURE__ */ new Map(), this.unlogEvents = [o.t.ITriggerHB, o.t.IConnectedRoom, o.t.IQPSSend], this.innerEvents = ((e2 = {})[o.t.ILogined] = [], e2[o.t.ILogout] = [], e2[o.t.IUpdateSelf] = [], e2[o.t.IJoinedGroup] = [], e2[o.t.ILeftGroup] = [], e2[o.t.ISyncGroups] = [], e2[o.t.ISyncGroupInfo] = [], e2[o.t.IUnreadMsgCount] = [], e2[o.t.IConnectedRoom] = [], e2[o.t.IConnected] = [], e2[o.t.IDisConnected] = [], e2[o.t.INetworkChange] = [], e2[o.t.IIdleFetchConvMsg] = [], e2[o.t.ITriggerHB] = [], e2[o.t.IQPSSend] = [], e2);
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return l;
        });
        var n = r(2), o = r(66), s = r(67), i = r(1), a = r(0), u = function() {
          return (u = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var o2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, o2) && (e2[o2] = t2[o2]);
            return e2;
          }).apply(this, arguments);
        }, c = a.J.Connection, l = (d.prototype.initEvent = function(e2, t2, r2) {
          this.onConnectedEvent = e2, this.onDisConnectedEvent = t2, this.onPushEvent = r2;
        }, d.prototype.create = function() {
          this.streamID++, this.close();
          var e2 = new o.a(this.eventBus, this.engineConfig);
          return e2.onconnected = this.onConnectedEvent, e2.ondisconnected = this.onDisConnectedEvent, e2.onmessage = this.onmessage, this.connection = e2, this.initUrls(), e2.create(this.urls);
        }, d.prototype.close = function() {
          this.connection && (this.logger.warn(c, "closeconn"), this.connection.destroy()), this.connection = null;
        }, d.prototype.destroy = function() {
          this.requestMap.clear(), this.qpsStgy.destroy(), this.close(), this.logger = null, this.dataReport = null, this.protobuf = null, this.engineConfig = null;
        }, d.prototype.setUrls = function(e2) {
          this.urls = e2;
        }, d.prototype.sendDispatchRequest = function() {
          var e2 = ++this.seq, t2 = this.protobuf.encodeAccesshubDispatchRequest(this.streamID, e2, this.engineConfig), r2 = (this.connection.send(t2), { time: /* @__PURE__ */ new Date(), seq: e2, size: t2.length, cmd: "AccesshubDispatchRequest" });
          this.createRequest(e2, this.engineConfig.cloudSetting.req_to.def, r2), e2 = ++this.seq, t2 = this.protobuf.encodeAccesshubGetConfigRequest(this.streamID, e2, this.engineConfig), this.connection.send(t2), r2 = { time: /* @__PURE__ */ new Date(), seq: e2, size: t2.length, cmd: "AccesshubGetConfigRequest" }, this.createRequest(e2, this.engineConfig.cloudSetting.req_to.def, r2);
        }, d.prototype.sendHttpRequest = function(e2, t2, r2) {
          var n2 = ++this.seq;
          r2 = this.protobuf.encodeAccesshubHTTPRequest(this.streamID, n2, this.engineConfig, e2, t2, r2), this.connection.send(r2), r2 = { time: /* @__PURE__ */ new Date(), seq: n2, size: r2.length, cmd: "AccesshubHTTPRequest", http: e2, body: t2 };
          return this.createRequest(n2, this.engineConfig.cloudSetting.req_to.def, r2);
        }, d.prototype.sendRequest = function(e2, t2, r2, n2, o2) {
          return void 0 === r2 && (r2 = a.i.API), void 0 === n2 && (n2 = this.engineConfig.cloudSetting.req_to.def), void 0 === o2 && (o2 = true), this.qpsStgy.canPass(e2.w, 1) ? this.sendRequestInner(e2.cmd, t2, r2, n2, o2) : this.createQPSRequest(e2.cmd, t2, r2, n2, o2, e2.w);
        }, d.prototype.sendRequestWithHeartbeat = function(e2, t2) {
          return this.sendRequestInner(e2, t2, a.i.SDK, this.engineConfig.cloudSetting.req_to.def, false);
        }, d.prototype.sendRequestWithNoRsp = function(e2, t2) {
          e2 = this.generateHeader(e2, a.i.SDK), e2 = this.protobuf.encodeRequest(e2, t2, this.streamID, this.engineConfig);
          try {
            this.connection.send(e2);
          } catch (e3) {
          }
        }, d.prototype.responseRequest = function(e2, t2, r2) {
          var n2, o2;
          return this.requestMap.has(e2) ? (n2 = (o2 = this.requestMap.get(e2)).timer, o2 = o2.resolve, clearTimeout(n2), t2 && (this.requestMap.delete(e2), o2({ code: r2 })), e2) : 0;
        }, d.prototype.initUrls = function() {
          if (!this.urls.length) {
            var e2 = this.settings.advancedConfig.geoFence.host.accesshub;
            if (e2)
              this.urls[0] = e2;
            else {
              this.urls[0] = "wss://accesshub-wss.zego.im/accesshub";
              try {
                var t2 = i.n ? i.n.getStorageSync(i.n._zisAlipay ? { key: this.urlKey } : this.urlKey) : localStorage.getItem(this.urlKey);
                if (!t2 || !t2.data)
                  return;
                this.urls = n.a.getInstance().crypto.decryptString("object" == typeof t2 ? t2.data : t2, this.engineConfig).split(",");
              } catch (e3) {
              }
            }
          }
        }, d.prototype.initQPSEvent = function() {
          this.eventBus.add(a.t.IQPSSend, this.sendQPSRequest.bind(this));
        }, d.prototype.sendRequestInner = function(e2, t2, r2, n2, o2) {
          var s2 = this.generateHeader(e2, r2), u2 = s2.seq;
          e2 == a.c.sw_login.cmd && (t2._seq = u2), -1 == this.pageMergeReportCmdList.indexOf(e2) && this.dataReport.beginNetworkRequest(e2, u2, r2, t2), r2 = this.protobuf.encodeRequest(s2, t2, this.streamID, this.engineConfig);
          try {
            this.connection.send(r2);
          } catch (e3) {
            return Promise.resolve(Object(i.s)(a.s.NetworkModuleNetworkError));
          }
          return o2 = o2 ? { time: /* @__PURE__ */ new Date(), seq: u2, caller: s2.caller_type, size: r2.length, rsize: -1, cmd: e2, body: t2 } : null, this.createRequest(u2, n2, o2, e2);
        }, d.prototype.sendQPSRequest = function(e2) {
          var t2 = this.requestMap.get(e2);
          if (t2) {
            var r2 = t2.timeout, n2 = (o2 = t2.header).cmd, o2 = (-1 == this.pageMergeReportCmdList.indexOf(n2) && this.dataReport.beginNetworkRequest(n2, e2, o2.caller_type, t2.body), this.protobuf.encodeRequest(o2, t2.body, this.streamID, this.engineConfig));
            try {
              this.connection.send(o2);
            } catch (e3) {
              return t2.resolve(Object(i.s)(a.s.NetworkModuleNetworkError));
            }
            t2.log && (t2.timeout = Date.now()), t2.timer = this.createRequestTimer(e2, r2, t2.log, t2.resolve, n2);
          }
        }, d.prototype.createRequest = function(e2, t2, r2, n2) {
          var o2 = this;
          return new Promise(function(s2) {
            var i2 = o2.createRequestTimer(e2, t2, r2, s2, n2);
            o2.requestMap.set(e2, { resolve: s2, log: r2, timer: i2 });
          });
        }, d.prototype.createQPSRequest = function(e2, t2, r2, n2, o2, s2) {
          var i2 = this, u2 = this.generateHeader(e2, r2), c2 = u2.seq, l2 = (e2 == a.c.sw_login.cmd && (t2._seq = c2), this.qpsStgy.collectRequest({ seq: c2, weight: s2, overhead: 1 }), o2 ? { time: /* @__PURE__ */ new Date(), weight: s2, seq: c2, caller: u2.caller_type, size: 0, rsize: -1, cmd: e2, body: t2 } : null);
          return new Promise(function(e3) {
            i2.requestMap.set(c2, { resolve: e3, log: l2, timer: null, timeout: n2, header: u2, body: t2 });
          });
        }, d.prototype.createRequestTimer = function(e2, t2, r2, n2, o2) {
          var s2 = this;
          return setTimeout(function() {
            s2.requestMap.delete(e2);
            var i2 = { seq: e2, code: 6000104, message: "Network error." };
            if (!s2.logger)
              return n2(i2);
            r2 && (r2.timeout = t2, s2.logger.warn(c, a.I.SCMD, r2)), o2 && -1 == s2.pageMergeReportCmdList.indexOf(o2) && s2.dataReport.endNetworkRequest(o2, e2, i2), n2(i2);
          }, t2);
        }, d.prototype.handleAccesshubPCDownwardMessage = function(e2) {
          var t2 = (r2 = function(e3, t3) {
            var r3 = "function" == typeof Symbol && e3[Symbol.iterator];
            if (!r3)
              return e3;
            var n3, o3, s3 = r3.call(e3), i3 = [];
            try {
              for (; (void 0 === t3 || 0 < t3--) && !(n3 = s3.next()).done; )
                i3.push(n3.value);
            } catch (e4) {
              o3 = { error: e4 };
            } finally {
              try {
                n3 && !n3.done && (r3 = s3.return) && r3.call(s3);
              } finally {
                if (o3)
                  throw o3.error;
              }
            }
            return i3;
          }(this.protobuf.decodeResponseHeader(e2), 2))[0], r2 = r2[1], n2 = t2.seq;
          if (-1 != this.swPushCmdList.indexOf(t2.cmd)) {
            n2 > this.seq && (this.seq = n2);
            var o2 = t2.cmd, s2 = this.protobuf.decodeResponseBody(e2, o2, r2, this.engineConfig), i2 = { time: 0, seq: n2, size: e2.byteLength, cmd: o2, body: s2 };
            o2 == a.c.sw_push_list.cmd && s2.push_requests && s2.push_requests[0] && (l2 = (u2 = s2.push_requests[0]).sub_cmd, d2 = u2.sender_user_id, p = u2.msg_id, u2 = u2.msg_body, i2.time = Date.now() + this.settings.serverOffsetTime - s2.send_time, i2.cmd = l2, i2.body = { qos: s2.qos_flag || void 0, stime: s2.send_time, suid: d2, msg_id: p, msg_body: u2 }, 1 < (l2 = s2.push_requests.length) && (i2.body.length = l2)), this.logger.info(c, a.I.PCMD, i2), s2.subCmds || this.onPushEvent(o2, s2, i2.time);
          } else {
            if (!this.requestMap.has(n2))
              return d2 = Array.from(this.requestMap.keys()).join(), p = { seq: n2, cmd: t2.cmd, rsize: e2.byteLength - 7 - r2, seqs: d2 }, void this.logger.warn(c, a.I.SCMD, p);
            o2 = t2.cmd.replace("_rsp", "");
            var u2 = this.protobuf.decodeResponseBody(e2, o2, r2, this.engineConfig), l2 = (this.handleFileProxyHost(o2, u2), this.requestMap.get(n2)), d2 = (s2 = l2.resolve, i2 = l2.log, l2.timer), p = l2.timeout;
            (i2 || u2.code) && (r2 = null, i2 ? (i2.rsize = e2.byteLength, i2.rbody = u2, p && i2.hasOwnProperty("weight") && (i2.weight += "," + (Date.now() - p))) : r2 = { seq: n2, rsize: e2.byteLength, cmd: o2, rbody: u2 }, u2.code ? this.logger.warn(c, a.I.SCMD, i2 || r2) : this.logger.info(c, a.I.SCMD, i2 || r2)), this.requestMap.delete(n2), clearTimeout(d2), o2 === a.c.sw_login.cmd && (u2.rspHeader = t2), -1 == this.pageMergeReportCmdList.indexOf(o2) && u2.code != a.W && this.dataReport.endNetworkRequest(o2, n2, u2), s2(u2);
          }
        }, d.prototype.handleAccesshubHTTPResponse = function(e2) {
          var t2 = e2.txid;
          if (t2 && this.requestMap.has(t2)) {
            var r2 = (o2 = this.requestMap.get(t2)).resolve, n2 = o2.log, o2 = o2.timer, s2 = {};
            if (e2.body && e2.body.length)
              try {
                s2 = JSON.parse(Object(i.f)(e2.body));
              } catch (e3) {
              }
            this.requestMap.delete(t2), clearTimeout(o2), n2.code = e2.status_code, n2.result = s2, this.logger.info(c, a.I.SCMD, n2), r2(s2);
          }
        }, d.prototype.handleAccesshubRsp = function(e2) {
          var t2 = e2.txid;
          if (!t2 || !this.requestMap.has(t2))
            return false;
          var r2 = (n2 = this.requestMap.get(t2)).log, n2 = n2.timer;
          return this.requestMap.delete(t2), clearTimeout(n2), r2.result = e2, this.logger.info(c, a.I.SCMD, r2), !e2.code;
        }, d.prototype.handleAccesshubLog = function(e2, t2, r2) {
          this.logger.info(c, a.I.PCMD, { type: e2, cmd: "Accesshub" + (r2 = void 0 === r2 ? "" : r2), res: t2 }), 19 != e2 && 20 != e2 && 30 != e2 || this.onPushEvent(a.c.Accesshub.cmd, u({ _type: e2 }, t2), 0);
        }, d.prototype.generateHeader = function(e2, t2) {
          return { cmd: e2, seq: ++this.seq, timestamp: Date.now(), product: 2, flags: [1], caller_type: t2, app_id: this.engineConfig.appID, user_id: this.engineConfig.user.userID, session_id: this.engineConfig.sessionID, user_nid: this.engineConfig.serverUserID, controls: this.engineConfig.controls };
        }, d.prototype.saveUrls = function(e2) {
          if (e2 && e2.length)
            if (this.urls = e2, e2 = n.a.getInstance().crypto.encryptString(e2.join(","), this.engineConfig), i.n)
              i.n._zisAlipay ? i.n.setStorageSync({ key: this.urlKey, data: e2 }) : i.n.setStorageSync(this.urlKey, e2);
            else
              try {
                localStorage.setItem(this.urlKey, e2);
              } catch (e3) {
              }
        }, d.prototype.handleFileProxyHost = function(e2, t2) {
          var r2, n2 = this.settings.advancedConfig.geoFence.host.fileproxy;
          n2 && (r2 = this.settings.advancedConfig.geoFence.reg, e2 == a.c.file_upload.cmd ? t2.upload_req.url = t2.upload_req.url.replace(r2, n2 + "$4") : e2 == a.c.file_process.cmd && (t2.download_url = t2.download_url.replace(r2, n2 + "$4")));
        }, d);
        function d(e2, t2) {
          var r2 = this;
          this.eventBus = t2, this.seq = 0, this.streamID = 0, this.urlKey = "", this.urls = [], this.requestMap = /* @__PURE__ */ new Map(), this.swPushCmdList = [a.c.sw_push_list.cmd, a.c.sw_push_kickout.cmd, a.c.sw_push_redirect.cmd], this.pageMergeReportCmdList = [a.c.c2c_msglist.cmd, a.c.group_msglist.cmd, a.c.room_msglist.cmd, a.c.call_list.cmd, a.c.usermail_convlist.cmd, a.c.usermail_convpinnedlist.cmd, a.c.group_list.cmd, a.c.group_member_list.cmd, a.c.room_userlist.cmd, a.c.msg_read_receipt_detail.cmd, a.c.extra_msglist.cmd, a.c.c2c_msg_state_list.cmd, a.c.group_msg_state_list.cmd, a.c.c2c_reaction_list.cmd, a.c.group_reaction_list.cmd], this.logger = n.a.getInstance().logger, this.dataReport = n.a.getInstance().dataReport, this.protobuf = n.a.getInstance().protobuf, this.settings = n.a.getInstance().settings, this.onmessage = function(e3) {
            var t3 = ((e3 = i.n && e3.data.isBuffer ? Object(i.b)(e3.data.data) : new Uint8Array(e3.data))[2] << 8) + e3[3], n2 = r2.protobuf.decodeAccesshubResponse(t3, e3);
            switch (t3) {
              case 21:
                r2.handleAccesshubPCDownwardMessage(n2);
                break;
              case 5:
                r2.handleAccesshubHTTPResponse(n2);
                break;
              case 27:
                r2.handleAccesshubRsp(n2) && r2.saveUrls(n2.wss_groups.map(function(e4) {
                  return "wss://" + e4.host + "/accesshub";
                }));
                break;
              case 15:
                !r2.handleAccesshubRsp(n2) || 1 <= (o2 = n2.geofencing_id) && o2 <= 7 && o2 != r2.settings.advancedConfig.geoFence.id && (r2.settings.advancedConfig.geoFence.id = o2, r2.settings.advancedConfig.geoFence.host = a.v[o2].host, r2.saveUrls([r2.settings.advancedConfig.geoFence.host.accesshub]));
                break;
              case 3:
                r2.handleAccesshubLog(t3, n2, "CloseConnection"), r2.onDisConnectedEvent(true);
                break;
              case 22:
                r2.handleAccesshubLog(t3, n2, "Redirect");
                var o2 = n2.wss_groups.map(function(e4) {
                  return "wss://" + e4.host + "/accesshub";
                });
                o2.length && r2.onPushEvent(a.c.sw_push_redirect.cmd, { quey_user_id: o2 }, 0);
                break;
              default:
                r2.handleAccesshubLog(t3, n2);
            }
          }, this.engineConfig = e2, this.qpsStgy = new s.a(t2), this.urlKey = "z_AccesshubURL_" + this.engineConfig.appID, n.a.getInstance().crypto.generateAppIDKey(this.engineConfig), this.initQPSEvent();
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return a;
        });
        var n = r(2), o = r(1), s = r(0), i = s.J.Connection, a = (u.prototype.create = function(e2) {
          var t2 = this;
          return this.close(), this.urls = e2, this.urlIndex = 0, this.retryCount = 0, this.retryTotalTime = 0, this.initDelayTask(), new Promise(function(e3, r2) {
            t2.createSocket(), t2.bindSocketEvent(e3, r2);
          });
        }, u.prototype.close = function() {
          this.socket && (o.n ? (o.n._zim_isAlipay ? (this.socket.offMessage(), this.socket.offOpen(), this.socket.offClose(), this.socket.offError()) : (this.socket.onMessage(function() {
          }), this.socket.onOpen(function() {
          }), this.socket.onClose(function() {
          }), this.socket.onError(function() {
          })), this.socket.close()) : (this.socket.onmessage = null, this.socket.onopen = null, this.socket.onclose = null, this.socket.onerror = null, this.socket.close(1e3)), this.socket = null);
        }, u.prototype.destroy = function() {
          this.close(), this.eventBus.remove(s.t.INetworkChange, this.onNetworkChange), this.logger = null;
        }, u.prototype.send = function(e2) {
          var t2;
          this.socket && (o.n ? (t2 = o.n._zim_isAlipay ? Object(o.c)(e2) : e2.buffer, this.socket.send({ data: t2, isBuffer: true })) : this.socket.send(e2));
        }, u.prototype.createSocket = function() {
          if (o.n)
            try {
              this.socket = o.n.connectSocket({ url: this.urls[this.urlIndex] + "?zim", multiple: true });
            } catch (e2) {
            }
          else
            try {
              this.socket = new WebSocket(this.urls[this.urlIndex] + "?zim"), this.socket.binaryType = "arraybuffer";
            } catch (e2) {
            }
        }, u.prototype.bindSocketEvent = function(e2, t2) {
          function r2() {
            s2.isConnecting = false, s2.retryCount = 0, s2.retryTotalTime = 0, s2.urlIndex = 0;
            var t3 = !e2, r3 = { event: "onconnected", isReconnect: t3, total: s2.initDelayTask(), login_max_itvl: s2.engineConfig.cloudSetting.retry.login_max_itvl, url: s2.urls[s2.urlIndex] };
            s2.logger.warn(i, s2.reconnAction, r3), s2.onconnected(t3), e2 && e2(s2.urls[s2.urlIndex]), e2 = void 0;
          }
          function n2(r3) {
            !s2.isConnecting && s2.socket && (s2.isConnecting = true, s2.reconnect(r3, e2, t2));
          }
          var s2 = this;
          o.n ? (this.socket.onMessage(this.onmessage), this.socket.onOpen(r2), this.socket.onClose(n2), this.socket.onError(n2)) : (this.socket.onmessage = this.onmessage, this.socket.onopen = r2, this.socket.onclose = n2, this.socket.onerror = n2);
        }, u.prototype.reconnect = function(e2, t2, r2) {
          var o2, s2 = this, a2 = (this.close(), this.delayTaskList.shift() || this.unlimited_retry);
          if (!a2)
            return o2 = { event: "ondisconnected", url: this.urls[this.urlIndex] }, this.logger.warn(i, this.reconnAction, o2), this.isConnecting = false, this.retryCount = 0, this.retryTotalTime = 0, this.urlIndex = 0, this.ondisconnected(true), r2 && r2(), void (r2 = void 0);
          this.ondisconnected(false), e2 = e2 && e2.type ? { type: e2.type, code: e2.code, reason: e2.reason } : e2, setTimeout(function() {
            var o3;
            s2.logger && (s2.isConnecting = false, s2.retryCount++, s2.retryTotalTime += a2, s2.urlIndex = (s2.urlIndex + 1) % s2.urls.length, o3 = { delay: a2, count: s2.retryCount, time: s2.retryTotalTime, event: e2 }, s2.logger.warn(i, s2.reconnAction, o3), n.a.getInstance().dataReport.reportSDKEvent("/sdk/log", { error_message: JSON.stringify(o3) }), s2.createSocket(), s2.bindSocketEvent(t2, r2));
          }, a2);
        }, u.prototype.initDelayTask = function() {
          var e2 = this.engineConfig.cloudSetting.retry.login_max_itvl, t2 = e2 < 0 ? 3e5 : 1e3 * e2;
          if ((this.unlimited_retry = 0) == e2)
            return this.delayTaskList.length = 0;
          for (var r2 = 500 + Math.floor(1500 * Math.random()), n2 = (this.delayTaskList = [r2], 0), o2 = r2; o2 < t2; ) {
            var s2 = Math.min(2e3 * Math.pow(2, n2), 32e3);
            o2 += s2, this.delayTaskList.push(s2), o2 < t2 && (o2 += s2, this.delayTaskList.push(s2)), n2++;
          }
          return e2 < 0 ? (this.unlimited_retry = this.delayTaskList[this.delayTaskList.length - 1], -1) : o2;
        }, u);
        function u(e2, t2) {
          var r2 = this;
          this.eventBus = e2, this.engineConfig = t2, this.logger = n.a.getInstance().logger, this.urls = [], this.urlIndex = 0, this.isConnecting = false, this.unlimited_retry = 0, this.retryCount = 0, this.retryTotalTime = 0, this.delayTaskList = [], this.reconnAction = "reconn", this.onNetworkChange = function(e3, t3) {
            var o2;
            "fetchSetting" == e3 ? (o2 = { event: "resetRetry", total: r2.initDelayTask(), login_max_itvl: r2.engineConfig.cloudSetting.retry.login_max_itvl }, r2.logger.warn(i, e3, o2)) : e3 && (r2.delayTaskList[0] || r2.unlimited_retry) ? (r2.isConnecting = true, r2.delayTaskList.unshift(100), r2.reconnect("NetworkChange:" + t3)) : (r2.logger.warn(i, r2.reconnAction, o2 = { online: e3, netType: t3 }), n.a.getInstance().dataReport.reportSDKEvent("/sdk/log", { error_message: JSON.stringify(o2) }));
          }, e2.add(s.t.INetworkChange, this.onNetworkChange);
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return s;
        });
        var n = r(1), o = r(0), s = (i.prototype.destroy = function() {
          this.requestList.length = 0, clearInterval(this.checkTokenTimer), clearInterval(this.checkRequestTimer), clearInterval(this.postQPSTimer), this.eventBus = null;
        }, i.prototype.canPass = function(e2, t2) {
          var r2 = this.tokenCount - t2 > this.defaultToken;
          return e2 !== o.d.Highest && (this.requestNum++, this.tokenCount -= t2, this.tokenCount < 0 && (this.tokenCount = 0)), e2 == o.d.Highest || r2;
        }, i.prototype.collectRequest = function(e2) {
          this.requestList.push(e2);
        }, i.prototype.postRequestData = function() {
          var e2 = this;
          this.postQPSTimer = setInterval(function() {
            var t2;
            e2.requestNum = 0, e2.isProd || n.n || (t2 = { reqLen: e2.requestList.length, token: e2.tokenCount, action: "setData", max: e2.maxToken, interval: 1e3, reqNum: e2.requestNum }, postMessage(JSON.stringify(t2), "*"));
          }, 1e3);
        }, i.prototype.warmUpTokenBuck = function() {
          var e2, t2 = this, r2 = this.maxToken - this.defaultToken, n2 = 1, o2 = 1, s2 = setInterval(function() {
            e2 = n2 + o2, n2 = o2, r2 <= (o2 = e2) || t2.tokenCount >= t2.maxToken ? (clearInterval(s2), s2 = null, t2.initCheckTokenInterval()) : (t2.tokenCount += o2, t2.tokenCount > t2.maxToken && (t2.tokenCount = t2.maxToken));
          }, 50);
        }, i.prototype.initCheckTokenInterval = function() {
          var e2 = this;
          this.checkTokenTimer = setInterval(function() {
            e2.tokenCount += e2.requestList.length > e2.maxToken / 2 ? 2 * e2.tokenStep : e2.tokenStep, e2.tokenCount > e2.maxToken && (e2.tokenCount = e2.maxToken);
          }, 100);
        }, i.prototype.initCheckRequestInterval = function() {
          var e2 = this;
          this.checkRequestTimer = setInterval(function() {
            e2.requestList.sort(function(e3, t3) {
              return t3.weight - e3.weight;
            });
            for (var t2 = 0; e2.requestList.length && t2++ < 10; ) {
              var r2 = e2.requestList.shift();
              if (!r2 || !e2.tokenCount)
                break;
              if (e2.eventBus.exec(o.t.IQPSSend, r2.seq), e2.tokenCount -= r2.overhead, e2.tokenCount < 1)
                break;
            }
          }, 100);
        }, i);
        function i(e2) {
          this.requestList = [], this.tokenCount = 30, this.maxToken = 100, this.defaultToken = 30, this.tokenStep = 5, this.requestNum = 0, this.isProd = true, this.eventBus = e2, this.warmUpTokenBuck(), this.initCheckRequestInterval(), this.postRequestData();
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return f;
        });
        t = r(3);
        var n = r.n(t), o = r(69), s = r(70), i = r(71), a = r(2), u = r(72), c = r(1), l = r(0), d = function() {
          return (d = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var o2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, o2) && (e2[o2] = t2[o2]);
            return e2;
          }).apply(this, arguments);
        }, p = function(e2, t2, r2, n2) {
          return new (r2 = r2 || Promise)(function(o2, s2) {
            function i2(e3) {
              try {
                u2(n2.next(e3));
              } catch (e4) {
                s2(e4);
              }
            }
            function a2(e3) {
              try {
                u2(n2.throw(e3));
              } catch (e4) {
                s2(e4);
              }
            }
            function u2(e3) {
              var t3;
              e3.done ? o2(e3.value) : ((t3 = e3.value) instanceof r2 ? t3 : new r2(function(e4) {
                e4(t3);
              })).then(i2, a2);
            }
            u2((n2 = n2.apply(e2, t2 || [])).next());
          });
        }, h = function(e2, t2) {
          var r2, n2, o2, s2 = { label: 0, sent: function() {
            if (1 & o2[0])
              throw o2[1];
            return o2[1];
          }, trys: [], ops: [] }, i2 = { next: a2(0), throw: a2(1), return: a2(2) };
          return "function" == typeof Symbol && (i2[Symbol.iterator] = function() {
            return this;
          }), i2;
          function a2(i3) {
            return function(a3) {
              var u2 = [i3, a3];
              if (r2)
                throw new TypeError("Generator is already executing.");
              for (; s2; )
                try {
                  if (r2 = 1, n2 && (o2 = 2 & u2[0] ? n2.return : u2[0] ? n2.throw || ((o2 = n2.return) && o2.call(n2), 0) : n2.next) && !(o2 = o2.call(n2, u2[1])).done)
                    return o2;
                  switch (n2 = 0, (u2 = o2 ? [2 & u2[0], o2.value] : u2)[0]) {
                    case 0:
                    case 1:
                      o2 = u2;
                      break;
                    case 4:
                      return s2.label++, { value: u2[1], done: false };
                    case 5:
                      s2.label++, n2 = u2[1], u2 = [0];
                      continue;
                    case 7:
                      u2 = s2.ops.pop(), s2.trys.pop();
                      continue;
                    default:
                      if (!(o2 = 0 < (o2 = s2.trys).length && o2[o2.length - 1]) && (6 === u2[0] || 2 === u2[0])) {
                        s2 = 0;
                        continue;
                      }
                      if (3 === u2[0] && (!o2 || u2[1] > o2[0] && u2[1] < o2[3])) {
                        s2.label = u2[1];
                        break;
                      }
                      if (6 === u2[0] && s2.label < o2[1]) {
                        s2.label = o2[1], o2 = u2;
                        break;
                      }
                      if (o2 && s2.label < o2[2]) {
                        s2.label = o2[2], s2.ops.push(u2);
                        break;
                      }
                      o2[2] && s2.ops.pop(), s2.trys.pop();
                      continue;
                  }
                  u2 = t2.call(e2, s2);
                } catch (a4) {
                  u2 = [6, a4], n2 = 0;
                } finally {
                  r2 = o2 = 0;
                }
              if (5 & u2[0])
                throw u2[1];
              return { value: u2[0] ? u2[1] : void 0, done: true };
            };
          }
        }, g = l.J.Conversation, f = (m.prototype.destroy = function() {
          this.onLogout(), this.connMgr = null, this.groupMgr = null, this.eventBus = null, this.logger = null, this.engineConfig = null, this.stgyMgr = null;
        }, m.prototype.queryUsersInfo = function(e2, t2) {
          var r2 = this, n2 = [], o2 = (e2 = e2.filter(function(e3) {
            return !!Object(c.l)(e3) || (n2.push({ userID: e3, reason: 6000001 }), false);
          }), (e2 = Array.from(new Set(e2))).filter(function(e3) {
            return !r2.dbUserMap.has(e3);
          })), s2 = e2.length - o2.length, i2 = { time: /* @__PURE__ */ new Date(), config: t2, queryCount: e2.length, dbCount: s2 };
          return 0 != o2.length || t2 && t2.isQueryFromServer ? (s2 = { quey_user_id: t2 && t2.isQueryFromServer ? e2 : o2 }, this.connMgr.sendRequest(l.c.fetch_user_info, s2).then(function(t3) {
            var o3, s3 = t3.code || 0, a2 = (s3 && (a2 = Object(c.s)(l.s.CommonModuleIMServerError, t3.message, t3.code), i2.error = a2, s3 = a2.code), t3.result), u2 = (t3 = t3.err_list, /* @__PURE__ */ new Map()), d2 = (t3 && t3.length && t3.forEach(function(e3) {
              e3 = { userID: e3.user_id, reason: e3.sub_code }, u2.set(e3.userID, e3), n2.push(e3);
            }), /* @__PURE__ */ new Map()), p2 = (a2 && a2.length && (o3 = [], a2.forEach(function(e3) {
              var t4 = e3.user_id, n3 = Object(c.f)(e3.user_name), s4 = Object(c.f)(e3.avatar);
              e3 = Object(c.f)(e3.extra), d2.set(t4, { baseInfo: { userID: t4, userName: n3 }, userAvatarUrl: s4, extendedData: e3 }), n3 = { userID: t4, userName: n3, userAvatarUrl: s4, extendedData: e3 };
              (s4 = r2.dbUserMap.get(t4)) && Object.assign(s4, n3), o3.push(s4 || n3), r2.dbUserMap.set(t4, s4 || n3), r2.svrConvInfoMap.set(t4, s4 || n3);
            }), r2.dbMgr.addUserList(o3)), e2.forEach(function(e3) {
              var t4 = r2.dbUserMap.get(e3);
              d2.has(e3) || (t4 ? (d2.set(e3, { baseInfo: { userID: t4.userID, userName: t4.userName }, userAvatarUrl: t4.userAvatarUrl, extendedData: t4.extendedData }), r2.svrConvInfoMap.set(e3, t4)) : u2.has(e3) || (t4 = { userID: e3, reason: s3 }, u2.set(e3, t4), n2.push(t4)));
            }), []);
            return r2.convMap.forEach(function(e3) {
              var t4 = r2.svrConvInfoMap.get(e3.convID);
              t4 && e3.convType == l.q.Peer && p2.push({ user: t4, dbConv: e3.dbConv });
            }), r2.emitConvInfo(p2), i2.count = d2.size, r2.logger.info(l.J.User, l.I.QueryUsersInfo, i2), 0 == d2.size ? Promise.reject(i2.error) : { userList: Array.from(d2.values()), errorUserList: n2 };
          })) : (s2 = e2.map(function(e3) {
            return { baseInfo: { userID: (e3 = r2.dbUserMap.get(e3)).userID, userName: e3.userName }, userAvatarUrl: e3.userAvatarUrl, extendedData: e3.extendedData };
          }), this.logger.info(l.J.User, l.I.QueryUsersInfo, i2), Promise.resolve({ userList: s2, errorUserList: n2 }));
        }, m.prototype.query = function(e2, t2) {
          var r2 = this;
          return new Promise(function(n2, o2) {
            var s2 = Array.from(r2.dbConvMap.values()).find(function(r3) {
              return r3.conversationID == e2 && r3.type == t2;
            });
            s2 && !r2.isDBConvInvalid(s2) ? (r2.logger.info(g, l.I.QueryConv, e2), n2({ conversation: Object(c.q)(r2.convKeys, s2) })) : (n2 = Object(c.s)(l.s.ConversationModuleConversationDoesNotExist), r2.logger.warn(g, l.I.QueryConv, { error: n2, conversationID: e2 }), o2(n2));
          });
        }, m.prototype.queryList = function(e2) {
          var t2 = this;
          return e2.count < 1 ? Promise.resolve({ conversationList: [] }) : new Promise(function(r2) {
            var n2 = { time: /* @__PURE__ */ new Date(), logined: t2.isLogined, queryCount: e2.count, count: 0 };
            t2.isLogined ? t2.mergeServerConvList(l.u.Biz, "apicall", function(o2) {
              t2.handleQueryConvsCallback(o2, { isPinned: false, config: e2, log: n2, resolve: r2 });
            }) : t2.queryConvsCallbackList.push({ isPinned: false, config: e2, log: n2, resolve: r2 });
          });
        }, m.prototype.queryPinnedList = function(e2) {
          var t2 = this;
          return e2.count < 1 ? Promise.resolve({ conversationList: [] }) : new Promise(function(r2) {
            var n2, o2 = { time: /* @__PURE__ */ new Date(), logined: t2.isLogined, queryCount: e2.count, count: 0 };
            t2.isLogined ? ((n2 = Array.from(t2.dbConvMap.values()).filter(function(e3) {
              var r3 = t2.filterValidConv(e3, true);
              return r3 && t2.createConversationInstance(e3.conversationID, e3.type), r3;
            })).sort(function(e3, t3) {
              return t3.orderKey - e3.orderKey;
            }), t2.handleQueryConvsCallback(n2, { isPinned: true, config: e2, log: o2, resolve: r2 })) : t2.queryConvsCallbackList.push({ isPinned: true, config: e2, log: o2, resolve: r2 });
          });
        }, m.prototype.delete = function(e2, t2, r2) {
          var n2 = this, o2 = (r2 = Object.assign({ isAlsoDeleteServerConversation: true }, r2), this.getConversationKey(e2, t2)), s2 = null == (o2 = this.convMap.get(o2)) ? void 0 : o2.dbConv;
          if (this.isDBConvInvalid(s2))
            return o2 = Object(c.s)(l.s.ConversationModuleConversationDoesNotExist), this.logger.warn(g, l.I.DeleteConv, { error: o2, convID: e2, type: t2, config: r2 }), Promise.reject(o2);
          var i2 = { time: /* @__PURE__ */ new Date(), convID: e2, type: t2, config: r2 };
          o2 = { conv_id: e2, conv_type: t2, read_seq: s2.msgSeq };
          return r2 && r2.isAlsoDeleteServerConversation ? this.connMgr.sendRequest(l.c.usermail_del_conv, o2).then(function(e3) {
            var t3;
            return e3.code ? (t3 = Object(c.s)(l.s.ConversationModuleServerError, e3.message, e3.code), i2.error = t3, n2.logger.warn(g, l.I.DeleteConv, i2), Promise.reject(t3)) : (s2.seq = e3.conv_list_seq ? e3.conv_list_seq.toString() : "0", n2.deleteLocalConv(s2, i2));
          }) : (this.connMgr.sendRequest(l.c.usermail_update_read_seq, o2, l.i.SDK), this.deleteLocalConv(s2, i2));
        }, m.prototype.deleteAll = function(e2) {
          return p(this, void 0, void 0, function() {
            var t2, r2, n2, o2 = this;
            return h(this, function(s2) {
              switch (s2.label) {
                case 0:
                  return e2 = Object.assign({ isAlsoDeleteServerConversation: true }, e2), t2 = { time: /* @__PURE__ */ new Date(), config: e2 }, 0 != +this.engineConfig.mailHBConfig.conv_list_seq ? [3, 2] : (r2 = { conv_sid: this.engineConfig.user.convSeq || "1" }, [4, this.connMgr.sendRequest(l.c.usermail_hb, r2)]);
                case 1:
                  r2 = s2.sent(), this.engineConfig.mailHBConfig.conv_list_seq = r2.conv_list_seq, s2.label = 2;
                case 2:
                  return (n2 = { conv_sid: this.engineConfig.mailHBConfig.conv_list_seq }).conv_sid && e2 && e2.isAlsoDeleteServerConversation ? [2, this.connMgr.sendRequest(l.c.usermail_del_all_conv, n2).then(function(e3) {
                    return e3.code ? (e3 = Object(c.s)(l.s.ConversationModuleServerError, e3.message, e3.code), t2.error = e3, o2.logger.info(g, l.I.DeleteAllConv, t2), Promise.reject(e3)) : o2.deleteAllLocalConv(t2);
                  })] : (this.connMgr.sendRequest(l.c.usermail_clean_all_unread, n2), [2, this.deleteAllLocalConv(t2)]);
              }
            });
          });
        }, m.prototype.setNotificationStatus = function(e2, t2, r2) {
          var n2 = this, o2 = null == (i2 = this.convMap.get(this.getConversationKey(t2, r2))) ? void 0 : i2.dbConv;
          if (this.isDBConvInvalid(o2))
            return i2 = Object(c.s)(l.s.ConversationModuleConversationDoesNotExist), this.logger.warn(g, l.I.SetNotificationStatus, { error: i2, convID: t2, status: e2 }), Promise.reject(i2);
          var s2 = { time: /* @__PURE__ */ new Date(), convID: t2, type: r2 }, i2 = { group_id: t2, enable: e2 === l.o.DoNotDisturb };
          return this.connMgr.sendRequest(l.c.group_mute, i2).then(function(i3) {
            return i3.code ? (i3 = Object(c.s)(l.s.ConversationModuleServerError, i3.message, i3.code), s2.error = i3, n2.logger.warn(g, l.I.SetNotificationStatus, s2), Promise.reject(i3)) : (o2.notificationStatus = e2, i3 = "setNotifyStatus", n2.emitConversationUpdated(o2, i3), n2.onUnreadMessageCount(i3), i3 = e2 == l.o.DoNotDisturb ? l.m.DontDisturb : l.m.RecoverDisturb, n2.stgyMgr.updateConversationActivity(t2, r2, i3), n2.logger.info(g, l.I.SetNotificationStatus, s2), { conversationID: t2, conversationType: r2 });
          });
        }, m.prototype.updatePinnedState = function(e2, t2, r2) {
          var n2, o2 = this, s2 = null, i2 = null == (n2 = this.convMap.get(this.getConversationKey(t2, r2))) ? void 0 : n2.dbConv;
          if (this.isDBConvInvalid(i2) ? s2 = Object(c.s)(l.s.ConversationModuleConversationDoesNotExist) : i2.isPinned == e2 && (n2 = "Cannot set the same value of isPinned: " + e2, s2 = Object(c.s)(l.s.CommonModuleParamInvalid, n2)), s2)
            return this.logger.warn(g, l.I.UpdatePinnedState, { error: s2, convID: t2, isPinned: e2 }), Promise.reject(s2);
          var a2 = { time: /* @__PURE__ */ new Date(), convID: t2, type: r2 };
          return this.connMgr.sendRequest(l.c.usermail_modify_conv_pinned_lv, { conv_id: t2, conv_type: r2, pinned_type: e2 ? 1 : 0 }).then(function(n3) {
            var s3;
            return n3.code ? (s3 = Object(c.s)(l.s.ConversationModuleServerError, n3.message, n3.code), a2.error = s3, o2.logger.warn(g, l.I.UpdatePinnedState, a2), Promise.reject(s3)) : (i2.isPinned = e2, o2.updateConvPinnedListSeq(+n3.conv_list_seq.toString()), o2.emitConversationUpdated(i2, "setConvPinned"), o2.logger.info(g, l.I.UpdatePinnedState, a2), { conversationID: t2, conversationType: r2 });
          });
        }, m.prototype.clearUnreadCount = function(e2, t2) {
          var r2 = null == (r2 = this.convMap.get(this.getConversationKey(e2, t2))) ? void 0 : r2.dbConv;
          if (this.isDBConvInvalid(r2))
            return n2 = Object(c.s)(l.s.ConversationModuleConversationDoesNotExist), this.logger.warn(g, l.I.ClearUnreadCount, { error: n2, convID: e2, type: t2 }), Promise.reject(n2);
          var n2 = "clearUnrc", o2 = r2.msgSeq || 0, s2 = r2.unreadMessageCount || 0;
          return this.syncConvReadSeqToMsgSeq(r2, o2), this.dbMgr.addConversationList([r2], n2), 0 < s2 && (r2 = { event: l.n.Updated, conversation: Object(c.q)(this.convKeys, r2) }, this.eventBus.emit(l.t.ConvChanged, { infoList: [r2] }, n2), this.onUnreadMessageCount(n2), this.connMgr.sendRequest(l.c.usermail_update_read_seq, { conv_id: e2, conv_type: t2, read_seq: o2 })), this.logger.info(g, l.I.ClearUnreadCount, { convID: e2, seq: o2, uncount: s2 }), Promise.resolve({ conversationID: e2, conversationType: t2 });
        }, m.prototype.clearAllUnreadCount = function() {
          var e2 = this, t2 = [], r2 = false, n2 = (this.convMap.forEach(function(n3) {
            e2.filterValidConv(n3.dbConv) && n3.dbConv.readMsgSeq < n3.dbConv.msgSeq && (r2 = true, e2.syncConvReadSeqToMsgSeq(n3.dbConv, n3.dbConv.msgSeq), t2.push(n3.dbConv));
          }), "clearAllUnrc");
          return r2 && (this.onUnreadMessageCount(n2), this.dbMgr.addConversationList(t2, n2), n2 = { conv_sid: this.engineConfig.mailHBConfig.conv_list_seq }, this.connMgr.sendRequest(l.c.usermail_clean_all_unread, n2)), this.logger.info(g, l.I.ClearAllUnreadCount), Promise.resolve();
        }, m.prototype.sendMessage = function(e2, t2, r2, n2, o2) {
          var s2, i2 = this;
          if (r2 === l.q.Room && !this.groupMgr.findRoom(t2))
            return s2 = Object(c.s)(l.s.MessageModuleSendMessageFailed, "Room is not exist or the user is not in the room."), this.logger.warn(g, l.I.SendMessage, { error: s2, convID: t2, type: r2 }), a2 = { status: l.P.Failed, message: e2 }, this.eventBus.emit(l.t.MsgSentStatus, { infos: [a2] }), Promise.reject(s2);
          var a2 = this.createConversationInstance(t2, r2);
          return this.stgyMgr.updateConversationActivity(t2, r2, l.m.HandleMessage), e2.type === l.R.Command || e2.type === l.R.Barrage ? a2.sendCommand(e2, n2, o2) : a2.sendMessage(e2, n2, o2).then(function(e3) {
            return i2.insertDBMessageExtra(e3), e3;
          });
        }, m.prototype.sendMediaMessage = function(e2, t2, r2, n2, o2) {
          var s2 = this;
          return r2 !== l.q.Room || this.groupMgr.findRoom(t2) ? (this.stgyMgr.updateConversationActivity(t2, r2, l.m.HandleMessage), this.createConversationInstance(t2, r2).sendMediaMessage(e2, n2, o2).then(function(e3) {
            return s2.insertDBMessageExtra(e3), e3;
          })) : (n2 = Object(c.s)(l.s.MessageModuleSendMessageFailed, "Room is not exist or the user is not in the room."), this.logger.warn(g, l.I.SendMediaMessage, { error: n2, convID: t2, type: r2 }), o2 = { status: l.P.Failed, message: e2 }, this.eventBus.emit(l.t.MsgSentStatus, { infos: [o2] }), Promise.reject(n2));
        }, m.prototype.deleteMessages = function(e2, t2, r2, n2) {
          var o2 = this;
          return this.createConversationInstance(t2, r2).deleteMessages(e2, n2).then(function(e3) {
            var n3 = o2.engineConfig.user.userID + r2 + t2;
            e3 = e3.map(function(e4) {
              return e4 = n3 + e4, o2.msgExtraMap.delete(e4), e4;
            });
            return o2.dbMgr.deleteMessageExtraList(e3), { conversationID: t2, conversationType: r2 };
          });
        }, m.prototype.deleteAllMessage = function(e2, t2, r2) {
          var n2 = this;
          return this.createConversationInstance(e2, t2).deleteAllMessage(r2).then(function(r3) {
            var o2 = [], s2 = n2.engineConfig.user.userID + t2 + e2;
            return n2.msgExtraMap.forEach(function(r4) {
              r4.conversationID == e2 && r4.conversationType == t2 && (r4 = s2 + r4.conversationSeq, o2.push(r4), n2.msgExtraMap.delete(r4));
            }), n2.dbMgr.deleteMessageExtraList(o2), r3;
          });
        }, m.prototype.queryHistoryMessage = function(e2, t2, r2) {
          var n2 = this, o2 = this.createConversationInstance(e2, t2);
          return t2 == l.q.Room ? o2.queryHistoryMessage(r2).then(function(r3) {
            var o3 = r3.list;
            r3 = r3.log;
            return n2.logger.info(g, l.I.QueryHistoryMessage, r3), { conversationID: e2, conversationType: t2, messageList: o3 };
          }) : o2.queryHistoryMessage(r2).then(function(r3) {
            var s2 = r3.list;
            r3 = r3.log;
            return o2.dbConv.type == l.q.Group && n2.mergeGroupMessageStatus(o2.dbConv, s2, l.u.Biz), n2.mergeMessageExtra(o2.dbConv, s2, r3.statusMap), n2.logger.info(g, l.I.QueryHistoryMessage, r3), { conversationID: e2, conversationType: t2, messageList: s2 };
          });
        }, m.prototype.insertMessageToLocalDB = function(e2, t2, r2, n2) {
          return e2.senderUserID = n2, this.createConversationInstance(t2, r2).insertMessageToLocalDB(e2);
        }, m.prototype.updateMessageLocalExtendedData = function(e2, t2) {
          var r2 = this, n2 = ((t2 = Object.isFrozen(t2) ? d({}, t2) : t2).localExtendedData = e2, this.copyMessageProxyField(t2), t2.conversationID), o2 = t2.conversationType;
          return this.dbMgr.addMessageList(n2, o2, [t2]).then(function() {
            var s2 = null == (s2 = r2.dbConvMap.get(r2.getConversationKey(n2, o2))) ? void 0 : s2.lastMessage;
            return o2 != l.q.Room && s2 && s2.messageID == t2.messageID && (s2.localExtendedData = e2), r2.logger.info(g, l.I.UpdateMessageLocalExtendedData, t2.messageID), { message: t2 };
          });
        }, m.prototype.sendReceiptRead = function(e2, t2) {
          var r2 = this, n2 = null == (s2 = this.convMap.get(this.getConversationKey(e2, t2))) ? void 0 : s2.dbConv;
          if (this.isDBConvInvalid(n2))
            return o2 = Object(c.s)(l.s.ConversationModuleConversationDoesNotExist), this.logger.warn(g, l.I.SendReceiptRead, { error: o2, convID: e2, type: t2 }), Promise.reject(o2);
          var o2, s2 = n2.maxRecvReceiptMsgSeq || 0, i2 = n2.msgSeq || 0, a2 = { time: /* @__PURE__ */ new Date(), convID: e2, oldSeq: s2, seq: i2 };
          return i2 ? i2 <= s2 ? (this.logger.info(g, l.I.SendReceiptRead, a2), Promise.resolve({ conversationID: e2, conversationType: t2 })) : this.connMgr.sendRequest(l.c.c2c_conv_read_receipt, { group_id: e2, conv_msg_seq: i2 }).then(function(o3) {
            if (o3.code)
              return s3 = Object(c.s)(l.s.ConversationModuleServerError, o3.message, o3.code), a2.error = s3, r2.logger.warn(g, l.I.SendReceiptRead, a2), Promise.reject(s3);
            r2.selfReceiptSeqs.push(o3.conv_list_seq.toString()), n2.maxRecvReceiptMsgSeq = i2;
            var s3 = n2.lastMessage;
            return s3 && s3.receiptStatus && s3.conversationSeq == i2 && s3.direction == l.K.Receive && (s3.receiptStatus = l.M.Done), r2.dbMgr.addConversationList([n2], "ackReceipt"), r2.logger.info(g, l.I.SendReceiptRead, a2), { conversationID: e2, conversationType: t2 };
          }) : (o2 = Object(c.s)(l.s.CommonModuleParamInvalid, "No message from server."), a2.error = o2, this.logger.warn(g, l.I.SendReceiptRead, a2), Promise.reject(o2));
        }, m.prototype.sendMessageReceiptsRead = function(e2, t2, r2) {
          function n2(n3) {
            var a3, u3 = n3.conv_msg_seq2_receipt_seq, p2 = [], h2 = [], f2 = null == (a3 = o2.dbConvMap.get(o2.getConversationKey(t2, r2))) ? void 0 : a3.lastMessage;
            return e2.forEach(function(e3) {
              var t3 = String(e3.conversationSeq), r3 = s2.get(t3);
              u3 && u3.hasOwnProperty(t3) && r3 && r3.messageID == e3.messageID ? (o2.selfReceiptSeqs.push(u3[t3]), t3 = d(d({}, r3), { receiptStatus: l.M.Done }), o2.copyMessageProxyField(t3), p2.push(t3), f2 && f2.receiptStatus && f2.conversationSeq == e3.conversationSeq && (f2.receiptStatus = l.M.Done)) : h2.push(e3.messageID);
            }), o2.createConversationInstance(t2, r2).updateMsgCacheList(p2), o2.dbMgr.addMessageList(t2, r2, p2), n3.code || h2.length == e2.length ? (a3 = Object(c.s)(l.s.MessageModuleReceiptReadError, n3.message, n3.code), i2.error = a3, o2.logger.warn(g, l.I.SendMessageReceiptsRead, i2), Promise.reject(a3)) : (o2.logger.info(g, l.I.SendMessageReceiptsRead, i2), Promise.resolve({ conversationID: t2, conversationType: r2, errorMessageIDs: h2 }));
          }
          var o2 = this, s2 = /* @__PURE__ */ new Map(), i2 = (e2.forEach(function(e3) {
            e3.conversationID == t2 && e3.conversationType == r2 && e3.direction == l.K.Receive && e3.receiptStatus == l.M.Processing && s2.set(String(e3.conversationSeq), e3);
          }), { time: /* @__PURE__ */ new Date(), convID: t2, count: s2.size });
          if (!s2.size)
            return n2({});
          var a2 = r2 == l.q.Peer ? l.c.c2c_msg_read_receipt : l.c.group_msg_read_receipt, u2 = { conv_id: t2, conv_msg_seq: Array.from(s2.keys()) };
          return this.connMgr.sendRequest(a2, u2).then(n2);
        }, m.prototype.queryReceiptsInfo = function(e2, t2, r2) {
          var n2 = this;
          return new Promise(function(o2) {
            var s2 = { time: /* @__PURE__ */ new Date(), convID: t2, count: 0, messageCount: e2.length };
            n2.mergeServerMsgExtraList(l.u.Biz, void 0, function() {
              var i2 = [], a2 = [], u2 = [];
              e2.forEach(function(e3) {
                var o3, c2, d2, p2, h2, g2;
                e3.type != l.R.Revoke && e3.receiptStatus && e3.conversationID === t2 && e3.conversationType === r2 ? (o3 = e3.conversationSeq, !(c2 = n2.msgExtraMap.get(n2.getMsgExtraKey(t2, r2, o3))) || !c2.revokeInfo && c2.receiptStatus ? (d2 = { conversationID: t2, conversationType: r2, messageID: e3.messageID, status: e3.receiptStatus, readMemberCount: 0, unreadMemberCount: 0, isSelfOperated: false }, a2.push(d2), c2 && !c2.messageID && (c2.messageID = e3.messageID, u2.push(c2)), e3.sentStatus == l.P.Success && (p2 = false, r2 == l.q.Peer && (h2 = (null == (g2 = n2.dbConvMap.get(n2.getConversationKey(t2, r2))) ? void 0 : g2.maxSendReceiptMsgSeq) || 0, g2 = (null == g2 ? void 0 : g2.maxRecvReceiptMsgSeq) || 0, (e3.direction == l.K.Send && o3 <= h2 || e3.direction == l.K.Receive && o3 <= g2) && (p2 = true, d2.status = l.M.Done, d2.readMemberCount = e3.direction == l.K.Send ? 1 : 0, d2.isSelfOperated = 0 == d2.readMemberCount, s2.sendSeq = h2, s2.recvSeq = g2)), p2 || (c2 && !c2.convReceipt ? (d2.status = c2.receiptStatus, d2.readMemberCount = Math.max(c2.readMemberCount, 0), d2.unreadMemberCount = c2.unreadMemberCount) : (e3.receiptStatus == l.M.Processing && c2 && (d2.status = c2.receiptStatus), r2 == l.q.Peer && e3.direction == l.K.Send && (d2.status == l.M.Done ? d2.readMemberCount = 1 : d2.unreadMemberCount = 1))))) : i2.push(e3.messageID)) : i2.push(e3.messageID);
              }), n2.dbMgr.addMessageExtraList(u2, "updateQueriedMessageID"), s2.count = a2.length, n2.logger.info(g, l.I.QueryReceiptsInfo, s2), o2({ infos: a2, errorMessageIDs: i2 });
            });
          });
        }, m.prototype.revokeMessage = function(e2, t2) {
          var r2 = this, n2 = e2.conversationType == l.q.Peer ? l.c.c2c_msg_revoke : l.c.group_msg_revoke, o2 = { conv_id: e2.conversationID, conv_msg_seq: e2.conversationSeq, payload: Object(c.i)((null == t2 ? void 0 : t2.revokeExtendedData) || ""), offline_push: Object(c.e)(null == t2 ? void 0 : t2.pushConfig) };
          return this.connMgr.sendRequest(n2, o2).then(function(n3) {
            if (n3.code)
              return o3 = Object(c.s)(l.s.CommonModuleIMServerError, n3.message, n3.code), r2.logger.warn(g, l.I.RevokeMessage, o3), Promise.reject(o3);
            var o3 = Object(c.r)(n3.msg_status), s2 = r2.createRevokeMessage(e2, { revokeType: l.S.TwoWay, revokeStatus: o3.revoke, revokeTimestamp: n3.revoke_time, operatedUserID: r2.engineConfig.user.userID, revokeExtendedData: (null == t2 ? void 0 : t2.revokeExtendedData) || "", originalMessageType: e2.type, originalTextMessageContent: e2.type == l.R.Text ? e2.message : "" });
            return r2.copyMessageProxyField(s2), r2.saveMessageRevokeExtra(s2, n3.statemsg_seq, "revokeMessage"), r2.logger.info(g, l.I.RevokeMessage, o3), { message: s2 };
          });
        }, m.prototype.addMessageReaction = function(e2, t2) {
          var r2 = this, n2 = t2.conversationType == l.q.Peer ? l.c.c2c_add_reaction : l.c.group_add_reaction, o2 = { conv_id: t2.conversationID, conv_msg_seq: t2.conversationSeq, reaction_key: e2, reaction_into_map: ((o2 = {})[e2] = { conv_id: "" }, o2) }, s2 = { time: /* @__PURE__ */ new Date() };
          return this.connMgr.sendRequest(n2, o2).then(function(n3) {
            return p(r2, void 0, void 0, function() {
              var r3, o3, i2, a2, u2, d2 = this;
              return h(this, function(p2) {
                switch (p2.label) {
                  case 0:
                    return n3.code || !n3.succ_list.length ? (u2 = Object(c.s)(l.s.ConversationModuleServerError, n3.message, n3.code), s2.reactionType = e2, s2.error = u2, this.logger.warn(g, l.I.AddReaction, s2), [2, Promise.reject(u2)]) : (r3 = this.createMessageReactionExtra(t2.conversationID, t2.conversationType, t2.conversationSeq, t2.messageID), o3 = (o3 = null == (u2 = r3.reactions[e2]) ? void 0 : u2.userList) && o3.length ? o3.filter(function(e3) {
                      return e3.userID !== d2.engineConfig.user.userID;
                    }) : o3 || [], i2 = n3.succ_list.find(function(t3) {
                      return t3.reaction_key = e2;
                    }), o3.length < this.engineConfig.mailHBConfig.reaction_brief_len ? (o3.push({ userID: this.engineConfig.user.userID, seq: i2.cur_reaction_seq }), o3.length === i2.user_total_count ? [3, 2] : [4, this.fetchReactionKey(t2, e2, false)]) : [3, 2]);
                  case 1:
                    (a2 = p2.sent()).code || (o3 = a2.user_reaction, i2.cur_reaction_seq = a2.max_reaction_seq, i2.user_total_count = a2.total_user_count), p2.label = 2;
                  case 2:
                    return a2 = { reactionKey: i2.reaction_key, reactionSeq: i2.cur_reaction_seq, totalCount: i2.user_total_count, isSelfIncluded: true, userList: o3 }, this.saveMessageReactionExtra(r3, [a2], void 0, true), s2.reactionInfo = a2, this.logger.info(g, l.I.AddReaction, s2), [2, { reaction: { conversationID: t2.conversationID, conversationType: t2.conversationType, messageID: t2.messageID, totalCount: a2.totalCount, isSelfIncluded: true, reactionType: e2, userList: o3.map(function(e3) {
                      return { userID: e3.userID };
                    }) } }];
                }
              });
            });
          });
        }, m.prototype.deleteMessageReaction = function(e2, t2) {
          var r2 = this, n2 = t2.conversationType == l.q.Peer ? l.c.c2c_del_reaction : l.c.group_del_reaction, o2 = { conv_id: t2.conversationID, conv_msg_seq: t2.conversationSeq, reaction_key: [e2] }, s2 = { time: /* @__PURE__ */ new Date() };
          return this.connMgr.sendRequest(n2, o2).then(function(n3) {
            return p(r2, void 0, void 0, function() {
              var r3, o3, i2, a2, u2, d2 = this;
              return h(this, function(p2) {
                switch (p2.label) {
                  case 0:
                    return n3.code || !n3.succ_list.length ? (u2 = Object(c.s)(l.s.ConversationModuleServerError, n3.message, n3.code), s2.reactionType = e2, s2.error = u2, this.logger.warn(g, l.I.DeleteReaction, s2), [2, Promise.reject(u2)]) : (r3 = this.createMessageReactionExtra(t2.conversationID, t2.conversationType, t2.conversationSeq, t2.messageID), o3 = (o3 = null == (u2 = r3.reactions[e2]) ? void 0 : u2.userList) && o3.length ? o3.filter(function(e3) {
                      return e3.userID !== d2.engineConfig.user.userID;
                    }) : o3 || [], i2 = n3.succ_list.find(function(t3) {
                      return t3.reaction_key = e2;
                    }), o3.length < this.engineConfig.mailHBConfig.reaction_brief_len && o3.length !== i2.user_total_count ? [4, this.fetchReactionKey(t2, e2, false)] : [3, 2]);
                  case 1:
                    (a2 = p2.sent()).code || (o3 = a2.user_reaction, i2.cur_reaction_seq = a2.max_reaction_seq, i2.user_total_count = a2.total_user_count), p2.label = 2;
                  case 2:
                    return 0 == i2.user_total_count && (o3.length = 0), a2 = { reactionKey: i2.reaction_key, reactionSeq: i2.cur_reaction_seq, totalCount: i2.user_total_count, isSelfIncluded: false, userList: o3 }, this.saveMessageReactionExtra(r3, [a2], void 0, true), s2.reactionInfo = a2, this.logger.info(g, l.I.DeleteReaction, s2), [2, { reaction: { conversationID: t2.conversationID, conversationType: t2.conversationType, messageID: t2.messageID, totalCount: a2.totalCount, isSelfIncluded: false, reactionType: e2, userList: o3.map(function(e3) {
                      return { userID: e3.userID };
                    }) } }];
                }
              });
            });
          });
        }, m.prototype.queryMessageReactionUserList = function(e2, t2) {
          var r2 = this, n2 = { time: /* @__PURE__ */ new Date(), total: 0, count: 0, config: t2 }, o2 = t2.reactionType, s2 = this.getMsgExtraKey(e2.conversationID, e2.conversationType, e2.conversationSeq), i2 = this.msgExtraMap.get(s2);
          if (!i2 || !i2.reactions || !i2.reactions[o2])
            return s2 = Object(c.s)(l.s.CommonModuleParamInvalid, "reactionType is invalid"), this.logger.warn(g, l.I.QueryReaction, n2), Promise.reject(s2);
          function a2(s3, i3) {
            var a3 = s3.length, u3 = t2.nextFlag || 0, c2 = u3 + t2.count;
            return s3 = s3.slice(u3, c2).map(function(e3) {
              return { userID: e3.userID };
            }), u3 = c2 < a3 ? c2 : 0, n2.total = a3, n2.count = s3.length, r2.logger.info(g, l.I.QueryReaction, n2), { reactionType: o2, totalCount: i3, nextFlag: u3, userList: s3, message: e2 };
          }
          s2 = +i2.reactions[o2].detailSeq || 0;
          var u2 = +i2.reactions[o2].seq || 0;
          return 0 < u2 && s2 < u2 ? this.fetchReactionKey(e2, o2, true).then(function(t3) {
            if (t3.code)
              return s3 = Object(c.s)(l.s.ConversationModuleServerError, t3.message, t3.code), r2.logger.warn(g, l.I.QueryReaction, n2), Promise.reject(s3);
            var s3 = t3.max_reaction_seq, u3 = t3.total_user_count, d2 = (t3 = { reactionSeq: s3, reactionKey: o2, totalCount: u3, userList: t3.user_reaction, isSelfIncluded: false }, r2.engineConfig.user.userID);
            return t3.isSelfIncluded = t3.userList.some(function(e3) {
              return e3.userID == d2;
            }), i2.messageID = e2.messageID, r2.saveMessageReactionExtra(i2, [t3], s3, true, true), a2(t3.userList, u3);
          }) : (s2 = i2.reactions[o2].detailUserList || [], Promise.resolve(a2(s2, s2.length)));
        }, m.prototype.onPushMsgDelete = function(e2) {
          var t2 = "onPushMsgDelete", r2 = e2.conv_id, n2 = e2.conv_type, o2 = e2.max_del_conv_msg_seq;
          e2.is_del_all && o2 ? this.createConversationInstance(r2, n2).onPushAllMsgDelete(o2, t2) : e2.del_conv_msg_seqs.length && this.createConversationInstance(r2, n2).onPushMsgDelete(e2.del_conv_msg_seqs, t2);
        }, m.prototype.onPushConvDelete = function(e2) {
          var t2;
          e2 = this.getConversationKey(e2.conv_id, e2.conv_type);
          (e2 = this.dbConvMap.get(e2)) && (e2.state != l.p.Delete && e2.maxOrderKey ? (this.deleteLocalConv(e2), t2 = { event: l.n.Deleted, conversation: Object(c.q)(this.convKeys, e2) }, this.eventBus.emit(l.t.ConvChanged, { infoList: [t2] }, "deleteConv")) : e2.state = l.p.Delete);
        }, m.prototype.onPushConvRead = function(e2) {
          var t2, r2 = this, n2 = e2.conv_msg_seq, o2 = e2.read_seq, s2 = (e2 = this.getConversationKey(e2.conv_id, e2.conv_type), this.dbConvMap.get(e2));
          s2 && n2 && (s2.readMsgSeq = Math.max(n2, s2.readMsgSeq || 0), s2.sendMsgCount = o2, s2.state != l.p.Delete && s2.maxOrderKey && (e2 = function(e3) {
            s2.deletedMsgCount = e3;
            var t3 = "onPushConvRead", n3 = s2.msgSeq || 0;
            (n3 = Math.max(n3 - s2.readMsgSeq - o2 - e3, 0)) != s2.unreadMessageCount ? (s2.unreadMessageCount = n3, r2.onUnreadMessageCount(t3), r2.emitConversationUpdated(s2, t3)) : r2.dbMgr.addConversationList([s2], t3 + n3);
          }, (t2 = s2.deletedMsgSeqs && s2.deletedMsgSeqs.length ? s2.deletedMsgSeqs.filter(function(e3) {
            return n2 < e3;
          }) : null) && t2.length ? this.dbMgr.getDeleteMessageCount(s2.conversationID, s2.type, t2, e2) : e2(0)));
        }, m.prototype.onPushConvMute = function(e2) {
          var t2, r2, n2 = this.getConversationKey(e2.conv_id, l.q.Group);
          (n2 = this.dbConvMap.get(n2)) && (t2 = e2.conv_type ? l.o.DoNotDisturb : l.o.Notify, n2.state != l.p.Delete && n2.maxOrderKey && n2.notificationStatus != t2 ? (n2.notificationStatus = t2, this.emitConversationUpdated(n2, r2 = "onPushConvMute"), this.onUnreadMessageCount(r2)) : n2.notificationStatus = t2, (r2 = this.dbGroupMap.get(n2.conversationID)) && (r2.notificationStatus = e2.conv_type ? l.G.Disturb : l.G.Notify, this.dbMgr.addGroupList([r2])));
        }, m.prototype.onPushConvPinned = function(e2) {
          var t2 = this.getConversationKey(e2.conv_id, e2.conv_type);
          (t2 = this.dbConvMap.get(t2)) && (t2.state != l.p.Delete && t2.maxOrderKey && !t2.isPinned != !e2.pinned_type ? (t2.isPinned = !!e2.pinned_type, this.emitConversationUpdated(t2, "onPushConvPinned")) : t2.isPinned = !!e2.pinned_type, this.updateConvPinnedListSeq(e2.conv_pinned_list_seq));
        }, m.prototype.onPushMessage = function(e2, t2) {
          var r2 = e2.msg_status || 0, n2 = (e2.recv_msg_info.msg_info.msg_status = r2, e2.recv_msg_info.msg_svr_info), o2 = e2.recv_msg_info.msg_info.conv_id, s2 = l.q.Peer, i2 = void 0, a2 = n2.sender_user_id, u2 = (t2 = (t2 == l.c.p_group_msg.cmd ? s2 = l.q.Group : t2 == l.c.p_room_msg.cmd ? (o2 = o2 || e2.room_id, s2 = l.q.Room) : t2 == l.c.p_c2c_msg.cmd && (o2 = o2 || a2, a2 && a2 != this.engineConfig.user.userID && (i2 = Object(c.f)(n2.sender_user_name))), e2.send_count_after_read || 0), e2.recv_msg_info.msg_info.sender_unaware);
          if (s2 == l.q.Room || a2 != this.engineConfig.user.userID && !u2 || this.logger.info(g, l.I.PCMD, { convID: o2, type: s2, name: i2, sendCount: t2, senderID: a2 }), o2) {
            var d2 = this.createConversationInstance(o2, s2);
            if (u2 && (!a2 || a2 == this.engineConfig.user.userID))
              return d2.dbConv.sendMsgCount = t2, this.dbMgr.addConversationList([d2.dbConv], "sender_unaware:" + t2), o2;
            s2 == l.q.Peer && a2 && a2 != this.engineConfig.user.userID && this.updateConvNameAndAvatar("onPushMessage", d2.dbConv, i2), (u2 = this.msgExtraMap.get(this.getMsgExtraKey(o2, s2, n2.conv_msg_seq))) || s2 != l.q.Peer || (u2 = this.msgExtraMap.get(this.getMsgExtraKey(o2, s2, 0))), r2 && u2 && (u2.receiptStatus = Object(c.r)(r2).receipt, u2.messageID || (u2.messageID = n2.msg_id), this.dbMgr.addMessageExtraList([u2], "onPushMessage")), this.syncConvInfoWhenPushMessage(d2, e2.recv_msg_info, t2, i2);
          }
          return o2;
        }, m.prototype.onPushCommand = function(e2, t2) {
          var r2 = "", n2 = l.q.Peer;
          return t2 == l.c.p_group_command.cmd ? (n2 = l.q.Group, r2 = e2.recv_command_info.command_msg_info.conv_id) : t2 == l.c.p_room_command.cmd ? (n2 = l.q.Room, r2 = e2.room_id) : t2 == l.c.p_c2c_command.cmd && (t2 = e2.recv_command_info.command_svr_info.sender_user_id, r2 = e2.recv_command_info.command_msg_info.conv_id || t2), this.emitReceiveCommandMessage(r2, n2, e2), r2;
        }, m.prototype.onPushBroadcastMessage = function(e2) {
          e2 = this.transform2Message(e2.recv_msg_info, "", l.q.Unknown), this.eventBus.emit(l.t.BroadcastMsg, { message: e2 });
        }, m.prototype.onPushReadReceipt = function(e2) {
          var t2 = this, r2 = n.a.fromString("0"), o2 = e2.PushItems.map(function(e3) {
            var o3 = t2.createMessageReceiptItemExrta(t2.mergeMsgReceiptDBConvMap, e3);
            t2.mergeMsgReceiptMap.set(o3.id, o3), o3 = e3.receipt_seq || n.a.fromString("0");
            return t2.mergeMsgReceiptSeqs.add(o3.toString()), o3.greaterThan(r2) && (r2 = o3), o3;
          }), s2 = (e2 = (o2.sort(function(e3, t3) {
            return e3.lessThanOrEqual(t3) ? -1 : 1;
          }), o2[o2.length - 1].sub(o2[0]).toNumber() == o2.length - 1), Array.from(this.mergeMsgReceiptMap.values())), i2 = (this.emitMessageReceiptOrRevoke(s2, l.u.SDKPush), o2[0]), a2 = this.engineConfig.user.msgExtraSeq || "0";
          "0" == a2 || i2.lessThanOrEqual(a2) || i2.sub(1).toString() == a2 && e2 && !this.mergeMsgReceiptTimer ? (i2 = "pushReadReceipt", this.updateMsgExtraSeq(r2), this.dbMgr.addMessageExtraList(s2, i2), this.dbMgr.addConversationList(Array.from(this.mergeMsgReceiptDBConvMap.values()), i2), this.mergeMsgReceiptSeqs.clear(), this.mergeMsgReceiptMap.clear(), this.mergeMsgReceiptDBConvMap.clear(), this.logger.info(g, "mergeMsgReceipt", { dbSeq: a2, seqs: o2, action: "continuousMerge" })) : this.mergeMsgReceiptTimer || (this.mergeMsgReceiptTimer = setTimeout(function() {
            var e3, r3;
            t2.logger && ((e3 = Array.from(t2.mergeMsgReceiptSeqs.values()).map(function(e4) {
              return n.a.fromString(e4);
            })).sort(function(e4, t3) {
              return e4.lessThanOrEqual(t3) ? -1 : 1;
            }), r3 = e3[e3.length - 1].sub(e3[0]).toNumber() == e3.length - 1, t2.logger.info(g, "mergeMsgReceipt", { dbSeq: a2, seqs: o2, action: "waitingPush", continuous: r3, mergeSeqs: e3 }), r3 ? (r3 = "pushReadReceipt", t2.updateMsgExtraSeq(e3[e3.length - 1]), t2.dbMgr.addMessageExtraList(Array.from(t2.mergeMsgReceiptMap.values()), r3), t2.dbMgr.addConversationList(Array.from(t2.mergeMsgReceiptDBConvMap.values()), r3)) : t2.mergeServerMsgExtraList(l.u.SDKPush), t2.mergeMsgReceiptTimer = 0, t2.mergeMsgReceiptSeqs.clear(), t2.mergeMsgReceiptMap.clear(), t2.mergeMsgReceiptDBConvMap.clear());
          }, this.engineConfig.mailHBConfig.list_to));
        }, m.prototype.onPushMsgRevoke = function(e2) {
          var t2 = this.createConversationInstance(e2.recv_msg_info.msg_info.conv_id, e2.conv_type), r2 = t2.dbConv.deletedMsgMaxSeq || 0, n2 = t2.dbConv.deletedMsgSeqs || [], o2 = e2.recv_msg_info.msg_svr_info.conv_msg_seq;
          -1 != n2.indexOf(o2) || o2 <= r2 || (n2 = t2.transform2Message(e2.recv_msg_info, false), this.eventBus.emit(l.t.MsgRevoke, { messageList: [n2] }), this.saveMessageRevokeExtra(n2, e2.statemsg_seq, "pushRevoke"));
        }, m.prototype.onPushReaction = function(e2) {
          var t2 = this, r2 = e2.conv_id, n2 = e2.conv_type, o2 = /* @__PURE__ */ new Set(), s2 = this.createConversationInstance(r2, n2), i2 = s2.dbConv.deletedMsgMaxSeq || 0, a2 = s2.dbConv.deletedMsgSeqs || [], u2 = e2.msg_reactions.filter(function(e3) {
            var s3 = e3.conv_msg_seq;
            if (-1 != a2.indexOf(s3) || s3 <= i2)
              return false;
            var u3 = t2.createMessageReactionExtra(r2, n2, s3);
            return !(+u3.reactionSeq > e3.start_reaction_seq || (u3.messageID || o2.add(s3), 0));
          });
          this.logger.info(g, "pushReaction", { count: u2.length }), this.createConversationInstance(r2, n2).fetchMsgListFromCache(Array.from(o2)).then(function(e3) {
            u2.forEach(function(o3) {
              var s3 = o3.conv_msg_seq, i3 = o3.start_reaction_seq, a3 = o3.end_reaction_seq, u3 = (o3 = o3.reaction_infos, t2.createMessageReactionExtra(r2, n2, s3, null == (s3 = e3.get(s3)) ? void 0 : s3.messageID));
              u3.messageID && (s3 = o3.map(function(e4) {
                var t3 = e4.reaction_key, r3 = e4.total_user_count, n3 = e4.max_reaction_seq, o4 = e4.is_multi, s4 = e4.include_self, i4 = !(!u3.reactions || !u3.reactions[t3]) && u3.reactions[t3].isSelfIncluded;
                return { reactionSeq: n3, reactionKey: t3, totalCount: r3 || 0, userList: e4.user_reaction, isSelfIncluded: i4 = o4 ? s4 : i4, value: "" };
              }), t2.saveMessageReactionExtra(u3, s3, a3), +u3.reactionSeq + 1 < i3 && t2.mergeMessageReactionList(u3));
            });
          });
        }, m.prototype.onPushConvAllDelete = function(e2) {
          this.deleteAllLocalConv(null, +e2.conv_sid, true);
        }, m.prototype.onPushCleanAllUnread = function(e2) {
          var t2 = this, r2 = +e2.conv_sid, n2 = [];
          this.convMap.forEach(function(e3) {
            e3.convType == l.q.Room || +e3.dbConv.seq > r2 || (t2.syncConvReadSeqToMsgSeq(e3.dbConv, e3.dbConv.msgSeq), n2.push(e3.dbConv));
          }), e2 = "onPushClearAllUnrc";
          this.dbMgr.addConversationList(n2, e2), this.onUnreadMessageCount(e2);
        }, m.prototype.registerInnerEvent = function() {
          this.eventBus.add(l.t.ILogined, this.onLogined.bind(this)), this.eventBus.add(l.t.ILogout, this.onLogout.bind(this)), this.eventBus.add(l.t.ITriggerHB, this.onTriggerHB.bind(this)), this.eventBus.add(l.t.ISyncGroups, this.onSyncGroups.bind(this)), this.eventBus.add(l.t.IJoinedGroup, this.onJoinedGroup.bind(this)), this.eventBus.add(l.t.ILeftGroup, this.onLeftGroup.bind(this)), this.eventBus.add(l.t.ISyncGroupInfo, this.onSyncGroupInfo.bind(this)), this.eventBus.add(l.t.IUnreadMsgCount, this.onUnreadMessageCount.bind(this)), this.eventBus.add(l.t.IConnectedRoom, this.onConnectedRoom.bind(this));
        }, m.prototype.onSyncGroups = function(e2) {
          var t2 = this, r2 = (this.isLogined = false, e2 ? l.u.SDKHb : l.u.SDKLogin), n2 = e2 ? "onConnected" : "onLogined";
          e2 && (this.mergeServerMsgExtraList(r2, n2), this.mergeServerMsgStateList(r2, n2)), this.mergeServerPinnedList(r2, n2, function(o2) {
            t2.mergeServerConvList(r2, n2, function(s2, i2) {
              var a2, u2 = { _action_: !(t2.isLogined = true) }, d2 = s2.filter(function(e3) {
                var r3, n3, s3, a3, c2 = e3.id, d3 = false;
                return o2 && (s3 = -1 != o2.indexOf(c2), !e3.isPinned != !s3 && (e3.isPinned = s3, i2.has(c2) || i2.set(c2, l.n.Updated), d3 = true)), e3.type == l.q.Group && ((s3 = t2.dbGroupMap.get(e3.conversationID)) ? (r3 = s3.notificationStatus, a3 = s3.groupName, n3 = s3.groupAvatarUrl, s3 = s3.tatalMemberCount, e3.state = l.p.Normal, "string" == typeof a3 && (e3.conversationName = a3), "string" == typeof n3 && (e3.conversationAvatarUrl = n3), e3.notificationStatus != r3 && (e3.notificationStatus = r3, i2.has(c2) || i2.set(c2, l.n.Updated)), e3.conversationName || e3.conversationAvatarUrl || (u2._action_ = true, u2[e3.conversationID] = r3 + "," + s3), d3 = true) : e3.state != l.p.Disable && (e3.state = l.p.Disable, (a3 = i2.has(c2) ? i2.get(c2) : l.n.Disabled) != l.n.Deleted && (a3 = l.n.Disabled), i2.set(c2, a3), u2._action_ = true, u2[e3.conversationID] = "state:Disable", d3 = true)), d3;
              }), p2 = "onSyncGroups" + i2.size;
              t2.dbMgr.addConversationList(d2, p2), i2.size && (a2 = [], i2.forEach(function(e3, r3) {
                r3 = Object(c.q)(t2.convKeys, t2.dbConvMap.get(r3)), a2.push({ event: e3, conversation: r3 }), t2.stgyMgr.modifyConversation(r3.conversationID, r3.type, e3, l.a.FetchAll);
              }), t2.eventBus.emit(l.t.ConvChanged, { infoList: a2 }, p2)), t2.onUnreadMessageCount(p2, s2), u2._action_ && (t2.logger.info(g, p2, u2), u2._action_ = p2, t2.dataReport.reportSDKEvent("/sdk/log", { error_message: JSON.stringify(u2) })), t2.queryConvsCallbackList.forEach(function(e3) {
                return t2.handleQueryConvsCallback(s2, e3);
              }), t2.queryConvsCallbackList.length = 0, s2.slice(0, 30).forEach(function(o3) {
                e2 && o3.type == l.q.Room || t2.createConversationInstance(o3.conversationID, o3.type).mergeServerMessageList(r2, n2);
              }), e2 || (t2.dbMgr.loadDB(), t2.fetchDeletedPeerConvMsgs());
            });
          });
        }, m.prototype.onLogined = function(e2) {
          var t2 = this, r2 = e2.users, n2 = e2.convs, o2 = e2.groups;
          e2 = e2.msgs, r2.forEach(function(e3) {
            return t2.dbUserMap.set(e3.userID, e3);
          }), o2.forEach(function(e3) {
            return t2.dbGroupMap.set(e3.groupID, e3);
          }), e2.forEach(function(e3) {
            return t2.msgExtraMap.set(e3.id, e3);
          }), r2 = this.engineConfig.user, this.dbUserMap.has(r2.userID) && this.dbUserMap.set(r2.userID, r2), o2 = n2.map(function(e3) {
            return t2.dbConvMap.set(e3.id, e3), { conversationID: e3.conversationID, conversationType: e3.type, conversationOrderKey: e3.orderKey, todoFlag: 0 };
          });
          this.stgyMgr.start(), this.stgyMgr.initConversations(o2), setTimeout(function() {
            t2.mergeServerMsgExtraList(l.u.SDKLogin), t2.mergeServerMsgStateList(l.u.SDKLogin);
          }, 1e3);
        }, m.prototype.onLogout = function(e2) {
          this.dbConvMap.clear(), this.dbGroupMap.clear(), this.msgExtraMap.clear(), this.groupMgr.clearRoomMessage(), true !== e2 && (this.convMap.forEach(function(e3) {
            return e3.destroy();
          }), this.convMap.clear(), this.dbUserMap.clear(), this.svrConvInfoMap.clear(), this.msgReceiptChangedMap.clear(), this.isLogined = false, this.stgyMgr.stop());
        }, m.prototype.onTriggerHB = function() {
          this.mergeServerMsgExtraList(l.u.SDKHb, "hb"), this.mergeServerMsgStateList(l.u.SDKHb, "hb"), this.groupMgr.mergeServerGroupList(l.u.SDKHb, "hb");
        }, m.prototype.onJoinedGroup = function(e2, t2, r2, n2) {
          var o2 = ((e2 = this.createConversationInstance(e2, l.q.Group).dbConv).state == l.p.Disable && (e2.state = l.p.Normal), "onJoinedGroup");
          this.updateConvNameAndAvatar(o2, e2, t2, r2), n2 && (e2.msgSeq = n2, this.syncConvReadSeqToMsgSeq(e2, n2), this.dbMgr.addConversationList([e2], o2 + n2));
        }, m.prototype.onLeftGroup = function(e2) {
          var t2, r2 = this.createConversationInstance(e2, l.q.Group);
          r2.dbConv.maxOrderKey && (t2 = r2.dbConv.msgSeq || 0, r2.dbConv.state != l.p.Delete && (r2.dbConv.state = l.p.Disable, this.connMgr.sendRequest(l.c.usermail_update_read_seq, { conv_id: e2, conv_type: 2, read_seq: t2 }, l.i.SDK)), this.syncConvReadSeqToMsgSeq(r2.dbConv, t2), this.dbMgr.addConversationList([r2.dbConv], e2 = "onLeftGroup"), t2 = { event: l.n.Disabled, conversation: Object(c.q)(this.convKeys, r2.dbConv) }, this.eventBus.emit(l.t.ConvChanged, { infoList: [t2] }, e2), this.onUnreadMessageCount(e2));
        }, m.prototype.onSyncGroupInfo = function(e2, t2, r2) {
          var n2 = this.createConversationInstance(e2, l.q.Group);
          this.updateConvNameAndAvatar("onSyncGroupInfo", n2.dbConv, t2, r2), e2 = { userID: e2, userName: t2, userAvatarUrl: r2 };
          this.emitConvInfo([{ user: e2, dbConv: n2.dbConv }]);
        }, m.prototype.onUnreadMessageCount = function(e2, t2) {
          var r2 = this, n2 = l.o.DoNotDisturb, o2 = 0;
          t2 ? t2.forEach(function(e3) {
            e3.notificationStatus != n2 && (o2 += e3.unreadMessageCount);
          }) : this.convMap.forEach(function(e3) {
            e3.dbConv.notificationStatus != n2 && r2.filterValidConv(e3.dbConv) && (o2 += e3.dbConv.unreadMessageCount);
          }), this.oldTotalUnreadCount != o2 && (this.oldTotalUnreadCount = o2, this.eventBus.emit(l.t.ConvUnreadMsgCount, { totalUnreadMessageCount: o2 }, e2));
        }, m.prototype.onConnectedRoom = function(e2, t2) {
          (e2 = this.convMap.get(this.getConversationKey(e2, l.q.Room))) && (t2 || this.setAssociatedGroup(e2, e2.convID, e2.convType), e2.mergeServerMessageList(l.u.SDKHb, t2 ? "rhb" : "onConnected", t2));
        }, m.prototype.fetchDeletedPeerConvMsgs = function() {
          var e2 = this;
          this.dbConvMap.forEach(function(t2) {
            t2.state == l.p.Delete && t2.type == l.q.Peer && e2.createConversationInstance(t2.conversationID, t2.type).mergeServerMessageList(l.u.SDKLogin, "onLoginedWithDeleted");
          });
        }, m.prototype.syncConvInfoWhenPushMessage = function(e2, t2, r2, n2) {
          var o2, s2 = this, i2 = e2.dbConv, a2 = i2.conversationID;
          i2.type == l.q.Peer ? this.svrConvInfoMap.get(a2) || this.dbUserMap.has(a2) || i2.maxOrderKey && i2.state != l.p.Delete ? (o2 = this.dbUserMap.get(a2), "string" == typeof n2 && o2 && o2.userName != n2 && (o2.userName = n2, this.dbMgr.setUser(o2)), e2.onPushMessage(t2, r2)) : this.connMgr.sendRequest(l.c.fetch_user_info, { _ev_: "onPushMessage", quey_user_id: [a2] }, l.i.SDK).then(function(n3) {
            var o3, u2;
            (n3 = n3.result && n3.result[0]) && (o3 = Object(c.f)(n3.user_name), n3 = Object(c.f)(n3.avatar), i2.conversationName = o3, i2.conversationAvatarUrl = n3, s2.dbMgr.addConversationList([i2], "onSyncConvInfo"), (u2 = s2.dbUserMap.get(a2) || { userID: a2, userName: o3, userAvatarUrl: n3 }).userName = o3, u2.userAvatarUrl = n3, s2.dbUserMap.set(a2, u2), s2.dbMgr.setUser(u2), s2.emitConvInfo([{ user: u2, dbConv: i2 }])), e2.onPushMessage(t2, r2);
          }) : e2.onPushMessage(t2, r2);
        }, m.prototype.getConversationKey = function(e2, t2) {
          return this.engineConfig.user.userID + (t2 || 0) + e2;
        }, m.prototype.getMsgExtraKey = function(e2, t2, r2) {
          return this.engineConfig.user.userID + (t2 || 0) + e2 + (r2 || "");
        }, m.prototype.getDBConversation = function(e2, t2, r2) {
          return t2 = this.dbConvMap.get(e2) || { id: e2, ownerID: this.engineConfig.user.userID, conversationID: t2, type: r2, conversationName: "", conversationAvatarUrl: "", notificationStatus: l.o.Notify, orderKey: 0, isPinned: false, unreadMessageCount: 0, seq: "0", state: l.p.Normal, maxSeq: 0, maxOrderKey: 0, msgSeq: 0, readMsgSeq: 0, sendMsgCount: 0, deletedMsgCount: 0, deletedMsgMaxSeq: 0, deletedMsgSeqs: [], maxSendReceiptMsgSeq: 0, maxRecvReceiptMsgSeq: 0, minStatemsgSeq: 0, maxStatemsgSeq: 0 }, this.dbConvMap.set(e2, t2), t2;
        }, m.prototype.copyMessageProxyField = function(e2) {
          e2.reactions && (e2.reactions = JSON.parse(JSON.stringify(e2.reactions)));
        }, m.prototype.initDBConversationFields = function(e2, t2) {
          Object.assign(e2, { conversationName: "", conversationAvatarUrl: "", isPinned: false, notificationStatus: l.o.Notify, maxSeq: 0, maxOrderKey: t2 * l.l.MESSAGE_SEQ_MULTIPLIER, deletedMsgMaxSeq: 0, deletedMsgSeqs: [], maxSendReceiptMsgSeq: 0, maxRecvReceiptMsgSeq: 0, minStatemsgSeq: 0, maxStatemsgSeq: e2.maxStatemsgSeq || 0 });
        }, m.prototype.createConversationInstance = function(e2, t2) {
          var r2 = this.getConversationKey(e2, t2), n2 = this.convMap.get(r2);
          return n2 || (n2 = new (t2 === l.q.Peer ? o : t2 === l.q.Group ? s : i).a(e2, this.engineConfig, this.eventBus, this.dbMgr, this.connMgr, this), this.convMap.set(r2, n2), r2 = this.getDBConversation(r2, e2, t2), t2 === l.q.Peer && this.engineConfig.user.userID === e2 && (r2.state = l.p.Disable, r2.conversationName = this.engineConfig.user.userName, r2.conversationAvatarUrl = this.engineConfig.user.userAvatarUrl), n2.setDBConv(r2)), n2.setDBUser(this.dbUserMap.get(e2)), this.setAssociatedGroup(n2, e2, t2), this.updateConvNameAndAvatar("createConversationInstance", n2.dbConv), n2;
        }, m.prototype.emitConvInfo = function(e2) {
          var t2 = this, r2 = [], n2 = [];
          e2.forEach(function(e3) {
            var o2, s2, i2 = e3.user;
            (e3 = e3.dbConv) && e3.state == l.p.Normal && (o2 = false, s2 = i2.userName, i2 = i2.userAvatarUrl, "string" == typeof s2 && e3.conversationName != s2 && (o2 = true, e3.conversationName = s2, r2.push(e3)), "string" == typeof i2 && e3.conversationAvatarUrl != i2 && (o2 = true, e3.conversationAvatarUrl = i2), o2 && (r2.push(e3), e3.maxOrderKey && n2.push({ event: l.n.Updated, conversation: Object(c.q)(t2.convKeys, e3) })));
          }), e2 = "onSyncConvInfo";
          this.dbMgr.addConversationList(r2, e2), n2.length && this.eventBus.emit(l.t.ConvChanged, { infoList: n2 }, e2);
        }, m.prototype.emitConversationUpdated = function(e2, t2) {
          this.dbMgr.addConversationList([e2], t2), e2.state != l.p.Delete && (e2 = { event: l.n.Updated, conversation: Object(c.q)(this.convKeys, e2) }, this.eventBus.emit(l.t.ConvChanged, { infoList: [e2] }, t2));
        }, m.prototype.emitReceiveCommandMessage = function(e2, t2, r2) {
          var n2, o2, s2;
          e2 && (n2 = r2.msg_info, t2 != l.q.Room && (n2 = r2.recv_command_info.command_msg_info, s2 = (r2 = r2.recv_command_info.command_svr_info).sender_user_id, o2 = r2.msg_id, r2 = r2.msg_time, n2.sender_user_id = s2, n2.msg_id = o2, n2.msg_time = r2), s2 = t2 === l.q.Peer ? l.t.RecvPeerMsg : t2 === l.q.Group ? l.t.RecvGroupMsg : l.t.RecvRoomMsg, this.eventBus.emit(s2, { messageList: [this.transform2Command(e2, t2, n2)], fromConversationID: e2 }));
        }, m.prototype.emitMessageDelete = function(e2) {
          var t2 = this, r2 = "emitMessageDelete";
          e2.forEach(function(e3, n2) {
            var o2 = +n2[0], s2 = (n2 = n2.substring(1), t2.logger.info(g, r2, { convID: n2, type: o2, seqs: e3.join() }), e3.shift());
            0 < e3.length && 0 < (e3 = s2 ? e3.filter(function(e4) {
              return s2 < e4;
            }) : e3).length && t2.createConversationInstance(n2, o2).onPushMsgDelete(e3, r2), 0 < s2 && t2.createConversationInstance(n2, o2).onPushAllMsgDelete(s2, r2);
          });
        }, m.prototype.emitMessageReceiptOrRevoke = function(e2, t2) {
          var r2 = this, n2 = "boolean" == typeof t2, o2 = t2 === l.u.SDKPush, s2 = /* @__PURE__ */ new Map(), i2 = (e2.forEach(function(e3) {
            var t3 = e3.conversationType + e3.conversationID, r3 = s2.get(t3) || /* @__PURE__ */ new Set();
            r3.add(e3.conversationSeq), s2.set(t3, r3);
          }), []), a2 = [], u2 = [], d2 = [], p2 = /* @__PURE__ */ new Map(), h2 = [];
          s2.forEach(function(t3, o3) {
            var s3 = o3.substring(1), c2 = +o3[0], g2 = r2.createConversationInstance(s3, c2);
            t3 = g2.fetchMsgListFromCache(Array.from(t3)).then(function(t4) {
              e2.forEach(function(e3) {
                if (e3.conversationID == s3 && e3.conversationType === c2) {
                  var h3 = t4.get(e3.conversationSeq);
                  if (h3) {
                    e3.messageID || (e3.messageID = h3.messageID, d2.push(e3));
                    var f2 = [], m2 = r2.dbConvMap.get(r2.getConversationKey(s3, c2)), _ = null == m2 ? void 0 : m2.lastMessage, v = e3.receiptStatus;
                    if (e3.revokeInfo || !v || n2 && v == h3.receiptStatus || (-1 == r2.selfReceiptSeqs.indexOf(e3.receiptSeq) && (e3.convReceipt ? i2.push(e3) : 0 != e3.readMemberCount && a2.push(e3)), !h3.receiptStatus || e3.convReceipt && h3.direction != l.K.Receive || (h3.receiptStatus = v, f2.push(h3), _ && _.messageID == h3.messageID && _.receiptStatus != v && (_.receiptStatus = v, p2.set(o3, m2)))), n2 && h3.type !== l.R.Revoke && e3.revokeInfo) {
                      if (v = r2.createRevokeMessage(h3, JSON.parse(e3.revokeInfo)), f2.push(v), u2.push(v), !m2)
                        return;
                      h3.direction == l.K.Receive && 0 < m2.unreadMessageCount && h3.conversationSeq > m2.readMsgSeq && (++m2.deletedMsgCount, --m2.unreadMessageCount, p2.set(o3, m2)), _ && _.messageID == h3.messageID && _.type != l.R.Revoke && (m2.lastMessage = v, p2.set(o3, m2));
                    }
                    g2.updateMsgCacheList(f2), r2.dbMgr.addMessageList(s3, c2, f2);
                  }
                }
              });
            });
            h2.push(t3);
          }), Promise.all(h2).then(function() {
            var e3, s3, h3;
            r2.dbMgr.addMessageExtraList(d2, "fetchMessageID"), i2.length && (e3 = r2.mapMessageExtra2ReceiptInfo(i2, o2)).length && r2.eventBus.emit(l.t.ConvMsgReceipt, { infos: e3 }), !a2.length || n2 && true !== t2 || (e3 = r2.mapMessageExtra2ReceiptInfo(a2, o2)).length && r2.eventBus.emit(l.t.MsgReceipt, { infos: e3 }), u2.length && r2.eventBus.emit(l.t.MsgRevoke, { messageList: u2 }), p2.size && (e3 = "emitReceiptOrRevoke:" + t2, h3 = (s3 = Array.from(p2.values())).map(function(e4) {
              return { event: l.n.Updated, conversation: Object(c.q)(r2.convKeys, e4) };
            }), r2.eventBus.emit(l.t.ConvChanged, { infoList: h3 }, e3), r2.onUnreadMessageCount(e3), r2.dbMgr.addConversationList(s3, e3));
          });
        }, m.prototype.mapMessageExtra2ReceiptInfo = function(e2, t2) {
          var r2 = this, n2 = [];
          return e2.forEach(function(e3) {
            var o2;
            e3.messageID && (o2 = e3.messageID + e3.receiptSeq, t2 && r2.msgReceiptChangedMap.set(o2, true), !t2 && r2.msgReceiptChangedMap.get(o2) || (o2 = Math.max(e3.readMemberCount, 0), n2.push({ conversationID: e3.conversationID, conversationType: e3.conversationType, messageID: e3.messageID, status: e3.receiptStatus, readMemberCount: o2, unreadMemberCount: e3.unreadMemberCount, isSelfOperated: !(!e3.convReceipt || 0 != o2) })));
          }), n2;
        }, m.prototype.handleQueryConvsCallback = function(e2, t2) {
          var r2, n2 = this, o2 = t2.isPinned, s2 = t2.config, i2 = t2.log, a2 = (t2 = t2.resolve, (e2 = o2 ? e2.filter(function(e3) {
            return e3.isPinned;
          }) : e2).length), u2 = s2.count, d2 = 0;
          (s2 = s2.nextConversation) && s2.conversationID && (r2 = this.getConversationKey(s2.conversationID, s2.type), d2 = e2.findIndex(function(e3) {
            return e3.id == r2;
          }) + 1), s2 = d2 + u2, e2 = e2.slice(d2, s2), Object.assign(i2, { start: d2, end: s2, total: a2, count: e2.length }), u2 = o2 ? l.I.QueryPinnedList : l.I.QueryConvList;
          this.logger.info(g, u2, i2), t2({ conversationList: e2.map(function(e3) {
            return Object(c.q)(n2.convKeys, e3);
          }) });
        }, m.prototype.mergeServerConvList = function(e2, t2, r2) {
          var o2, s2 = this, i2 = n.a.fromString(this.engineConfig.user.convSeq || "0"), a2 = this.engineConfig.mailHBConfig.conv_list_seq, u2 = this.engineConfig.mailHBConfig.fetch_conv_list;
          if (!u2 || !a2 || a2.lessThanOrEqual(i2))
            return (o2 = Array.from(this.dbConvMap.values()).filter(function(e3) {
              var t3 = s2.filterValidConv(e3);
              return t3 && s2.createConversationInstance(e3.conversationID, e3.type), t3;
            })).sort(c.d), r2(o2, /* @__PURE__ */ new Map());
          var d2 = { time: /* @__PURE__ */ new Date(), dbSeq: i2, hbSeq: a2, how: e2, action: t2, fetch: u2, logined: this.isLogined }, p2 = 1, h2 = ++this.mergeListSeqs.conv, g2 = /* @__PURE__ */ new Map(), f2 = function(t3) {
            t3.list.forEach(function(e3) {
              e3.type != l.q.Room && g2.set(e3.id, e3);
            }), t3.nextFlag && s2.engineConfig.token ? s2.fetchServerPageConv(t3.nextFlag, ++p2, e2, t3.full_list ? 1 : 0).then(f2) : (t3.degree = p2, t3.svrCount = g2.size, s2.engineConfig.user.preVersion = s2.sdk_ver, s2.updateConvSeq(t3.cur, true), d2.dataReport = s2.dataReport.endNetworkRequest(l.c.usermail_convlist.cmd, h2, t3), s2.saveConversationList(g2, t3.full_list, d2, r2));
          };
          this.fetchServerPageConv(i2, p2, e2, 0).then(f2);
        }, m.prototype.mergeServerPinnedList = function(e2, t2, r2) {
          var n2 = this, o2 = +this.engineConfig.user.convPinnedSeq || 0, s2 = this.engineConfig.mailHBConfig.conv_pinned_list_seq;
          if (s2 <= o2)
            return r2();
          var i2 = { time: /* @__PURE__ */ new Date(), dbSeq: o2, hbSeq: s2, how: e2, action: t2, logined: this.isLogined }, a2 = 1, u2 = ++this.mergeListSeqs.pinned, c2 = [], d2 = function(e3) {
            var t3;
            e3.list.forEach(function(e4) {
              c2.push(n2.getConversationKey(e4.conv_id, e4.conv_type));
            }), e3.nextFlag && n2.engineConfig.token ? n2.fetchServerPageConvPinned(e3.nextFlag, ++a2, e3.full_list ? 1 : 0).then(d2) : (e3.degree = a2, e3.svrCount = c2.length, n2.updateConvPinnedListSeq(+(null == (t3 = e3.cur) ? void 0 : t3.toString()), true), t3 = l.c.usermail_convpinnedlist.cmd, i2.dataReport = n2.dataReport.endNetworkRequest(t3, u2, e3), n2.logger.info(g, "mergeSvrConvPinned", i2), r2(c2));
          };
          this.fetchServerPageConvPinned(o2, a2, 0).then(d2);
        }, m.prototype.mergeMessageReactionList = function(e2) {
          var t2 = this, r2 = ++this.mergeListSeqs.msgReaction, n2 = [], o2 = 1, s2 = { time: /* @__PURE__ */ new Date(), dataReport: null }, i2 = function(a2) {
            return p(t2, void 0, void 0, function() {
              var t3, u2, c2, d2;
              return h(this, function(p2) {
                return a2.code || (t3 = a2.msg_next_reaction_seq, u2 = a2.msg_max_reaction_seq, d2 = a2.fetch_end, c2 = a2.reaction_list, d2 ? (c2.forEach(function(e3) {
                  n2.push({ reactionSeq: e3.max_reaction_seq, reactionKey: e3.reaction_key, totalCount: e3.total_user_count, userList: e3.user_reaction, isSelfIncluded: e3.include_self });
                }), this.saveMessageReactionExtra(e2, n2, u2), a2.degree = o2, a2.svrCount = n2.length, d2 = e2.conversationType == l.q.Peer ? l.c.c2c_reaction_list : l.c.group_reaction_list, s2.dataReport = this.dataReport.endNetworkRequest(d2.cmd, r2, a2), this.logger.info(g, "mergeSvrMsgReactions", s2)) : this.fetchServerPageMsgReaction(e2, t3, ++o2).then(i2)), [2];
              });
            });
          };
          this.fetchServerPageMsgReaction(e2, e2.reactionSeq, o2).then(i2);
        }, m.prototype.mergeServerMsgExtraList = function(e2, t2, r2) {
          var o2 = this, s2 = n.a.fromString(this.engineConfig.user.msgExtraSeq || "0"), i2 = this.engineConfig.mailHBConfig.extra_msg_list_seq;
          if (!i2 || i2.lessThanOrEqual(s2))
            return r2 && r2();
          var a2 = { time: /* @__PURE__ */ new Date(), dbSeq: s2, hbSeq: i2, how: e2, action: t2 }, u2 = 1, c2 = s2, d2 = 0, p2 = ++this.mergeListSeqs.msgExtra, h2 = /* @__PURE__ */ new Map(), f2 = /* @__PURE__ */ new Map(), m2 = /* @__PURE__ */ new Map(), _ = function(t3) {
            t3.list || (t3.list = []), c2 = t3.next_list_seq || c2;
            var n2, s3 = t3.fetch_end || t3.code && 6000104 != t3.code ? 0 : c2;
            d2 += t3.list.length, t3.list.forEach(function(e3) {
              var t4, r3;
              1 == e3.type ? (t4 = o2.createMessageReceiptItemExrta(f2, e3), h2.set(t4.id, t4)) : 2 != e3.type && 3 != e3.type || (t4 = e3.conv_type + e3.conv_id, r3 = m2.get(t4) || [0], m2.set(t4, r3), 2 == e3.type ? r3.push.apply(r3, function(e4, t5, r4) {
                if (r4 || 2 === arguments.length)
                  for (var n3, o3 = 0, s4 = t5.length; o3 < s4; o3++)
                    !n3 && o3 in t5 || ((n3 = n3 || Array.prototype.slice.call(t5, 0, o3))[o3] = t5[o3]);
                return e4.concat(n3 || Array.prototype.slice.call(t5));
              }([], function(e4, t5) {
                var r4 = "function" == typeof Symbol && e4[Symbol.iterator];
                if (!r4)
                  return e4;
                var n3, o3, s4 = r4.call(e4), i3 = [];
                try {
                  for (; (void 0 === t5 || 0 < t5--) && !(n3 = s4.next()).done; )
                    i3.push(n3.value);
                } catch (e5) {
                  o3 = { error: e5 };
                } finally {
                  try {
                    n3 && !n3.done && (r4 = s4.return) && r4.call(s4);
                  } finally {
                    if (o3)
                      throw o3.error;
                  }
                }
                return i3;
              }(e3.del_conv_msg_seqs), false)) : r3[0] = Math.max(r3[0], e3.del_conv_msg_seqs[0]));
            }), s3 && o2.engineConfig.token ? o2.fetchServerPageMsgExtra(s3, ++u2, e2).then(_) : (t3.degree = u2, t3.svrCount = d2, s3 = Array.from(h2.values()), n2 = "mergeMsgExtra" + e2, o2.updateMsgExtraSeq(c2, true), o2.dbMgr.addMessageExtraList(s3, n2), o2.dbMgr.addConversationList(Array.from(f2.values()), n2), o2.emitMessageReceiptOrRevoke(s3, e2), o2.emitMessageDelete(m2), a2.dataReport = o2.dataReport.endNetworkRequest(l.c.extra_msglist.cmd, p2, t3), o2.logger.info(g, "mergeSvrMsgExtras", a2), r2 && r2());
          };
          this.fetchServerPageMsgExtra(s2, u2, e2).then(_);
        }, m.prototype.mergeServerMsgStateList = function(e2, t2, r2, o2, s2, i2) {
          var a2 = this, u2 = (void 0 === t2 && (t2 = ""), void 0 === r2 && (r2 = 0), void 0 === o2 && (o2 = 0), void 0 === s2 && (s2 = 0), i2 ? i2.conversationID : "");
          r2 = u2 ? n.a.fromNumber(r2) : n.a.fromString(this.engineConfig.user.c2cMsgStateSeq || "0");
          if (!u2) {
            var d2 = this.engineConfig.mailHBConfig.c2c_statemsg_seq;
            if (!d2 || d2.lessThanOrEqual(r2))
              return;
            o2 = 1, s2 = this.engineConfig.mailHBConfig.c2c_msg_seq;
          }
          var p2 = { time: /* @__PURE__ */ new Date(), dbSeq: r2, how: e2, action: t2, minMsgSeq: o2, maxMsgSeq: s2 }, h2 = 1, f2 = r2, m2 = 0, _ = ++this.mergeListSeqs.msgState, v = /* @__PURE__ */ new Map(), b = function(t3) {
            t3.statemsg_list || (t3.statemsg_list = []), f2 = t3.next_statemsg_seq || f2;
            var r3 = t3.fetch_end || t3.code && 6000104 != t3.code ? 0 : f2;
            m2 += t3.statemsg_list.length;
            for (var n2, d3 = 0; d3 < t3.statemsg_list.length; d3++) {
              var y, M, I, k, w = t3.statemsg_list[d3], C = w.conv_id, S = w.conv_type, D = w.conv_msg_seq, q = a2.createConversationInstance(C, S), R = q.dbConv.deletedMsgMaxSeq || 0;
              -1 != (q.dbConv.deletedMsgSeqs || []).indexOf(D) || D <= R || (R = (q = Object(c.r)(w.msg_status)).revoke, q = (y = !!w.revoke_time) ? l.M.None : q.receipt, M = w.reaction_seq, I = a2.getMsgExtraKey(C, S, D), (k = a2.msgExtraMap.get(I)) || !M && !y && q != l.M.Expired && q != l.M.Failed || ((k = a2.createMessageReceiptExrta(I, C, S, D)).receiptStatus = q, k.reactionSeq = 0, k.reactions = {}), k && (+k.reactionSeq < M && a2.handleMsgStateReactionBriefs(k, w.reaction_briefs), y ? (k.receiptStatus = l.M.None, C = w.msg_type, k.revokeInfo = JSON.stringify({ revokeType: w.revoke_type, revokeStatus: R, revokeTimestamp: w.revoke_time, operatedUserID: w.user_id, revokeExtendedData: Object(c.f)(w.payload), originalMessageType: 200 <= C && C <= 400 ? l.R.Custom : C, originalTextMessageContent: "" })) : q && (k.receiptStatus = -1 == k.readMemberCount ? l.M.Done : q), v.set(I, k)));
            }
            r3 && a2.engineConfig.token ? a2.fetchServerPageMsgState(r3, ++h2, e2, u2, o2, s2).then(b) : (t3.degree = h2, t3.svrCount = m2, r3 = "mergeMsgState" + e2, i2 ? (i2.minStatemsgSeq = +f2.toString(), i2.maxStatemsgSeq = i2.minStatemsgSeq, a2.dbMgr.addConversationList([i2], r3)) : a2.updateC2CMsgStateSeq(f2, true), n2 = Array.from(v.values()), a2.emitMessageReceiptOrRevoke(n2, e2 != l.u.Other), a2.dbMgr.addMessageExtraList(n2, r3), n2 = (u2 ? l.c.group_msg_state_list : l.c.c2c_msg_state_list).cmd, p2.count = v.size, p2.dataReport = a2.dataReport.endNetworkRequest(n2, _, t3), a2.logger.info(g, "mergeSvrMsgStates", p2));
          };
          this.fetchServerPageMsgState(r2, h2, e2, u2, o2, s2).then(b);
        }, m.prototype.fetchServerPageConv = function(e2, t2, r2, n2) {
          var o2 = this, s2 = l.c.usermail_convlist;
          e2 = { conv_list_seq: e2, count: 100, full_pull: n2, degree: t2, how: r2 };
          return 1 == t2 && this.dataReport.beginNetworkRequest(s2.cmd, this.mergeListSeqs.conv, l.i.SDK, e2), this.connMgr.sendRequest(s2, e2, l.i.SDK).then(function(e3) {
            if (e3.code)
              return { list: [] };
            var t3 = e3.conv_list_seq, r3 = e3.max_list_seq, n3 = e3.full_list, s3 = e3.fetch_end, i2 = s3 || t3 && r3 && t3.greaterThanOrEqual(r3) ? 0 : t3, a2 = { _action_: false };
            e3 = e3.conv_list.map(function(e4) {
              var t4 = o2.transform2DBConv(e4), r4 = e4.is_del, n4 = e4.last_msg_del, s4 = e4.last_msg;
              return !r4 && !n4 && t4.orderKey || (a2[e4.conv_id] = { orderKey: t4.orderKey, is_del: r4, last_msg_del: n4, last_msg: s4 }, a2._action_ = true), t4;
            });
            return a2._action_ && o2.logger.info(g, "fetchSvrConv", a2), { nextFlag: i2, cur: t3, max: r3, list: e3, full_list: r3 ? n3 : 0, fetch_end: s3 };
          });
        }, m.prototype.fetchServerPageConvPinned = function(e2, t2, r2) {
          var n2 = l.c.usermail_convpinnedlist;
          e2 = { conv_list_seq: e2, count: 100, full_pull: r2, degree: t2 };
          return 1 == t2 && this.dataReport.beginNetworkRequest(n2.cmd, this.mergeListSeqs.pinned, l.i.SDK, e2), this.connMgr.sendRequest(n2, e2, l.i.SDK).then(function(e3) {
            if (e3.code)
              return { list: [] };
            var t3 = e3.conv_list_seq, r3 = e3.max_list_seq, n3 = e3.full_list, o2 = e3.fetch_end;
            return { nextFlag: o2 || t3 && r3 && t3.greaterThanOrEqual(r3) ? 0 : t3, cur: t3, max: r3, list: e3.conv_list, full_list: n3, fetch_end: o2 };
          });
        }, m.prototype.fetchServerPageMsgExtra = function(e2, t2, r2) {
          var n2 = l.c.extra_msglist;
          e2 = { list_seq: e2, count: 100, degree: t2, how: r2 };
          return 1 == t2 && this.dataReport.beginNetworkRequest(n2.cmd, this.mergeListSeqs.msgExtra, l.i.SDK, e2), this.connMgr.sendRequest(n2, e2, l.i.SDK);
        }, m.prototype.fetchServerPageMsgState = function(e2, t2, r2, n2, o2, s2) {
          return e2 = { statemsg_seq: e2, count: 100, degree: t2, how: r2, min_msg_seq: o2, max_msg_seq: s2 }, n2 && (e2.conv_id = n2), r2 = n2 ? l.c.group_msg_state_list : l.c.c2c_msg_state_list, 1 == t2 && this.dataReport.beginNetworkRequest(r2.cmd, this.mergeListSeqs.msgState, l.i.SDK, e2), this.connMgr.sendRequest(r2, e2, l.i.SDK);
        }, m.prototype.fetchServerPageMsgReaction = function(e2, t2, r2) {
          var n2 = e2.conversationType == l.q.Peer ? l.c.c2c_reaction_list : l.c.group_reaction_list;
          e2 = { conv_id: e2.conversationID, conv_msg_seq: e2.conversationSeq, start_reaction_seq: t2, degree: r2 };
          return 1 == r2 && this.dataReport.beginNetworkRequest(n2.cmd, this.mergeListSeqs.msgReaction, l.i.SDK, e2), this.connMgr.sendRequest(n2, e2);
        }, m.prototype.fetchReactionKey = function(e2, t2, r2) {
          var n2 = e2.conversationType == l.q.Peer ? l.c.c2c_get_reaction : l.c.group_get_reaction;
          e2 = { conv_id: e2.conversationID, conv_msg_seq: e2.conversationSeq, reaction_key: t2, max_reaction_seq: 0, is_detail: r2 };
          return this.connMgr.sendRequest(n2, e2, r2 ? l.i.API : l.i.SDK);
        }, m.prototype.createMessageReceiptExrta = function(e2, t2, r2, n2) {
          return t2 = this.msgExtraMap.get(e2) || { id: e2, ownerID: this.engineConfig.user.userID, conversationID: t2, conversationType: r2, conversationSeq: n2, messageID: "", convReceipt: 0, receiptStatus: l.M.Processing, receiptSeq: "0", receiptMemberListSeq: 0, readMemberCount: 0, unreadMemberCount: 0, memberSeqs: {} }, this.msgExtraMap.set(e2, t2), t2;
        }, m.prototype.createMessageReceiptItemExrta = function(e2, t2) {
          var r2 = t2.conv_id, o2 = t2.conv_type, s2 = t2.conv_msg_seq, i2 = t2.receipt_seq.toString(), a2 = t2.read_count, u2 = t2.unread_count, c2 = -1 == a2, d2 = (t2 = t2.is_conv_read, this.getMsgExtraKey(r2, o2, t2 ? 0 : s2));
          return (d2 = this.createMessageReceiptExrta(d2, r2, o2, s2)).receiptSeq && n.a.fromString(d2.receiptSeq).greaterThan(i2) || (d2.conversationSeq = s2, d2.receiptSeq = i2, d2.readMemberCount = a2, d2.unreadMemberCount = u2, d2.convReceipt = t2 ? 1 : 0, (t2 || c2 || 0 < a2 && 0 == u2) && (d2.receiptStatus = l.M.Done), t2 && (d2.messageID = "", s2 = e2.get(r2) || this.createConversationInstance(r2, o2).dbConv, i2 = d2.conversationSeq, a2 = s2.maxSendReceiptMsgSeq || 0, u2 = s2.maxRecvReceiptMsgSeq || 0, c2 && u2 < i2 ? s2.maxRecvReceiptMsgSeq = i2 : !c2 && a2 < i2 && (s2.maxSendReceiptMsgSeq = i2), e2.set(r2, s2))), d2;
        }, m.prototype.createRevokeMessage = function(e2, t2) {
          return d({ message: "", type: l.R.Revoke, localMessageID: e2.localMessageID, messageID: e2.messageID, senderUserID: e2.senderUserID, timestamp: e2.timestamp, conversationID: e2.conversationID, conversationType: e2.conversationType, direction: e2.direction, sentStatus: e2.sentStatus, orderKey: e2.orderKey, conversationSeq: e2.conversationSeq, receiptStatus: l.M.None }, t2);
        }, m.prototype.saveMessageRevokeExtra = function(e2, t2, r2) {
          var n2 = [e2], o2 = this.createConversationInstance(e2.conversationID, e2.conversationType), s2 = (n2 = (o2.updateMsgCacheList(n2), this.dbMgr.addMessageList(e2.conversationID, e2.conversationType, n2), o2.dbConv.lastMessage), false);
          e2.direction == l.K.Receive && 0 < o2.dbConv.unreadMessageCount && e2.conversationSeq > o2.dbConv.readMsgSeq && (s2 = true, ++o2.dbConv.deletedMsgCount, --o2.dbConv.unreadMessageCount, this.onUnreadMessageCount(r2)), (null == n2 ? void 0 : n2.messageID) == e2.messageID && (s2 = true, o2.dbConv.lastMessage = e2), s2 && this.emitConversationUpdated(o2.dbConv, r2), n2 = false;
          e2.conversationType == l.q.Peer ? (t2.sub(1).toString(), this.engineConfig.user.c2cMsgStateSeq, this.updateC2CMsgStateSeq(t2), n2 = true) : e2.conversationType == l.q.Group && (s2 = +o2.dbConv.maxStatemsgSeq || 0, t2.greaterThan(s2) && (o2.dbConv.maxStatemsgSeq = +t2.toString()), s2 = +o2.dbConv.minStatemsgSeq || 0, t2.toNumber() == s2 + 1 && (o2.dbConv.minStatemsgSeq = +t2.toString(), n2 = true)), n2 && (s2 = this.getMsgExtraKey(e2.conversationID, e2.conversationType, e2.conversationSeq), (o2 = this.msgExtraMap.get(s2)) || (o2 = { id: s2, ownerID: this.engineConfig.user.userID, conversationID: e2.conversationID, conversationType: e2.conversationType, conversationSeq: e2.conversationSeq }, this.msgExtraMap.set(s2, o2)), o2.messageID = e2.messageID, o2.revokeInfo = JSON.stringify({ revokeType: e2.revokeType, revokeStatus: e2.revokeStatus, revokeTimestamp: e2.revokeTimestamp, operatedUserID: e2.operatedUserID, revokeExtendedData: e2.revokeExtendedData, originalMessageType: e2.originalMessageType, originalTextMessageContent: e2.originalTextMessageContent }), this.dbMgr.addMessageExtraList([o2], r2));
        }, m.prototype.createMessageReactionExtra = function(e2, t2, r2, n2) {
          void 0 === n2 && (n2 = "");
          var o2 = this.getMsgExtraKey(e2, t2, r2), s2 = this.msgExtraMap.get(o2);
          return s2 || (s2 = { id: o2, ownerID: this.engineConfig.user.userID, conversationID: e2, conversationType: t2, conversationSeq: r2, messageID: n2, reactionSeq: 0, reactions: {} }, this.msgExtraMap.set(o2, s2)), s2.reactions || (s2.reactions = {}), n2 && !s2.messageID && (s2.messageID = n2), s2;
        }, m.prototype.saveMessageReactionExtra = function(e2, t2, r2, n2, o2) {
          var s2 = "saveReactionExtra", i2 = [], a2 = this.engineConfig.mailHBConfig.reaction_brief_len;
          if (this.logger.info(g, s2, { reactionInfoList: t2, maxReactionSeq: r2, noEmit: n2, isDetail: o2 }), r2 && r2 <= e2.reactionSeq && !o2)
            return [];
          if (r2 && (e2.reactionSeq = r2), t2.forEach(function(t3) {
            var r3 = o2 ? t3.reactionSeq : (null == (r3 = e2.reactions[t3.reactionKey]) ? void 0 : r3.detailSeq) || 0, n3 = (null == (n3 = e2.reactions[t3.reactionKey]) ? void 0 : n3.userList) || [], s3 = (null == (s3 = e2.reactions[t3.reactionKey]) ? void 0 : s3.detailUserList) || [], u3 = 0 == t3.userList.length && t3.totalCount > a2 || o2 ? n3 : t3.userList;
            s3 = o2 ? t3.userList : s3;
            if (o2 && (u3 = s3.slice(0, a2)), !(e2.reactions[t3.reactionKey] && t3.reactionSeq < e2.reactions[t3.reactionKey].seq)) {
              if (n3 = !Object(c.a)(u3, n3) || t3.totalCount !== (null == (n3 = e2.reactions[t3.reactionKey]) ? void 0 : n3.totalCount), +t3.reactionSeq > +(e2.reactionSeq || 0) && (e2.reactionSeq = t3.reactionSeq), 0 == t3.totalCount)
                delete e2.reactions[t3.reactionKey];
              else {
                if (t3.totalCount > a2 && u3.length < a2)
                  return;
                e2.reactions[t3.reactionKey] = { seq: t3.reactionSeq, detailSeq: r3, value: "", totalCount: t3.totalCount, userList: u3, detailUserList: s3, isSelfIncluded: t3.isSelfIncluded };
              }
              n3 && i2.push({ conversationID: e2.conversationID, conversationType: e2.conversationType, messageID: e2.messageID, reactionType: t3.reactionKey, totalCount: t3.totalCount, isSelfIncluded: t3.isSelfIncluded, userList: u3.map(function(e3) {
                return { userID: e3.userID };
              }) });
            }
          }), this.dbMgr.addMessageExtraList([e2], s2), !n2 && 0 < i2.length && this.eventBus.emit(l.t.MsgReactions, { reactions: i2 }), (t2 = (r2 = this.createConversationInstance(e2.conversationID, e2.conversationType)).dbConv.lastMessage) && t2.messageID == e2.messageID) {
            var u2, d2 = [];
            for (u2 in e2.reactions) {
              var p2 = e2.reactions[u2];
              d2.push({ conversationID: e2.conversationID, conversationType: e2.conversationType, messageID: e2.messageID, userList: p2.userList, totalCount: p2.totalCount, reactionType: u2, isSelfIncluded: p2.isSelfIncluded });
            }
            Object(c.a)(t2.reactions, d2) || (t2.reactions = d2, this.emitConversationUpdated(r2.dbConv, s2));
          }
          return i2;
        }, m.prototype.updateConvSeq = function(e2, t2) {
          var r2 = this.engineConfig.user;
          !e2 || !t2 && +r2.convSeq && r2.convSeq != e2.sub(1).toString() || (r2.convSeq = e2.toString(), this.dbMgr.setUser(r2));
        }, m.prototype.updateMsgExtraSeq = function(e2, t2) {
          var r2 = this.engineConfig.user;
          !e2 || !t2 && +r2.msgExtraSeq && r2.msgExtraSeq != e2.sub(1).toString() || (r2.msgExtraSeq = e2.toString(), this.dbMgr.setUser(r2));
        }, m.prototype.updateC2CMsgStateSeq = function(e2, t2) {
          var r2 = this.engineConfig.user;
          !e2 || !t2 && +r2.c2cMsgStateSeq && r2.c2cMsgStateSeq != e2.sub(1).toString() || (r2.c2cMsgStateSeq = e2.toString(), this.dbMgr.setUser(r2));
        }, m.prototype.updateConvPinnedListSeq = function(e2, t2) {
          var r2 = this.engineConfig.user;
          !e2 || !t2 && +r2.convPinnedSeq && r2.convPinnedSeq != e2 - 1 || (r2.convPinnedSeq = e2, this.dbMgr.setUser(r2));
        }, m.prototype.updateConvNameAndAvatar = function(e2, t2, r2, n2) {
          var o2 = ((o2 = t2.type == l.q.Peer ? this.svrConvInfoMap.get(t2.conversationID) || this.dbUserMap.get(t2.conversationID) : void 0) && void 0 === r2 && (r2 = o2.userName), o2 && void 0 === n2 && (n2 = o2.userAvatarUrl), false);
          "string" == typeof r2 && r2 != t2.conversationName && (o2 = true, t2.conversationName = r2), "string" == typeof n2 && n2 != t2.conversationAvatarUrl && (o2 = true, t2.conversationAvatarUrl = n2), o2 && t2 && this.dbMgr.addConversationList([t2], e2);
        }, m.prototype.setAssociatedGroup = function(e2, t2, r2) {
          r2 === l.q.Group ? this.groupMgr.initGroupByConversation(t2) : r2 === l.q.Room && ((r2 = this.groupMgr.findRoom(t2)) ? e2.setAssociatedGroup(r2.sessionID, r2.userSessionID, r2.subRoomID, r2.enabledOfflineMsg) : e2.setAssociatedGroup());
        }, m.prototype.saveConversationList = function(e2, t2, r2, o2) {
          var s2 = this, i2 = [], a2 = /* @__PURE__ */ new Map(), u2 = /* @__PURE__ */ new Map(), d2 = /* @__PURE__ */ new Map(), p2 = [], h2 = (t2 && 0 < this.dbConvMap.size && this.dbConvMap.forEach(function(e3, t3) {
            return s2.filterValidConv(e3) && d2.set(t3, e3);
          }), e2.forEach(function(e3, t3) {
            d2.delete(t3);
            var r3, o3, c2, h3 = null, g2 = e3.state == l.p.Delete, f3 = e3.msgSeq, m3 = s2.dbConvMap.get(t3), _2 = !m3 || !m3.maxOrderKey;
            m3 ? (r3 = m3.orderKey, o3 = m3.msgSeq || 0, c2 = m3.state == l.p.Delete, g2 && e3.seq && n.a.fromString(m3.seq || "0").lessThan(e3.seq) && (e3.seq = e3.seq.toString(), p2.push(e3.conversationID), Object.assign(m3, e3), u2.set(t3, m3)), (o3 < f3 || m3.readMsgSeq < e3.readMsgSeq) && (p2.push(e3.conversationID + ":" + m3.readMsgSeq + "," + e3.readMsgSeq), Object.assign(m3, e3), u2.set(t3, m3), h3 = c2 || _2 ? l.n.Added : l.n.Updated), g2 && !c2 && (h3 = l.n.Deleted), m3.maxOrderKey || (m3.maxOrderKey = f3 * l.l.MESSAGE_SEQ_MULTIPLIER), r3 > e3.orderKey && (m3.orderKey = r3), m3.maxStatemsgSeq = e3.maxStatemsgSeq) : (s2.initDBConversationFields(m3 = e3, f3), s2.dbConvMap.set(t3, m3), u2.set(t3, m3), !g2 && 0 < f3 && (h3 = l.n.Added)), g2 || (e3.type != l.q.Peer || !_2 && s2.dbUserMap.has(e3.conversationID) || i2.push(e3.conversationID), 0 < f3 && _2 && (h3 = l.n.Added)), null != h3 && a2.set(t3, h3);
          }), r2.updateConvs = p2.join(), d2.forEach(function(e3, t3) {
            e3.state = l.p.Delete, s2.syncConvReadSeqToMsgSeq(e3, e3.msgSeq), s2.convMap.delete(t3), a2.set(t3, l.n.Deleted);
          }), "mergeSvrConvs" + a2.size);
          if (d2.size && this.dbMgr.addConversationList(Array.from(d2.values()), h2), i2.length) {
            for (var f2 = [], m2 = 0; m2 < i2.length; m2 += 100) {
              var _ = this.connMgr.sendRequest(l.c.fetch_user_info, { _ev_: h2, quey_user_id: i2.slice(m2, m2 + 100) }, l.i.SDK);
              f2.push(_);
            }
            Promise.all(f2).then(function(e3) {
              var t3 = [];
              (e3 = (e3.forEach(function(e4) {
                (e4 = e4.result) && e4.length && e4.forEach(function(e5) {
                  var r3 = s2.getConversationKey(e5.user_id, l.q.Peer), n2 = Object(c.f)(e5.user_name), o3 = Object(c.f)(e5.avatar);
                  (r3 = ((r3 = s2.dbConvMap.get(r3)) && (r3.conversationName = n2, r3.conversationAvatarUrl = o3), s2.dbUserMap.get(e5.user_id) || { userID: e5.user_id, userName: n2, userAvatarUrl: o3 })).userName = n2, r3.userAvatarUrl = o3, t3.push(r3), s2.dbUserMap.set(r3.userID, r3);
                });
              }), s2.dbMgr.addUserList(t3), s2.dbMgr.addConversationList(Array.from(u2.values()), h2), Array.from(s2.dbConvMap.values()).filter(function(e4) {
                var t4 = s2.filterValidConv(e4);
                return t4 && s2.createConversationInstance(e4.conversationID, e4.type), t4;
              }))).sort(c.d), r2.count = e3.length, s2.logger.info(g, h2, r2), o2(e3, a2);
            });
          } else
            this.dbMgr.addConversationList(Array.from(u2.values()), h2), (t2 = Array.from(this.dbConvMap.values()).filter(function(e3) {
              var t3 = s2.filterValidConv(e3);
              return t3 && s2.createConversationInstance(e3.conversationID, e3.type), t3;
            })).sort(c.d), r2.count = t2.length, this.logger.info(g, h2, r2), o2(t2, a2);
        }, m.prototype.mergeMessageExtra = function(e2, t2, r2) {
          var n2 = this, o2 = e2.type == l.q.Peer, s2 = e2.maxSendReceiptMsgSeq || 0, i2 = e2.maxRecvReceiptMsgSeq || 0, a2 = [];
          o2 && r2 && (r2.sendSeq = s2, r2.recvSeq = i2), t2.forEach(function(t3) {
            if (!t3.isUserInserted && t3.sentStatus == l.P.Success) {
              var u2 = null, c2 = t3.conversationSeq, p2 = (g2 = n2.msgExtraMap.get(n2.getMsgExtraKey(e2.conversationID, e2.type, c2))) && g2.receiptStatus, h2 = g2 && g2.reactions, g2 = g2 && g2.revokeInfo && JSON.parse(g2.revokeInfo);
              if (t3.receiptStatus == l.M.Processing && (o2 && (t3.direction == l.K.Send && c2 <= s2 || t3.direction == l.K.Receive && c2 <= i2) ? (t3.receiptStatus = l.M.Done, u2 = t3) : p2 && p2 != t3.receiptStatus && (t3.receiptStatus = p2, u2 = t3, r2 && (r2[c2] = p2))), h2) {
                var f2, m2 = [];
                for (f2 in h2) {
                  var _ = h2[f2];
                  m2.push({ conversationID: t3.conversationID, conversationType: t3.conversationType, messageID: t3.messageID, userList: _.userList, totalCount: _.totalCount, reactionType: f2, isSelfIncluded: _.isSelfIncluded });
                }
                (t3.reactions = m2).length && (u2 = t3);
              }
              g2 && g2.originalTextMessageContent && t3.type == l.R.Revoke && (t3.originalTextMessageContent = g2.originalTextMessageContent), u2 && a2.push(d({}, u2));
            }
          }), this.createConversationInstance(e2.conversationID, e2.type).updateMsgCacheList(a2), this.dbMgr.addMessageList(e2.conversationID, e2.type, a2);
        }, m.prototype.mergeGroupMessageStatus = function(e2, t2, r2) {
          if (t2.length) {
            var n2 = +e2.minStatemsgSeq || 0, o2 = +e2.maxStatemsgSeq || 0;
            if (!o2 || n2 < o2) {
              for (var s2 = t2[0].conversationSeq, i2 = s2, a2 = 1; a2 < t2.length; a2++) {
                var u2 = t2[a2].conversationSeq;
                u2 < s2 && (s2 = u2), i2 < u2 && (i2 = u2);
              }
              this.mergeServerMsgStateList(r2, "", n2, s2, i2, e2);
            }
          }
        }, m.prototype.insertDBMessageExtra = function(e2) {
          var t2, r2;
          e2.receiptInfo && (t2 = e2.message, r2 = this.getMsgExtraKey(t2.conversationID, t2.conversationType, t2.conversationSeq), (r2 = this.createMessageReceiptExrta(r2, t2.conversationID, t2.conversationType, t2.conversationSeq)).messageID = t2.messageID, r2.receiptStatus = t2.receiptStatus, r2.receiptSeq = e2.receiptInfo.seq.toString(), r2.unreadMemberCount = e2.receiptInfo.count, this.dbMgr.addMessageExtraList([r2], "sendMsgReceiptRsp"), this.updateMsgExtraSeq(e2.receiptInfo.seq)), delete e2.receiptInfo;
        }, m.prototype.isDBConvInvalid = function(e2) {
          return !e2 || e2.state == l.p.Delete || !e2.maxOrderKey;
        }, m.prototype.filterValidConv = function(e2, t2) {
          var r2 = e2.state != l.p.Delete && !!e2.maxOrderKey && e2.type != l.q.Room && "number" == typeof e2.type;
          return t2 ? r2 && !!e2.isPinned : r2;
        }, m.prototype.transform2DBConv = function(e2) {
          var t2, r2, n2 = e2.conv_id, o2 = e2.conv_type, s2 = e2.conv_msg_seq, i2 = e2.read_seq, a2 = e2.send_count_after_read, u2 = e2.sub_read_count, c2 = e2.last_msg_time, d2 = this.getConversationKey(n2, o2), p2 = this.dbConvMap.get(d2), h2 = null == p2 ? void 0 : p2.lastMessage, g2 = e2.last_msg_del ? void 0 : this.transform2Message(e2.last_msg, n2, o2);
          g2 && h2 && (this.createConversationInstance(n2, o2).calculateMessageOrderKey(g2, false), (h2.sentStatus !== l.P.Success && g2.timestamp < h2.timestamp || g2.orderKey < h2.orderKey) && (g2 = h2)), o2 == l.q.Peer && g2 && g2.receiptStatus == l.M.Processing && p2 && (t2 = g2.conversationSeq, h2 = p2.maxSendReceiptMsgSeq || 0, r2 = p2.maxRecvReceiptMsgSeq || 0, (g2.direction == l.K.Send && t2 <= h2 || g2.direction == l.K.Receive && t2 <= r2) && (g2.receiptStatus = l.M.Done)), p2 && p2.readMsgSeq > i2 && (i2 = p2.readMsgSeq), h2 = { id: d2, ownerID: this.engineConfig.user.userID, conversationID: n2, type: o2, msgSeq: s2, readMsgSeq: i2, sendMsgCount: a2, unreadMessageCount: Math.max(s2 - i2 - a2 - u2, 0), deletedMsgCount: ((null == p2 ? void 0 : p2.deletedMsgCount) || 0) + u2, orderKey: this.getConversationOrderKey(c2, e2.last_msg, e2.update_time), lastMessage: g2 };
          return o2 == l.q.Group && e2.statemsg_seq && (t2 = e2.statemsg_seq, this.engineConfig.user.preVersion ? h2.maxStatemsgSeq = t2 : (r2 = this.engineConfig.mailHBConfig.state_seq_reduce_num, h2.maxStatemsgSeq = -1 == r2 ? 0 : t2 - r2)), e2.is_del ? (h2.state = l.p.Delete, h2.seq = e2.conv_list_seq) : h2.state = p2 ? p2.state : l.p.Normal, h2;
        }, m.prototype.getConversationOrderKey = function(e2, t2, r2) {
          return t2 && t2.msg_svr_info && t2.msg_svr_info.msg_time ? t2.msg_svr_info.msg_time || e2 || r2 : e2 || r2;
        }, m.prototype.transform2Message = function(e2, t2, r2) {
          var n2, o2, s2;
          if (e2 && e2.msg_info && e2.msg_info.msg_type && e2.msg_svr_info)
            return n2 = e2.msg_info, e2 = e2.msg_svr_info, o2 = n2.msg_type, s2 = e2.sender_user_id, (o2 = { type: 200 <= o2 && o2 <= 400 ? l.R.Custom : o2, messageID: e2.msg_id, localMessageID: "", timestamp: e2.msg_time, extendedData: n2.payload && o2 != l.R.Revoke ? Object(c.f)(n2.payload) : void 0, conversationSeq: e2.conv_msg_seq, conversationID: t2, conversationType: r2, senderUserID: s2, sentStatus: l.P.Success, direction: s2 === this.engineConfig.user.userID ? l.K.Send : l.K.Receive, isUserInserted: false, receiptStatus: l.M.None, clientSeq: n2.msg_client_info ? n2.msg_client_info.client_msg_seq : 0, clientSid: n2.msg_client_info ? n2.msg_client_info.conv_sid : "" }).localMessageID = o2.clientSid + o2.clientSeq, this.protobuf.decodeMsgBody(o2, n2.msg, e2.version, e2.is_server), o2.type == l.R.Custom && (o2.subType = n2.sub_msg_type || 0, o2.searchedContent = n2.searched_content), r2 == l.q.Unknown ? o2.isBroadcastMessage = true : (n2.has_receipt && o2.type != l.R.Revoke && (o2.receiptStatus = l.M.Processing, (s2 = this.msgExtraMap.get(this.getMsgExtraKey(t2, r2, o2.conversationSeq))) && (o2.receiptStatus = s2.receiptStatus), this.dbMgr.checkMessageStatus(o2)), o2.reactions = this.handleReactionList(o2, e2.reactions)), o2;
        }, m.prototype.transform2Command = function(e2, t2, r2) {
          var n2 = r2.sender_user_id;
          return (r2 = { type: r2.msg_type, message: r2.msg_type == l.R.Barrage ? Object(c.f)(r2.msg) : r2.msg, localMessageID: "", messageID: r2.msg_id, timestamp: r2.msg_time, extendedData: r2.payload ? Object(c.f)(r2.payload) : void 0, conversationID: e2, conversationType: t2, senderUserID: n2, sentStatus: l.P.Success, direction: n2 === this.engineConfig.user.userID ? l.K.Send : l.K.Receive }).localMessageID = r2.messageID, r2;
        }, m.prototype.syncConvReadSeqToMsgSeq = function(e2, t2) {
          e2.sendMsgCount = 0, e2.deletedMsgCount = 0, e2.unreadMessageCount = 0, e2.readMsgSeq = t2 || 0;
        }, m.prototype.deleteLocalConv = function(e2, t2) {
          e2.state = l.p.Delete, this.syncConvReadSeqToMsgSeq(e2, e2.msgSeq), this.convMap.delete(e2.id);
          var r2 = "deleteConv";
          return this.dbMgr.addConversationList([e2], r2), this.onUnreadMessageCount(r2), this.stgyMgr.modifyConversation(e2.conversationID, e2.type, l.n.Deleted), t2 && this.logger.info(g, l.I.DeleteConv, t2), Promise.resolve({ conversationID: e2.conversationID, conversationType: e2.type });
        }, m.prototype.deleteAllLocalConv = function(e2, t2, r2) {
          var n2 = this, o2 = [], s2 = (this.convMap.forEach(function(e3) {
            e3.convType == l.q.Room || t2 && +e3.dbConv.seq > t2 || ((e3 = e3.dbConv).state = l.p.Delete, n2.syncConvReadSeqToMsgSeq(e3, e3.msgSeq), o2.push(e3), n2.convMap.delete(e3.id));
          }), "deleteAllConv");
          return this.dbMgr.addConversationList(o2, s2), this.onUnreadMessageCount(s2), this.stgyMgr.deleteAllConversation(o2), e2 && this.logger.info(g, l.I.DeleteAllConv, e2), r2 && this.eventBus.emit(l.t.ConvAllDeleted, { count: o2.length }), Promise.resolve();
        }, m.prototype.handleReactionList = function(e2, t2) {
          var r2 = this;
          if (!t2 || e2.type == l.R.Revoke)
            return [];
          var n2 = t2.is_detail, o2 = (t2 = t2.reaction_list, []), s2 = this.engineConfig.mailHBConfig.reaction_brief_len;
          return t2 && t2.forEach(function(t3) {
            var i2 = t3.user_reaction.slice(0, s2).map(function(e3) {
              return { userID: e3.userID };
            });
            (i2 = { conversationID: e2.conversationID, conversationType: e2.conversationType, messageID: e2.messageID, userList: i2, totalCount: t3.total_user_count, reactionType: t3.reaction_key, isSelfIncluded: false }).isSelfIncluded = n2 ? i2.userList.some(function(e3) {
              return e3.userID == r2.engineConfig.user.userID;
            }) : !!t3.include_self, o2.push(i2);
          }), o2;
        }, m.prototype.handleMsgStateReactionBriefs = function(e2, t2) {
          return p(this, void 0, void 0, function() {
            var r2, n2, o2, s2;
            return h(this, function(i2) {
              switch (i2.label) {
                case 0:
                  return t2 ? e2.messageID ? [3, 2] : [4, this.createConversationInstance(e2.conversationID, e2.conversationType).fetchMsgListFromCache([e2.conversationSeq])] : [2];
                case 1:
                  if (!(r2 = (r2 = i2.sent()).get(e2.conversationSeq)))
                    return [2];
                  e2.messageID = r2.messageID, i2.label = 2;
                case 2:
                  if (n2 = [], null != e2 && e2.reactions)
                    for (s2 in o2 = function(r3) {
                      t2.find(function(e3) {
                        return e3.reaction_key == r3;
                      }) || n2.push({ reactionSeq: e2.reactions[r3].seq + 1, reactionKey: r3, totalCount: 0, userList: [], isSelfIncluded: false });
                    }, e2.reactions)
                      o2(s2);
                  return t2.forEach(function(e3) {
                    n2.push({ reactionSeq: e3.max_reaction_seq, reactionKey: e3.reaction_key, totalCount: e3.total_user_count, userList: e3.user_reaction, isSelfIncluded: !!e3.include_self });
                  }), 0 < n2.length && this.saveMessageReactionExtra(e2, n2), [2];
              }
            });
          });
        }, m);
        function m(e2, t2, r2, n2, o2) {
          this.logger = a.a.getInstance().logger, this.dataReport = a.a.getInstance().dataReport, this.protobuf = a.a.getInstance().protobuf, this.sdk_ver = a.a.getInstance().settings.deviceInfo.sdk_ver, this.msgReceiptChangedMap = /* @__PURE__ */ new Map(), this.mergeMsgReceiptSeqs = /* @__PURE__ */ new Set(), this.mergeMsgReceiptMap = /* @__PURE__ */ new Map(), this.mergeMsgReceiptDBConvMap = /* @__PURE__ */ new Map(), this.mergeMsgReceiptTimer = 0, this.mergeListSeqs = { conv: 0, pinned: 0, msgExtra: 0, msgState: 0, msgReaction: 0 }, this.isLogined = false, this.oldTotalUnreadCount = 0, this.queryConvsCallbackList = [], this.selfReceiptSeqs = [], this.convKeys = ["conversationID", "conversationName", "conversationAvatarUrl", "type", "unreadMessageCount", "notificationStatus", "orderKey", "isPinned", "lastMessage"], this.convMap = /* @__PURE__ */ new Map(), this.dbConvMap = /* @__PURE__ */ new Map(), this.dbGroupMap = /* @__PURE__ */ new Map(), this.dbUserMap = /* @__PURE__ */ new Map(), this.svrConvInfoMap = /* @__PURE__ */ new Map(), this.msgExtraMap = /* @__PURE__ */ new Map(), this.engineConfig = e2, this.eventBus = t2, this.connMgr = r2, this.dbMgr = n2, this.groupMgr = o2, this.stgyMgr = new u.a(e2, t2), o2.dbGroupMap = this.dbGroupMap, o2.dbConvMap = this.dbConvMap, o2.msgExtraMap = this.msgExtraMap, this.registerInnerEvent();
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return i;
        });
        t = r(13);
        var n, o, s = r(0), i = ((r = (n = function(e2, t2) {
          return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e3, t3) {
            e3.__proto__ = t3;
          } || function(e3, t3) {
            for (var r2 in t3)
              Object.prototype.hasOwnProperty.call(t3, r2) && (e3[r2] = t3[r2]);
          })(e2, t2);
        }, function(e2, t2) {
          if ("function" != typeof t2 && null !== t2)
            throw new TypeError("Class extends value " + String(t2) + " is not a constructor or null");
          function r2() {
            this.constructor = e2;
          }
          n(e2, t2), e2.prototype = null === t2 ? Object.create(t2) : (r2.prototype = t2.prototype, new r2());
        }))(a, o = t.a), a.prototype.setAssociatedGroup = function() {
        }, a.prototype.getAssociatedReqBody = function() {
          return null;
        }, a.prototype.isFetchMessageWhenLogin = function(e2) {
          return !(e2 === s.u.SDKLogin && !this.engineConfig.mailHBConfig.fetch_c2c_msg_count);
        }, a.prototype.getFetchMessageReqBody = function(e2, t2, r2, n2) {
          var o2 = this.engineConfig.mailHBConfig.fetch_c2c_msg_count || 100;
          return t2 <= s.u.SDKLogin && (n2 = Math.min(n2, o2 < 0 ? 100 : o2)), { conv_id: this.convID, conv_type: this.convType, conv_msg_seq: e2, count: n2, mode: r2, login_fetch: t2 === s.u.SDKLogin ? 1 : 0 };
        }, a);
        function a(e2, t2, r2, n2, i2, a2) {
          return (e2 = o.call(this, e2, t2, r2, n2, i2, a2) || this).dbConv.type = s.q.Peer, e2.convType = s.q.Peer, e2.convTypeMap = { receiveMessage: s.t.RecvPeerMsg, textMsgCmd: s.c.c2c_msg, commandMsgCmd: s.c.c2c_command, fetchMsgList: s.c.c2c_msglist, msgStatusQuery: s.c.c2c_query_msg }, e2;
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return i;
        });
        t = r(13);
        var n, o, s = r(0), i = ((r = (n = function(e2, t2) {
          return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e3, t3) {
            e3.__proto__ = t3;
          } || function(e3, t3) {
            for (var r2 in t3)
              Object.prototype.hasOwnProperty.call(t3, r2) && (e3[r2] = t3[r2]);
          })(e2, t2);
        }, function(e2, t2) {
          if ("function" != typeof t2 && null !== t2)
            throw new TypeError("Class extends value " + String(t2) + " is not a constructor or null");
          function r2() {
            this.constructor = e2;
          }
          n(e2, t2), e2.prototype = null === t2 ? Object.create(t2) : (r2.prototype = t2.prototype, new r2());
        }))(a, o = t.a), a.prototype.setAssociatedGroup = function() {
        }, a.prototype.getAssociatedReqBody = function() {
          return null;
        }, a.prototype.isFetchMessageWhenLogin = function(e2) {
          return !(e2 === s.u.SDKLogin && !this.engineConfig.mailHBConfig.fetch_group_msg_count);
        }, a.prototype.getFetchMessageReqBody = function(e2, t2, r2, n2) {
          var o2 = this.engineConfig.mailHBConfig.fetch_group_msg_count || 100;
          return t2 <= s.u.SDKLogin && (n2 = Math.min(n2, o2 < 0 ? 100 : o2)), { group_id: this.convID, conv_msg_seq: e2, count: n2, sort_type: r2 };
        }, a);
        function a(e2, t2, r2, n2, i2, a2) {
          return (e2 = o.call(this, e2, t2, r2, n2, i2, a2) || this).dbConv.type = s.q.Group, e2.convType = s.q.Group, e2.convTypeMap = { receiveMessage: s.t.RecvGroupMsg, textMsgCmd: s.c.group_msg, commandMsgCmd: s.c.group_command, fetchMsgList: s.c.group_msglist, msgStatusQuery: s.c.group_query_msg }, e2;
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return u;
        });
        t = r(3);
        var n, o, s = r.n(t), i = (t = r(13), r(0)), a = (r = (n = function(e2, t2) {
          return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e3, t3) {
            e3.__proto__ = t3;
          } || function(e3, t3) {
            for (var r2 in t3)
              Object.prototype.hasOwnProperty.call(t3, r2) && (e3[r2] = t3[r2]);
          })(e2, t2);
        }, function(e2, t2) {
          if ("function" != typeof t2 && null !== t2)
            throw new TypeError("Class extends value " + String(t2) + " is not a constructor or null");
          function r2() {
            this.constructor = e2;
          }
          n(e2, t2), e2.prototype = null === t2 ? Object.create(t2) : (r2.prototype = t2.prototype, new r2());
        }), function() {
          return (a = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var o2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, o2) && (e2[o2] = t2[o2]);
            return e2;
          }).apply(this, arguments);
        }), u = (r(c, o = t.a), c.prototype.setAssociatedGroup = function(e2, t2, r2, n2) {
          this.roomReq.room_session_id = e2, this.roomReq.room_user_session_id = t2, this.roomReq.sub_room_id = r2, this.enabledOfflineMsg = n2;
        }, c.prototype.getAssociatedReqBody = function() {
          return this.roomReq;
        }, c.prototype.isFetchMessageWhenLogin = function(e2) {
          return !(e2 === i.u.SDKLogin && !this.engineConfig.mailHBConfig.fetch_room_msg_count) && this.enabledOfflineMsg;
        }, c.prototype.getFetchMessageReqBody = function(e2, t2, r2, n2) {
          if (!this.roomReq.room_session_id || 0 == this.roomReq.room_session_id.toNumber() || !this.enabledOfflineMsg)
            return null;
          var o2 = this.engineConfig.mailHBConfig.fetch_room_msg_count || 100;
          return t2 <= i.u.SDKLogin && (n2 = Math.min(n2, o2 < 0 ? 100 : o2)), a(a({}, this.roomReq), { room_id: this.convID, conv_msg_seq: e2, count: n2, sort_type: r2 });
        }, c);
        function c(e2, t2, r2, n2, a2, u2) {
          return (e2 = o.call(this, e2, t2, r2, n2, a2, u2) || this).roomReq = { room_session_id: s.a.fromNumber(0), room_user_session_id: s.a.fromNumber(0), sub_room_id: "" }, e2.enabledOfflineMsg = false, e2.dbConv.type = i.q.Room, e2.convType = i.q.Room, e2.convTypeMap = { receiveMessage: i.t.RecvRoomMsg, textMsgCmd: i.c.room_msg, commandMsgCmd: i.c.room_command, fetchMsgList: i.c.room_msglist, msgStatusQuery: i.c.room_query_msg }, e2;
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return u;
        });
        var n = r(2), o = r(73), s = r(1), i = r(0), a = i.J.Strategy, u = (c.prototype.start = function() {
          var e2, t2 = this;
          this.triggerTimer || (this.convStrategy.start(), !s.n && window && "requestIdleCallback" in window ? (e2 = function(e3) {
            if (e3)
              for (var r2 = t2.convStrategy.popFrontConversations(); (0 < e3.timeRemaining() || e3.didTimeout) && r2.length; )
                t2.handleIdleTimeStrategy(1, r2.shift());
          }, this.triggerTimer = setInterval(function() {
            return requestIdleCallback(e2);
          }, this.triggerInterval)) : this.triggerTimer = setInterval(function() {
            for (var e3 = t2.convStrategy.popFrontConversations(); e3.length; )
              t2.handleIdleTimeStrategy(0, e3.shift());
          }, this.triggerInterval));
        }, c.prototype.stop = function() {
          this.convStrategy.stop(), this.triggerTimer && clearInterval(this.triggerTimer), this.triggerTimer = 0;
        }, c.prototype.initConversations = function(e2) {
          this.convStrategy.initList(e2);
        }, c.prototype.modifyConversation = function(e2, t2, r2, n2) {
          switch (r2) {
            case i.n.Added:
            case i.n.Updated:
              this.convStrategy.insertConversation(e2, t2, n2);
              break;
            case i.n.Disabled:
            case i.n.Deleted:
              this.convStrategy.removeConversation(e2, t2);
          }
          this.logger.info(a, "MGR.modifyConv", { convID: e2, convType: t2, state: r2, todoList: n2 });
        }, c.prototype.deleteAllConversation = function(e2) {
          var t2 = this;
          e2.forEach(function(e3) {
            return t2.convStrategy.removeConversation(e3.conversationID, e3.type);
          });
        }, c.prototype.updateConversationTodoList = function(e2, t2, r2, n2) {
          this.convStrategy.modifyConversationTodoList(e2, t2, r2, n2), this.logger.info(a, "MGR.updateConvTodos", { convID: e2, convType: t2, state: r2, todo: n2 });
        }, c.prototype.updateConversationActivity = function(e2, t2, r2) {
          this.convStrategy.increaseConversationActivities(e2, t2), this.logger.info(a, "MGR.updateConvAct", { convID: e2, convType: t2, activity: r2 });
        }, c.prototype.handleIdleTimeStrategy = function(e2, t2) {
          t2 && (this.eventBus.exec(i.t.IIdleFetchConvMsg, t2.convID, t2.convType, t2.todoFlag), this.modifyConversation(t2.convID, t2.convType, i.n.Disabled, i.a.FetchAll), this.logger.info(a, "MGR.trigConvAct:" + e2, t2));
        }, c);
        function c(e2, t2) {
          this.engineConfig = e2, this.logger = n.a.getInstance().logger, this.triggerInterval = 3e4, this.triggerTimer = null, this.eventBus = t2, this.convStrategy = new o.a();
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return u;
        });
        var n = r(2), o = r(0), s = o.J.Strategy, i = (a.prototype.actionActivities = function() {
          this.activities++;
        }, a);
        function a(e2, t2, r2) {
          this.inactiveTurn = 0, this.activities = 0, this.todoFlag = 3, this.convID = e2, this.convType = t2, r2 == o.a.FetchAll ? this.todoFlag = 3 : r2 == o.a.FetchMessageList ? this.todoFlag = 1 : r2 == o.a.FetchMessageStatusList && (this.todoFlag = 2);
        }
        c.prototype.start = function() {
          var e2 = this;
          this.sortTask || (this.sortTask = setInterval(function() {
            e2.strategyList.sort(function(e3, t2) {
              return t2.activities - e3.activities;
            }), e2.strategyList = e2.strategyList.filter(function(t2) {
              return t2.inactiveTurn < e2.inactiveRemoveTurn;
            }), e2.strategyList.forEach(function(e3) {
              e3.todoFlag && e3.inactiveTurn++;
            }), e2.strategyList.length && e2.logger.info(s, "start", { strategyList: e2.strategyList });
          }, this.sortInterval));
        }, c.prototype.stop = function() {
          this.sortTask && clearInterval(this.sortTask), this.sortTask = 0, this.strategyList.length = 0, this.groupConvInfoMap.clear(), this.c2cConvInfoMap.clear();
        }, c.prototype.initList = function(e2) {
          var t2 = this;
          e2.length && (e2.sort(function(e3, t3) {
            return e3.conversationOrderKey - t3.conversationOrderKey;
          }), e2.forEach(function(e3) {
            var r2;
            e3.conversationType == o.q.Group && (r2 = new i(e3.conversationID, e3.conversationType, o.a.FetchAll), t2.strategyList.push(r2), t2.groupConvInfoMap.set(e3.conversationID, r2));
          }), this.strategyList.sort(function(e3, t3) {
            return e3.activities - t3.activities;
          }), this.logger.info(s, "initList", { strategyList: this.strategyList }));
        }, c.prototype.insertConversation = function(e2, t2, r2) {
          r2 = new i(e2, t2, r2), t2 == o.q.Group ? this.groupConvInfoMap.set(e2, r2) : t2 == o.q.Peer && this.c2cConvInfoMap.set(e2, r2), this.strategyList.some(function(r3) {
            return e2 == r3.convID && t2 == r3.convType;
          }) || this.strategyList.push(r2);
        }, c.prototype.removeConversation = function(e2, t2) {
          t2 == o.q.Group ? this.groupConvInfoMap.delete(e2) : t2 == o.q.Peer && this.c2cConvInfoMap.delete(e2);
          var r2 = this.strategyList.findIndex(function(r3) {
            return e2 == r3.convID && t2 == r3.convType;
          });
          -1 != r2 && this.strategyList.splice(r2, 1);
        }, c.prototype.modifyConversationTodoList = function(e2, t2, r2, n2) {
          switch (n2) {
            case o.a.FetchAll:
              t2 == o.q.Group ? (i2 = this.groupConvInfoMap.get(e2), r2 == o.b.Insert ? i2.todoFlag |= 3 : r2 == o.b.Remove && (i2.todoFlag &= 0)) : t2 == o.q.Peer && (i2 = this.c2cConvInfoMap.get(e2), r2 == o.b.Insert ? i2.todoFlag |= 3 : r2 == o.b.Remove && (i2.todoFlag &= 0));
              break;
            case o.a.FetchMessageList:
              t2 == o.q.Group ? (i2 = this.groupConvInfoMap.get(e2), r2 == o.b.Insert ? i2.todoFlag |= 3 : r2 == o.b.Remove && (i2.todoFlag &= 0)) : t2 == o.q.Peer && ((i2 = this.c2cConvInfoMap.get(e2)).todoFlag |= 1, r2 == o.b.Remove && (i2.todoFlag &= 2));
              break;
            case o.a.FetchMessageStatusList:
              var i2;
              t2 == o.q.Group ? ((i2 = this.groupConvInfoMap.get(e2)).todoFlag |= 2, r2 == o.b.Remove && (i2.todoFlag &= 1)) : t2 == o.q.Peer && ((i2 = this.c2cConvInfoMap.get(e2)).todoFlag |= 2, r2 == o.b.Remove && (i2.todoFlag &= 1));
          }
          this.logger.info(s, "modifyConvTodos", { convID: e2, convType: t2, state: r2, todo: n2 });
        }, c.prototype.increaseConversationActivities = function(e2, t2) {
          var r2 = this.strategyList.find(function(t3) {
            return t3.convID == e2;
          });
          r2 ? r2.inactiveTurn = 0 : (r2 = new i(e2, t2, o.a.FetchAll), this.strategyList.push(r2)), r2.actionActivities(), t2 == o.q.Group && this.groupConvInfoMap.set(e2, r2), t2 == o.q.Peer && this.c2cConvInfoMap.set(e2, r2), this.logger.info(s, "incConvAct", { convID: e2, convType: t2, strategy: r2 });
        }, c.prototype.popFrontConversations = function() {
          return this.strategyList.slice(0, 2);
        };
        var u = c;
        function c() {
          this.strategyList = [], this.groupConvInfoMap = /* @__PURE__ */ new Map(), this.c2cConvInfoMap = /* @__PURE__ */ new Map(), this.logger = n.a.getInstance().logger, this.sortInterval = 6e4, this.inactiveRemoveTurn = 10, this.sortTask = null;
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return d;
        });
        t = r(3);
        var n = r.n(t), o = r(75), s = r(19), i = r(2), a = r(1), u = r(0), c = function() {
          return (c = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var o2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, o2) && (e2[o2] = t2[o2]);
            return e2;
          }).apply(this, arguments);
        }, l = u.J.Group, d = (p.prototype.destroy = function() {
          this.onLogout(), this.connMgr = null, this.eventBus = null, this.logger = null, this.engineConfig = null;
        }, p.prototype.findRoom = function(e2) {
          return this.roomMap.get(e2);
        }, p.prototype.initGroupByConversation = function(e2) {
          var t2 = this.groupMap.get(e2);
          t2 || (t2 = new s.a(e2, this.engineConfig, this.eventBus, this.dbMgr, this.connMgr), this.groupMap.set(e2, t2), (e2 = this.dbGroupMap.get(e2)) && t2.setDBGroup(e2, true));
        }, p.prototype.clearRoomMessage = function() {
          var e2 = this, t2 = Array.from(this.roomIDs);
          t2.forEach(function(t3) {
            (t3 = e2.dbConvMap.get(e2.engineConfig.user.userID + u.q.Room + t3)) && (t3.maxSeq = 0, t3.msgSeq = 0, t3.maxOrderKey = 0);
          }), this.dbMgr.clearRoomMessage(t2), this.roomIDs.clear();
        }, p.prototype.createRoom = function(e2, t2, r2) {
          return this.createRoomInstance(e2.roomID).create(e2.roomName, t2, r2);
        }, p.prototype.joinRoom = function(e2) {
          return this.createRoomInstance(e2).enter();
        }, p.prototype.leaveRoom = function(e2) {
          var t2 = this, r2 = this.findRoom(e2);
          return r2 ? r2.quit().then(function() {
            return t2.clearRoomMessageByID(r2.groupID, r2.destroyDelay, t2.dbMgr), t2.roomMap.delete(e2), { roomID: e2 };
          }) : Promise.resolve({ roomID: e2 });
        }, p.prototype.queryRoomMemberList = function(e2, t2) {
          var r2 = this.createNoRoomError(e2, u.I.QueryRoomMemberList);
          return r2 ? Promise.reject(r2) : this.findRoom(e2).queryPageMember(t2);
        }, p.prototype.queryRoomMembers = function(e2, t2) {
          var r2 = this.createNoRoomError(t2, u.I.QueryRoomMembers);
          return r2 ? Promise.reject(r2) : this.findRoom(t2).queryRoomMembers(e2);
        }, p.prototype.queryRoomAllAttributes = function(e2) {
          var t2 = this.createNoRoomError(e2, u.I.QueryRoomAllAttributes);
          return t2 ? Promise.reject(t2) : this.findRoom(e2).queryRoomAllAttributes();
        }, p.prototype.setRoomAttributes = function(e2, t2, r2) {
          var n2 = this.createNoRoomError(t2, u.I.SetRoomAttributes);
          return n2 ? Promise.reject(n2) : this.findRoom(t2).setRoomAttributes(e2, r2);
        }, p.prototype.deleteRoomAttributes = function(e2, t2, r2) {
          var n2 = this.createNoRoomError(t2, u.I.DeleteRoomAttributes);
          return n2 ? Promise.reject(n2) : this.findRoom(t2).deleteRoomAttributes(e2, r2);
        }, p.prototype.beginRoomAttributesBatchOperation = function(e2, t2) {
          this.createRoomInstance(e2).beginRoomAttributesBatchOperation(t2);
        }, p.prototype.endRoomAttributesBatchOperation = function(e2) {
          var t2 = this.createNoRoomError(e2, u.I.EndRoomAttributesBatchOperation);
          return t2 ? Promise.reject(t2) : this.findRoom(e2).endRoomAttributesBatchOperation();
        }, p.prototype.setRoomMembersAttributes = function(e2, t2, r2, n2) {
          var o2 = this.createNoRoomError(r2, u.I.SetRoomMembersAttributes);
          return o2 ? Promise.reject(o2) : this.findRoom(r2).setRoomMembersAttributes(e2, t2, n2);
        }, p.prototype.queryRoomMembersAttributes = function(e2, t2) {
          var r2 = this.createNoRoomError(t2, u.I.QueryRoomMembersAttributes);
          return r2 ? Promise.reject(r2) : this.findRoom(t2).queryRoomMembersAttributes(e2);
        }, p.prototype.queryRoomMemberAttributesList = function(e2, t2) {
          var r2 = this.createNoRoomError(e2, u.I.QueryRoomMemberAttributesList);
          return r2 ? Promise.reject(r2) : this.findRoom(e2).queryRoomMemberAttributesList(t2);
        }, p.prototype.queryRoomOnlineMemberCount = function(e2) {
          var t2 = this.createNoRoomError(e2, u.I.QueryRoomOnlineMemberCount);
          return t2 ? Promise.reject(t2) : this.findRoom(e2).queryMemberCount();
        }, p.prototype.onPushRoomKickout = function(e2) {
          var t2 = this.findRoom(e2.room_id);
          t2 && (t2.onPushKickout(e2), this.clearRoomMessageByID(t2.groupID, t2.destroyDelay, this.dbMgr), this.roomMap.delete(t2.groupID));
        }, p.prototype.onPushRoomEnter = function(e2) {
          var t2 = this.findRoom(e2.room_id);
          t2 && t2.onPushEnter(e2);
        }, p.prototype.onPushRoomQuit = function(e2) {
          var t2 = this.findRoom(e2.room_id);
          t2 && t2.onPushQuit(e2);
        }, p.prototype.onPushRoomAttributesModify = function(e2) {
          var t2 = this.findRoom(e2.room_id);
          t2 && t2.onPushRoomAttributesModify(e2);
        }, p.prototype.onPushRoomUserAttributesModify = function(e2) {
          var t2 = this.findRoom(e2.room_id);
          t2 && t2.onPushRoomUserAttributesModify(e2);
        }, p.prototype.createGroup = function(e2, t2, r2) {
          var o2 = this, s2 = String(e2.groupID || "").trim() || Object(a.j)(), i2 = this.createGroupInstance(s2, e2.groupName);
          return i2.createGroup(e2, t2, r2).then(function(e3) {
            return o2.groupMap.delete(s2), o2.groupDelIDMap.delete(s2), o2.groupDelIDMap.delete(i2.groupID), o2.groupMap.set(i2.groupID, i2), o2.dbGroupMap.set(i2.groupID, i2.dbGroup), o2.updateGroupSeq(i2.dbGroup.groupSeq ? n.a.fromString(i2.dbGroup.groupSeq) : void 0), o2.eventBus.exec(u.t.IJoinedGroup, i2.groupID, i2.groupName, i2.groupAvatarUrl, 0), e3;
          }).catch(function(e3) {
            throw e3 && e3.code && e3.code != u.s.GroupModuleGroupAlreadyExists && (o2.groupMap.delete(s2), o2.groupMap.delete(i2.groupID), i2.destroy()), e3;
          });
        }, p.prototype.joinGroup = function(e2) {
          var t2 = this, r2 = this.createGroupInstance(e2);
          return r2.joinGroup().then(function(o2) {
            t2.groupDelIDMap.delete(e2), t2.dbGroupMap.set(r2.groupID, r2.dbGroup), t2.updateGroupSeq(r2.dbGroup.groupSeq ? n.a.fromString(r2.dbGroup.groupSeq) : void 0);
            var s2 = o2.seq;
            return t2.eventBus.exec(u.t.IJoinedGroup, r2.groupID, r2.groupName, r2.groupAvatarUrl, s2), o2;
          }).catch(function(n2) {
            throw n2 && n2.code && n2.code != u.s.GroupModuleMemberIsAlreadyInTheGroup && (t2.groupMap.delete(e2), r2.destroy()), n2;
          });
        }, p.prototype.leaveGroup = function(e2) {
          return this.quitGroup(e2, u.c.group_quit, u.I.LeaveGroup, u.s.GroupModuleLeaveGroupError);
        }, p.prototype.dismissGroup = function(e2) {
          return this.quitGroup(e2, u.c.group_destroy, u.I.DismissGroup, u.s.GroupModuleDismissGroupError);
        }, p.prototype.queryGroupList = function() {
          var e2 = this;
          return new Promise(function(t2) {
            var r2 = { time: /* @__PURE__ */ new Date(), logined: e2.isLogined, count: 0 };
            e2.isLogined ? e2.mergeServerGroupList(u.u.Biz, "apicall", function(n2) {
              return t2(e2.handleQueryGroupsCallback(n2, r2));
            }) : e2.queryGroupsCallbackList.push({ log: r2, resolve: t2 });
          });
        }, p.prototype.updateGroupName = function(e2, t2) {
          return this.createGroupInstance(t2).updateGroupInfo(e2 || "", u.z.Name);
        }, p.prototype.updateGroupNotice = function(e2, t2) {
          return this.createGroupInstance(t2).updateGroupInfo(e2 || "", u.z.Notice);
        }, p.prototype.updateGroupAvatarUrl = function(e2, t2) {
          return this.createGroupInstance(t2).updateGroupAvatarUrl(e2 || "");
        }, p.prototype.queryGroupInfo = function(e2) {
          return this.createGroupInstance(e2).queryGroupInfo();
        }, p.prototype.setGroupAttributes = function(e2, t2) {
          return this.createGroupInstance(t2).updateGroupAttributes(e2);
        }, p.prototype.deleteGroupAttributes = function(e2, t2) {
          return this.createGroupInstance(t2).updateGroupAttributes(e2);
        }, p.prototype.queryGroupAttributes = function(e2, t2) {
          return this.createGroupInstance(e2).queryGroupAttributes(t2);
        }, p.prototype.setGroupMemberNickname = function(e2, t2, r2) {
          return this.createGroupInstance(r2).setGroupMemberInfo(t2, e2, u.D.Nickname);
        }, p.prototype.setGroupMemberRole = function(e2, t2, r2) {
          return this.createGroupInstance(r2).setGroupMemberInfo(t2, e2, u.D.Role);
        }, p.prototype.transferGroupOwner = function(e2, t2) {
          return this.createGroupInstance(t2).transferGroupOwner(e2);
        }, p.prototype.queryGroupMemberInfo = function(e2, t2) {
          return this.createGroupInstance(t2).queryGroupMemberInfo(e2);
        }, p.prototype.inviteUsersIntoGroup = function(e2, t2) {
          return this.createGroupInstance(t2).inviteUsersIntoGroup(e2);
        }, p.prototype.kickGroupMembers = function(e2, t2) {
          return this.createGroupInstance(t2).kickGroupMembers(e2);
        }, p.prototype.queryGroupMemberList = function(e2, t2) {
          return this.createGroupInstance(e2).queryGroupMemberList(t2);
        }, p.prototype.queryGroupMemberCount = function(e2) {
          return this.createGroupInstance(e2).queryGroupMemberCount();
        }, p.prototype.queryReceiptMemberList = function(e2, t2, r2, n2) {
          var o2 = this.engineConfig.user.userID + u.q.Group + t2 + e2.conversationSeq, s2 = this.msgExtraMap.get(o2);
          return s2 ? s2.messageID || (s2.messageID = e2.messageID) : (s2 = { id: o2, ownerID: this.engineConfig.user.userID, conversationID: t2, conversationType: u.q.Group, conversationSeq: e2.conversationSeq, messageID: e2.messageID, receiptStatus: e2.receiptStatus, memberSeqs: {} }, this.msgExtraMap.set(o2, s2)), this.createGroupInstance(t2).queryReceiptMemberList(e2, s2, r2, n2);
        }, p.prototype.searchGroups = function(e2) {
          var t2 = this;
          return new Promise(function(r2) {
            var n2 = e2.keywords.filter(function(e3) {
              return "string" == typeof e3 && e3 && e3.trim().length;
            });
            if (!n2.length)
              return r2({ nextFlag: 0, groupSearchInfoList: [] });
            var o2 = /* @__PURE__ */ new Date(), s2 = e2.isAlsoMatchGroupMemberUserName, i2 = e2.isAlsoMatchGroupMemberNickname;
            t2.dbMgr.searchGroups(n2, s2, i2, function(s3, i3) {
              var c2 = [], l2 = (Array.from(t2.dbGroupMap.values()).sort(function(e3, t3) {
                return Number(e3.groupSeq) - Number(t3.groupSeq);
              }).forEach(function(e3) {
                var r3, o3 = e3.groupID, i4 = e3.groupName, u2 = e3.groupAvatarUrl;
                e3 = e3.groupSeq;
                i4 && n2.every(function(e4) {
                  return -1 != i4.indexOf(e4);
                }) && (r3 = s3.length ? s3.filter(function(e4) {
                  return e4.ownerID == o3;
                }).map(function(e4) {
                  return Object(a.q)(t2.memberKeys, e4);
                }) : s3, c2.push({ groupInfo: { groupID: o3, groupName: i4, groupAvatarUrl: u2 }, userList: r3, seq: +e3 || 0 }));
              }), c2.length), d2 = t2.dbGroupMap.size, p2 = s3.length, h = 0, g = (h = e2.nextFlag ? c2.findIndex(function(t3) {
                return e2.nextFlag === t3.seq;
              }) + 1 : h) + e2.count, f = c2[g], m = (c2 = c2.slice(h, g), f = f ? c2[c2.length - 1].seq : 0, c2.length);
              t2.logger.info(u.J.Database, u.I.SearchGroups, { time: o2, dbCount: i3, start: h, end: g, total: l2, totalGroup: d2, totalUser: p2, count: m, nextFlag: f, config: e2 }), r2({ nextFlag: f, groupSearchInfoList: c2 });
            });
          });
        }, p.prototype.onPushGroupCreate = function(e2) {
          this.groupDelIDMap.delete(e2.group_id);
          var t2 = this.createGroupInstance(e2.group_id, e2.group_name);
          t2.onPushGroupCreate(e2), this.dbGroupMap.set(t2.groupID, t2.dbGroup), this.eventBus.exec(u.t.IJoinedGroup, t2.groupID, t2.groupName, t2.groupAvatarUrl, 0);
        }, p.prototype.onPushGroupJoin = function(e2, t2) {
          var r2 = t2 ? u.C.Joined : u.C.Invited, n2 = (t2 = t2 ? u.A.Joined : u.A.Invited, this.groupDelIDMap.delete(e2.group_id), this.createGroupInstance(e2.group_id, e2.group_name));
          n2.onPushGroupJoin(e2, r2, t2), this.dbGroupMap.set(n2.groupID, n2.dbGroup), r2 = e2.conv_msg_seq;
          this.eventBus.exec(u.t.IJoinedGroup, n2.groupID, n2.groupName, n2.groupAvatarUrl, r2);
        }, p.prototype.onPushGroupDestroy = function(e2, t2) {
          this.deleteGroup(e2, t2);
        }, p.prototype.onPushGroupDataModify = function(e2) {
          this.groupDelIDMap.delete(e2.group_id);
          var t2 = this.createGroupInstance(e2.group_id);
          t2.onPushGroupDataModify(e2), this.dbGroupMap.set(t2.groupID, t2.dbGroup);
        }, p.prototype.onPushGroupAttributesModify = function(e2) {
          this.groupDelIDMap.delete(e2.group_id);
          var t2 = this.createGroupInstance(e2.group_id);
          t2.onPushGroupAttributesModify(e2), this.dbGroupMap.set(t2.groupID, t2.dbGroup);
        }, p.prototype.onPushGroupOwnerTransfer = function(e2) {
          this.groupDelIDMap.delete(e2.group_id);
          var t2 = this.createGroupInstance(e2.group_id);
          t2.onPushGroupOwnerTransfer(e2), this.dbGroupMap.set(t2.groupID, t2.dbGroup);
        }, p.prototype.onPushGroupMemberChange = function(e2) {
          this.groupDelIDMap.delete(e2.group_id);
          var t2 = this.createGroupInstance(e2.group_id);
          t2.onPushGroupMemberChange(e2), this.dbGroupMap.set(t2.groupID, t2.dbGroup);
        }, p.prototype.onLogined = function(e2) {
          var t2 = this;
          e2 = e2.groups.map(function(e3) {
            return t2.dbGroupMap.set(e3.groupID, e3), t2.initGroupInstance(e3, true), e3.groupID;
          });
          this.isLogined = false, this.syncGroupsMember(e2, u.u.SDKLogin), this.mergeServerGroupList(u.u.SDKLogin, "onLogined", function(e3) {
            t2.isLogined = true, t2.queryGroupsCallbackList.forEach(function(r2) {
              return r2.resolve(t2.handleQueryGroupsCallback(e3, r2.log));
            }), t2.queryGroupsCallbackList.length = 0, t2.eventBus.exec(u.t.ISyncGroups, false);
          });
        }, p.prototype.onLogout = function() {
          this.roomMap.forEach(function(e2) {
            return e2.destroy(true);
          }), this.groupMap.forEach(function(e2) {
            return e2.destroy();
          }), this.roomMap.clear(), this.groupMap.clear(), this.groupDelIDMap.clear(), this.isLogined = false;
        }, p.prototype.onUpdateSelf = function() {
          this.groupMap.forEach(function(e2) {
            return e2.onUpdateSelf();
          });
        }, p.prototype.onConnected = function() {
          var e2 = this;
          this.roomMap.forEach(function(e3) {
            return e3.onConnected();
          }), this.syncGroupsMember(Array.from(this.dbGroupMap.keys()), u.u.SDKHb), this.mergeServerGroupList(u.u.SDKHb, "onConnected", function() {
            e2.eventBus.exec(u.t.ISyncGroups, true);
          });
        }, p.prototype.onDisConnected = function(e2) {
          this.roomMap.forEach(function(t2) {
            return t2.onDisConnected(e2);
          }), this.groupMap.forEach(function(e3) {
            return e3.onDisConnected();
          });
        }, p.prototype.syncGroupsMember = function(e2, t2) {
          for (var r2 = this, n2 = [], o2 = 0; o2 < e2.length; o2 += 100) {
            var s2 = { quey_user_id: e2.slice(o2, o2 + 100) };
            s2 = this.connMgr.sendRequest(u.c.group_infos, s2, u.i.SDK);
            n2.push(s2);
          }
          Promise.all(n2).then(function(e3) {
            e3.forEach(function(e4) {
              e4.group_infos && e4.group_infos.forEach(function(e5) {
                var n3 = (o3 = e5.info).group_id, o3 = o3.group_name, s3 = r2.dbGroupMap.get(n3);
                1 == e5.type ? (r2.groupDelIDMap.set(n3, true), s3 && (r2.dbGroupMap.delete(n3), r2.eventBus.exec(u.t.ILeftGroup, n3))) : s3 && (s3.groupName = o3, s3.groupAvatarUrl = Object(a.f)(e5.info.group_avatar), s3.tatalMemberCount = e5.info.member_count, (!s3.memberSeq || e5.info.all_member_seq > s3.memberSeq) && r2.initGroupInstance(s3, true).mergeServerMemberList(t2, "initAll"));
              });
            });
          });
        }, p.prototype.handleQueryGroupsCallback = function(e2, t2) {
          var r2 = this, n2 = [];
          return e2.forEach(function(e3) {
            r2.groupDelIDMap.get(e3.groupID) || (n2.push({ baseInfo: { groupID: e3.groupID, groupName: e3.groupName, groupAvatarUrl: e3.groupAvatarUrl }, notificationStatus: e3.notificationStatus }), r2.createGroupInstance(e3.groupID));
          }), t2.count = n2.length, this.logger.info(l, u.I.QueryGroupList, t2), { groupList: n2 };
        }, p.prototype.registerInnerEvent = function() {
          this.eventBus.add(u.t.ILogined, this.onLogined.bind(this)), this.eventBus.add(u.t.ILogout, this.onLogout.bind(this)), this.eventBus.add(u.t.IUpdateSelf, this.onUpdateSelf.bind(this)), this.eventBus.add(u.t.IConnected, this.onConnected.bind(this)), this.eventBus.add(u.t.IDisConnected, this.onDisConnected.bind(this));
        }, p.prototype.createRoomInstance = function(e2) {
          var t2 = this.findRoom(e2);
          return t2 || (t2 = new o.a(e2, this.engineConfig, this.eventBus, this.dbMgr, this.connMgr), this.roomMap.set(e2, t2), this.roomIDs.add(e2)), t2;
        }, p.prototype.createGroupInstance = function(e2, t2) {
          var r2 = this.groupMap.get(e2);
          return r2 || (r2 = new s.a(e2, this.engineConfig, this.eventBus, this.dbMgr, this.connMgr), t2 && (r2.groupName = t2), this.groupMap.set(e2, r2), t2 = this.dbGroupMap.get(e2) || { groupID: e2, groupName: t2 || "", groupAvatarUrl: "", id: this.engineConfig.user.userID + e2, ownerID: this.engineConfig.user.userID, groupNotice: "", tatalMemberCount: 0, notificationStatus: u.G.Notify, attributes: {}, dataSeq: 0, attributeSeq: 0, memberSeq: 0, groupSeq: "0" }, r2.setDBGroup(t2, this.dbGroupMap.has(e2))), r2;
        }, p.prototype.initGroupInstance = function(e2, t2) {
          var r2 = this.groupMap.get(e2.groupID);
          return r2 || (r2 = new s.a(e2.groupID, this.engineConfig, this.eventBus, this.dbMgr, this.connMgr), e2.dataSeq || (e2.dataSeq = 0), e2.attributeSeq || (e2.attributeSeq = 0), e2.memberSeq || (e2.memberSeq = 0), e2.groupSeq || (e2.groupSeq = "0"), e2.groupName && (r2.groupName = e2.groupName), e2.groupAvatarUrl && (r2.groupAvatarUrl = e2.groupAvatarUrl), r2.setDBGroup(e2, t2), this.groupMap.set(e2.groupID, r2)), r2;
        }, p.prototype.clearRoomMessageByID = function(e2, t2, r2) {
          var n2 = this;
          t2 = t2 ? 1e3 * t2 : 0, setTimeout(function() {
            var t3 = n2.findRoom(e2);
            t3 && t3.state != u.V.Disconnected || ((t3 = n2.dbConvMap.get(n2.engineConfig.user.userID + u.q.Room + e2)) && (t3.maxSeq = 0, t3.msgSeq = 0, t3.maxOrderKey = 0), n2.roomIDs.delete(e2), r2.clearRoomMessage([e2]));
          }, t2);
        }, p.prototype.deleteGroup = function(e2, t2) {
          var r2, n2, o2, s2, i2 = e2.group_id, l2 = this.groupMap.get(i2);
          l2 && (this.groupMap.delete(i2), e2.op_user || (e2.op_user = { user_id: this.engineConfig.user.userID, user_name: this.engineConfig.user.userName }), o2 = (n2 = e2.op_user).user_id, s2 = n2.user_name, r2 = n2.group_nick_name, n2 = n2.role, o2 = { userID: o2 }, s2 && (o2.userName = "string" == typeof s2 ? s2 : Object(a.f)(s2)), r2 && (o2.memberNickname = r2), n2 && (o2.memberRole = n2), s2 = c(c({}, o2), { operatedUserInfo: o2 }), this.eventBus.emit(u.t.GroupMemberState, { groupID: i2, state: u.F.Quit, event: t2 === u.A.KickedOut ? u.C.KickedOut : u.C.Left, operatedInfo: s2, userList: [c({}, l2.groupMember)] }), this.eventBus.emit(u.t.GroupState, { state: u.H.Quit, event: t2, operatedInfo: s2, groupInfo: l2.createGroupFullInfo() }), l2.destroy()), this.dbMgr.deleteGroupList([i2]), this.groupDelIDMap.set(i2, true), this.dbGroupMap.delete(i2), this.updateGroupSeq(e2.conv_list_seq), this.eventBus.exec(u.t.ILeftGroup, i2);
        }, p.prototype.quitGroup = function(e2, t2, r2, n2) {
          var o2 = this, s2 = { time: /* @__PURE__ */ new Date(), groupID: e2 };
          return this.connMgr.sendRequest(t2, { group_id: e2 }).then(function(i2) {
            if (i2.code)
              return c2 = Object(a.s)(n2, i2.message, i2.code), s2.error = c2, o2.logger.warn(l, r2, s2), Promise.reject(c2);
            i2.group_id = e2, i2.op_user = { user_id: o2.engineConfig.user.userID, user_name: o2.engineConfig.user.userName };
            var c2 = o2.groupMap.get(e2);
            return c2 && (i2.op_user.group_nick_name = c2.groupMember.memberNickname, i2.op_user.role = c2.groupMember.memberRole), o2.deleteGroup(i2, t2 === u.c.group_destroy ? u.A.Dismissed : u.A.Left), o2.logger.info(l, r2, s2), { groupID: e2 };
          });
        }, p.prototype.fetchServerPageGroup = function(e2, t2, r2, n2) {
          return e2 = { conv_list_seq: e2, count: 100, full_pull: n2, degree: t2, how: r2 }, 1 == t2 && (n2 = this.mergeGroupListSeq, this.dataReport.beginNetworkRequest(u.c.group_list.cmd, n2, u.i.SDK, e2)), this.connMgr.sendRequest(u.c.group_list, e2, u.i.SDK).then(function(e3) {
            if (e3.code)
              return { list: [] };
            var t3 = e3.cur_list_seq, r3 = e3.max_list_seq, n3 = e3.fetch_end, o2 = e3.full_list;
            return { nextFlag: n3 || t3 && r3 && t3.greaterThanOrEqual(r3) ? 0 : t3, cur: t3, max: r3, list: e3.groups, fetch_end: n3, full_list: o2 };
          });
        }, p.prototype.mergeServerGroupList = function(e2, t2, r2) {
          var o2 = this, s2 = n.a.fromString(String(this.engineConfig.user.groupSeq) || "0"), i2 = this.engineConfig.mailHBConfig.group_list_seq;
          if (!this.engineConfig.mailHBConfig.fetch_group_list || !i2 || i2.lessThanOrEqual(s2))
            return r2 && r2(Array.from(this.dbGroupMap.values()));
          var c2 = { time: /* @__PURE__ */ new Date(), dbSeq: s2, hbSeq: i2, how: e2, action: t2 }, d2 = 0, p2 = 0, h = this.dbGroupMap.size, g = ++this.mergeGroupListSeq, f = 1, m = [], _ = function(t3) {
            var n2, s3;
            d2 += t3.list.length, t3.list.forEach(function(t4) {
              var r3, n3, s4, i3, c3, l2 = (d3 = t4.info).group_id, d3 = d3.group_name;
              1 == t4.type ? (p2++, o2.groupDelIDMap.set(l2, true), o2.dbGroupMap.has(l2) && (o2.dbGroupMap.delete(l2), o2.eventBus.exec(u.t.ILeftGroup, l2), e2 == u.u.SDKHb && m.push({ state: u.H.Quit, event: u.A.Left, operatedInfo: {}, groupInfo: { baseInfo: { groupID: l2, groupName: d3 } } }))) : (r3 = Object(a.f)(t4.info.group_avatar), c3 = t4.info.member_count, n3 = t4.info.not_notify ? u.G.Disturb : u.G.Notify, s4 = o2.dbGroupMap.has(l2), i3 = o2.dbGroupMap.get(l2) || { groupID: l2, groupName: d3, groupAvatarUrl: r3, tatalMemberCount: c3, notificationStatus: n3, dataSeq: 0, attributeSeq: 0, memberSeq: 0, groupSeq: "0" }, s4 ? (i3.groupName = d3, i3.notificationStatus = n3, r3 && (i3.groupAvatarUrl = r3), c3 && (i3.tatalMemberCount = c3)) : (o2.dbGroupMap.set(l2, i3), e2 == u.u.SDKHb && m.push({ state: u.H.Enter, event: u.A.Joined, operatedInfo: {}, groupInfo: { baseInfo: { groupID: l2, groupName: d3, groupAvatarUrl: r3 }, notificationStatus: n3 } })), i3.attributes || (i3.attributes = {}), c3 = o2.initGroupInstance(i3, s4), (!i3.memberSeq || t4.info.all_member_seq > i3.memberSeq) && c3.mergeServerMemberList(e2, "initAll"));
            }), t3.nextFlag && o2.engineConfig.token ? o2.fetchServerPageGroup(t3.nextFlag, ++f, e2, t3.full_list ? 1 : 0).then(_) : (t3.degree = f, t3.svrCount = d2, o2.groupDelIDMap.size && ((n2 = Array.from(o2.groupDelIDMap.keys())).forEach(function(e3) {
              return o2.dbGroupMap.delete(e3);
            }), o2.dbMgr.deleteGroupList(n2)), o2.updateGroupSeq(t3.cur, true), n2 = Array.from(o2.dbGroupMap.values()), o2.dbMgr.addGroupList(n2), m.length && m.forEach(function(e3) {
              return o2.eventBus.emit(u.t.GroupState, e3);
            }), c2.dbCount = h, c2.count = o2.dbGroupMap.size, c2.svrDelCount = p2, s3 = JSON.stringify({ dbCount: h, svrDelCount: p2, rspCount: o2.dbGroupMap.size }), c2.dataReport = o2.dataReport.endNetworkRequest(u.c.group_list.cmd, g, t3, s3), o2.logger.info(l, "mergeSvrGroups", c2), r2 && r2(n2));
          };
          this.fetchServerPageGroup(s2, f, e2, 0).then(_);
        }, p.prototype.updateGroupSeq = function(e2, t2) {
          var r2 = this.engineConfig.user;
          !e2 || !t2 && +r2.groupSeq && r2.groupSeq != e2.sub(1).toString() || (r2.groupSeq = e2.toString(), this.dbMgr.setUser(r2));
        }, p.prototype.createNoRoomError = function(e2, t2) {
          var r2;
          if (!this.findRoom(e2))
            return r2 = Object(a.s)(u.s.RoomModuleUserIsNotInTheRoom), this.logger.warn(u.J.Room, t2, { error: r2, roomID: e2 }), r2;
        }, p);
        function p(e2, t2, r2, n2) {
          this.logger = i.a.getInstance().logger, this.dataReport = i.a.getInstance().dataReport, this.memberKeys = ["userID", "userName", "memberRole", "memberAvatarUrl", "memberNickname"], this.mergeGroupListSeq = 0, this.isLogined = false, this.queryGroupsCallbackList = [], this.engineConfig = e2, this.eventBus = t2, this.connMgr = r2, this.dbMgr = n2, this.roomIDs = /* @__PURE__ */ new Set(), this.roomMap = /* @__PURE__ */ new Map(), this.groupMap = /* @__PURE__ */ new Map(), this.groupDelIDMap = /* @__PURE__ */ new Map(), this.registerInnerEvent();
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return c;
        });
        var n = r(2), o = r(1), s = r(0), i = function() {
          return (i = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var o2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, o2) && (e2[o2] = t2[o2]);
            return e2;
          }).apply(this, arguments);
        }, a = (t = function(e2, t2, r2, n2) {
          var o2, s2 = arguments.length, i2 = s2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, r2) : n2;
          if ("object" == typeof Reflect && "function" == typeof Reflect.decorate)
            i2 = Reflect.decorate(e2, t2, r2, n2);
          else
            for (var a2 = e2.length - 1; 0 <= a2; a2--)
              (o2 = e2[a2]) && (i2 = (s2 < 3 ? o2(i2) : 3 < s2 ? o2(t2, r2, i2) : o2(t2, r2)) || i2);
          return 3 < s2 && i2 && Object.defineProperty(t2, r2, i2), i2;
        }, function(e2, t2) {
          var r2 = "function" == typeof Symbol && e2[Symbol.iterator];
          if (!r2)
            return e2;
          var n2, o2, s2 = r2.call(e2), i2 = [];
          try {
            for (; (void 0 === t2 || 0 < t2--) && !(n2 = s2.next()).done; )
              i2.push(n2.value);
          } catch (e3) {
            o2 = { error: e3 };
          } finally {
            try {
              n2 && !n2.done && (r2 = s2.return) && r2.call(s2);
            } finally {
              if (o2)
                throw o2.error;
            }
          }
          return i2;
        }), u = s.J.Room, c = (l.prototype.destroy = function(e2) {
          this.stopHB(), this.reset(), e2 && this.state !== s.V.Disconnected && this.emitRoomStateChanged(s.V.Disconnected, s.U.Success), this.dbMgr = null, this.connMgr = null, this.eventBus = null, this.engineConfig = null;
        }, l.prototype.create = function(e2, t2, r2) {
          var n2 = this, a2 = { time: /* @__PURE__ */ new Date(), roomID: this.groupID, roomName: e2, state: this.state, config: t2 }, c2 = (this.state == s.V.Disconnected && this.emitRoomStateChanged(s.V.Connecting, s.U.ActiveCreate), { room_id: this.groupID, room_name: Object(o.i)(e2) });
          return r2 && (c2.create_if_not_exist = true), this.addRoomAttributes(c2, t2), this.connMgr.sendRequest(r2 ? s.c.room_enter : s.c.room_create, c2).then(function(c3) {
            var l2, d, p, h = c3.code;
            return h ? (l2 = Object(o.s)(s.s.RoomModuleCreateRoomError, c3.message, h), p = n2.state == s.V.Connected && 103032 == h ? s.V.Connected : s.V.Disconnected, d = 6000104 === h ? s.U.NetworkDisconnected : s.U.CreateFailed, n2.emitRoomStateChanged(p, p == s.V.Connected ? s.U.ActiveCreate : d), a2.state_ = n2.state, a2.error = l2, n2.logger.warn(u, r2 ? s.I.EnterRoom : s.I.CreateRoom, a2), 51011 == h && (n2.stopHB(), n2.reset()), Promise.reject(l2)) : (n2.groupName = e2, n2.subRoomID = c3.sub_room_id, n2.sessionID = c3.room_session_id, n2.userSessionID = c3.room_user_session_id, n2.enabledOfflineMsg = !!c3.enabled_offline_msg, n2.emitRoomStateChanged(s.V.Connected, s.U.Success), r2 || (n2.localSeq = 1), n2.tatalMemberCount = c3.user_count || 1, n2.startHB(c3.room_info_interval), n2.mergeConfig.listPullInterval = c3.userlist_interval, n2.mergeConfig.listMergeTimeout = c3.userlist_merge_timeout, n2.mergeConfig.attrPullInterval = c3.attributes_pull_interval, n2.mergeConfig.attrMergeTimeout = c3.attributes_merge_timeout, n2.isMergeUser = 1 == c3.userlist_enable, n2.destroyDelay = c3.destroy_delay || 0, n2.isMergeUser && (r2 && c3.userlist_seq != n2.localSeq ? n2.fetchAllUser() : (p = { userID: n2.engineConfig.user.userID, userName: n2.engineConfig.user.userName }, n2.userMap.set(p.userID, p), n2.eventBus.emit(s.t.RoomMemberJoined, { roomID: n2.groupID, memberList: [i({}, p)] }))), n2.emitRoomAttributesUpdated(c3.attributes, true, t2), a2.state_ = n2.state, n2.logger.info(u, r2 ? s.I.EnterRoom : s.I.CreateRoom, a2), { roomInfo: { baseInfo: { roomID: n2.groupID, roomName: e2 } } });
          });
        }, l.prototype.enter = function() {
          var e2 = this;
          if (this.state === s.V.Connected)
            return r2 = { roomID: this.groupID, roomName: this.groupName, state: this.state }, this.logger.info(u, s.I.JoinRoom, r2), Promise.resolve({ roomInfo: { baseInfo: { roomID: this.groupID, roomName: this.groupName } } });
          this.state !== s.V.Connecting && this.emitRoomStateChanged(s.V.Connecting, s.U.ActiveEnter);
          var t2 = { time: /* @__PURE__ */ new Date(), roomID: this.groupID, state: this.state }, r2 = { room_id: this.groupID, room_name: this.groupName ? Object(o.i)(this.groupName) : void 0, room_user_session_id: this.userSessionID || 0 };
          return this.connMgr.sendRequest(s.c.room_enter, r2).then(function(r3) {
            var n2;
            return r3.code ? (n2 = Object(o.s)(s.s.RoomModuleJoinRoomError, r3.message, r3.code), e2.emitRoomStateChanged(s.V.Disconnected, 6000104 === r3.code ? s.U.NetworkDisconnected : s.U.EnterFailed), t2.state_ = e2.state, t2.error = n2, e2.logger.warn(u, s.I.JoinRoom, t2), 51011 == r3.code && (e2.stopHB(), e2.reset()), Promise.reject(n2)) : (e2.groupName = Object(o.f)(r3.room_name), e2.subRoomID = r3.sub_room_id, e2.sessionID = r3.room_session_id, e2.userSessionID = r3.room_user_session_id, e2.enabledOfflineMsg = !!r3.enabled_offline_msg, e2.emitRoomStateChanged(s.V.Connected, s.U.Success), e2.tatalMemberCount = r3.user_count, e2.startHB(r3.room_info_interval), e2.mergeConfig.listPullInterval = r3.userlist_interval, e2.mergeConfig.listMergeTimeout = r3.userlist_merge_timeout, e2.mergeConfig.attrPullInterval = r3.attributes_pull_interval, e2.mergeConfig.attrMergeTimeout = r3.attributes_merge_timeout, e2.isMergeUser = 1 == r3.userlist_enable, e2.destroyDelay = r3.destroy_delay || 0, e2.isMergeUser && r3.userlist_seq != e2.localSeq && e2.fetchAllUser(), e2.emitRoomAttributesUpdated(r3.attributes), t2.state_ = e2.state, t2.roomName = e2.groupName, e2.logger.info(u, s.I.JoinRoom, t2), { roomInfo: { baseInfo: { roomID: e2.groupID, roomName: e2.groupName } } });
          });
        }, l.prototype.quit = function() {
          var e2 = this, t2 = { time: /* @__PURE__ */ new Date(), roomID: this.groupID, state: this.state };
          if (this.state === s.V.Disconnected)
            return this.logger.info(u, s.I.LeaveRoom, t2), this.destroy(false), Promise.resolve();
          var r2 = { room_id: this.groupID, room_session_id: this.sessionID, room_user_session_id: this.userSessionID, sub_room_id: this.subRoomID };
          return this.connMgr.sendRequest(s.c.room_quit, r2).then(function(r3) {
            if (r3.code)
              return r3 = Object(o.s)(s.s.RoomModuleLeaveRoomError, r3.message, r3.code), t2.state_ = e2.state, t2.error = r3, e2.logger.warn(u, s.I.LeaveRoom, t2), Promise.reject(r3);
            e2.emitRoomStateChanged(s.V.Disconnected, s.U.Success), t2.state_ = e2.state, e2.logger.info(u, s.I.LeaveRoom, t2), e2.destroy(false);
          });
        }, l.prototype.queryPageMember = function(e2) {
          var t2 = this, r2 = i({ time: /* @__PURE__ */ new Date(), roomID: this.groupID }, e2), n2 = ++this.mergeMemberListSeq + this.groupID;
          return this.fetchServerPageUser(0 | e2.count, e2.nextFlag, s.i.API, n2).then(function(e3) {
            t2.logger.info(u, s.I.QueryRoomMemberList, r2), e3.svrCount = (null == (o2 = e3.users) ? void 0 : o2.length) || 0, t2.dataReport.endNetworkRequest(s.c.room_userlist.cmd, n2, e3);
            var o2 = t2.createUserList(e3.users);
            return { roomID: t2.groupID, memberList: o2, nextFlag: e3.pos_flag };
          });
        }, l.prototype.queryRoomMembers = function(e2) {
          var t2 = this, r2 = { time: /* @__PURE__ */ new Date(), roomID: this.groupID, userIDs: e2 }, n2 = [];
          e2 = e2.filter(function(e3) {
            return !!Object(o.l)(e3) || (n2.push({ userID: e3, reason: 6000001 }), false);
          }), e2 = Array.from(new Set(e2)), e2 = { room_id: this.groupID, room_session_id: this.sessionID, room_user_session_id: this.userSessionID, sub_room_id: this.subRoomID, user_ids: e2 };
          return this.connMgr.sendRequest(s.c.room_userinfos, e2).then(function(e3) {
            if (e3.code)
              return i2 = Object(o.s)(s.s.RoomModuleTheRoomMemberQueryFailed, e3.message, e3.code), r2.error = i2, t2.logger.warn(u, s.I.QueryRoomMembers, r2), Promise.reject(i2);
            var i2 = e3.result.map(function(e4) {
              return { userID: e4.user_id, userName: Object(o.f)(e4.user_name) };
            });
            return e3.err_list.forEach(function(e4) {
              return n2.push({ userID: e4.user_id, reason: e4.sub_code });
            }), t2.logger.info(u, s.I.QueryRoomMembers, r2), { roomID: t2.groupID, memberList: i2, errorUserList: n2 };
          });
        }, l.prototype.queryMemberCount = function() {
          var e2 = { roomID: this.groupID, count: this.tatalMemberCount };
          return this.logger.info(u, s.I.QueryRoomOnlineMemberCount, e2), Promise.resolve(e2);
        }, l.prototype.queryRoomAllAttributes = function(e2) {
          var t2 = this, r2 = (void 0 === e2 && (e2 = false), { time: /* @__PURE__ */ new Date(), roomID: this.groupID }), n2 = (this.queryAttrFlag = true, (/* @__PURE__ */ new Date()).getTime()), i2 = 0, a2 = (this.queryAttrTask.length && (a2 = this.queryAttrTask[this.queryAttrTask.length - 1], n2 - a2 < this.mergeConfig.attrPullInterval && (i2 = this.mergeConfig.attrPullInterval - (n2 - a2) + 10)), this.queryAttrTask.push(n2), { room_id: this.groupID, room_session_id: this.sessionID, sub_room_id: this.subRoomID, attributes: { attribute_seq: this.stRoomAttributes.attribute_seq || 0, attributes: [] } }), c2 = this.connMgr.sendRequest(s.c.room_attributes, a2).then(function(i3) {
            var a3;
            return i3.code ? (a3 = Object(o.s)(s.s.RoomModuleRoomAttributesQueryFailed, i3.message, i3.code), r2.error = a3, t2.logger.warn(u, s.I.QueryRoomAllAttributes, r2), Promise.reject(a3)) : (t2.queryAttrTask = t2.queryAttrTask.filter(function(e3) {
              return e3 !== n2;
            }), t2.queryRoomAllAttributesRspHandle(i3, e2));
          });
          return i2 ? new Promise(function(e3) {
            setTimeout(function() {
              t2.connMgr && c2.then(e3);
            }, i2);
          }) : c2;
        }, l.prototype.setRoomAttributes = function(e2, t2) {
          var r2 = this;
          if (this.batchFlag)
            return new Promise(function(t3, n3) {
              return r2.batchRoomAttributesHandle(e2, [], t3, n3);
            });
          var n2, o2, s2 = [];
          for (n2 in e2)
            n2 && (o2 = { action: 0, attribute: { key: n2, value: e2[n2].toString(), seq: this.attrItemSeq++, auto_delete: t2.isDeleteAfterOwnerLeft ? 1 : 0 } }, this.localAttrKeySeqMap[n2] = o2.attribute.seq, s2.push(o2));
          var i2 = { room_id: this.groupID, room_session_id: this.sessionID, sub_room_id: this.subRoomID, force_modify: t2.isForce ? 1 : 0, set_member: t2.isUpdateOwner ? 1 : 0, attributes_seq: this.stRoomAttributes.attribute_seq || 0, op_fail_fast: 0, attributes: s2 };
          return this.modifyRoomAttributes(e2, i2);
        }, l.prototype.deleteRoomAttributes = function(e2, t2) {
          var r2 = this;
          if (this.batchFlag)
            return new Promise(function(t3, n3) {
              return r2.batchRoomAttributesHandle({}, e2, t3, n3);
            });
          var n2 = [];
          e2.forEach(function(e3) {
            var t3 = r2.stRoomAttributes.attributes.find(function(t4) {
              return t4.key == e3;
            });
            t3 = { action: 1, attribute: { key: e3, value: (null == t3 ? void 0 : t3.value) || "", seq: r2.attrItemSeq++, auto_delete: 1 } };
            r2.localAttrKeySeqMap[e3] = t3.attribute.seq, n2.push(t3);
          }), t2 = { room_id: this.groupID, room_session_id: this.sessionID, sub_room_id: this.subRoomID, force_modify: t2.isForce ? 1 : 0, set_member: 1, attributes_seq: this.stRoomAttributes.attribute_seq || 0, op_fail_fast: 0, attributes: n2 };
          return this.modifyRoomAttributes({}, t2);
        }, l.prototype.beginRoomAttributesBatchOperation = function(e2) {
          this.batchFlag = true, this.batchOperationConfig = e2, this.batchRoomAttributes.length = 0;
        }, l.prototype.endRoomAttributesBatchOperation = function() {
          var e2, t2 = this, r2 = { time: /* @__PURE__ */ new Date(), roomID: this.groupID, attributes: this.batchRoomAttributes }, n2 = (this.batchFlag = false, []), i2 = {};
          return this.batchRoomAttributes.length ? (this.batchRoomAttributes.forEach(function(e3) {
            var r3 = { action: e3.action, attribute: { key: e3.key, value: e3.value.toString(), seq: t2.attrItemSeq++, auto_delete: t2.batchOperationConfig.isDeleteAfterOwnerLeft ? 1 : 0 } };
            e3.action || (i2[e3.key] = e3.value), t2.localAttrKeySeqMap[r3.attribute.key] = r3.attribute.seq, n2.push(r3);
          }), r2 = { room_id: this.groupID, room_session_id: this.sessionID, sub_room_id: this.subRoomID, force_modify: this.batchOperationConfig.isForce ? 1 : 0, set_member: this.batchOperationConfig.isUpdateOwner ? 1 : 0, attributes_seq: this.stRoomAttributes.attribute_seq || 0, op_fail_fast: 1, attributes: n2 }, this.modifyRoomAttributes(i2, r2, true).then(function() {
            return t2.batchOperationConfig = null, t2.batchRoomAttributes.length = 0, t2.batchAttributesMap.clear(), t2.batchIndex = 0, { roomID: t2.groupID };
          })) : (e2 = Object(o.s)(s.s.RoomModuleRoomAttributesOperationFailedCompletely), r2.error = e2, this.logger.warn(u, s.I.EndRoomAttributesBatchOperation, r2), Promise.reject(e2));
        }, l.prototype.setRoomMembersAttributes = function(e2, t2, r2) {
          var n2, i2 = this, c2 = { roomID: this.groupID, attributes: e2, userIDs: t2, config: r2 }, l2 = [], d = (t2 = t2.filter(function(e3) {
            return !!Object(o.l)(e3) || (l2.push(e3), false);
          }), t2 = Array.from(new Set(t2)), { room_id: this.groupID, room_session_id: this.sessionID, room_user_session_id: this.userSessionID, sub_room_id: this.subRoomID, force_modify: 1, auto_save: null == r2.isDeleteAfterOwnerLeft || r2.isDeleteAfterOwnerLeft ? 0 : 1, op_fail_fast: 0, attributes: { user_ids: t2, modify_attribute: [] } });
          for (n2 in e2) {
            this.userAttrSeq++;
            var p = { action: 0, attribute: { key: n2, value: e2[n2], seq: this.userAttrSeq } };
            d.attributes.modify_attribute.push(p);
          }
          return this.connMgr.sendRequest(s.c.room_user_attributes_modify, d).then(function(t3) {
            if (t3.code)
              return r3 = Object(o.s)(s.s.RoomModuleRoomMemberAttributesCommonError, t3.message, t3.code), c2.error = r3, i2.logger.warn(u, s.I.SetRoomMembersAttributes, c2), Promise.reject(r3);
            var r3, n3 = (d2 = a(i2.mergeServeUserAttributesHandle(t3, e2), 2))[0], d2 = d2[1];
            return t3.user_err_list.forEach(function(e3) {
              return l2.push(e3.user_id);
            }), t3.user_err_list.length && !d2.length ? (r3 = Object(o.s)(s.s.RoomModuleRoomMemberAttributesCommonError, t3.message, t3.code), Promise.reject(r3)) : (i2.eventBus.emit(s.t.RoomMemberAttr, { roomID: i2.groupID, infos: n3, operatedInfo: { userID: i2.engineConfig.user.userID } }), c2.setInfos = d2, i2.logger.info(u, s.I.SetRoomMembersAttributes, c2), { roomID: i2.groupID, infos: d2, errorUserList: l2 });
          });
        }, l.prototype.queryRoomMembersAttributes = function(e2) {
          var t2 = this, r2 = { roomID: this.groupID, userIDs: e2 }, n2 = { room_id: this.groupID, room_session_id: this.sessionID, room_user_session_id: this.userSessionID, sub_room_id: this.subRoomID, req_attributes: [] };
          return e2.forEach(function(e3) {
            var r3 = t2.userAttributeMap.get(e3);
            e3 = { user_id: e3, user_attributes_seq: r3 ? r3.seq : 0 };
            n2.req_attributes.push(e3);
          }), this.connMgr.sendRequest(s.c.room_user_attributes_get, n2).then(function(e3) {
            if (e3.code)
              return n3 = Object(o.s)(s.s.RoomModuleCommonError, e3.message, e3.code), r2.error = n3, t2.logger.warn(u, s.I.QueryRoomMembersAttributes, r2), Promise.reject(n3);
            var n3 = t2.mergeServeUserAttributesHandle(e3)[0].map(function(e4) {
              return e4.attributesInfo;
            });
            return r2.infos = n3, t2.logger.info(u, s.I.QueryRoomMembersAttributes, r2), { roomID: t2.groupID, infos: n3 };
          });
        }, l.prototype.queryRoomMemberAttributesList = function(e2) {
          var t2 = this, r2 = { roomID: this.groupID, config: e2 };
          e2 = { room_id: this.groupID, room_session_id: this.sessionID, room_user_session_id: this.userSessionID, sub_room_id: this.subRoomID, pos_flag: e2.nextFlag || "", count: e2.count };
          return this.connMgr.sendRequest(s.c.room_user_attributes_list_get, e2).then(function(e3) {
            if (e3.code)
              return n2 = Object(o.s)(s.s.RoomModuleCommonError, e3.message, e3.code), r2.error = n2, t2.logger.warn(u, s.I.QueryRoomMemberAttributesList, r2), Promise.reject(n2);
            var n2 = t2.mergeServeUserAttributesHandle(e3)[0].map(function(e4) {
              return e4.attributesInfo;
            });
            return r2.infos = n2, t2.logger.info(u, s.I.QueryRoomMemberAttributesList, r2), { roomID: t2.groupID, infos: n2, nextFlag: e3.pos_flag };
          });
        }, l.prototype.onConnected = function() {
          var e2 = this;
          this.enter().then(function() {
            return e2.eventBus.exec(s.t.IConnectedRoom, e2.groupID);
          });
        }, l.prototype.onDisConnected = function(e2) {
          e2 ? (this.stopHB(), this.emitRoomStateChanged(s.V.Disconnected, s.U.NetworkDisconnected)) : this.emitRoomStateChanged(s.V.Connecting, s.U.NetworkInterrupted);
        }, l.prototype.onPushKickout = function(e2) {
          var t2 = [0, s.U.KickedOut, s.U.RoomNotExist, s.U.KickedOutByOtherDevice];
          this.emitRoomStateChanged(s.V.Disconnected, t2[e2.reason] || 0, JSON.stringify(e2)), this.destroy(false);
        }, l.prototype.onPushEnter = function(e2) {
          this.tatalMemberCount = e2.user_count;
          var t2 = { userID: e2.user_id, userName: Object(o.f)(e2.user_name) };
          this.isMergeUser ? this.waitingMergeUser(e2.userlist_seq, t2, "enter") : this.eventBus.emit(s.t.RoomMemberJoined, { roomID: e2.room_id, memberList: [t2] });
        }, l.prototype.onPushQuit = function(e2) {
          this.tatalMemberCount = e2.user_count;
          var t2 = { userID: e2.user_id, userName: Object(o.f)(e2.user_name) };
          this.isMergeUser ? this.waitingMergeUser(e2.userlist_seq, t2, "quit") : this.eventBus.emit(s.t.RoomMemberLeft, { roomID: e2.room_id, memberList: [t2] });
        }, l.prototype.onPushRoomAttributesModify = function(e2) {
          var t2, r2, n2, o2 = this, i2 = (this.logger.info(u, "onPushAttr", this.stRoomAttributes), e2.attributes), a2 = e2.attributes_seq;
          this.queryAttrFlag ? this.batchPushQueue.push(e2) : (t2 = (null == (e2 = this.stRoomAttributes) ? void 0 : e2.attribute_seq) || 0, a2 && (r2 = { delete: {}, set: {} }, 1 < a2 - t2 ? this.queryRoomAllAttributes(true) : (i2.forEach(function(e3) {
            var n3;
            t2++, e3.seq ? ((n3 = o2.stRoomAttributes.attributes.find(function(t3) {
              return t3.key == e3.key;
            })) ? (n3.value = e3.value, n3.seq = e3.seq) : o2.stRoomAttributes.attributes.push(e3), r2.set[e3.key] = e3.value) : o2.stRoomAttributes.attributes.length && (o2.stRoomAttributes.attributes.find(function(t3) {
              return t3.key == e3.key;
            }) && (r2.delete[e3.key] = ""), o2.stRoomAttributes.attributes = o2.stRoomAttributes.attributes.filter(function(t3) {
              return t3.key !== e3.key;
            }));
          }), this.stRoomAttributes.attribute_seq = a2, e2 = [], Object.keys(r2.set).length && (n2 = { action: s.T.Set, roomAttributes: r2.set }, e2.push(n2)), Object.keys(r2.delete).length && (n2 = { action: s.T.Delete, roomAttributes: r2.delete }, e2.push(n2)), i2.length && (a2 = 1 < e2.length ? s.t.RoomAttrBatch : s.t.RoomAttr, this.eventBus.emit(a2, { roomID: this.groupID, infos: e2 })))));
        }, l.prototype.onPushRoomUserAttributesModify = function(e2) {
          e2.user_attributes = e2.push_attributes, this.eventBus.emit(s.t.RoomMemberAttr, { roomID: this.groupID, infos: this.mergeServeUserAttributesHandle(e2)[0], operatedInfo: { userID: e2.user_id } });
        }, l.prototype.createFrequencyLimitError = function(e2) {
          var t2 = Object(o.s)(s.s.CommonModuleTriggerSDKFrequencyLimit), r2 = { roomID: this.groupID, error: t2 };
          return this.logger.warn(u, e2, r2), t2;
        }, l.prototype.modifyRoomAttributes = function(e2, t2, r2) {
          var n2 = this;
          return void 0 === r2 && (r2 = false), this.connMgr.sendRequest(s.c.room_attributes_modify, t2).then(function(a2) {
            function c2(e3) {
              r2 && (n2.batchAttributesMap.forEach(function(t4) {
                t4.reject && t4.reject(e3);
              }), n2.batchOperationConfig = null, n2.batchRoomAttributes.length = 0, n2.batchAttributesMap.clear(), n2.batchIndex = 0);
              var t3 = { error: e3, local: n2.stRoomAttributes };
              return n2.logger.warn(u, "modifyAttr", t3), Promise.reject(e3);
            }
            if (a2.code)
              return c2(Object(o.s)(s.s.RoomModuleRoomAttributesOperationFailedCompletely, a2.message, a2.code));
            if (a2.err_list.length && a2.err_list.length == t2.attributes.length)
              return c2(Object(o.s)(s.s.RoomModuleRoomAttributesOperationFailedCompletely));
            var l2, d, p = a2.attributes.attributes, h = (r2 && (l2 = [], p.forEach(function(e3) {
              var t3 = l2.findIndex(function(t4) {
                return t4.key == e3.key;
              });
              e3.seq ? (-1 != t3 && l2.splice(t3, 1), l2.push(e3)) : -1 !== t3 && l2.splice(t3, 1);
            }), p = l2), n2.stRoomAttributes.attribute_seq = a2.attributes.attribute_seq, { delete: {}, set: {} }), g = (p.forEach(function(t3) {
              t3 = i({}, t3);
              var r3 = n2.stRoomAttributes.attributes.find(function(e3) {
                return e3.key == t3.key;
              }), o2 = n2.stRoomAttributes.attributes.findIndex(function(e3) {
                return e3.key == t3.key;
              });
              r3 ? t3.seq ? (r3.value = e2[r3.key].toString(), r3.seq = t3.seq, void 0 !== h.delete[r3.key] && delete h.delete[r3.key], h.set[r3.key] = r3.value) : (n2.stRoomAttributes.attributes.splice(o2, 1), h.delete[r3.key] = "") : t3.seq && (t3.value = e2[t3.key].toString(), n2.stRoomAttributes.attributes.push(t3), void 0 !== h.delete[t3.key] && delete h.delete[t3.key], h.set[t3.key] = t3.value);
            }), n2.logger.info(u, "operaAttr", { local: n2.stRoomAttributes }), []), f = (Object.keys(h.set).length && (d = { action: s.T.Set, roomAttributes: h.set }, g.push(d)), Object.keys(h.delete).length && (d = { action: s.T.Delete, roomAttributes: h.delete }, g.push(d)), a2.err_list.map(function(e3) {
              return e3.key;
            }));
            return r2 && n2.batchAttributesMap.forEach(function(e3) {
              var t3, r3, o2, i2, a3, c3;
              f.length ? (t3 = f[0], o2 = false, r3 = {}, !Array.isArray(e3.data) && t3 in e3.data && !p.some(function(r4) {
                return r4.value == e3.data[t3];
              }) || Array.isArray(e3.data) && -1 != e3.data.indexOf(t3) ? (o2 = true, i2 = [], e3.action == s.T.Delete && -1 !== (a3 = e3.data.findIndex(function(e4) {
                return e4 == t3;
              })) && (i2 = e3.data.slice(a3)), e3.action == s.T.Set && (i2 = Object.keys(e3.data)), e3.resolve && e3.resolve({ roomID: n2.groupID, errorKeys: i2 }), r3 = { attributeList: p, data: e3.data }) : o2 ? (e3.action == s.T.Delete && (c3 = e3.data.slice()), e3.action == s.T.Set && (c3 = Object.keys(e3.data)), e3.resolve && e3.resolve({ roomID: n2.groupID, errorKeys: c3 })) : (r3.error = false, e3.resolve && e3.resolve({ roomID: n2.groupID, errorKeys: f })), n2.logger.info(u, "operaAttr", r3)) : e3.resolve && e3.resolve({ roomID: n2.groupID, errorKeys: [] });
            }), p.length && (d = r2 ? s.t.RoomAttrBatch : s.t.RoomAttr, n2.eventBus.emit(d, { roomID: n2.groupID, infos: g })), { roomID: n2.groupID, errorKeys: f };
          });
        }, l.prototype.mergeServeUserAttributesHandle = function(e2, t2) {
          var r2 = this, n2 = [], o2 = [];
          return e2.user_attributes.forEach(function(e3) {
            var s2 = e3.user_id, a2 = e3.attributes, u2 = e3.err_list, c2 = {}, l2 = r2.userAttributeMap.get(s2) || { seq: 0, attribute: [] };
            if (e3.user_attributes_seq > l2.seq)
              l2.seq = e3.user_attributes_seq, a2.forEach(function(e4) {
                var t3 = l2.attribute.find(function(t4) {
                  return t4.key == e4.key;
                });
                t3 ? (t3.value = e4.value, c2[e4.key] = e4.value) : (l2.attribute.push(i(i({}, e4), { value: e4.value || "" })), c2[e4.key] = e4.value || "");
              });
            else if (t2)
              for (d in t2)
                !function(e4) {
                  var r3 = t2[e4], n3 = l2.attribute.find(function(t3) {
                    return t3.key == e4;
                  });
                  n3 ? n3.value = r3 : l2.attribute.push({ key: e4, value: r3 }), c2[e4] = r3;
                }(d);
            else
              l2.attribute.forEach(function(e4) {
                c2[e4.key] = e4.value;
              });
            if (r2.userAttributeMap.set(s2, l2), (a2.length || e3.user_attributes_seq) && n2.push({ attributesInfo: { userID: s2, attributes: c2 } }), t2) {
              var d, p = u2.map(function(e4) {
                return e4.key;
              }), h = {};
              for (d in t2)
                -1 == p.indexOf(d) && (h[d] = c2[d]);
              o2.push({ errorKeys: p, attributesInfo: { userID: s2, attributes: h } });
            }
          }), [n2, o2];
        }, l.prototype.queryRoomAllAttributesRspHandle = function(e2, t2) {
          var r2 = { isSeqUpdate: t2 = void 0 !== t2 && t2, local: this.stRoomAttributes, batchPushQueue: this.batchPushQueue };
          if (this.logger.info(u, s.I.QueryRoomAllAttributes, r2), this.queryAttrFlag = false, this.batchPushQueue.length)
            try {
              this.mergeStAttributeHandle(e2.attributes);
            } catch (e3) {
              r2 = { error: true, stack: (null == e3 ? void 0 : e3.message) || (null == e3 ? void 0 : e3.stack), action: "catch mergeStAttributeHandle" }, this.logger.info(u, s.I.QueryRoomAllAttributes, r2);
            }
          else {
            var n2, o2, a2 = { delete: {}, set: {} };
            r2 = (this.stRoomAttributes.attribute_seq = e2.attributes.attribute_seq, e2.attributes.attributes.length ? ((n2 = this.stRoomAttributes.attributes).map(function(e3) {
              e3.seq = 0;
            }), e2.attributes.attributes.forEach(function(e3) {
              var t3 = n2.findIndex(function(t4) {
                return t4.key == e3.key;
              });
              -1 !== t3 ? e3.seq && (n2[t3].seq = e3.seq, n2[t3].value !== e3.value && (a2.set[e3.key] = e3.value, n2[t3].value = e3.value)) : e3.key && (a2.set[e3.key] = e3.value, n2.push(i(i({}, e3), { value: e3.value })));
            }), this.stRoomAttributes.attributes = n2.filter(function(e3) {
              return 0 == e3.seq && (a2.delete[e3.key] = ""), 0 !== e3.seq;
            })) : (this.stRoomAttributes.attributes.forEach(function(e3) {
              a2.delete[e3.key] = "";
            }), this.stRoomAttributes.attributes = []), []), e2 = (Object.keys(a2.set).length && (o2 = { action: s.T.Set, roomAttributes: a2.set }, r2.push(o2)), Object.keys(a2.delete).length && (o2 = { action: s.T.Delete, roomAttributes: a2.delete }, r2.push(o2)), { isSeqUpdate: t2, local: this.stRoomAttributes, infoList: r2 });
            this.logger.info(u, s.I.QueryRoomAllAttributes, e2), t2 && r2.length && (this.logger.info(u, "attrUpdated", a2), o2 = 1 < r2.length ? s.t.RoomAttrBatch : s.t.RoomAttr, this.eventBus.emit(o2, { roomID: this.groupID, infos: r2 }));
          }
          return { roomID: this.groupID, roomAttributes: this.getRecordFromStRoomAttributes() };
        }, l.prototype.addRoomAttributes = function(e2, t2) {
          if (t2 && "[object Object]" == Object.prototype.toString.call(t2.roomAttributes)) {
            var r2, n2, o2 = [];
            for (r2 in t2.roomAttributes)
              r2 && (n2 = { key: r2, value: t2.roomAttributes[r2].toString(), seq: this.attrItemSeq++, auto_delete: 1 }, o2.push(n2), this.localAttrKeySeqMap[r2] = n2.seq);
            o2.length && (e2.attributes = o2);
          }
          t2 && t2.roomDestroyDelayTime && (e2.destroy_delay = +t2.roomDestroyDelayTime);
        }, l.prototype.batchRoomAttributesHandle = function(e2, t2, r2, n2) {
          var o2, i2 = this, a2 = { batchRoomAttributes: this.batchRoomAttributes, roomAttributes: e2, delKeys: t2 = void 0 === t2 ? [] : t2 };
          for (o2 in this.logger.info(u, "bmodifyAttr", a2), this.batchRoomAttributes || (this.batchRoomAttributes = []), t2.length ? this.batchAttributesMap.set(this.batchIndex, { action: s.T.Delete, data: t2, resolve: r2, reject: n2 }) : this.batchAttributesMap.set(this.batchIndex, { action: s.T.Set, data: e2, resolve: r2, reject: n2 }), e2) {
            var c2 = { action: s.T.Set, key: o2, value: e2[o2] };
            this.batchRoomAttributes.push(c2);
          }
          t2.forEach(function(e3) {
            e3 = { action: s.T.Delete, key: e3, value: "" }, i2.batchRoomAttributes.push(e3);
          }), this.batchIndex++;
        }, l.prototype.mergeStAttributeHandle = function(e2) {
          this.batchPushQueue.sort(function(e3, t3) {
            return e3.attribute_seq - t3.attribute_seq;
          });
          var t2 = this.batchPushQueue.findIndex(function(t3) {
            return t3.attribute_seq >= e2.attribute_seq;
          }), r2 = (this.batchPushQueue = this.batchPushQueue.slice(t2), this.batchPushQueue.unshift(e2), this.batchPushQueue[this.batchPushQueue.length - 1].attribute_seq), n2 = { delete: {}, set: {} }, o2 = this.stRoomAttributes.attributes;
          o2.map(function(e3) {
            e3.seq = 0;
          }), t2 = { localAttributes: o2, batchPushQueue: this.batchPushQueue };
          for (this.logger.info(u, "mergeAttr", t2); this.batchPushQueue.length; ) {
            var a2 = (c2 = this.batchPushQueue.shift()).attributes, c2 = c2.attribute_seq;
            r2 && c2 && c2 < r2 || a2.forEach(function(e3) {
              var t3;
              e3 && (t3 = o2.find(function(t4) {
                return t4.key == e3.key;
              }), -1 !== o2.findIndex(function(t4) {
                return t4.key == e3.key;
              }) ? e3.seq && (t3.seq = e3.seq, t3.value !== e3.value && (n2.set[null == t3 ? void 0 : t3.key] = e3.value, t3.value = e3.value)) : e3.key && e3.seq && (n2.set[e3.key] = e3.value, o2.push(i(i({}, e3), { value: e3.value }))));
            });
          }
          var l2, d = [];
          this.stRoomAttributes.attributes = o2.filter(function(e3) {
            return 0 == e3.seq && (n2.delete[e3.key] = ""), 0 !== e3.seq;
          }), Object.keys(n2.set).length && (l2 = { action: s.T.Set, roomAttributes: n2.set }, d.push(l2)), Object.keys(n2.delete).length && (l2 = { action: s.T.Delete, roomAttributes: n2.delete }, d.push(l2)), t2 = { local: this.stRoomAttributes, infoList: d }, this.logger.info(u, "mergeAttr", t2), d.length && this.eventBus.emit(s.t.RoomAttr, { roomID: this.groupID, infos: d }), this.stRoomAttributes.attribute_seq = r2;
        }, l.prototype.getRecordFromStRoomAttributes = function() {
          if (!this.stRoomAttributes.attributes.length)
            return {};
          var e2 = {};
          return this.stRoomAttributes.attributes.forEach(function(t2) {
            e2[t2.key] = t2.value;
          }), e2;
        }, l.prototype.checkRoomAttributesUpdateByHb = function(e2) {
          var t2 = this;
          this.stRoomAttributes && e2.attribute_seq > this.stRoomAttributes.attribute_seq + 1 && (this.attrTimer = setTimeout(function() {
            t2.logger && t2.queryRoomAllAttributes();
          }, this.mergeConfig.attrMergeTimeout));
        }, l.prototype.fetchServerPageUser = function(e2, t2, r2, n2) {
          var o2 = this;
          e2 = { room_id: this.groupID, room_session_id: this.sessionID, sub_room_id: this.subRoomID, count: e2, pos_flag: t2, expect_seq: this.localSeq };
          return n2 && this.dataReport.beginNetworkRequest(s.c.room_userlist.cmd, n2, r2, e2), this.connMgr.sendRequest(s.c.room_userlist, e2, r2).then(function(e3) {
            return e3.code || (o2.tatalMemberCount = e3.user_count, o2.localSeq = e3.userlist_seq), e3;
          });
        }, l.prototype.emitRoomStateChanged = function(e2, t2, r2) {
          this.state = e2, this.eventBus.emit(s.t.RoomState, { roomID: this.groupID, state: e2, event: t2, extendedData: r2 || "" });
        }, l.prototype.emitRoomAttributesUpdated = function(e2, t2, r2) {
          var n2;
          (t2 = void 0 !== t2 && t2) && null != e2 && e2.attributes && null != r2 && r2.roomAttributes && (n2 = r2.roomAttributes, e2.attributes.forEach(function(e3) {
            e3.seq && (e3.value = n2[e3.key]);
          })), this.stRoomAttributes = e2 || { attributes: [] }, this.stRoomAttributes.attributes.length && (t2 = { action: s.T.Set, roomAttributes: this.getRecordFromStRoomAttributes() }, this.eventBus.emit(s.t.RoomAttr, { roomID: this.groupID, infos: [t2] }));
        }, l.prototype.startHB = function(e2) {
          var t2 = this;
          !e2 || e2 < 0 || (this.stopHB(), this.hbTimer = setInterval(function() {
            var e3;
            t2.logger && (e3 = { room_id: t2.groupID, room_session_id: t2.sessionID, sub_room_id: t2.subRoomID }, t2.connMgr.sendRequestWithHeartbeat(s.c.room_info.cmd, e3).then(function(e4) {
              if (e4.code == s.W)
                return t2.stopHB();
              if (e4.code) {
                if (6000104 == e4.code && t2.hbTimeoutCount++, e4.timeoutCount = t2.hbTimeoutCount, t2.hbTimeoutCount >= s.l.hbTimeoutMaxCount)
                  t2.stopHB(), t2.emitRoomStateChanged(s.V.Connecting, s.U.NetworkInterrupted);
                else if (1 == e4.code || -1 != s.l.needReloginCodeList.indexOf(e4.code)) {
                  t2.stopHB();
                  var r2 = s.U.NetworkDisconnected;
                  switch (e4.code) {
                    case 103015:
                      r2 = s.U.ConnectTimeout;
                      break;
                    case 103021:
                      r2 = s.U.RoomNotExist;
                  }
                  t2.emitRoomStateChanged(s.V.Disconnected, r2);
                }
                e4.state = t2.state;
              } else
                e4.room_info_interval && (t2.hbTimeoutCount = 0, t2.tatalMemberCount = e4.user_count, t2.enabledOfflineMsg && e4.max_conv_msg_seq && t2.eventBus.exec(s.t.IConnectedRoom, t2.groupID, e4.max_conv_msg_seq), e4.ulist_to && (t2.mergeConfig.listMergeTimeout = e4.ulist_to), e4.ulist_itvl && (t2.mergeConfig.listPullInterval = e4.ulist_itvl), t2.checkRoomAttributesUpdateByHb(e4));
            }));
          }, e2));
        }, l.prototype.stopHB = function() {
          this.hbTimer && clearInterval(this.hbTimer), this.hbTimeoutCount = 0, this.hbTimer = 0;
        }, l.prototype.reset = function() {
          this.localSeq = 0, this.attrItemSeq = 0, this.isMergeUser = false, this.tatalMemberCount = 0, this.userMap.clear();
        }, l.prototype.createUserList = function(e2) {
          return e2 ? e2.map(function(e3) {
            return { userID: e3.user_id, userName: Object(o.f)(e3.user_name) };
          }) : [];
        }, l.prototype.fetchAllUser = function() {
          var e2 = this, t2 = { time: /* @__PURE__ */ new Date(), event: "fetchAllUser", roomID: this.groupID, localSeq: this.localSeq, tatalMemberCount: this.tatalMemberCount }, r2 = 1, n2 = ++this.mergeMemberListSeq + this.groupID, o2 = [], i2 = function(c3) {
            o2.push.apply(o2, function(e3, t3, r3) {
              if (r3 || 2 === arguments.length)
                for (var n3, o3 = 0, s2 = t3.length; o3 < s2; o3++)
                  !n3 && o3 in t3 || ((n3 = n3 || Array.prototype.slice.call(t3, 0, o3))[o3] = t3[o3]);
              return e3.concat(n3 || Array.prototype.slice.call(t3));
            }([], a(e2.createUserList(c3.users)), false)), c3.pos_flag && e2.connMgr ? (r2++, e2.fetchServerPageUser(100, c3.pos_flag, s.i.SDK).then(i2)) : (c3.degree = r2, c3.svrCount = o2.length, e2.updateUserList(o2), t2.localSeq_ = e2.localSeq, t2.tatalMemberCount_ = e2.tatalMemberCount, t2.dataReport = e2.dataReport.endNetworkRequest(s.c.room_userlist.cmd, n2, c3), e2.logger.info(u, "mergeUser", t2));
          }, c2 = Date.now(), l2 = this.lastFetchAllUserTime + this.mergeConfig.listPullInterval;
          setTimeout(function() {
            e2.lastFetchAllUserTime = c2, e2.connMgr && e2.fetchServerPageUser(100, "", s.i.SDK, n2).then(i2);
          }, c2 < l2 ? l2 - c2 : 0);
        }, l.prototype.waitingMergeUser = function(e2, t2, r2) {
          var n2, o2, a2, c2 = this;
          e2 <= this.localSeq ? this.logger.info(u, "mergeUser", { roomID: this.groupID, event: "dropMerge", action: r2, seq: e2, localSeq: this.localSeq, tatalMemberCount: this.tatalMemberCount }) : e2 != this.localSeq + 1 || this.mergeTimer ? (-1 == this.mergeSeqList.indexOf(e2) && this.mergeSeqList.push(e2), n2 = t2.userID, a2 = this.mergeUserList.findIndex(function(e3) {
            return e3.userID == n2;
          }), "enter" == r2 && -1 == a2 ? this.mergeUserList.push(t2) : "quit" == r2 && -1 != a2 && this.mergeUserList.splice(a2, 1), this.mergeTimer || (o2 = { roomID: this.groupID, event: "waitingPush", action: r2, seq: e2, localSeq: this.localSeq, tatalMemberCount: this.tatalMemberCount }, -1 == this.mergeSeqList.indexOf(this.localSeq) && this.mergeSeqList.push(this.localSeq), this.mergeTimer = setTimeout(function() {
            var e3;
            c2.logger && (c2.mergeSeqList.sort(), e3 = c2.mergeSeqList.length - 1, (e3 = c2.mergeSeqList[e3] - c2.mergeSeqList[0] == e3) ? c2.updateUserList(c2.mergeUserList) : c2.fetchAllUser(), Object.assign(o2, { time: c2.mergeConfig.listMergeTimeout, localSeq_: c2.localSeq, tatalMemberCount_: c2.tatalMemberCount, continuous: e3, mergeSeqList: c2.mergeSeqList }), c2.logger.info(u, "mergeUser", o2), c2.mergeTimer = 0, c2.mergeSeqList.length = 0, c2.mergeUserList.length = 0);
          }, this.mergeConfig.listMergeTimeout))) : (this.localSeq = e2, a2 = this.userMap.has(t2.userID), "enter" != r2 || a2 ? "quit" == r2 && a2 && (this.userMap.delete(t2.userID), this.eventBus.emit(s.t.RoomMemberLeft, { roomID: this.groupID, memberList: [i({}, t2)] })) : (this.userMap.set(t2.userID, t2), this.eventBus.emit(s.t.RoomMemberJoined, { roomID: this.groupID, memberList: [i({}, t2)] })), t2 = { roomID: this.groupID, event: "continuousMerge", action: r2, has: a2, seq: e2, localSeq: this.localSeq, tatalMemberCount: this.tatalMemberCount }, this.logger.info(u, "mergeUser", t2));
        }, l.prototype.updateUserList = function(e2) {
          var t2 = this, r2 = e2.map(function(e3) {
            return e3.userID;
          }), n2 = Array.from(this.userMap.values()), o2 = (e2 = e2.filter(function(e3) {
            var r3 = !t2.userMap.has(e3.userID);
            return r3 && t2.userMap.set(e3.userID, i({}, e3)), r3;
          }), n2.filter(function(e3) {
            var n3 = -1 == r2.indexOf(e3.userID);
            return n3 && t2.userMap.delete(e3.userID), n3;
          }));
          e2.length && this.eventBus.emit(s.t.RoomMemberJoined, { roomID: this.groupID, memberList: e2 }), o2.length && this.eventBus.emit(s.t.RoomMemberLeft, { roomID: this.groupID, memberList: o2 }), n2 = { roomID: this.groupID, event: "updateRoomMember", localSeq: this.localSeq, tatalMemberCount: this.tatalMemberCount, mergeIds: r2, beginLocalIds: n2.map(function(e3) {
            return e3.userID;
          }), endLocalIDs: Array.from(this.userMap.keys()), joinedUserIDs: e2.map(function(e3) {
            return e3.userID;
          }), leftUserIDs: o2.map(function(e3) {
            return e3.userID;
          }) };
          this.logger.info(u, "mergeUser", n2);
        }, t([Object(o.m)(s.l.get_user_attribute_qps, s.l.get_user_attribute_interval, s.I.QueryRoomMembersAttributes)], l.prototype, "queryRoomMembersAttributes", null), t([Object(o.m)(s.l.get_user_attribute_qps, s.l.get_user_attribute_interval, s.I.QueryRoomMemberAttributesList)], l.prototype, "queryRoomMemberAttributesList", null), l);
        function l(e2, t2, r2, o2, i2) {
          this.type = s.q.Room, this.state = s.V.Disconnected, this.subRoomID = "", this.enabledOfflineMsg = false, this.destroyDelay = 0, this.userMap = /* @__PURE__ */ new Map(), this.userAttributeMap = /* @__PURE__ */ new Map(), this.tatalMemberCount = 0, this.isMergeUser = false, this.mergeMemberListSeq = 0, this.mergeTimer = 0, this.mergeSeqList = [], this.mergeUserList = [], this.mergeConfig = { listMergeTimeout: 0, listPullInterval: 0, attrMergeTimeout: 0, attrPullInterval: 0 }, this.lastFetchAllUserTime = 0, this.hbTimer = 0, this.hbTimeoutCount = 0, this.localSeq = 0, this.userAttrSeq = 0, this.attrItemSeq = 0, this.stRoomAttributes = { attributes: [], attribute_seq: 0 }, this.localAttrKeySeqMap = {}, this.batchOperationConfig = null, this.batchRoomAttributes = [], this.batchAttributesMap = /* @__PURE__ */ new Map(), this.batchIndex = 0, this.batchFlag = false, this.batchPushQueue = [], this.queryAttrFlag = false, this.attrTimer = null, this.queryAttrTask = [], this.groupID = e2, this.engineConfig = t2, this.logger = n.a.getInstance().logger, this.dataReport = n.a.getInstance().dataReport, this.eventBus = r2, this.dbMgr = o2, this.connMgr = i2;
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return c;
        });
        var n = r(2), o = r(1), s = r(0), i = function() {
          return (i = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var o2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, o2) && (e2[o2] = t2[o2]);
            return e2;
          }).apply(this, arguments);
        }, a = function(e2, t2) {
          var r2 = "function" == typeof Symbol && e2[Symbol.iterator];
          if (!r2)
            return e2;
          var n2, o2, s2 = r2.call(e2), i2 = [];
          try {
            for (; (void 0 === t2 || 0 < t2--) && !(n2 = s2.next()).done; )
              i2.push(n2.value);
          } catch (e3) {
            o2 = { error: e3 };
          } finally {
            try {
              n2 && !n2.done && (r2 = s2.return) && r2.call(s2);
            } finally {
              if (o2)
                throw o2.error;
            }
          }
          return i2;
        }, u = s.J.User, c = (Object.defineProperty(l.prototype, "renewTokenTimeout", { get: function() {
          return 30;
        }, enumerable: false, configurable: true }), l.prototype.destroy = function() {
          this.stopUserHB(true), this.stopMailHB(), this.updateLocalToken("", 0), this.settings.unInitEngine(this.engineConfig.handle, true), this.connMgr = null, this.eventBus = null, this.logger = null, this.settings = null, this.dataReport = null, this.crypto = null, this.engineConfig = null;
        }, l.prototype.login = function(e2, t2) {
          var r2, n2 = this, i2 = a(Object(o.k)(t2, 0), 2), c2 = i2[0], l2 = i2[1];
          if (c2)
            return r2 = Object(o.s)(c2), this.logger.warn(u, s.I.Login, { error: r2, expireTime: l2, token: t2 }), Promise.reject(r2);
          if (this.loginState == s.k.Reconnecting || this.loginState == s.k.Connecting)
            return new Promise(function(r3, o2) {
              n2.engineConfig.user.userID == e2.userID && (n2.lastLoginExecutor.token = t2, n2.lastLoginExecutor.expireTime = l2, n2.lastLoginExecutor.resolve = r3, n2.lastLoginExecutor.reject = o2);
            });
          if (this.loginState == s.k.Connected)
            return this.engineConfig.user.userID !== e2.userID ? (i2 = { error: r2 = Object(o.s)(s.s.NetworkModuleUserHasAlreadyLogged), userID: e2.userID, oldUserID: this.engineConfig.user.userID }, this.logger.warn(u, s.I.Login, i2), Promise.reject(r2)) : (this.updateSvrToken(t2, l2), this.emitConnectionStateChanged(s.k.Connected, s.j.ActiveLogin), Promise.resolve());
          this.engineConfig.user.userID = e2.userID, e2.userName && (this.engineConfig.user.userName = e2.userName), this.lastLoginExecutor.token = t2, this.lastLoginExecutor.expireTime = l2, this.dbMgr.setUserID(e2.userID), this.logger.init(this.engineConfig.appID + "", e2), this.initDataReport(t2);
          var d = { time: /* @__PURE__ */ new Date(), action: "apicall", userInfo: e2, expireTime: l2 };
          return this.loginState = s.k.Connecting, this.loginConsumeds.length = 0, this.connMgr.create().then(function(e3) {
            return n2.lastLoginExecutor.url = e3, n2.sendLoginRequest(s.i.API, d, true, true).then(function() {
              return n2.reportZPNs();
            }, function(e4) {
              var t3;
              throw e4 && e4.code || (d.error = e4, n2.logger.warn(u, s.I.Login, d), t3 = (e4 = e4 || Object(o.s)(s.s.NetworkModuleNetworkError, "Login error.")).stack || e4.message, n2.dataReport.reportSDKEvent("/sdk/log", { error_message: "API.login:" + t3 }), n2.logger.upload("login error", true)), n2.lastLoginExecutor.reject && n2.lastLoginExecutor.reject(e4), n2.lastLoginExecutor.reject = null, e4;
            });
          });
        }, l.prototype.logout = function(e2) {
          var t2, r2 = this;
          this.logger && (e2 || this.logger.info(u, s.I.Logout, { state: this.loginState }), t2 = { logout_check: this.k1SignLogoutBuffer, reason: e2 }, this.connMgr.sendRequest(s.c.sw_logout, t2, e2 ? s.i.SDK : s.i.API), setTimeout(function() {
            return (!r2.engineConfig || !r2.engineConfig.token) && r2.connMgr.close();
          }, 50), this.stopUserHB(true), this.stopMailHB(), this.updateLocalToken("", 0), this.settings.unInitEngine(this.engineConfig.handle), this.dbMgr.unloadDB(), this.eventBus.exec(s.t.ILogout), this.loginState !== s.k.Disconnected && this.emitConnectionStateChanged(s.k.Disconnected, s.j.Success));
        }, l.prototype.renewToken = function(e2) {
          var t2, r2, n2 = this, i2 = (r2 = a(Object(o.k)(e2, this.engineConfig.tokenExpireTime), 2))[0], c2 = r2[1];
          if (i2)
            return t2 = Object(o.s)(i2), this.logger.warn(u, s.I.RenewToken, { error: t2, expireTime: c2, token: e2 }), Promise.reject(t2);
          if ((r2 = Date.now()) - this.lastRenewTokenTime < 500)
            return t2 = Object(o.s)(s.s.CommonModuleTriggerSDKFrequencyLimit), this.logger.warn(u, s.I.RenewToken, t2), Promise.reject(t2);
          var l2 = { time: this.lastRenewTokenTime = r2 };
          i2 = { user_name: Object(o.i)(e2), sdk_duration: c2 - Math.floor(Date.now() / 1e3) };
          return this.connMgr.sendRequest(s.c.sw_renew_token, i2, s.i.API).then(function(t3) {
            return t3.code ? (t3 = Object(o.s)(s.s.NetworkModuleTokenInvalid, t3.message, t3.code), l2.error = t3, n2.logger.warn(u, s.I.RenewToken, l2), Promise.reject(t3)) : (n2.updateLocalToken(e2, c2), n2.startCheckTokenExpireTime(c2), n2.logger.info(u, s.I.RenewToken, l2), { token: e2 });
          });
        }, l.prototype.updateUserName = function(e2) {
          var t2 = this, r2 = { time: /* @__PURE__ */ new Date(), userName: e2 }, n2 = { user_name: Object(o.i)(e2), set_flag: 1 };
          return this.connMgr.sendRequest(s.c.modify_user_info, n2).then(function(n3) {
            return n3.code ? (n3 = Object(o.s)(s.s.CommonModuleIMServerError, n3.message, n3.code), r2.error = n3, t2.logger.warn(u, s.I.UpdateUserName, r2), Promise.reject(n3)) : (t2.engineConfig.user.userName = e2, t2.dbMgr.setUser(t2.engineConfig.user), t2.eventBus.exec(s.t.IUpdateSelf), t2.logger.info(u, s.I.UpdateUserName, r2), { userName: e2 });
          });
        }, l.prototype.updateUserExtendedData = function(e2) {
          var t2 = this, r2 = { time: /* @__PURE__ */ new Date(), extendedData: e2 }, n2 = { user_name: Object(o.i)(e2), set_flag: 10 };
          return this.connMgr.sendRequest(s.c.modify_user_info, n2).then(function(n3) {
            return n3.code ? (n3 = Object(o.s)(s.s.CommonModuleIMServerError, n3.message, n3.code), r2.error = n3, t2.logger.warn(u, s.I.UpdateUserExtendedData, r2), Promise.reject(n3)) : (t2.engineConfig.user.extendedData = e2, t2.dbMgr.setUser(t2.engineConfig.user), t2.logger.info(u, s.I.UpdateUserExtendedData, r2), { extendedData: e2 });
          });
        }, l.prototype.updateUserAvatarUrl = function(e2) {
          var t2 = this, r2 = { time: /* @__PURE__ */ new Date(), userAvatarUrl: e2 }, n2 = { user_name: Object(o.i)(e2), set_flag: 16 };
          return this.connMgr.sendRequest(s.c.modify_user_info, n2).then(function(n3) {
            return n3.code ? (n3 = Object(o.s)(s.s.CommonModuleIMServerError, n3.message, n3.code), r2.error = n3, t2.logger.warn(u, s.I.UpdateUserAvatarUrl, r2), Promise.reject(n3)) : (t2.engineConfig.user.userAvatarUrl = e2, t2.dbMgr.setUser(t2.engineConfig.user), t2.eventBus.exec(s.t.IUpdateSelf), t2.logger.info(u, s.I.UpdateUserAvatarUrl, r2), { userAvatarUrl: e2 });
          });
        }, l.prototype.reportZPNs = function() {
          var e2 = this.engineConfig.ZPNsPushID;
          e2 && this.loginState == s.k.Connected && this.connMgr.sendRequest(s.c.userstate_zpns_report, { key: e2 }, s.i.SDK);
        }, l.prototype.onConnected = function(e2) {
          var t2, r2, n2, o2 = this;
          (e2 || this.needRelogin) && (t2 = { time: /* @__PURE__ */ new Date(), isReconnect: e2, action: "onConnected" }, this.needRelogin && (this.needRelogin = false, t2.action += s.c.sw_push_kickout.cmd), r2 = (n2 = this.engineConfig).token, n2 = n2.tokenExpireTime, r2 && n2 ? (this.loginState = s.k.Reconnecting, this.connMgr.create().then(function(e3) {
            return o2.lastLoginExecutor.url = e3, o2.sendLoginRequest(s.i.SDK, t2);
          }).then(function() {
            e2 && o2.initMailHB().then(function() {
              return o2.eventBus.exec(s.t.IConnected);
            });
          }).catch(function(e3) {
            o2.lastLoginExecutor.reject && o2.lastLoginExecutor.reject(e3), o2.lastLoginExecutor.reject = null;
          })) : (t2.error = "token is null", this.logger.warn(u, s.I.Login, t2)));
        }, l.prototype.onDisConnected = function(e2) {
          e2 ? (this.stopUserHB(e2), this.stopMailHB(), this.emitConnectionStateChanged(s.k.Disconnected, s.j.LoginTimeout), this.eventBus.emit(s.t.Error, Object(o.s)(s.s.NetworkModuleNetworkError))) : this.emitConnectionStateChanged(s.k.Reconnecting, s.j.LoginInterrupted), this.eventBus.exec(s.t.IDisConnected, e2);
        }, l.prototype.onPushRedirect = function(e2) {
          e2 && e2.length && (this.lastLoginExecutor.push = true, this.createConnection(e2, s.c.sw_push_redirect.cmd));
        }, l.prototype.onPushKickout = function(e2) {
          1 == e2.seq ? this.needRelogin = true : (e2 = { reason: e2.code, message: e2.key }, this.closeConnection(s.j.KickedOut, JSON.stringify(e2)));
        }, l.prototype.onPushAccesshub = function(e2) {
          var t2, r2, n2, i2 = this;
          19 == e2._type || 20 == e2._type ? (t2 = (r2 = this.engineConfig).token, r2 = r2.tokenExpireTime, 20 == this.PCEstablished._type && t2 && r2 && (n2 = { time: /* @__PURE__ */ new Date(), action: "MSG_TYPE_PC_BROKEN" }, this.loginState = s.k.Reconnecting, this.connMgr.create().then(function(e3) {
            return i2.lastLoginExecutor.url = e3, i2.sendLoginRequest(s.i.SDK, n2);
          }).catch(function(e3) {
            i2.lastLoginExecutor.reject && i2.lastLoginExecutor.reject(e3), i2.lastLoginExecutor.reject = null;
          })), Object.assign(this.PCEstablished, e2)) : 30 == e2._type && 20010 == e2.reason && (this.handleLoginRedirectRequest(true, s.s.CommonModuleUnactivatedIMServer), this.eventBus.emit(s.t.Error, Object(o.s)(s.s.CommonModuleUnactivatedIMServer)));
        }, l.prototype.onPushUpdateUserInfo = function(e2) {
          var t2 = this.engineConfig.user;
          t2.userName = Object(o.f)(e2.userName), t2.extendedData = Object(o.f)(e2.extendedData), t2.userAvatarUrl = Object(o.f)(e2.userAvatarUrl), this.dbMgr.setUser(t2), 10 != e2.set_flag && this.eventBus.exec(s.t.IUpdateSelf), e2 = { baseInfo: { userID: t2.userID, userName: t2.userName }, userAvatarUrl: t2.userAvatarUrl, extendedData: t2.extendedData };
          this.eventBus.emit(s.t.UserInfoUpdated, { info: e2 });
        }, l.prototype.initDataReport = function(e2, t2) {
          var r2 = (n2 = a(this.settings.fetchZGLogConfig(this.engineConfig.handle), 2))[0], n2 = n2[1];
          if (this.logger.setUploadURL(r2), this.dataReport.init(this.engineConfig.appID, n2), this.dataReport.start(this.engineConfig.user.userID, e2, t2 ? n2 : void 0), t2) {
            for (var o2 = [this.loginConsumeds[0] - t2], u2 = this.loginConsumeds.length - 1; 0 < u2; u2--)
              o2[u2] = this.loginConsumeds[u2] - this.loginConsumeds[u2 - 1];
            e2 = i(i({ times: o2.join() }, this.PCEstablished), { logger: r2, report: n2 }), this.logger.info(s.J.Connection, "fetchSetting", e2), this.dataReport.reportSDKEvent("/sdk/init", { time_consumed: Date.now() - t2, error_message: e2.times, sdk_config: JSON.stringify(Object.assign(e2, this.engineConfig.cloudSetting)) });
          }
        }, l.prototype.createConnection = function(e2, t2, r2) {
          var n2 = this, o2 = { time: /* @__PURE__ */ new Date(), action: t2, serveres: e2 };
          return 0 == e2[0].indexOf("wss://") && this.connMgr.setUrls(e2), this.dataReport.reportSDKEvent("/sdk/reconnect", { domain: e2 }), this.handleLoginRedirectRequest(false), this.loginState = s.k.Connecting, this.connMgr.create().then(function(e3) {
            return n2.lastLoginExecutor.url = e3, n2.sendLoginRequest(s.i.SDK, o2, r2);
          }).catch(function(e3) {
            throw n2.handleLoginRedirectRequest(true), n2.lastLoginExecutor.reject && n2.lastLoginExecutor.reject(e3), n2.lastLoginExecutor.reject = null, e3;
          });
        }, l.prototype.sendHandshakeRequest = function() {
          this.connMgr.sendRequestWithNoRsp(s.c.sw_handshake_req.cmd, i({}, this.settings.deviceInfo));
        }, l.prototype.sendLoginRequest = function(e2, t2, r2, n2) {
          var a2 = this, c2 = (this.sendHandshakeRequest(), this.emitConnectionStateChanged(this.loginState, s.j.ActiveLogin), this.engineConfig.token || this.lastLoginExecutor.token), l2 = this.engineConfig.tokenExpireTime || this.lastLoginExecutor.expireTime, d = (r2 && (this.loginConsumeds.push(Date.now()), this.connMgr.sendDispatchRequest(), this.settings.startSyncRemoteConfig(this.connMgr, this.engineConfig.handle, c2).then(function(e3) {
            e3 && a2.eventBus.exec(s.t.INetworkChange, "fetchSetting");
          })), i(i({}, this.settings.deviceInfo), { user_name: Object(o.i)(this.engineConfig.user.userName), client_stamp: Object(o.i)(this.crypto.generateNonce()), k1_sign: this.crypto.generateK1Sign(this.engineConfig), login_token: Object(o.i)(c2), sdk_action: t2.action, sdk_duration: l2 - Math.floor(Date.now() / 1e3), sdk_server_ip: this.lastLoginExecutor.url, sdk_session_timeout: !r2 && this.engineConfig.sessionID ? this.hbMap.timeout : void 0 }));
          !r2 && this.engineConfig.sessionID && this.hbMap.timeout > Date.now() && (d.old_session_id = this.engineConfig.sessionID), this.reloginTokenBuffer && (d.relogin_token = this.reloginTokenBuffer), this.engineConfig.ZPNsPushID && (d.zpns_push_id = this.engineConfig.ZPNsPushID), e2 = this.connMgr.sendRequest(s.c.sw_login, d, e2);
          return n2 && (this.lastLoginExecutor.seq = d._seq), e2.then(function(e3) {
            var i2 = e3.code;
            if (i2) {
              if ((p = e3.redirect_server) && p.length)
                return a2.createConnection(p, "redirect login error code: " + i2, r2);
              if (50106 == i2 || 50107 == i2)
                return 50106 == i2 && (a2.engineConfig.sessionID = void 0), a2.sendLoginRequest(s.i.SDK, t2, r2, n2);
              if (6000104 == i2 && a2.lastLoginExecutor.push)
                return;
              var p = 1e3 * l2, h = (50111 == i2 && p && p < Date.now() ? a2.closeConnection(s.j.LoginInterrupted, "Token expire") : 102005 == i2 ? a2.closeConnection(s.j.KickedOut, "") : a2.emitConnectionStateChanged(s.k.Disconnected, s.j.LoginInterrupted), a2.lastLoginExecutor.push = false, i2 == s.s.CommonModuleUnactivatedIMServer ? Object(o.s)(s.s.CommonModuleUnactivatedIMServer) : Object(o.s)(s.s.NetworkModuleServerError, e3.message, i2));
              return t2.error = h, a2.logger.warn(u, s.I.Login, t2), Promise.reject(h);
            }
            if (i2 != s.s.Success) {
              a2.reloginTokenBuffer = e3.relogin_token, a2.k1SignLogoutBuffer = a2.crypto.md5Bytes(d.k1_sign), a2.engineConfig.sessionID = e3.rspHeader.session_id, a2.engineConfig.serverUserID = e3.rspHeader.user_nid, a2.engineConfig.controls = e3.rspHeader.controls, a2.settings.serverOffsetTime = e3.server_timestamp - Date.now(), a2.crypto.decryptK2Sign(e3.k2_sign, a2.engineConfig), a2.lastLoginExecutor.push = false, a2.startUserHB(e3.hb_interval, e3.hb_timeout), a2.startMailHB(), a2.updateLocalToken(c2, l2), a2.startCheckTokenExpireTime(l2);
              try {
                var g = JSON.parse(e3.im_conf_json);
                t2.im_conf_json = g, a2.setMailHBFetchConfig(g);
              } catch (h2) {
              }
              if (a2.emitConnectionStateChanged(s.k.Connected, s.j.Success), t2.seq = a2.handleLoginRedirectRequest(true), r2)
                return a2.loadDB(t2);
              a2.loginEnd(t2, false);
            }
          });
        }, l.prototype.updateLocalToken = function(e2, t2) {
          this.engineConfig.token = e2, this.engineConfig.tokenExpireTime = t2, this.dataReport.start(this.engineConfig.user.userID, e2), this.logger.renewToken(e2);
        }, l.prototype.updateSvrToken = function(e2, t2) {
          var r2, n2 = this;
          e2 && this.engineConfig.tokenExpireTime < t2 && (r2 = { user_name: Object(o.i)(e2), sdk_duration: t2 - Math.floor(Date.now() / 1e3) }, this.connMgr.sendRequest(s.c.sw_renew_token, r2, s.i.SDK).then(function(r3) {
            r3.code || (n2.updateLocalToken(e2, t2), n2.startCheckTokenExpireTime(t2));
          }));
        }, l.prototype.startUserHB = function(e2, t2) {
          var r2 = this;
          !e2 || e2 < 0 || (this.hbMap.timeout = 1.5 * t2 + Date.now(), this.stopUserHB(false), this.hbMap.userTimer = setInterval(function() {
            r2.logger && r2.connMgr.sendRequestWithHeartbeat(s.c.sw_hb.cmd, void 0).then(function(e3) {
              return e3.code == s.W ? r2.stopUserHB(true) : e3.code ? (6000104 == e3.code && r2.hbMap.userTimeoutCount++, e3.timeoutCount = r2.hbMap.userTimeoutCount, (1 == e3.code || 50012 == e3.code || r2.hbMap.userTimeoutCount >= s.l.hbTimeoutMaxCount) && (r2.stopUserHB(false), r2.onConnected(true)), -1 != s.l.needReloginCodeList.indexOf(e3.code) && r2.closeConnection(s.j.LoginInterrupted, "Session id invalid"), void (e3.state = r2.loginState)) : void (e3.server_timestamp && (r2.hbMap.userTimeoutCount = 0, r2.settings.serverOffsetTime = e3.server_timestamp - Date.now(), e3.hb_timeout == t2 && (r2.hbMap.timeout = 1.5 * e3.hb_timeout + Date.now())));
            });
          }, e2));
        }, l.prototype.stopUserHB = function(e2) {
          this.hbMap.userTimer && clearInterval(this.hbMap.userTimer), this.hbMap.userTimeoutCount = 0, this.hbMap.userTimer = 0, e2 && (this.renewTokenTimer && clearTimeout(this.renewTokenTimer), this.expireTokenTimer && clearTimeout(this.expireTokenTimer), this.renewTokenTimer = 0, this.expireTokenTimer = 0);
        }, l.prototype.startMailHB = function() {
          var e2 = this, t2 = this.engineConfig.mailHBConfig.usermail_hb_interval;
          !t2 || t2 < 0 || (this.stopMailHB(), this.hbMap.mailTimer = setInterval(function() {
            var t3;
            e2.logger && (t3 = { conv: (t3 = e2.engineConfig.user).convSeq, group: t3.groupSeq, call: t3.callSeq, pin: t3.convPinnedSeq, c2c_state: t3.c2cMsgStateSeq, extra_msg: t3.msgExtraSeq }, t3 = { conv_sid: e2.engineConfig.user.convSeq || "1", db_seq_json: t3 }, e2.connMgr.sendRequestWithHeartbeat(s.c.usermail_hb.cmd, t3).then(function(t4) {
              return t4.code == s.W ? e2.stopMailHB() : t4.code ? (6000104 == t4.code && e2.hbMap.mailTimeoutCount++, t4.timeoutCount = e2.hbMap.mailTimeoutCount, void ((1 == t4.code || e2.hbMap.mailTimeoutCount >= s.l.hbTimeoutMaxCount || -1 != s.l.needReloginCodeList.indexOf(t4.code)) && e2.stopMailHB())) : (e2.setMailHBFetchConfig(t4, true), void e2.eventBus.exec(s.t.ITriggerHB));
            }));
          }, t2));
        }, l.prototype.stopMailHB = function() {
          this.hbMap.mailTimer && clearInterval(this.hbMap.mailTimer), this.hbMap.mailTimeoutCount = 0, this.hbMap.mailTimer = 0;
        }, l.prototype.startCheckTokenExpireTime = function(e2) {
          var t2 = this, r2 = (this.renewTokenTimer && clearTimeout(this.renewTokenTimer), this.expireTokenTimer && clearTimeout(this.expireTokenTimer), Math.min(2073600, e2 - Math.floor(Date.now() / 1e3)));
          r2 < this.renewTokenTimeout ? (this.logger.info(u, "tokenWillExpire", "token will expire: " + r2), this.eventBus.emit(s.t.TokenExpire, { second: r2 })) : this.renewTokenTimer = setTimeout(function() {
            t2.logger && (t2.logger.info(u, "tokenWillExpire", "token will expire: " + r2), t2.eventBus.emit(s.t.TokenExpire, { second: t2.renewTokenTimeout }));
          }, 1e3 * (r2 - this.renewTokenTimeout)), this.expireTokenTimer = setTimeout(function() {
            return t2.logout("token expire");
          }, 1e3 * (r2 - 2));
        }, l.prototype.emitConnectionStateChanged = function(e2, t2, r2) {
          this.loginState = e2, this.eventBus.emit(s.t.ConnState, { state: e2, event: t2, extendedData: r2 || "" });
        }, l.prototype.handleLoginRedirectRequest = function(e2, t2) {
          void 0 === t2 && (t2 = s.s.Success);
          var r2 = 0;
          return this.lastLoginExecutor.seq && (r2 = this.connMgr.responseRequest(this.lastLoginExecutor.seq, e2, t2)), e2 && (this.lastLoginExecutor.seq = 0), r2;
        }, l.prototype.closeConnection = function(e2, t2) {
          this.logger.upload(t2), this.stopUserHB(true), this.stopMailHB(), this.updateLocalToken("", 0), this.settings.unInitEngine(this.engineConfig.handle), this.dbMgr.unloadDB(), this.eventBus.exec(s.t.ILogout, t2), this.connMgr.close(), this.emitConnectionStateChanged(s.k.Disconnected, e2, t2);
        }, l.prototype.setMailHBFetchConfig = function(e2, t2) {
          var r2 = e2.c2c_msg_seq, n2 = e2.conv_list_seq, o2 = e2.group_list_seq, i2 = e2.call_list_seq, a2 = e2.conv_pinned_list_seq, u2 = e2.c2c_statemsg_seq, c2 = e2.extra_msg_list_seq;
          e2 = function(e3, t3) {
            var r3 = {};
            for (o3 in e3)
              Object.prototype.hasOwnProperty.call(e3, o3) && t3.indexOf(o3) < 0 && (r3[o3] = e3[o3]);
            if (null != e3 && "function" == typeof Object.getOwnPropertySymbols)
              for (var n3 = 0, o3 = Object.getOwnPropertySymbols(e3); n3 < o3.length; n3++)
                t3.indexOf(o3[n3]) < 0 && Object.prototype.propertyIsEnumerable.call(e3, o3[n3]) && (r3[o3[n3]] = e3[o3[n3]]);
            return r3;
          }(e2, ["c2c_msg_seq", "conv_list_seq", "group_list_seq", "call_list_seq", "conv_pinned_list_seq", "c2c_statemsg_seq", "extra_msg_list_seq"]);
          Object.assign(this.engineConfig.mailHBConfig, e2), r2 && (this.engineConfig.mailHBConfig.c2c_msg_seq = r2), n2 && (this.engineConfig.mailHBConfig.conv_list_seq = n2), o2 && (this.engineConfig.mailHBConfig.group_list_seq = o2), i2 && (this.engineConfig.mailHBConfig.call_list_seq = i2), a2 && (this.engineConfig.mailHBConfig.conv_pinned_list_seq = a2), u2 && (this.engineConfig.mailHBConfig.c2c_statemsg_seq = u2), c2 && (this.engineConfig.mailHBConfig.extra_msg_list_seq = c2), t2 && (e2 = null, (r2 = this.engineConfig.user).convSeq && r2.convSeq != n2.toString() && ((e2 = e2 || {}).conv = r2.convSeq + "," + n2.toString()), r2.groupSeq && r2.groupSeq != o2.toString() && ((e2 = e2 || {}).group = r2.groupSeq + "," + o2.toString()), r2.callSeq && r2.callSeq != i2.toString() && ((e2 = e2 || {}).call = r2.callSeq + "," + i2.toString()), r2.convPinnedSeq && r2.convPinnedSeq != a2 && ((e2 = e2 || {}).pin = r2.convPinnedSeq + "," + a2), r2.c2cMsgStateSeq && r2.c2cMsgStateSeq != u2.toString() && ((e2 = e2 || {}).c2c_state = r2.c2cMsgStateSeq + "," + u2.toString()), r2.msgExtraSeq && r2.msgExtraSeq != c2.toString() && ((e2 = e2 || {}).extra_msg = r2.msgExtraSeq + "," + c2.toString()), e2 && this.logger.info(s.J.Conversation, "hb", e2));
        }, l.prototype.loginEnd = function(e2, t2) {
          t2 && this.logger.info(u, s.I.Login, e2), this.lastLoginExecutor.resolve && this.lastLoginExecutor.resolve(), this.lastLoginExecutor.resolve = null, this.updateSvrToken(this.lastLoginExecutor.token, this.lastLoginExecutor.expireTime), this.lastLoginExecutor.token = "";
        }, l.prototype.syncUser = function(e2, t2) {
          var r2 = this, n2 = t2.find(function(t3) {
            return t3.userID == e2;
          });
          return n2 ? n2.userName = this.engineConfig.user.userName || n2.userName : n2 = { userID: e2, userName: this.engineConfig.user.userName, convSeq: "0", groupSeq: "0", msgExtraSeq: "0", c2cMsgStateSeq: "0", convPinnedSeq: 0, callSeq: "0" }, this.logger.info(u, "getDBUser", n2), Object.assign(this.engineConfig.user, n2), this.engineConfig.user.userName ? this.dbMgr.setUser(this.engineConfig.user) : this.connMgr.sendRequest(s.c.fetch_user_info, { _ev_: "login", quey_user_id: [e2] }, s.i.SDK).then(function(e3) {
            (e3 = e3.result && e3.result[0]) && (r2.engineConfig.user.userName = Object(o.f)(e3.user_name), r2.engineConfig.user.userAvatarUrl = Object(o.f)(e3.avatar), r2.dbMgr.setUser(r2.engineConfig.user));
          }), t2;
        }, l.prototype.initMailHB = function() {
          var e2 = this, t2 = { conv: (t2 = this.engineConfig.user).convSeq, group: t2.groupSeq, call: t2.callSeq, pin: t2.convPinnedSeq, c2c_state: t2.c2cMsgStateSeq, extra_msg: t2.msgExtraSeq };
          t2 = { conv_sid: this.engineConfig.user.convSeq || "1", db_seq_json: t2 };
          return this.connMgr.sendRequest(s.c.usermail_hb, t2, s.i.SDK).then(function(t3) {
            t3.code || e2.setMailHBFetchConfig(t3);
          });
        }, l.prototype.loadDB = function(e2) {
          var t2 = this;
          return this.loginConsumeds.push(Date.now()), this.initMailHB().then(function() {
            return t2.loginConsumeds.push(Date.now()), Promise.all([t2.dbMgr.getUserList().then(function(e3) {
              return t2.syncUser(t2.engineConfig.user.userID, e3);
            }), t2.dbMgr.getConversationList(), t2.dbMgr.getGroupList(), t2.dbMgr.getMessageExtraList(), t2.dbMgr.getCallList()]).then(function(r2) {
              t2.loginConsumeds.push(Date.now()), t2.initDataReport(t2.engineConfig.token, e2.time.getTime()), t2.loginEnd(e2, true), t2.fetchLogReportWhiteList(t2.settings.fetchZGLogWhitelistUrl(t2.engineConfig.handle)), r2 = { users: r2[0], convs: r2[1], groups: r2[2], msgs: r2[3], calls: r2[4] }, t2.eventBus.exec(s.t.ILogined, r2);
            });
          });
        }, l.prototype.clearDB = function(e2) {
          var t2 = this.engineConfig.user;
          t2.convSeq = "0", t2.groupSeq = "0", t2.msgExtraSeq = "0", t2.c2cMsgStateSeq = "0", t2.convPinnedSeq = 0, t2.callSeq = "0", this.dbMgr.clearDB(i({}, t2)), e2 && this.eventBus.exec(s.t.ILogout, true);
        }, l.prototype.fetchLogReportWhiteList = function(e2) {
          var t2, r2 = this, n2 = { product: "zim", biz_type: 1, appid: this.engineConfig.appID + "", uin: encodeURIComponent(this.engineConfig.user.userID), token: encodeURIComponent(this.engineConfig.token), timestamp: Date.now() + "", deviceid: this.settings.deviceInfo.device_id }, s2 = Object.keys(n2).map(function(e3) {
            return e3 + "=" + n2[e3];
          }).join("&");
          e2 += "?" + s2, o.n ? o.n.request({ url: e2, data: s2, success: function(e3) {
            try {
              var t3 = "string" == typeof e3.data ? JSON.parse(e3.data) : e3.data;
              t3 && 0 == t3.code ? r2.logger.upload("login with whitelist", true) : r2.logger.upload("login with not present in whitelist");
            } catch (e4) {
            }
          }, fail: function() {
            return r2.logger.upload("login with error whitelist");
          } }) : ((t2 = new XMLHttpRequest()).onreadystatechange = function() {
            if (4 == t2.readyState && (200 <= t2.status && t2.status < 300 || 304 == t2.status))
              try {
                var e3 = JSON.parse(t2.responseText);
                e3 && 0 == e3.code ? r2.logger.upload("login with whitelist", true) : r2.logger.upload("login with not present in whitelist");
              } catch (e4) {
                r2.logger.upload("login with error whitelist");
              }
          }, t2.open("GET", e2, true), t2.send());
        }, l);
        function l(e2, t2, r2, o2) {
          this.hbMap = { timeout: 0, userTimer: 0, userTimeoutCount: 0, mailTimer: 0, mailTimeoutCount: 0 }, this.loginState = s.k.Disconnected, this.loginConsumeds = [], this.needRelogin = false, this.lastLoginExecutor = { seq: 0, push: false, url: "", token: "", expireTime: 0, resolve: null, reject: null }, this.lastRenewTokenTime = 0, this.PCEstablished = { _type: 0 }, this.logger = n.a.getInstance().logger, this.dataReport = n.a.getInstance().dataReport, this.settings = n.a.getInstance().settings, this.crypto = n.a.getInstance().crypto, this.engineConfig = e2, this.eventBus = t2, this.connMgr = r2, this.dbMgr = o2;
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return d;
        });
        t = r(3);
        var n = r.n(t), o = r(2), s = r(1), i = r(0), a = function() {
          return (a = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var o2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, o2) && (e2[o2] = t2[o2]);
            return e2;
          }).apply(this, arguments);
        }, u = function(e2, t2) {
          var r2 = "function" == typeof Symbol && e2[Symbol.iterator];
          if (!r2)
            return e2;
          var n2, o2, s2 = r2.call(e2), i2 = [];
          try {
            for (; (void 0 === t2 || 0 < t2--) && !(n2 = s2.next()).done; )
              i2.push(n2.value);
          } catch (e3) {
            o2 = { error: e3 };
          } finally {
            try {
              n2 && !n2.done && (r2 = s2.return) && r2.call(s2);
            } finally {
              if (o2)
                throw o2.error;
            }
          }
          return i2;
        }, c = function(e2, t2, r2) {
          if (r2 || 2 === arguments.length)
            for (var n2, o2 = 0, s2 = t2.length; o2 < s2; o2++)
              !n2 && o2 in t2 || ((n2 = n2 || Array.prototype.slice.call(t2, 0, o2))[o2] = t2[o2]);
          return e2.concat(n2 || Array.prototype.slice.call(t2));
        }, l = i.J.Call, d = (p.prototype.destroy = function() {
          this.onLogout(), this.connMgr = null, this.eventBus = null, this.logger = null;
        }, p.prototype.callInvite = function(e2, t2) {
          var r2 = this, n2 = { time: /* @__PURE__ */ new Date(), invitees: e2, config: t2 }, o2 = (t2.mode = t2.mode || i.f.General, t2.timeout = +t2.timeout || 90, e2 = Array.from(new Set(e2.filter(function(e3) {
            return Object(s.l)(e3);
          }))), Object(s.j)()), u2 = { call_id: o2, call_mode: t2.mode, timeout: t2.timeout, user_ids: e2, payload: this.encodeExtendedData(t2), offline_info: Object(s.e)(t2.pushConfig) };
          return this.connMgr.sendRequest(i.c.call_create, u2).then(function(c2) {
            if (c2.code)
              return d2 = Object(s.s)(i.s.CallModuleServerError, c2.message, c2.code), n2.error = d2, r2.logger.warn(l, i.I.CallInvite, n2), Promise.reject(d2);
            r2.updateCallListSeq(c2.call_list_seq), c2.timeout || (c2.timeout = u2.timeout), r2.createInviteTimeout(o2, e2, c2.timeout);
            var d2 = +c2.create_time.toString(), p2 = ((g = {})[r2.engineConfig.user.userID] = { userID: r2.engineConfig.user.userID, state: i.h.Accepted, extendedData: "", acceptTime: 0, quitTime: 0, timeout: 0 }, g), h = c2.new_err_list.map(function(e3) {
              return { userID: e3.user_id, reason: e3.sub_code };
            }), g = c2.err_list.map(function(e3) {
              return { userID: e3.user_id, state: r2.translateUserState(e3), extendedData: "" };
            }), f = ((f = e2.filter(function(e3) {
              return !h.find(function(t3) {
                return t3.userID == e3;
              });
            }).map(function(e3) {
              return e3 = { userID: e3, state: i.h.Inviting, extendedData: "" }, p2[e3.userID] = a(a({}, e3), { acceptTime: 0, quitTime: 0, timeout: c2.timeout }), e3;
            })).unshift({ userID: r2.engineConfig.user.userID, state: i.h.Accepted, extendedData: "" }), r2.eventBus.emit(i.t.CallUserState, { callID: o2, callUserList: f }), { callID: o2, caller: r2.engineConfig.user.userID, mode: t2.mode, state: i.g.Started, extendedData: t2.extendedData, createTime: d2, endTime: 0, timeout: c2.timeout, inviter: r2.engineConfig.user.userID, callDuration: 0, userDuration: 0, callUserMap: p2 });
            return r2.dbCallMap.set(o2, f), r2.dbMgr.addCallList([f]), r2.logger.info(l, i.I.CallInvite, n2), { callID: o2, timeout: c2.timeout, errorUserList: h, errorInvitees: g };
          });
        }, p.prototype.callCancel = function(e2, t2, r2, n2) {
          var o2 = this, a2 = (void 0 === n2 && (n2 = i.e.Cancel), { time: /* @__PURE__ */ new Date(), callID: t2, state: n2, config: r2, invitees: e2 }), u2 = (e2 = Array.from(new Set(e2.filter(function(e3) {
            return Object(s.l)(e3);
          }))), r2.extendedData || ""), c2 = { call_id: t2, user_ids: e2, timeout: n2, payload: this.encodeExtendedData(r2), offline_info: Object(s.e)(r2.pushConfig) }, d2 = n2 == i.e.Cancel ? i.i.API : i.i.SDK;
          return this.connMgr.sendRequest(i.c.call_cancel, c2, d2).then(function(c3) {
            var d3 = o2.dbCallMap.get(t2);
            if (c3.code)
              return h = Object(s.s)(i.s.CallModuleServerError, c3.message, c3.code), a2.error = h, o2.logger.warn(l, i.I.CallCancel, a2), Promise.reject(h);
            o2.updateCallListSeq(c3.now_time);
            var p2, h, g = c3.err_list.map(function(e3) {
              return e3.user_id;
            });
            return d3 && (n2 == i.e.Cancel ? (d3.state = i.g.Ended, (h = d3.callUserMap[o2.engineConfig.user.userID]) && (h.state = i.h.Cancelled, h.extendedData = r2.extendedData)) : d3.mode == i.f.General && (d3.state = i.g.Ended), p2 = [], h = e2.filter(function(e3) {
              return -1 == g.indexOf(e3);
            }).map(function(e3) {
              p2.push(e3);
              e3 = { userID: e3, state: i.h.Timeout, extendedData: u2 };
              var t3 = d3.callUserMap[e3.userID];
              return n2 == i.e.Cancel && t3 ? t3.userID == o2.engineConfig.user.userID && (t3.state = i.h.Cancelled, u2 && (t3.extendedData = u2)) : n2 == i.e.Timeout && t3 && (t3.state = i.h.Timeout), e3;
            }), n2 == i.e.Timeout && h.length ? (o2.eventBus.emit(i.t.CallUserState, { callID: t2, callUserList: h }), o2.eventBus.emit(i.t.CallAnswerTimeout, { callID: t2, invitees: p2 })) : n2 == i.e.Cancel && (h = c3.call_user_session_id.toString(), o2.isMainDevice(i.h.Accepted, h) && o2.eventBus.emit(i.t.CallUserState, { callID: t2, callUserList: [{ userID: o2.engineConfig.user.userID, state: i.h.Cancelled, extendedData: u2 }] })), o2.dbMgr.addCallList([d3])), o2.logger.info(l, i.I.CallCancel, a2), { callID: t2, errorInvitees: g };
          });
        }, p.prototype.callAccept = function(e2, t2) {
          var r2 = this, n2 = { time: /* @__PURE__ */ new Date(), callID: e2, config: t2 }, o2 = { user_id: e2, user_name: this.encodeExtendedData(t2) };
          return this.connMgr.sendRequest(i.c.call_accept, o2).then(function(o3) {
            if (o3.code)
              return c2 = Object(s.s)(i.s.CallModuleServerError, o3.message, o3.code), n2.error = c2, r2.logger.warn(l, i.I.CallAccept, n2), Promise.reject(c2);
            r2.updateCallListSeq(o3.talk_time);
            var a2, u2 = +o3.quit_time.toString() || 0, c2 = r2.dbCallMap.get(e2);
            o3 = c2 && c2.callUserMap[r2.engineConfig.user.userID];
            return c2 && o3 && (c2.mode == i.f.General && (c2.state = i.g.Ended), o3.state = i.h.Accepted, o3.acceptTime = u2, o3.extendedData = t2.extendedData || "", 2 == (a2 = Object.values(c2.callUserMap)).length && a2.forEach(function(e3) {
              return e3.acceptTime = u2;
            }), r2.dbMgr.addCallList([c2]), r2.eventBus.emit(i.t.CallUserState, { callID: e2, callUserList: [r2.pickCallUser(o3)] })), r2.logger.info(l, i.I.CallAccept, n2), { callID: e2 };
          });
        }, p.prototype.callReject = function(e2, t2) {
          var r2 = this, n2 = { time: /* @__PURE__ */ new Date(), callID: e2, config: t2 }, o2 = { call_id: e2, payload: this.encodeExtendedData(t2) };
          return this.connMgr.sendRequest(i.c.call_refuse, o2).then(function(o3) {
            if (o3.code)
              return a2 = Object(s.s)(i.s.CallModuleServerError, o3.message, o3.code), n2.error = a2, r2.logger.warn(l, i.I.CallReject, n2), Promise.reject(a2);
            r2.updateCallListSeq(o3.talk_time);
            var a2 = r2.dbCallMap.get(e2);
            o3 = a2 && a2.callUserMap[r2.engineConfig.user.userID];
            return a2 && o3 && (o3.state = i.h.Rejected, a2.state = i.g.Ended, o3.extendedData = t2.extendedData || "", r2.dbMgr.addCallList([a2]), r2.eventBus.emit(i.t.CallUserState, { callID: e2, callUserList: [r2.pickCallUser(o3)] })), r2.logger.info(l, i.I.CallReject, n2), { callID: e2 };
          });
        }, p.prototype.callingInvite = function(e2, t2, r2) {
          var n2 = this, o2 = { time: /* @__PURE__ */ new Date(), callID: t2, invitees: e2, config: r2 };
          e2 = Array.from(new Set(e2.filter(function(e3) {
            return Object(s.l)(e3);
          }))), r2 = { call_id: t2, user_ids: e2, offline_info: Object(s.e)(r2.pushConfig) };
          return this.connMgr.sendRequest(i.c.call_invite, r2).then(function(r3) {
            if (r3.code)
              return u2 = Object(s.s)(i.s.CallModuleServerError, r3.message, r3.code), o2.error = u2, n2.logger.warn(l, i.I.CallInvite, o2), Promise.reject(u2);
            var u2, c2, d2 = r3.err_list.map(function(e3) {
              return { userID: e3.user_id, reason: e3.sub_code };
            }), p2 = n2.dbCallMap.get(t2);
            return p2 && (u2 = e2.filter(function(e3) {
              return !d2.find(function(t3) {
                return t3.userID == e3;
              });
            }).map(function(e3) {
              return e3 = { userID: e3, state: i.h.Inviting, extendedData: "" }, p2.callUserMap[e3.userID] = a(a({}, e3), { acceptTime: 0, quitTime: 0, timeout: p2.timeout }), e3;
            }), n2.dbMgr.addCallList([p2]), c2 = null == (c2 = p2.callUserMap[n2.engineConfig.user.userID]) ? void 0 : c2.state, n2.isMainDevice(c2, null == (c2 = r3.call_user_session_id) ? void 0 : c2.toString()) ? (n2.eventBus.emit(i.t.CallUserState, { callID: t2, callUserList: u2 }), n2.createInviteTimeout(t2, e2, r3.timeout)) : setTimeout(function() {
              e2.forEach(function(e3) {
                e3 = p2.callUserMap[e3], p2.state != i.g.Started || (null == e3 ? void 0 : e3.state) != i.h.Inviting && (null == e3 ? void 0 : e3.state) != i.h.Received || (e3.state = i.h.Timeout);
              });
            }, 1e3 * r3.timeout)), n2.logger.info(l, i.I.CallingInvite, o2), { callID: t2, errorUserList: d2 };
          });
        }, p.prototype.callQuit = function(e2, t2) {
          var r2 = this, n2 = { time: /* @__PURE__ */ new Date(), callID: e2, config: t2 }, o2 = { call_id: e2, payload: this.encodeExtendedData(t2), offline_info: Object(s.e)(t2.pushConfig) };
          return this.connMgr.sendRequest(i.c.call_quit, o2).then(function(o3) {
            if (o3.code)
              return c2 = Object(s.s)(i.s.CallModuleServerError, o3.message, o3.code), n2.error = c2, r2.logger.warn(l, i.I.CallQuit, n2), Promise.reject(c2);
            r2.updateCallListSeq(o3.call_list_seq);
            var a2, u2, c2 = r2.dbCallMap.get(e2), d2 = c2 && c2.callUserMap[r2.engineConfig.user.userID];
            return c2 && d2 && (a2 = d2.state, d2.state = i.h.Quit, c2.state = i.g.Ended, d2.extendedData = t2.extendedData || "", d2.quitTime = +o3.quit_time.toString() || 0, c2.userDuration = (d2.quitTime - d2.acceptTime) / 1e3 | 0, c2.endTime = !Object.values(c2.callUserMap).some(function(e3) {
              return e3.state == i.h.Accepted;
            }) && +o3.quit_time.toString() || 0, Object.values(c2.callUserMap).every(function(e3) {
              return e3.state == i.h.Quit;
            }) && (c2.endTime = 0), u2 = 0, Object.values(c2.callUserMap).forEach(function(e3) {
              var t3 = e3.state;
              e3 = e3.acceptTime;
              t3 != i.h.Rejected && t3 != i.h.Timeout && t3 != i.h.Quit || (u2 ? e3 < u2 && (u2 = e3) : u2 = e3 || 0);
            }), u2 && (c2.callDuration = (d2.quitTime - u2) / 1e3 | 0), r2.dbMgr.addCallList([c2]), o3 = null == (o3 = o3.call_user_session_id) ? void 0 : o3.toString(), r2.isMainDevice(a2, o3) && r2.eventBus.emit(i.t.CallUserState, { callID: e2, callUserList: [r2.pickCallUser(d2)] })), r2.logger.info(l, i.I.CallQuit, n2), { callID: e2, createTime: (null == c2 ? void 0 : c2.createTime) || 0, acceptTime: (null == d2 ? void 0 : d2.acceptTime) || (null == c2 ? void 0 : c2.createTime) || 0, quitTime: (null == d2 ? void 0 : d2.quitTime) || 0 };
          });
        }, p.prototype.callJoin = function(e2, t2) {
          var r2 = this, n2 = { time: /* @__PURE__ */ new Date(), callID: e2, config: t2 };
          t2 = { call_id: e2, payload: this.encodeExtendedData(t2) };
          return this.connMgr.sendRequest(i.c.call_enter, t2).then(function(t3) {
            var o2;
            if (t3.code)
              return o2 = Object(s.s)(i.s.CallModuleServerError, t3.message, t3.code), n2.error = o2, r2.logger.warn(l, i.I.callJoin, n2), Promise.reject(o2);
            r2.updateCallListSeq(t3.call_list_seq);
            var u2 = [], c2 = r2.dbCallMap.get(e2) || { callID: e2, caller: t3.caller, mode: i.f.Advanced, state: i.g.Started, createTime: +t3.create_time.toString(), endTime: 0, extendedData: Object(s.f)(t3.payload), callDuration: 0, userDuration: 0, callUserMap: {} };
            return c2.state = i.g.Started, c2.timeout = +t3.timeout.toString(), t3.user_state_list.map(function(e3) {
              e3 = { userID: e3.user_id, state: r2.translateUserState(e3), extendedData: Object(s.f)(e3.extended_data), acceptTime: e3.acceptTime || 0, quitTime: e3.quit_time || 0 }, c2.callUserMap[e3.userID] = a(a({}, e3), { timeout: c2.timeout }), u2.push(r2.pickCallUser(e3));
            }), r2.dbCallMap.set(e2, c2), r2.dbMgr.addCallList([c2]), { callID: e2, createTime: +t3.create_time.toString(), joinTime: +t3.accept_time.toString(), extendedData: Object(s.f)(t3.extended_data), callUserList: u2 };
          });
        }, p.prototype.callEnd = function(e2, t2) {
          var r2 = this, n2 = { callID: e2, config: t2 }, o2 = { call_id: e2, payload: this.encodeExtendedData(t2), offline_info: Object(s.e)(t2.pushConfig) };
          return this.connMgr.sendRequest(i.c.call_destroy, o2).then(function(o3) {
            if (o3.code)
              return c2 = Object(s.s)(i.s.CallModuleServerError, o3.message, o3.code), n2.error = c2, r2.logger.warn(l, i.I.CallEnd, n2), Promise.reject(c2);
            r2.updateCallListSeq(o3.call_list_seq);
            var a2, u2, c2 = +o3.talk_time.toString() || 0, d2 = r2.dbCallMap.get(e2), p2 = d2 && d2.callUserMap[r2.engineConfig.user.userID];
            return d2 && p2 && (a2 = p2.state, d2.state = i.g.Ended, d2.endTime = c2, r2.calculateCallDuration(d2), r2.dbMgr.addCallList([d2]), u2 = { callID: e2, mode: d2.mode, caller: d2.caller, operatedUserID: r2.engineConfig.user.userID, endTime: c2, extendedData: t2.extendedData }, o3 = o3.quit_time.toString(), p2.extendedData = t2.extendedData, p2.state = i.h.Ended, r2.dbMgr.addCallList([d2]), r2.isMainDevice(a2, o3) && (r2.eventBus.emit(i.t.CallEnd, u2), r2.eventBus.emit(i.t.CallUserState, { callID: e2, callUserList: [{ userID: p2.userID, state: p2.state, extendedData: p2.extendedData }] }))), r2.logger.info(l, i.I.CallEnd, n2), { callID: e2, createTime: (null == d2 ? void 0 : d2.createTime) || 0, acceptTime: (null == p2 ? void 0 : p2.acceptTime) || 0, endTime: c2 };
          });
        }, p.prototype.queryList = function(e2) {
          var t2, r2 = this, n2 = Array.from(this.dbCallMap.values()).sort(function(e3, t3) {
            return t3.createTime - e3.createTime;
          }), o2 = { config: e2, total: n2.length, count: 0 }, s2 = 100 < e2.count ? 100 : e2.count, a2 = (e2 = (e2 = e2.nextFlag || 0) || 0, n2.length > s2 ? (e2 = (t2 = (e2 + 1) * s2) >= (n2 = (a2 = e2 * s2) > n2.length ? [] : n2).length ? 0 : e2 + 1, n2 = n2.slice(a2, t2), o2.start = a2, o2.end = t2) : e2 = 0, 0 == s2 && (e2 = 0), o2.count = n2.length, n2.map(function(e3) {
            return { callID: e3.callID, caller: e3.caller, mode: e3.mode, state: e3.state, inviter: e3.inviter, extendedData: e3.extendedData, createTime: e3.createTime, endTime: e3.endTime, callUserList: e3.callUserMap ? Object.values(e3.callUserMap).map(function(e4) {
              return r2.pickCallUser(e4);
            }) : [] };
          }));
          return this.logger.info(l, i.I.QueryCallList, o2), Promise.resolve({ callList: a2, nextFlag: e2 });
        }, p.prototype.onPushCallInvited = function(e2) {
          var t2, r2, n2, o2, u2 = this, c2 = e2.call_id, l2 = (this.updateCallListSeq(e2.call_list_seq), this.dbCallMap.get(c2)), d2 = l2 && l2.callUserMap[this.engineConfig.user.userID];
          l2 && d2 && d2.state != i.h.Inviting || (t2 = e2.timeout || 0, r2 = {}, n2 = [], e2.user_state_list.forEach(function(e3) {
            4 != e3.sub_code && (e3 = { userID: e3.user_id, state: u2.translateUserState(e3), extendedData: "" }, n2.push(e3), r2[e3.userID] = a(a({}, e3), { acceptTime: 0, quitTime: 0, timeout: t2 }));
          }), l2 || (l2 = { callID: c2, caller: e2.caller, mode: e2.call_mode == i.f.Advanced ? i.f.Advanced : i.f.General, state: i.g.Started, createTime: +e2.create_time.toString(), endTime: 0, extendedData: Object(s.f)(e2.payload), timeout: t2, inviter: e2.caller, userDuration: 0, callDuration: 0, callUserMap: r2 }, this.dbCallMap.set(c2, l2)), this.dbMgr.addCallList([l2]), (o2 = { callID: c2, mode: l2.mode, caller: l2.caller, inviter: l2.caller, extendedData: l2.extendedData, createTime: l2.createTime, timeout: l2.timeout, callUserList: n2 }).caller !== this.engineConfig.user.userID ? (this.eventBus.emit(i.t.CallRecv, o2), this.createReceiveTimeout(c2, n2.filter(function(e3) {
            return e3.userID !== o2.caller;
          }).map(function(e3) {
            return e3.userID;
          }), t2), this.callAck(c2)) : (null == (d2 = e2.call_user_session_id) ? void 0 : d2.toString()) !== this.engineConfig.sessionID.toString() && setTimeout(function() {
            (null == l2 ? void 0 : l2.state) == i.g.Started && n2.filter(function(e3) {
              return e3.userID !== o2.caller;
            }).forEach(function(e3) {
              (null == l2 ? void 0 : l2.callUserMap[e3.userID].state) != i.h.Inviting && (null == l2 ? void 0 : l2.callUserMap[e3.userID].state) != i.h.Received || (l2.callUserMap[e3.userID].state = i.h.Timeout);
            });
          }, 1e3 * t2));
        }, p.prototype.onPushCallCancel = function(e2) {
          var t2, r2, n2, o2, a2, u2 = this, c2 = e2.call_id, l2 = (this.updateCallListSeq(e2.call_list_seq), this.dbCallMap.get(c2));
          l2 && (a2 = null == (t2 = l2.callUserMap[this.engineConfig.user.userID]) ? void 0 : t2.state, t2 && t2.state != i.h.Timeout ? (o2 = e2.state == i.e.Timeout ? i.e.Timeout : i.e.Cancel, r2 = null == (r2 = e2.call_user_session_id) ? void 0 : r2.toString(), o2 == i.e.Timeout ? this.isSelfNotInCall(l2, "PushTimeout") || (n2 = [], e2.user_ids.forEach(function(e3) {
            (e3 = l2.callUserMap[e3]) && e3.state !== i.h.Timeout && (e3.state = i.h.Timeout, n2.push(u2.pickCallUser(e3)));
          }), -1 != e2.user_ids.indexOf(this.engineConfig.user.userID) && (l2.state = i.g.Ended, t2 && (t2.state = i.h.Timeout), r2 || this.eventBus.emit(i.t.CallTimeout, { callID: c2, mode: l2.mode })), this.checkEndCallState(l2), this.isMainDevice(a2, r2) && n2.length && this.eventBus.emit(i.t.CallUserState, { callID: c2, callUserList: n2 })) : (l2.state = i.g.Ended, o2 = { callID: c2, mode: l2.mode, inviter: e2.caller, extendedData: Object(s.f)(e2.extended_data) }, this.isMainDevice(t2.state, r2) && (this.eventBus.emit(i.t.CallCancel, o2), this.eventBus.emit(i.t.CallUserState, { callID: c2, callUserList: [{ userID: o2.inviter, state: i.h.Cancelled, extendedData: o2.extendedData }] })), (a2 = l2.callUserMap[e2.operator]) && (a2.state = i.h.Cancelled, a2.extendedData = o2.extendedData)), this.dbMgr.addCallList([l2])) : l2.state = i.g.Ended);
        }, p.prototype.onPushCallAccept = function(e2) {
          var t2, r2, n2 = e2.call_id, o2 = (this.updateCallListSeq(e2.call_list_seq), this.dbCallMap.get(n2)), a2 = o2 && o2.callUserMap[e2.invitee];
          o2 && a2 && (t2 = null == (t2 = o2.callUserMap[this.engineConfig.user.userID]) ? void 0 : t2.state, a2.state = i.h.Accepted, a2.extendedData = Object(s.f)(e2.extended_data), a2.acceptTime = +e2.accept_time.toString(), (r2 = o2.callUserMap[e2.caller]) && !r2.acceptTime && (r2.acceptTime = a2.acceptTime), this.dbMgr.addCallList([o2]), r2 = { callID: n2, invitee: a2.userID, extendedData: a2.extendedData }, e2 = null == (e2 = e2.call_user_session_id) ? void 0 : e2.toString(), this.checkEndCallState(o2), this.isMainDevice(t2, e2) && (this.eventBus.emit(i.t.CallUserState, { callID: n2, callUserList: [this.pickCallUser(a2)] }), this.eventBus.emit(i.t.CallAccept, r2)));
        }, p.prototype.onPushCallReject = function(e2) {
          var t2, r2, n2 = e2.call_id, o2 = (this.updateCallListSeq(e2.call_list_seq), this.dbCallMap.get(n2)), a2 = o2 && o2.callUserMap[e2.invitee];
          o2 && a2 && (t2 = null == (t2 = o2.callUserMap[this.engineConfig.user.userID]) ? void 0 : t2.state, a2.state = i.h.Rejected, a2.extendedData = Object(s.f)(e2.extended_data), this.dbMgr.addCallList([o2]), r2 = { callID: n2, invitee: a2.userID, extendedData: a2.extendedData }, this.checkEndCallState(o2), e2 = null == (e2 = e2.call_user_session_id) ? void 0 : e2.toString(), this.isMainDevice(t2, e2) && (this.eventBus.emit(i.t.CallUserState, { callID: n2, callUserList: [this.pickCallUser(a2)] }), this.eventBus.emit(i.t.CallReject, r2)), this.engineConfig.user.userID == a2.userID && (o2.state = i.g.Ended));
        }, p.prototype.onPushCallingInvite = function(e2) {
          var t2, r2, n2, o2, a2, u2 = this, c2 = e2.call_id, d2 = (this.updateCallListSeq(e2.call_list_seq), null == (d2 = e2.call_user_session_id) ? void 0 : d2.toString()), p2 = e2.timeout, h = this.dbCallMap.get(c2) || { callID: c2, caller: e2.caller, mode: i.f.Advanced, state: i.g.Started, createTime: +e2.create_time.toString(), endTime: 0, extendedData: Object(s.f)(e2.payload), callDuration: 0, userDuration: 0, callUserMap: {} };
          h.inviter = e2.invitee, h.timeout = e2.timeout, !e2.user_state_list.find(function(e3) {
            return e3.user_id == u2.engineConfig.user.userID;
          }) && this.isSelfNotInCall(h) || (r2 = null == (r2 = h.callUserMap[this.engineConfig.user.userID]) ? void 0 : r2.state, n2 = e2.user_state_list.reduce(function(e3, t3) {
            return 4 != t3.sub_code && (e3[t3.user_id] = { userID: t3.user_id, state: u2.translateUserState(t3), extendedData: "", acceptTime: 0, quitTime: 0, timeout: p2 }), e3;
          }, {}), Object.assign(h.callUserMap, n2), this.dbCallMap.set(c2, h), o2 = [], e2.user_state_list.forEach(function(e3) {
            var r3 = h && h.callUserMap[e3.user_id];
            e3.sub_code || e3.user_id != u2.engineConfig.user.userID || (t2 = true, h.state = i.g.Started), r3 && o2.push(u2.pickCallUser(r3));
          }), o2.length && !t2 && (e2.inviter !== this.engineConfig.user.userID && this.inviterTimer[c2] && clearTimeout(this.inviterTimer[c2 + e2.inviter]), this.isMainDevice(r2, d2) && this.eventBus.emit(i.t.CallUserState, { callID: c2, callUserList: o2 })), (a2 = {}).isMain = d2 == this.engineConfig.sessionID.toString(), a2.callUserList = o2, e2.invitee == this.engineConfig.user.userID ? d2 && d2 == this.engineConfig.sessionID.toString() ? this.createInviteTimeout(e2.call_id, o2.map(function(e3) {
            return e3.userID;
          }), p2) : setTimeout(function() {
            h.state == i.g.Started && o2.forEach(function(e3) {
              h.callUserMap[e3.userID].state != i.h.Inviting && h.callUserMap[e3.userID].state != i.h.Received || (h.callUserMap[e3.userID].state = i.h.Timeout);
            }), u2.logger.info(l, "onPushCallingInvite timeout", a2);
          }, 1e3 * p2) : this.queryCallInfo(h, true, "push", o2), this.logger.info(l, "onPushCallingInvite", a2));
        }, p.prototype.onPushCallQuit = function(e2) {
          var t2, r2 = e2.call_id, n2 = (this.updateCallListSeq(e2.call_list_seq), this.dbCallMap.get(r2)), o2 = n2 && n2.callUserMap[e2.invitee];
          n2 && o2 && !this.isSelfNotInCall(n2) && (t2 = null == (t2 = n2.callUserMap[this.engineConfig.user.userID]) ? void 0 : t2.state, o2.state = i.h.Quit, o2.extendedData = Object(s.f)(e2.payload), o2.quitTime = +e2.quit_time.toString(), o2.acceptTime || (o2.acceptTime = +e2.accept_time.toString()), this.dbMgr.addCallList([n2]), e2 = null == (e2 = e2.call_user_session_id) ? void 0 : e2.toString(), this.checkEndCallState(n2), this.isMainDevice(t2, e2) && this.eventBus.emit(i.t.CallUserState, { callID: r2, callUserList: [this.pickCallUser(o2)] }), this.engineConfig.user.userID == o2.userID && (n2.state = i.g.Ended));
        }, p.prototype.onPushCallEnter = function(e2) {
          var t2, r2, n2, o2 = this, a2 = e2.call_id, u2 = (this.updateCallListSeq(e2.call_list_seq), this.dbCallMap.get(a2));
          (u2 && !this.isSelfNotInCall(u2) || e2.user_id === this.engineConfig.user.userID) && (u2 ? e2.user_id == this.engineConfig.user.userID && (u2.state = i.g.Started) : (u2 = { callID: a2, caller: this.engineConfig.user.userID, mode: i.f.Advanced, state: i.g.Started, extendedData: Object(s.f)(e2.call_payload), createTime: +e2.create_time.toString(), endTime: 0, timeout: e2.timeout, inviter: e2.caller, callDuration: 0, userDuration: 0, callUserMap: {} }, this.dbCallMap.set(a2, u2)), t2 = null == (t2 = u2.callUserMap[this.engineConfig.user.userID]) ? void 0 : t2.state, (n2 = e2.user_state_list.find(function(t3) {
            return t3.user_id == e2.user_id;
          })) && (r2 = null == (r2 = e2.call_user_session_id) ? void 0 : r2.toString(), n2 = { userID: n2.user_id, state: this.translateUserState(n2), extendedData: Object(s.f)(e2.payload) }, e2.user_state_list.forEach(function(t3) {
            u2 && (u2.callUserMap[t3.user_id] = { userID: t3.user_id, state: o2.translateUserState(t3), extendedData: Object(s.f)(t3.extended_data), acceptTime: +t3.accept_time.toString(), quitTime: 0, timeout: +t3.residue_timeout_time.toString() }, t3.user_id == e2.user_id && (u2.callUserMap[t3.user_id].extendedData = Object(s.f)(e2.payload), u2.callUserMap[t3.user_id].acceptTime = +e2.enter_time.toString()));
          }), this.dbMgr.addCallList([u2]), this.isMainDevice(t2, r2) && this.eventBus.emit(i.t.CallUserState, { callID: a2, callUserList: [n2] })));
        }, p.prototype.onPushCallEnd = function(e2) {
          var t2, r2, n2, o2, a2 = e2.call_id, u2 = this.dbCallMap.get(a2);
          u2 && (t2 = null == (t2 = u2.callUserMap[this.engineConfig.user.userID]) ? void 0 : t2.state, u2.state = i.g.Ended, u2.endTime = +e2.destroy_time.toString(), this.calculateCallDuration(u2), this.dbMgr.addCallList([u2]), r2 = { callID: a2, mode: u2.mode, caller: u2.caller, operatedUserID: e2.operator || u2.caller, extendedData: Object(s.f)(e2.payload), endTime: u2.endTime }, n2 = u2.callUserMap[e2.operator || u2.caller], o2 = null == (o2 = e2.call_user_session_id) ? void 0 : o2.toString(), n2 && (n2.state = i.h.Ended, n2.extendedData = Object(s.f)(e2.payload), this.dbMgr.addCallList([u2])), this.isMainDevice(t2, o2) && !this.isSelfNotInCall(u2) && (this.eventBus.emit(i.t.CallEnd, r2), this.eventBus.emit(i.t.CallUserState, { callID: a2, callUserList: [{ userID: n2.userID, state: n2.state, extendedData: n2.extendedData }] })));
        }, p.prototype.onPushCallAck = function(e2) {
          var t2, r2 = e2.call_id, n2 = this.dbCallMap.get(r2), o2 = n2 && n2.callUserMap[e2.invitee];
          n2 && o2 && !this.isSelfNotInCall(n2) && o2.state != i.h.Received && (t2 = null == (t2 = n2.callUserMap[this.engineConfig.user.userID]) ? void 0 : t2.state, o2.state = i.h.Received, this.dbMgr.addCallList([n2]), e2 = null == (n2 = e2.call_user_session_id) ? void 0 : n2.toString(), this.isMainDevice(t2, e2) && this.eventBus.emit(i.t.CallUserState, { callID: r2, callUserList: [this.pickCallUser(o2)] }));
        }, p.prototype.registerInnerEvent = function() {
          this.eventBus.add(i.t.ILogined, this.onLogined.bind(this)), this.eventBus.add(i.t.ILogout, this.onLogout.bind(this)), this.eventBus.add(i.t.IConnected, this.onConnected.bind(this)), this.eventBus.add(i.t.INetworkChange, this.onNetworkChange.bind(this)), this.eventBus.add(i.t.ITriggerHB, this.onTriggerHB.bind(this));
        }, p.prototype.onLogined = function(e2) {
          var t2 = this;
          e2.calls.forEach(function(e3) {
            t2.dbCallMap.set(e3.callID, e3), e3.state != i.g.Started || t2.isSelfNotInCall(e3) || t2.queryCallInfo(e3, false, "onLogined");
          }), this.mergeServerCallList(i.u.SDKLogin);
        }, p.prototype.onLogout = function() {
          this.dbCallMap.clear();
        }, p.prototype.onConnected = function() {
          this.mergeServerCallList(i.u.SDKHb, "onConnected");
        }, p.prototype.onNetworkChange = function(e2) {
          this.online = e2;
        }, p.prototype.onTriggerHB = function() {
          this.mergeServerCallList(i.u.SDKHb, "hb");
        }, p.prototype.checkEndCallState = function(e2) {
          var t2, r2 = [];
          for (t2 in e2.callUserMap)
            r2.push(e2.callUserMap[t2]);
          e2.mode == i.f.General && r2.every(function(e3) {
            return e3.state == i.h.Accepted || e3.state == i.h.Rejected || e3.state == i.h.Timeout;
          }) && (e2.state = i.g.Ended), e2.mode == i.f.Advanced && r2.every(function(e3) {
            return e3.state == i.h.Quit;
          }) && (e2.state = i.g.Ended);
        }, p.prototype.mergeServerCallList = function(e2, t2) {
          var r2, o2, a2, u2, c2, d2 = this, p2 = n.a.fromString(this.engineConfig.user.callSeq || "0"), h = this.engineConfig.mailHBConfig.call_list_seq;
          (h && !h.lessThanOrEqual(p2) || "onConnected" === t2) && (r2 = { time: /* @__PURE__ */ new Date(), dbSeq: p2, hbSeq: h, how: e2, action: t2 }, o2 = 0, a2 = 1, u2 = ++this.mergeListSeq, c2 = function(n2) {
            var p3;
            o2 += n2.list.length, n2.list.forEach(function(e3) {
              var r3, o3, a3, u3, c3, l2, p4 = +e3.call_status.toString(), h2 = d2.dbCallMap.get(e3.call_id), g = !(null != h2 && h2.callUserMap[d2.engineConfig.user.userID]);
              h2 ? (h2.endTime = +e3.destroy_time.toString(), r3 = [], l2 = !d2.isSelfNotInCall(h2), e3.call_user_list.forEach(function(e4) {
                var t3, n3 = null == h2 ? void 0 : h2.callUserMap[e4.user_id];
                e4.user_id == d2.engineConfig.user.userID && (t3 = null == n3 ? void 0 : n3.state, g = (g = t3 == i.h.Accepted && e4.user_session_id.toString() == d2.engineConfig.sessionID.toString()) || t3 == i.h.Received || t3 == i.h.Inviting), n3 ? e4.user_state && (t3 = d2.translateUserState(e4), n3.state !== t3 && t3 !== i.h.Unknown && n3.state !== i.h.Ended && (n3.state = t3, n3.extendedData = Object(s.f)(e4.extended_data), n3.timeout = +e4.residue_timeout_time.toString(), n3.acceptTime = +e4.accept_time.toString() || 0, n3.quitTime = +e4.quit_time.toString() || 0, r3.push(d2.pickCallUser(n3)))) : (n3 = { userID: e4.user_id, state: d2.translateUserState(e4), extendedData: Object(s.f)(e4.extended_data), acceptTime: +e4.accept_time.toString() || 0, quitTime: +e4.quit_time.toString() || 0, timeout: +e4.residue_timeout_time.toString() }, r3.push(d2.pickCallUser(n3)), h2 && (h2.callUserMap[n3.userID] = n3));
              }), o3 = false, a3 = e3.call_user_list.some(function(e4) {
                return d2.translateUserState(e4) == i.h.Ended;
              }), c3 = r3.find(function(e4) {
                return e4.state == i.h.Cancelled;
              }), r3.length && g && (d2.eventBus.emit(i.t.CallUserState, { callID: h2.callID, callUserList: r3 }), (null == (u3 = r3.find(function(e4) {
                return e4.userID == d2.engineConfig.user.userID;
              })) ? void 0 : u3.state) == i.h.Timeout && (o3 = true, d2.eventBus.emit(i.t.CallTimeout, { callID: h2.callID, mode: h2.mode })), c3 && (o3 = true, d2.eventBus.emit(i.t.CallCancel, { callID: h2.callID, mode: h2.mode, inviter: h2.inviter, extendedData: c3.extendedData }))), h2.state == i.g.Started && p4 == i.g.Ended && (u3 = { callID: h2.callID, mode: h2.mode, caller: h2.caller, operatedUserID: h2.caller, extendedData: Object(s.f)(n2.payload), endTime: h2.endTime }, g && h2.mode == i.f.Advanced && l2 && !o3 && a3 && (h2.state = i.g.Ended, d2.eventBus.emit(i.t.CallEnd, u3))), d2.queryCallInfo(h2, false, "merge0")) : (c3 = e3.user_timeout, h2 = { callID: e3.call_id, caller: e3.caller, createTime: +e3.create_time.toString(), endTime: +e3.destroy_time.toString(), mode: e3.call_mode == i.f.Advanced ? i.f.Advanced : i.f.General, state: p4, extendedData: Object(s.f)(e3.payload), timeout: c3, inviter: e3.inviter, callDuration: 0, userDuration: 0, callUserMap: e3.call_user_list.reduce(function(e4, t3) {
                var r4 = d2.translateUserState(t3);
                return 4 != t3.sub_code && r4 !== i.h.Unknown && (e4[t3.user_id] = { userID: t3.user_id, state: r4, extendedData: Object(s.f)(t3.extended_data), acceptTime: +t3.accept_time.toString() || 0, quitTime: +t3.quit_time.toString() || 0, timeout: +t3.residue_timeout_time.toString() }), e4;
              }, {}) }, d2.dbCallMap.set(h2.callID, h2), "onConnected" == t2 && (null == (l2 = h2.callUserMap[d2.engineConfig.user.userID]) ? void 0 : l2.state) == i.h.Timeout && d2.eventBus.emit(i.t.CallTimeout, { callID: h2.callID, mode: h2.mode }), d2.queryCallInfo(h2, true, "merge1"));
            }), n2.nextFlag && d2.engineConfig.token ? d2.fetchServerPageCall(n2.nextFlag, ++a2, e2).then(c2) : (n2.degree = a2, n2.svrCount = o2, d2.updateCallListSeq(n2.cur || n2.max, true), p3 = Array.from(d2.dbCallMap.values()), d2.dbMgr.addCallList(p3), "onConnected" == t2 && 0 == o2 && d2.dbCallMap.forEach(function(e3) {
              e3.state == i.g.Started && d2.queryCallInfo(e3, false, "onConnected");
            }), r2.svrCount = o2, r2.dataReport = d2.dataReport.endNetworkRequest(i.c.call_list.cmd, u2, n2), d2.logger.info(l, "mergeSvrCalls", r2));
          }, this.fetchServerPageCall(p2, a2, e2).then(c2));
        }, p.prototype.fetchServerPageCall = function(e2, t2, r2) {
          return e2 = { cur_list_seq: e2, count: 100, degree: t2, how: r2 }, 1 == t2 && this.dataReport.beginNetworkRequest(i.c.call_list.cmd, this.mergeListSeq, i.i.SDK, e2), this.connMgr.sendRequest(i.c.call_list, e2, i.i.SDK).then(function(e3) {
            if (e3.code)
              return { cur: 0, list: [] };
            var t3 = e3.cur_list_seq, r3 = e3.max_list_seq, n2 = e3.fetch_end;
            return { nextFlag: n2 || t3 && r3 && t3.greaterThanOrEqual(r3) ? 0 : t3, cur: t3, max: r3, list: e3.calls, fetch_end: n2 };
          });
        }, p.prototype.queryCallInfo = function(e2, t2, r2, n2) {
          var o2, u2 = this;
          e2.state != i.g.Ended && (o2 = { call_id: e2.callID, action: r2 }, this.connMgr.sendRequest(i.c.call_info, o2, i.i.SDK).then(function(o3) {
            if (o3.code)
              6000104 !== o3.code && (e2.state = i.g.Ended);
            else {
              var c2 = [], l2 = {}, d2 = 0, p2 = (t2 || u2.diffCallUserState(e2, o3, r2), o3.user_list.forEach(function(t3) {
                var r3, n3;
                4 != t3.user_state && (r3 = { userID: t3.user_id, state: u2.translateUserState(t3), extendedData: Object(s.f)(t3.extended_data) }, c2.push(r3), n3 = +t3.accept_time.toString(), l2[r3.userID] = a(a({}, r3), { acceptTime: n3, quitTime: +t3.quit_time.toString(), timeout: +t3.residue_timeout_time.toString() }), n3 && (d2 = d2 ? Math.min(n3, d2) : n3), u2.callSessionIDMap[e2.callID] || (u2.callSessionIDMap[e2.callID] = {}), u2.callSessionIDMap[e2.callID][r3.userID] = t3.user_session_id);
              }), l2[u2.engineConfig.user.userID]), h = (l2[e2.caller] && (l2[e2.caller].acceptTime = d2), o3.now_time.toString()), g = p2 && p2.acceptTime, f = (h && g && e2.state == i.g.Started && (e2.userDuration = (h - g) / 1e3 | 0), e2.callUserMap = l2, u2.dbMgr.addCallList([e2]), u2.isSelfNotInCall(e2) && (e2.state = i.g.Ended), { callID: e2.callID, mode: e2.mode, caller: e2.caller, inviter: e2.inviter, extendedData: e2.extendedData, createTime: e2.createTime, timeout: p2.timeout, callUserList: c2 });
              if (t2 && p2)
                switch (p2.state != i.h.Inviting && p2.state != i.h.Accepted && p2.state != i.h.Received || o3.user_list.forEach(function(t3) {
                  (t3 = l2[t3.user_id]).state == i.h.Inviting && t3.timeout && u2.createReceiveTimeout(e2.callID, [t3.userID], t3.timeout);
                }), p2.state) {
                  case i.h.Inviting:
                    u2.callAck(e2.callID), e2.state = i.g.Started, u2.eventBus.emit(i.t.CallRecv, f);
                    break;
                  case i.h.Received:
                    e2.state = i.g.Started, ("push" != r2 || n2 && n2.some(function(e3) {
                      return e3.userID == p2.userID;
                    })) && u2.eventBus.emit(i.t.CallRecv, f);
                    break;
                  case i.h.Timeout:
                    e2.state = i.g.Ended, u2.eventBus.emit(i.t.CallTimeout, { callID: e2.callID, mode: e2.mode });
                }
              !t2 && "merge0" == r2 && (null == p2 ? void 0 : p2.state) == i.h.Inviting && p2.timeout && (u2.eventBus.emit(i.t.CallRecv, f), u2.createReceiveTimeout(e2.callID, c2.map(function(e3) {
                return e3.userID;
              }), p2.timeout)), t2 || "onConnected" != r2 || o3.user_list.forEach(function(t3) {
                (t3 = l2[t3.user_id]).state != i.h.Inviting && t3.state != i.h.Received || u2.createReceiveTimeout(e2.callID, [t3.userID], t3.timeout);
              });
            }
          }));
        }, p.prototype.diffCallUserState = function(e2, t2, r2) {
          var n2 = this, o2 = { action: r2, call: e2.callID }, a2 = e2.callUserMap, d2 = null == (d2 = a2[this.engineConfig.user.userID]) ? void 0 : d2.state, p2 = [], h = "", g = (t2.user_list.forEach(function(e3) {
            var t3 = a2[e3.user_id], r3 = n2.translateUserState(e3);
            t3 && t3.state === r3 || (p2.push({ userID: e3.user_id, state: r3, extendedData: Object(s.f)(e3.extended_data) || "" }), o2[e3.user_id] = (null == t3 ? void 0 : t3.state) + "," + r3), e3.user_id == n2.engineConfig.user.userID && (h = null == e3.user_session_id ? "0" : e3.user_session_id);
          }), p2.find(function(e3) {
            return e3.userID == n2.engineConfig.user.userID;
          }) || {});
          g && g.state == i.h.Inviting && this.eventBus.emit(i.t.CallRecv, { callUserList: e2.callUserMap ? Object.values(e2.callUserMap).map(function(e3) {
            return n2.pickCallUser(e3);
          }) : [], caller: e2.caller, createTime: e2.createTime, extendedData: e2.extendedData, inviter: t2.inviter, timeout: t2.user_timeout, callID: e2.callID, mode: t2.mode }), g && g.state == i.h.Timeout && this.eventBus.emit(i.t.CallTimeout, { callID: e2.callID, mode: e2.mode }), t2 = p2.find(function(e3) {
            return e3.state == i.h.Cancelled && e3.userID !== (null === g ? void 0 : g.userID);
          }), "onLogined" == r2 && g && t2 && this.eventBus.emit(i.t.CallCancel, { callID: e2.callID, inviter: e2.inviter, mode: e2.mode, extendedData: t2.extendedData }), r2 = this.isMainDevice(d2, h);
          o2.isMain = r2, o2.selfOldState = d2, this.logger.info(l, "diffCallUserState", o2), p2.length && r2 && this.eventBus.emit(i.t.CallUserState, { callID: e2.callID, callUserList: c([], u(p2), false) });
        }, p.prototype.callAck = function(e2) {
          var t2 = this, r2 = { call_id: e2 }, n2 = this.dbCallMap.get(e2), o2 = n2 && n2.callUserMap[this.engineConfig.user.userID];
          (null == o2 ? void 0 : o2.state) === i.h.Inviting && this.connMgr.sendRequest(i.c.call_ack, r2, i.i.SDK).then(function(r3) {
            !r3.code && n2 && o2 && (o2.state = i.h.Received, t2.dbMgr.addCallList([n2]), t2.eventBus.emit(i.t.CallUserState, { callID: e2, callUserList: [t2.pickCallUser(o2)] }));
          });
        }, p.prototype.createInviteTimeout = function(e2, t2, r2) {
          var n2 = this, o2 = e2 + t2.join("");
          this.inviterTimer[o2] && clearTimeout(this.inviterTimer[o2]), this.inviterTimer[o2] = setTimeout(function() {
            var r3, o3 = n2.dbCallMap.get(e2);
            !o3 || o3.state == i.g.Ended && o3.mode == i.f.Advanced || (r3 = t2.filter(function(e3) {
              return !!(e3 = o3.callUserMap[e3]) && (e3.state == i.h.Inviting || e3.state == i.h.Received || e3.state == i.h.Unknown);
            })).length && n2.callCancel(r3, e2, { extendedData: "" }, i.e.Timeout);
          }, 1e3 * r2);
        }, p.prototype.createReceiveTimeout = function(e2, t2, r2) {
          var n2 = this, o2 = e2 + t2.join("");
          this.receiveTimer[o2] && clearTimeout(this.receiveTimer[o2]), this.receiveTimer[o2] = setTimeout(function() {
            var r3, o3, s2, a2, u2;
            !n2.online || (r3 = n2.dbCallMap.get(e2)) && r3.state !== i.g.Ended && (s2 = !(o3 = []), t2.forEach(function(e3) {
              var t3 = r3.callUserMap[e3];
              t3.state != i.h.Received && t3.state != i.h.Inviting || (o3.push({ userID: t3.userID, state: i.h.Timeout, extendedData: t3.extendedData }), e3 == n2.engineConfig.user.userID ? s2 = true : t3.state = i.h.Timeout);
            }), a2 = !(u2 = null == (u2 = n2.callSessionIDMap[e2]) ? void 0 : u2[n2.engineConfig.user.userID]) || u2 == n2.engineConfig.sessionID.toString(), u2 = { sid: u2, callUserList: o3.length }, n2.logger.info(l, "createReceiveTimeout", u2), a2 && o3.length && n2.eventBus.emit(i.t.CallUserState, { callID: e2, callUserList: o3 }), s2 && (r3.callUserMap[n2.engineConfig.user.userID].state = i.h.Timeout, r3.state = i.g.Ended, n2.eventBus.emit(i.t.CallTimeout, { callID: r3.callID, mode: r3.mode })));
          }, 1e3 * r2);
        }, p.prototype.translateUserState = function(e2) {
          var t2 = e2.user_state || e2.sub_code;
          return e2.is_timeout || 9 == t2 ? i.h.Timeout : t2 ? 1 == t2 ? i.h.Accepted : 2 == t2 ? i.h.Rejected : 3 == t2 ? i.h.Cancelled : 5 == t2 ? i.h.Received : 7 == t2 ? i.h.Quit : 8 == t2 ? i.h.Ended : i.h.Unknown : i.h.Inviting;
        }, p.prototype.calculateCallDuration = function(e2) {
          var t2 = 0;
          Object.values(e2.callUserMap).forEach(function(e3) {
            0 < (e3 = e3.acceptTime) && (!t2 || e3 < t2) && (t2 = e3);
          }), e2.callDuration = t2 ? (e2.endTime - t2) / 1e3 | 0 : 0;
        }, p.prototype.pickCallUser = function(e2) {
          return { userID: e2.userID, state: e2.state, extendedData: e2.extendedData };
        }, p.prototype.encodeExtendedData = function(e2) {
          return (e2 = (null == e2 ? void 0 : e2.extendedData) || "") ? Object(s.i)(e2) : void 0;
        }, p.prototype.updateCallListSeq = function(e2, t2) {
          var r2 = this.engineConfig.user;
          !e2 || !t2 && +r2.callSeq && r2.callSeq != e2.sub(1).toString() || (r2.callSeq = e2.toString(), this.dbMgr.setUser(r2));
        }, p.prototype.isSelfNotInCall = function(e2, t2) {
          var r2, n2;
          return !!e2.callUserMap && (!(r2 = !(r2 = e2.callUserMap[this.engineConfig.user.userID]) || r2.state == i.h.Timeout || r2.state == i.h.Cancelled || r2.state == i.h.Rejected || r2.state == i.h.Quit) && t2 && (n2 = { action: t2, call: e2.callID }, Object.values(e2.callUserMap).forEach(function(e3) {
            return n2[e3.userID] = e3.state;
          }), this.logger.info(l, "isSelfNotInCall", n2)), r2);
        }, p.prototype.isMainDevice = function(e2, t2) {
          return e2 == i.h.Accepted && t2 == this.engineConfig.sessionID.toString() || e2 == i.h.Received || e2 == i.h.Inviting || "0" == (null == t2 ? void 0 : t2.toString());
        }, p);
        function p(e2, t2, r2, n2) {
          this.logger = o.a.getInstance().logger, this.dataReport = o.a.getInstance().dataReport, this.dbCallMap = /* @__PURE__ */ new Map(), this.mergeListSeq = 0, this.receiveTimer = {}, this.inviterTimer = {}, this.callSessionIDMap = {}, this.online = true, this.engineConfig = e2, this.eventBus = t2, this.connMgr = r2, this.dbMgr = n2, this.registerInnerEvent();
        }
      }, function(e, t, r) {
        e.exports = function(e2) {
          "use strict";
          var t2 = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "a", "b", "c", "d", "e", "f"];
          function r2(e3, t3) {
            var r3 = e3[0], n2 = e3[1], o2 = e3[2], s2 = e3[3];
            n2 = ((n2 += ((o2 = ((o2 += ((s2 = ((s2 += ((r3 = ((r3 += (n2 & o2 | ~n2 & s2) + t3[0] - 680876936 | 0) << 7 | r3 >>> 25) + n2 | 0) & n2 | ~r3 & o2) + t3[1] - 389564586 | 0) << 12 | s2 >>> 20) + r3 | 0) & r3 | ~s2 & n2) + t3[2] + 606105819 | 0) << 17 | o2 >>> 15) + s2 | 0) & s2 | ~o2 & r3) + t3[3] - 1044525330 | 0) << 22 | n2 >>> 10) + o2 | 0, n2 = ((n2 += ((o2 = ((o2 += ((s2 = ((s2 += ((r3 = ((r3 += (n2 & o2 | ~n2 & s2) + t3[4] - 176418897 | 0) << 7 | r3 >>> 25) + n2 | 0) & n2 | ~r3 & o2) + t3[5] + 1200080426 | 0) << 12 | s2 >>> 20) + r3 | 0) & r3 | ~s2 & n2) + t3[6] - 1473231341 | 0) << 17 | o2 >>> 15) + s2 | 0) & s2 | ~o2 & r3) + t3[7] - 45705983 | 0) << 22 | n2 >>> 10) + o2 | 0, n2 = ((n2 += ((o2 = ((o2 += ((s2 = ((s2 += ((r3 = ((r3 += (n2 & o2 | ~n2 & s2) + t3[8] + 1770035416 | 0) << 7 | r3 >>> 25) + n2 | 0) & n2 | ~r3 & o2) + t3[9] - 1958414417 | 0) << 12 | s2 >>> 20) + r3 | 0) & r3 | ~s2 & n2) + t3[10] - 42063 | 0) << 17 | o2 >>> 15) + s2 | 0) & s2 | ~o2 & r3) + t3[11] - 1990404162 | 0) << 22 | n2 >>> 10) + o2 | 0, n2 = ((n2 += ((o2 = ((o2 += ((s2 = ((s2 += ((r3 = ((r3 += (n2 & o2 | ~n2 & s2) + t3[12] + 1804603682 | 0) << 7 | r3 >>> 25) + n2 | 0) & n2 | ~r3 & o2) + t3[13] - 40341101 | 0) << 12 | s2 >>> 20) + r3 | 0) & r3 | ~s2 & n2) + t3[14] - 1502002290 | 0) << 17 | o2 >>> 15) + s2 | 0) & s2 | ~o2 & r3) + t3[15] + 1236535329 | 0) << 22 | n2 >>> 10) + o2 | 0, n2 = ((n2 += ((o2 = ((o2 += ((s2 = ((s2 += ((r3 = ((r3 += (n2 & s2 | o2 & ~s2) + t3[1] - 165796510 | 0) << 5 | r3 >>> 27) + n2 | 0) & o2 | n2 & ~o2) + t3[6] - 1069501632 | 0) << 9 | s2 >>> 23) + r3 | 0) & n2 | r3 & ~n2) + t3[11] + 643717713 | 0) << 14 | o2 >>> 18) + s2 | 0) & r3 | s2 & ~r3) + t3[0] - 373897302 | 0) << 20 | n2 >>> 12) + o2 | 0, n2 = ((n2 += ((o2 = ((o2 += ((s2 = ((s2 += ((r3 = ((r3 += (n2 & s2 | o2 & ~s2) + t3[5] - 701558691 | 0) << 5 | r3 >>> 27) + n2 | 0) & o2 | n2 & ~o2) + t3[10] + 38016083 | 0) << 9 | s2 >>> 23) + r3 | 0) & n2 | r3 & ~n2) + t3[15] - 660478335 | 0) << 14 | o2 >>> 18) + s2 | 0) & r3 | s2 & ~r3) + t3[4] - 405537848 | 0) << 20 | n2 >>> 12) + o2 | 0, n2 = ((n2 += ((o2 = ((o2 += ((s2 = ((s2 += ((r3 = ((r3 += (n2 & s2 | o2 & ~s2) + t3[9] + 568446438 | 0) << 5 | r3 >>> 27) + n2 | 0) & o2 | n2 & ~o2) + t3[14] - 1019803690 | 0) << 9 | s2 >>> 23) + r3 | 0) & n2 | r3 & ~n2) + t3[3] - 187363961 | 0) << 14 | o2 >>> 18) + s2 | 0) & r3 | s2 & ~r3) + t3[8] + 1163531501 | 0) << 20 | n2 >>> 12) + o2 | 0, n2 = ((n2 += ((o2 = ((o2 += ((s2 = ((s2 += ((r3 = ((r3 += (n2 & s2 | o2 & ~s2) + t3[13] - 1444681467 | 0) << 5 | r3 >>> 27) + n2 | 0) & o2 | n2 & ~o2) + t3[2] - 51403784 | 0) << 9 | s2 >>> 23) + r3 | 0) & n2 | r3 & ~n2) + t3[7] + 1735328473 | 0) << 14 | o2 >>> 18) + s2 | 0) & r3 | s2 & ~r3) + t3[12] - 1926607734 | 0) << 20 | n2 >>> 12) + o2 | 0, n2 = ((n2 += ((o2 = ((o2 += ((s2 = ((s2 += ((r3 = ((r3 += (n2 ^ o2 ^ s2) + t3[5] - 378558 | 0) << 4 | r3 >>> 28) + n2 | 0) ^ n2 ^ o2) + t3[8] - 2022574463 | 0) << 11 | s2 >>> 21) + r3 | 0) ^ r3 ^ n2) + t3[11] + 1839030562 | 0) << 16 | o2 >>> 16) + s2 | 0) ^ s2 ^ r3) + t3[14] - 35309556 | 0) << 23 | n2 >>> 9) + o2 | 0, n2 = ((n2 += ((o2 = ((o2 += ((s2 = ((s2 += ((r3 = ((r3 += (n2 ^ o2 ^ s2) + t3[1] - 1530992060 | 0) << 4 | r3 >>> 28) + n2 | 0) ^ n2 ^ o2) + t3[4] + 1272893353 | 0) << 11 | s2 >>> 21) + r3 | 0) ^ r3 ^ n2) + t3[7] - 155497632 | 0) << 16 | o2 >>> 16) + s2 | 0) ^ s2 ^ r3) + t3[10] - 1094730640 | 0) << 23 | n2 >>> 9) + o2 | 0, n2 = ((n2 += ((o2 = ((o2 += ((s2 = ((s2 += ((r3 = ((r3 += (n2 ^ o2 ^ s2) + t3[13] + 681279174 | 0) << 4 | r3 >>> 28) + n2 | 0) ^ n2 ^ o2) + t3[0] - 358537222 | 0) << 11 | s2 >>> 21) + r3 | 0) ^ r3 ^ n2) + t3[3] - 722521979 | 0) << 16 | o2 >>> 16) + s2 | 0) ^ s2 ^ r3) + t3[6] + 76029189 | 0) << 23 | n2 >>> 9) + o2 | 0, n2 = ((n2 += ((o2 = ((o2 += ((s2 = ((s2 += ((r3 = ((r3 += (n2 ^ o2 ^ s2) + t3[9] - 640364487 | 0) << 4 | r3 >>> 28) + n2 | 0) ^ n2 ^ o2) + t3[12] - 421815835 | 0) << 11 | s2 >>> 21) + r3 | 0) ^ r3 ^ n2) + t3[15] + 530742520 | 0) << 16 | o2 >>> 16) + s2 | 0) ^ s2 ^ r3) + t3[2] - 995338651 | 0) << 23 | n2 >>> 9) + o2 | 0, n2 = ((n2 += ((s2 = ((s2 += (n2 ^ ((r3 = ((r3 += (o2 ^ (n2 | ~s2)) + t3[0] - 198630844 | 0) << 6 | r3 >>> 26) + n2 | 0) | ~o2)) + t3[7] + 1126891415 | 0) << 10 | s2 >>> 22) + r3 | 0) ^ ((o2 = ((o2 += (r3 ^ (s2 | ~n2)) + t3[14] - 1416354905 | 0) << 15 | o2 >>> 17) + s2 | 0) | ~r3)) + t3[5] - 57434055 | 0) << 21 | n2 >>> 11) + o2 | 0, n2 = ((n2 += ((s2 = ((s2 += (n2 ^ ((r3 = ((r3 += (o2 ^ (n2 | ~s2)) + t3[12] + 1700485571 | 0) << 6 | r3 >>> 26) + n2 | 0) | ~o2)) + t3[3] - 1894986606 | 0) << 10 | s2 >>> 22) + r3 | 0) ^ ((o2 = ((o2 += (r3 ^ (s2 | ~n2)) + t3[10] - 1051523 | 0) << 15 | o2 >>> 17) + s2 | 0) | ~r3)) + t3[1] - 2054922799 | 0) << 21 | n2 >>> 11) + o2 | 0, n2 = ((n2 += ((s2 = ((s2 += (n2 ^ ((r3 = ((r3 += (o2 ^ (n2 | ~s2)) + t3[8] + 1873313359 | 0) << 6 | r3 >>> 26) + n2 | 0) | ~o2)) + t3[15] - 30611744 | 0) << 10 | s2 >>> 22) + r3 | 0) ^ ((o2 = ((o2 += (r3 ^ (s2 | ~n2)) + t3[6] - 1560198380 | 0) << 15 | o2 >>> 17) + s2 | 0) | ~r3)) + t3[13] + 1309151649 | 0) << 21 | n2 >>> 11) + o2 | 0, n2 = ((n2 += ((s2 = ((s2 += (n2 ^ ((r3 = ((r3 += (o2 ^ (n2 | ~s2)) + t3[4] - 145523070 | 0) << 6 | r3 >>> 26) + n2 | 0) | ~o2)) + t3[11] - 1120210379 | 0) << 10 | s2 >>> 22) + r3 | 0) ^ ((o2 = ((o2 += (r3 ^ (s2 | ~n2)) + t3[2] + 718787259 | 0) << 15 | o2 >>> 17) + s2 | 0) | ~r3)) + t3[9] - 343485551 | 0) << 21 | n2 >>> 11) + o2 | 0, e3[0] = r3 + e3[0] | 0, e3[1] = n2 + e3[1] | 0, e3[2] = o2 + e3[2] | 0, e3[3] = s2 + e3[3] | 0;
          }
          function n(e3) {
            var t3, r3 = [];
            for (t3 = 0; t3 < 64; t3 += 4)
              r3[t3 >> 2] = e3.charCodeAt(t3) + (e3.charCodeAt(t3 + 1) << 8) + (e3.charCodeAt(t3 + 2) << 16) + (e3.charCodeAt(t3 + 3) << 24);
            return r3;
          }
          function o(e3) {
            var t3, r3 = [];
            for (t3 = 0; t3 < 64; t3 += 4)
              r3[t3 >> 2] = e3[t3] + (e3[t3 + 1] << 8) + (e3[t3 + 2] << 16) + (e3[t3 + 3] << 24);
            return r3;
          }
          function s(e3) {
            var t3, o2, s2, i2, a2, u2, c2 = e3.length, l2 = [1732584193, -271733879, -1732584194, 271733878];
            for (t3 = 64; t3 <= c2; t3 += 64)
              r2(l2, n(e3.substring(t3 - 64, t3)));
            for (o2 = (e3 = e3.substring(t3 - 64)).length, s2 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], t3 = 0; t3 < o2; t3 += 1)
              s2[t3 >> 2] |= e3.charCodeAt(t3) << (t3 % 4 << 3);
            if (s2[t3 >> 2] |= 128 << (t3 % 4 << 3), t3 > 55)
              for (r2(l2, s2), t3 = 0; t3 < 16; t3 += 1)
                s2[t3] = 0;
            return i2 = (i2 = 8 * c2).toString(16).match(/(.*?)(.{0,8})$/), a2 = parseInt(i2[2], 16), u2 = parseInt(i2[1], 16) || 0, s2[14] = a2, s2[15] = u2, r2(l2, s2), l2;
          }
          function i(e3) {
            var r3, n2 = "";
            for (r3 = 0; r3 < 4; r3 += 1)
              n2 += t2[e3 >> 8 * r3 + 4 & 15] + t2[e3 >> 8 * r3 & 15];
            return n2;
          }
          function a(e3) {
            var t3;
            for (t3 = 0; t3 < e3.length; t3 += 1)
              e3[t3] = i(e3[t3]);
            return e3.join("");
          }
          function u(e3) {
            return /[\u0080-\uFFFF]/.test(e3) && (e3 = unescape(encodeURIComponent(e3))), e3;
          }
          function c(e3) {
            var t3, r3 = [], n2 = e3.length;
            for (t3 = 0; t3 < n2 - 1; t3 += 2)
              r3.push(parseInt(e3.substr(t3, 2), 16));
            return String.fromCharCode.apply(String, r3);
          }
          function l() {
            this.reset();
          }
          return "5d41402abc4b2a76b9719d911017c592" !== a(s("hello")) && function(e3, t3) {
            var r3 = (65535 & e3) + (65535 & t3);
            return (e3 >> 16) + (t3 >> 16) + (r3 >> 16) << 16 | 65535 & r3;
          }, "undefined" == typeof ArrayBuffer || ArrayBuffer.prototype.slice || function() {
            function e3(e4, t3) {
              return (e4 = 0 | e4 || 0) < 0 ? Math.max(e4 + t3, 0) : Math.min(e4, t3);
            }
            ArrayBuffer.prototype.slice = function(t3, r3) {
              var n2, o2, s2, i2, a2 = this.byteLength, u2 = e3(t3, a2), c2 = a2;
              return void 0 !== r3 && (c2 = e3(r3, a2)), u2 > c2 ? new ArrayBuffer(0) : (n2 = c2 - u2, o2 = new ArrayBuffer(n2), s2 = new Uint8Array(o2), i2 = new Uint8Array(this, u2, n2), s2.set(i2), o2);
            };
          }(), l.prototype.append = function(e3) {
            return this.appendBinary(u(e3)), this;
          }, l.prototype.appendBinary = function(e3) {
            this._buff += e3, this._length += e3.length;
            var t3, o2 = this._buff.length;
            for (t3 = 64; t3 <= o2; t3 += 64)
              r2(this._hash, n(this._buff.substring(t3 - 64, t3)));
            return this._buff = this._buff.substring(t3 - 64), this;
          }, l.prototype.end = function(e3) {
            var t3, r3, n2 = this._buff, o2 = n2.length, s2 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            for (t3 = 0; t3 < o2; t3 += 1)
              s2[t3 >> 2] |= n2.charCodeAt(t3) << (t3 % 4 << 3);
            return this._finish(s2, o2), r3 = a(this._hash), e3 && (r3 = c(r3)), this.reset(), r3;
          }, l.prototype.reset = function() {
            return this._buff = "", this._length = 0, this._hash = [1732584193, -271733879, -1732584194, 271733878], this;
          }, l.prototype.getState = function() {
            return { buff: this._buff, length: this._length, hash: this._hash.slice() };
          }, l.prototype.setState = function(e3) {
            return this._buff = e3.buff, this._length = e3.length, this._hash = e3.hash, this;
          }, l.prototype.destroy = function() {
            delete this._hash, delete this._buff, delete this._length;
          }, l.prototype._finish = function(e3, t3) {
            var n2, o2, s2, i2 = t3;
            if (e3[i2 >> 2] |= 128 << (i2 % 4 << 3), i2 > 55)
              for (r2(this._hash, e3), i2 = 0; i2 < 16; i2 += 1)
                e3[i2] = 0;
            n2 = (n2 = 8 * this._length).toString(16).match(/(.*?)(.{0,8})$/), o2 = parseInt(n2[2], 16), s2 = parseInt(n2[1], 16) || 0, e3[14] = o2, e3[15] = s2, r2(this._hash, e3);
          }, l.hash = function(e3, t3) {
            return l.hashBinary(u(e3), t3);
          }, l.hashBinary = function(e3, t3) {
            var r3 = a(s(e3));
            return t3 ? c(r3) : r3;
          }, (l.ArrayBuffer = function() {
            this.reset();
          }).prototype.append = function(e3) {
            var t3, n2 = function(e4, t4, r3) {
              var n3 = new Uint8Array(e4.byteLength + t4.byteLength);
              return n3.set(new Uint8Array(e4)), n3.set(new Uint8Array(t4), e4.byteLength), r3 ? n3 : n3.buffer;
            }(this._buff.buffer, e3, true), s2 = n2.length;
            for (this._length += e3.byteLength, t3 = 64; t3 <= s2; t3 += 64)
              r2(this._hash, o(n2.subarray(t3 - 64, t3)));
            return this._buff = t3 - 64 < s2 ? new Uint8Array(n2.buffer.slice(t3 - 64)) : new Uint8Array(0), this;
          }, l.ArrayBuffer.prototype.end = function(e3) {
            var t3, r3, n2 = this._buff, o2 = n2.length, s2 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            for (t3 = 0; t3 < o2; t3 += 1)
              s2[t3 >> 2] |= n2[t3] << (t3 % 4 << 3);
            return this._finish(s2, o2), r3 = a(this._hash), e3 && (r3 = c(r3)), this.reset(), r3;
          }, l.ArrayBuffer.prototype.reset = function() {
            return this._buff = new Uint8Array(0), this._length = 0, this._hash = [1732584193, -271733879, -1732584194, 271733878], this;
          }, l.ArrayBuffer.prototype.getState = function() {
            var e3 = l.prototype.getState.call(this);
            return e3.buff = function(e4) {
              return String.fromCharCode.apply(null, new Uint8Array(e4));
            }(e3.buff), e3;
          }, l.ArrayBuffer.prototype.setState = function(e3) {
            return e3.buff = function(e4, t3) {
              var r3, n2 = e4.length, o2 = new ArrayBuffer(n2), s2 = new Uint8Array(o2);
              for (r3 = 0; r3 < n2; r3 += 1)
                s2[r3] = e4.charCodeAt(r3);
              return t3 ? s2 : o2;
            }(e3.buff, true), l.prototype.setState.call(this, e3);
          }, l.ArrayBuffer.prototype.destroy = l.prototype.destroy, l.ArrayBuffer.prototype._finish = l.prototype._finish, l.ArrayBuffer.hash = function(e3, t3) {
            var n2 = function(e4) {
              var t4, n3, s3, i2, a2, u2, c2 = e4.length, l2 = [1732584193, -271733879, -1732584194, 271733878];
              for (t4 = 64; t4 <= c2; t4 += 64)
                r2(l2, o(e4.subarray(t4 - 64, t4)));
              for (n3 = (e4 = t4 - 64 < c2 ? e4.subarray(t4 - 64) : new Uint8Array(0)).length, s3 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], t4 = 0; t4 < n3; t4 += 1)
                s3[t4 >> 2] |= e4[t4] << (t4 % 4 << 3);
              if (s3[t4 >> 2] |= 128 << (t4 % 4 << 3), t4 > 55)
                for (r2(l2, s3), t4 = 0; t4 < 16; t4 += 1)
                  s3[t4] = 0;
              return i2 = (i2 = 8 * c2).toString(16).match(/(.*?)(.{0,8})$/), a2 = parseInt(i2[2], 16), u2 = parseInt(i2[1], 16) || 0, s3[14] = a2, s3[15] = u2, r2(l2, s3), l2;
            }(new Uint8Array(e3)), s2 = a(n2);
            return t3 ? c(s2) : s2;
          }, l;
        }();
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return u;
        });
        t = r(3);
        var n = r.n(t), o = r(80), s = r(1), i = r(0), a = function() {
          return (a = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var o2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, o2) && (e2[o2] = t2[o2]);
            return e2;
          }).apply(this, arguments);
        }, u = (c.prototype.setLogConfig = function(e2) {
          this.logger.setLogLevel(e2.logLevel);
        }, c.prototype.setDB = function(e2) {
          this.logger.setDB(e2);
        }, c.prototype.init = function(e2, t2) {
          this.config.appID = e2, this.config.userID = t2.userID, this.config.deviceID = s.g, e2 = { version: this.config.version, appID: e2, deviceID: this.config.deviceID, userID: this.config.userID, userName: t2.userName, origin: s.n ? "" : location.origin, device: s.h }, this.logger.setCommonField(/* @__PURE__ */ new Map([["userID", this.config.userID]])), this.logger.setHeaderInfo(JSON.stringify(e2));
        }, c.prototype.renewToken = function(e2) {
          this.config.token = e2;
        }, c.prototype.setUploadURL = function(e2) {
          this.config.uploadURL = e2;
        }, c.prototype.upload = function(e2, t2) {
          return this.config.uploadURL && this.config.token && this.config.userID ? this.isProd ? this.logger.upload(a({}, this.config), e2, t2) : Promise.resolve() : Promise.reject(Object(s.s)(i.s.NetworkModuleUserIsNotLogged));
        }, c.prototype.info = function(e2, t2, r2) {
          this.emitLog(e2, t2, r2, "info");
        }, c.prototype.warn = function(e2, t2, r2) {
          this.emitLog(e2, t2, r2, "warn");
        }, c.prototype.emitLog = function(e2, t2, r2, n2) {
          return r2 = r2 && "object" == typeof r2 ? this.stringify(r2) : r2 || "", n2 && this.logger.write(e2, n2, t2, r2), r2;
        }, c.prototype.stringify = function(e2) {
          e2.time instanceof Date && (t2 = e2.time, e2.time = Date.now() - t2.getTime() + "," + t2.toLocaleTimeString("zh-CN") + "." + t2.getMilliseconds());
          var t2, r2 = null;
          return JSON.stringify(e2, function(e3, t3) {
            if (t3 instanceof Uint8Array)
              return "b=" + t3.length;
            var o2;
            if (t3 instanceof Array && 2 < t3.length)
              return [o2 = t3.length, t3[0], t3[o2 - 1]];
            if (t3 && "object" == typeof t3 && t3.type && t3.message && (r2 = t3), "string" == typeof t3) {
              if (100 < t3.length)
                return "s=" + t3.length;
              if ("message" == e3 && r2 && r2.type)
                return r2 = null, "s=" + t3.length;
            }
            return t3 instanceof n.a ? t3.toString() : t3;
          }).replace(/\"(\w+)\":/g, "$1:").replace(/(https?:\/\/)|(wss?:\/\/)/g, "");
        }, c);
        function c(e2) {
          this.isProd = true, this.config = { product: "zim", appID: "", userID: "", token: "", uploadURL: "", deviceID: s.g, version: "" }, this.logger = new o.a("zim", s.n), this.config.version = e2;
        }
      }, function(e, t, r) {
        "use strict";
        var n = r(43);
        r.d(t, "a", function() {
          return n.a;
        });
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return n;
        }), o.getInstance = function() {
          return o.instance || (o.instance = new o()).init(), o.instance;
        }, o.prototype.init = function() {
        }, Object.defineProperty(o.prototype, "testEnvironment", { get: function() {
          return this._testEnvironment;
        }, set: function(e2) {
          this._testEnvironment = e2;
        }, enumerable: false, configurable: true }), Object.defineProperty(o.prototype, "ENV", { get: function() {
          return this._ENV;
        }, set: function(e2) {
          this._ENV = e2;
        }, enumerable: false, configurable: true }), o.instance = new o();
        var n = o;
        function o() {
          this._testEnvironment = true, this._ENV = 0;
        }
      }, function(e, t, r) {
        (function(t2, r2, n, o) {
          e.exports = function e2(t3, r3, n2) {
            function o2(i2, a) {
              if (!r3[i2]) {
                if (!t3[i2]) {
                  if (s)
                    return s(i2, true);
                  var u = new Error("Cannot find module '" + i2 + "'");
                  throw u.code = "MODULE_NOT_FOUND", u;
                }
                u = r3[i2] = { exports: {} }, t3[i2][0].call(u.exports, function(e3) {
                  return o2(t3[i2][1][e3] || e3);
                }, u, u.exports, e2, t3, r3, n2);
              }
              return r3[i2].exports;
            }
            for (var s = false, i = 0; i < n2.length; i++)
              o2(n2[i]);
            return o2;
          }({ 1: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./utils"), o2 = e2("./support"), s = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
            r3.encode = function(e3) {
              for (var t4, r4, o3, i, a, u, c = [], l = 0, d = e3.length, p = "string" !== n2.getTypeOf(e3); l < e3.length; )
                u = d - l, o3 = p ? (t4 = e3[l++], r4 = l < d ? e3[l++] : 0, l < d ? e3[l++] : 0) : (t4 = e3.charCodeAt(l++), r4 = l < d ? e3.charCodeAt(l++) : 0, l < d ? e3.charCodeAt(l++) : 0), i = (3 & t4) << 4 | r4 >> 4, a = 1 < u ? (15 & r4) << 2 | o3 >> 6 : 64, u = 2 < u ? 63 & o3 : 64, c.push(s.charAt(t4 >> 2) + s.charAt(i) + s.charAt(a) + s.charAt(u));
              return c.join("");
            }, r3.decode = function(e3) {
              var t4, r4, n3, i, a, u = 0, c = 0;
              if ("data:" === e3.substr(0, "data:".length))
                throw new Error("Invalid base64 input, it looks like a data url.");
              var l, d = 3 * (e3 = e3.replace(/[^A-Za-z0-9\+\/\=]/g, "")).length / 4;
              if (e3.charAt(e3.length - 1) === s.charAt(64) && d--, e3.charAt(e3.length - 2) === s.charAt(64) && d--, d % 1 != 0)
                throw new Error("Invalid base64 input, bad content length.");
              for (l = new (o2.uint8array ? Uint8Array : Array)(0 | d); u < e3.length; )
                t4 = s.indexOf(e3.charAt(u++)) << 2 | (i = s.indexOf(e3.charAt(u++))) >> 4, r4 = (15 & i) << 4 | (i = s.indexOf(e3.charAt(u++))) >> 2, n3 = (3 & i) << 6 | (a = s.indexOf(e3.charAt(u++))), l[c++] = t4, 64 !== i && (l[c++] = r4), 64 !== a && (l[c++] = n3);
              return l;
            };
          }, { "./support": 30, "./utils": 32 }], 2: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./external"), o2 = e2("./stream/DataWorker"), s = e2("./stream/Crc32Probe"), i = e2("./stream/DataLengthProbe");
            function a(e3, t4, r4, n3, o3) {
              this.compressedSize = e3, this.uncompressedSize = t4, this.crc32 = r4, this.compression = n3, this.compressedContent = o3;
            }
            a.prototype = { getContentWorker: function() {
              var e3 = new o2(n2.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new i("data_length")), t4 = this;
              return e3.on("end", function() {
                if (this.streamInfo.data_length !== t4.uncompressedSize)
                  throw new Error("Bug : uncompressed data size mismatch");
              }), e3;
            }, getCompressedWorker: function() {
              return new o2(n2.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize", this.compressedSize).withStreamInfo("uncompressedSize", this.uncompressedSize).withStreamInfo("crc32", this.crc32).withStreamInfo("compression", this.compression);
            } }, a.createWorkerFrom = function(e3, t4, r4) {
              return e3.pipe(new s()).pipe(new i("uncompressedSize")).pipe(t4.compressWorker(r4)).pipe(new i("compressedSize")).withStreamInfo("compression", t4);
            }, t3.exports = a;
          }, { "./external": 6, "./stream/Crc32Probe": 25, "./stream/DataLengthProbe": 26, "./stream/DataWorker": 27 }], 3: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./stream/GenericWorker");
            r3.STORE = { magic: "\0\0", compressWorker: function(e3) {
              return new n2("STORE compression");
            }, uncompressWorker: function() {
              return new n2("STORE decompression");
            } }, r3.DEFLATE = e2("./flate");
          }, { "./flate": 7, "./stream/GenericWorker": 28 }], 4: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./utils"), o2 = function() {
              for (var e3 = [], t4 = 0; t4 < 256; t4++) {
                for (var r4 = t4, n3 = 0; n3 < 8; n3++)
                  r4 = 1 & r4 ? 3988292384 ^ r4 >>> 1 : r4 >>> 1;
                e3[t4] = r4;
              }
              return e3;
            }();
            t3.exports = function(e3, t4) {
              return void 0 !== e3 && e3.length ? ("string" !== n2.getTypeOf(e3) ? function(e4, t5, r4) {
                var n3 = o2, s = 0 + r4;
                e4 ^= -1;
                for (var i = 0; i < s; i++)
                  e4 = e4 >>> 8 ^ n3[255 & (e4 ^ t5[i])];
                return -1 ^ e4;
              } : function(e4, t5, r4) {
                var n3 = o2, s = 0 + r4;
                e4 ^= -1;
                for (var i = 0; i < s; i++)
                  e4 = e4 >>> 8 ^ n3[255 & (e4 ^ t5.charCodeAt(i))];
                return -1 ^ e4;
              })(0 | t4, e3, e3.length) : 0;
            };
          }, { "./utils": 32 }], 5: [function(e2, t3, r3) {
            "use strict";
            r3.base64 = false, r3.binary = false, r3.dir = false, r3.createFolders = true, r3.date = null, r3.compression = null, r3.compressionOptions = null, r3.comment = null, r3.unixPermissions = null, r3.dosPermissions = null;
          }, {}], 6: [function(e2, t3, r3) {
            "use strict";
            e2 = "undefined" != typeof Promise ? Promise : e2("lie"), t3.exports = { Promise: e2 };
          }, { lie: 37 }], 7: [function(e2, t3, r3) {
            "use strict";
            var n2 = "undefined" != typeof Uint8Array && "undefined" != typeof Uint16Array && "undefined" != typeof Uint32Array, o2 = e2("pako"), s = e2("./utils"), i = e2("./stream/GenericWorker"), a = n2 ? "uint8array" : "array";
            function u(e3, t4) {
              i.call(this, "FlateWorker/" + e3), this._pako = null, this._pakoAction = e3, this._pakoOptions = t4, this.meta = {};
            }
            r3.magic = "\b\0", s.inherits(u, i), u.prototype.processChunk = function(e3) {
              this.meta = e3.meta, null === this._pako && this._createPako(), this._pako.push(s.transformTo(a, e3.data), false);
            }, u.prototype.flush = function() {
              i.prototype.flush.call(this), null === this._pako && this._createPako(), this._pako.push([], true);
            }, u.prototype.cleanUp = function() {
              i.prototype.cleanUp.call(this), this._pako = null;
            }, u.prototype._createPako = function() {
              this._pako = new o2[this._pakoAction]({ raw: true, level: this._pakoOptions.level || -1 });
              var e3 = this;
              this._pako.onData = function(t4) {
                e3.push({ data: t4, meta: e3.meta });
              };
            }, r3.compressWorker = function(e3) {
              return new u("Deflate", e3);
            }, r3.uncompressWorker = function() {
              return new u("Inflate", {});
            };
          }, { "./stream/GenericWorker": 28, "./utils": 32, pako: 38 }], 8: [function(e2, t3, r3) {
            "use strict";
            function n2(e3, t4) {
              for (var r4 = "", n3 = 0; n3 < t4; n3++)
                r4 += String.fromCharCode(255 & e3), e3 >>>= 8;
              return r4;
            }
            function o2(e3, t4, r4, o3, i2, l2) {
              var d = e3.file, p = e3.compression, h = l2 !== a.utf8encode, g = s.transformTo("string", l2(d.name)), f = s.transformTo("string", a.utf8encode(d.name)), m = d.comment, _ = (l2 = s.transformTo("string", l2(m)), s.transformTo("string", a.utf8encode(m))), v = f.length !== d.name.length, b = (m = _.length !== m.length, ""), y = d.dir, M = d.date, I = { crc32: 0, compressedSize: 0, uncompressedSize: 0 };
              t4 && !r4 || (I.crc32 = e3.crc32, I.compressedSize = e3.compressedSize, I.uncompressedSize = e3.uncompressedSize), r4 = 0, t4 && (r4 |= 8), h || !v && !m || (r4 |= 2048), e3 = 0, t4 = 0, y && (e3 |= 16), "UNIX" === i2 ? (t4 = 798, e3 |= (65535 & ((h = d.unixPermissions) ? h : y ? 16893 : 33204)) << 16) : (t4 = 20, e3 |= 63 & (d.dosPermissions || 0)), i2 = M.getUTCHours(), i2 = (i2 = ((i2 <<= 6) | M.getUTCMinutes()) << 5) | M.getUTCSeconds() / 2, h = M.getUTCFullYear() - 1980, h = (h = ((h <<= 4) | M.getUTCMonth() + 1) << 5) | M.getUTCDate(), v && (y = n2(1, 1) + n2(u(g), 4) + f, b += "up" + n2(y.length, 2) + y), m && (d = n2(1, 1) + n2(u(l2), 4) + _, b += "uc" + n2(d.length, 2) + d), M = "", M = (M = (M = (M = (M = (M = (M = (M = (M = (M += "\n\0") + n2(r4, 2)) + p.magic) + n2(i2, 2)) + n2(h, 2)) + n2(I.crc32, 4)) + n2(I.compressedSize, 4)) + n2(I.uncompressedSize, 4)) + n2(g.length, 2)) + n2(b.length, 2);
              return { fileRecord: c.LOCAL_FILE_HEADER + M + g + b, dirRecord: c.CENTRAL_FILE_HEADER + n2(t4, 2) + M + n2(l2.length, 2) + "\0\0\0\0" + n2(e3, 4) + n2(o3, 4) + g + b + l2 };
            }
            var s = e2("../utils"), i = e2("../stream/GenericWorker"), a = e2("../utf8"), u = e2("../crc32"), c = e2("../signature");
            function l(e3, t4, r4, n3) {
              i.call(this, "ZipFileWorker"), this.bytesWritten = 0, this.zipComment = t4, this.zipPlatform = r4, this.encodeFileName = n3, this.streamFiles = e3, this.accumulate = false, this.contentBuffer = [], this.dirRecords = [], this.currentSourceOffset = 0, this.entriesCount = 0, this.currentFile = null, this._sources = [];
            }
            s.inherits(l, i), l.prototype.push = function(e3) {
              var t4 = e3.meta.percent || 0, r4 = this.entriesCount, n3 = this._sources.length;
              this.accumulate ? this.contentBuffer.push(e3) : (this.bytesWritten += e3.data.length, i.prototype.push.call(this, { data: e3.data, meta: { currentFile: this.currentFile, percent: r4 ? (t4 + 100 * (r4 - n3 - 1)) / r4 : 100 } }));
            }, l.prototype.openedSource = function(e3) {
              this.currentSourceOffset = this.bytesWritten, this.currentFile = e3.file.name;
              var t4 = this.streamFiles && !e3.file.dir;
              t4 ? (e3 = o2(e3, t4, false, this.currentSourceOffset, this.zipPlatform, this.encodeFileName), this.push({ data: e3.fileRecord, meta: { percent: 0 } })) : this.accumulate = true;
            }, l.prototype.closedSource = function(e3) {
              this.accumulate = false;
              var t4 = this.streamFiles && !e3.file.dir, r4 = o2(e3, t4, true, this.currentSourceOffset, this.zipPlatform, this.encodeFileName);
              if (this.dirRecords.push(r4.dirRecord), t4)
                this.push({ data: (t4 = e3, c.DATA_DESCRIPTOR + n2(t4.crc32, 4) + n2(t4.compressedSize, 4) + n2(t4.uncompressedSize, 4)), meta: { percent: 100 } });
              else
                for (this.push({ data: r4.fileRecord, meta: { percent: 0 } }); this.contentBuffer.length; )
                  this.push(this.contentBuffer.shift());
              this.currentFile = null;
            }, l.prototype.flush = function() {
              for (var e3 = this.bytesWritten, t4 = 0; t4 < this.dirRecords.length; t4++)
                this.push({ data: this.dirRecords[t4], meta: { percent: 100 } });
              var r4 = this.bytesWritten - e3;
              r4 = function(e4, t5, r5, o3, i2) {
                return i2 = s.transformTo("string", i2(o3)), c.CENTRAL_DIRECTORY_END + "\0\0\0\0" + n2(e4, 2) + n2(e4, 2) + n2(t5, 4) + n2(r5, 4) + n2(i2.length, 2) + i2;
              }(this.dirRecords.length, r4, e3, this.zipComment, this.encodeFileName);
              this.push({ data: r4, meta: { percent: 100 } });
            }, l.prototype.prepareNextSource = function() {
              this.previous = this._sources.shift(), this.openedSource(this.previous.streamInfo), this.isPaused ? this.previous.pause() : this.previous.resume();
            }, l.prototype.registerPrevious = function(e3) {
              this._sources.push(e3);
              var t4 = this;
              return e3.on("data", function(e4) {
                t4.processChunk(e4);
              }), e3.on("end", function() {
                t4.closedSource(t4.previous.streamInfo), t4._sources.length ? t4.prepareNextSource() : t4.end();
              }), e3.on("error", function(e4) {
                t4.error(e4);
              }), this;
            }, l.prototype.resume = function() {
              return !!i.prototype.resume.call(this) && (!this.previous && this._sources.length ? (this.prepareNextSource(), true) : this.previous || this._sources.length || this.generatedError ? void 0 : (this.end(), true));
            }, l.prototype.error = function(e3) {
              var t4 = this._sources;
              if (!i.prototype.error.call(this, e3))
                return false;
              for (var r4 = 0; r4 < t4.length; r4++)
                try {
                  t4[r4].error(e3);
                } catch (e4) {
                }
              return true;
            }, l.prototype.lock = function() {
              i.prototype.lock.call(this);
              for (var e3 = this._sources, t4 = 0; t4 < e3.length; t4++)
                e3[t4].lock();
            }, t3.exports = l;
          }, { "../crc32": 4, "../signature": 23, "../stream/GenericWorker": 28, "../utf8": 31, "../utils": 32 }], 9: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("../compressions"), o2 = e2("./ZipFileWorker");
            r3.generateWorker = function(e3, t4, r4) {
              var s = new o2(t4.streamFiles, r4, t4.platform, t4.encodeFileName), i = 0;
              try {
                e3.forEach(function(e4, r5) {
                  i++;
                  var o3 = function(e5, t5) {
                    if (t5 = n2[e5 = e5 || t5])
                      return t5;
                    throw new Error(e5 + " is not a valid compression method !");
                  }(r5.options.compression, t4.compression), a = r5.options.compressionOptions || t4.compressionOptions || {}, u = r5.dir, c = r5.date;
                  r5._compressWorker(o3, a).withStreamInfo("file", { name: e4, dir: u, date: c, comment: r5.comment || "", unixPermissions: r5.unixPermissions, dosPermissions: r5.dosPermissions }).pipe(s);
                }), s.entriesCount = i;
              } catch (e4) {
                s.error(e4);
              }
              return s;
            };
          }, { "../compressions": 3, "./ZipFileWorker": 8 }], 10: [function(e2, t3, r3) {
            "use strict";
            function n2() {
              if (!(this instanceof n2))
                return new n2();
              if (arguments.length)
                throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");
              this.files = /* @__PURE__ */ Object.create(null), this.comment = null, this.root = "", this.clone = function() {
                var e3, t4 = new n2();
                for (e3 in this)
                  "function" != typeof this[e3] && (t4[e3] = this[e3]);
                return t4;
              };
            }
            (n2.prototype = e2("./object")).loadAsync = e2("./load"), n2.support = e2("./support"), n2.defaults = e2("./defaults"), n2.version = "3.10.0", n2.loadAsync = function(e3, t4) {
              return new n2().loadAsync(e3, t4);
            }, n2.external = e2("./external"), t3.exports = n2;
          }, { "./defaults": 5, "./external": 6, "./load": 11, "./object": 15, "./support": 30 }], 11: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./utils"), o2 = e2("./external"), s = e2("./utf8"), i = e2("./zipEntries"), a = e2("./stream/Crc32Probe"), u = e2("./nodejsUtils");
            t3.exports = function(e3, t4) {
              var r4 = this;
              return t4 = n2.extend(t4 || {}, { base64: false, checkCRC32: false, optimizedBinaryString: false, createFolders: false, decodeFileName: s.utf8decode }), u.isNode && u.isStream(e3) ? o2.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")) : n2.prepareContent("the loaded zip file", e3, true, t4.optimizedBinaryString, t4.base64).then(function(e4) {
                var r5 = new i(t4);
                return r5.load(e4), r5;
              }).then(function(e4) {
                var r5 = [o2.Promise.resolve(e4)], n3 = e4.files;
                if (t4.checkCRC32)
                  for (var s2 = 0; s2 < n3.length; s2++)
                    r5.push(function(e5) {
                      return new o2.Promise(function(t5, r6) {
                        var n4 = e5.decompressed.getContentWorker().pipe(new a());
                        n4.on("error", function(e6) {
                          r6(e6);
                        }).on("end", function() {
                          n4.streamInfo.crc32 !== e5.decompressed.crc32 ? r6(new Error("Corrupted zip : CRC32 mismatch")) : t5();
                        }).resume();
                      });
                    }(n3[s2]));
                return o2.Promise.all(r5);
              }).then(function(e4) {
                for (var o3 = (e4 = e4.shift()).files, s2 = 0; s2 < o3.length; s2++) {
                  var i2 = o3[s2], a2 = i2.fileNameStr, u2 = n2.resolve(i2.fileNameStr);
                  r4.file(u2, i2.decompressed, { binary: true, optimizedBinaryString: true, date: i2.date, dir: i2.dir, comment: i2.fileCommentStr.length ? i2.fileCommentStr : null, unixPermissions: i2.unixPermissions, dosPermissions: i2.dosPermissions, createFolders: t4.createFolders }), i2.dir || (r4.file(u2).unsafeOriginalName = a2);
                }
                return e4.zipComment.length && (r4.comment = e4.zipComment), r4;
              });
            };
          }, { "./external": 6, "./nodejsUtils": 14, "./stream/Crc32Probe": 25, "./utf8": 31, "./utils": 32, "./zipEntries": 33 }], 12: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("../utils"), o2 = e2("../stream/GenericWorker");
            function s(e3, t4) {
              o2.call(this, "Nodejs stream input adapter for " + e3), this._upstreamEnded = false, this._bindStream(t4);
            }
            n2.inherits(s, o2), s.prototype._bindStream = function(e3) {
              var t4 = this;
              (this._stream = e3).pause(), e3.on("data", function(e4) {
                t4.push({ data: e4, meta: { percent: 0 } });
              }).on("error", function(e4) {
                t4.isPaused ? this.generatedError = e4 : t4.error(e4);
              }).on("end", function() {
                t4.isPaused ? t4._upstreamEnded = true : t4.end();
              });
            }, s.prototype.pause = function() {
              return !!o2.prototype.pause.call(this) && (this._stream.pause(), true);
            }, s.prototype.resume = function() {
              return !!o2.prototype.resume.call(this) && (this._upstreamEnded ? this.end() : this._stream.resume(), true);
            }, t3.exports = s;
          }, { "../stream/GenericWorker": 28, "../utils": 32 }], 13: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("readable-stream").Readable;
            function o2(e3, t4, r4) {
              n2.call(this, t4), this._helper = e3;
              var o3 = this;
              e3.on("data", function(e4, t5) {
                o3.push(e4) || o3._helper.pause(), r4 && r4(t5);
              }).on("error", function(e4) {
                o3.emit("error", e4);
              }).on("end", function() {
                o3.push(null);
              });
            }
            e2("../utils").inherits(o2, n2), o2.prototype._read = function() {
              this._helper.resume();
            }, t3.exports = o2;
          }, { "../utils": 32, "readable-stream": 16 }], 14: [function(e2, r3, n2) {
            "use strict";
            r3.exports = { isNode: void 0 !== t2, newBufferFrom: function(e3, r4) {
              if (t2.from && t2.from !== Uint8Array.from)
                return t2.from(e3, r4);
              if ("number" == typeof e3)
                throw new Error('The "data" argument must not be a number');
              return new t2(e3, r4);
            }, allocBuffer: function(e3) {
              return t2.alloc ? t2.alloc(e3) : ((e3 = new t2(e3)).fill(0), e3);
            }, isBuffer: function(e3) {
              return t2.isBuffer(e3);
            }, isStream: function(e3) {
              return e3 && "function" == typeof e3.on && "function" == typeof e3.pause && "function" == typeof e3.resume;
            } };
          }, {}], 15: [function(e2, t3, r3) {
            "use strict";
            function n2(e3, t4, r4) {
              var n3 = i.getTypeOf(t4), s2 = i.extend(r4 || {}, c), u2 = (s2.date = s2.date || /* @__PURE__ */ new Date(), null !== s2.compression && (s2.compression = s2.compression.toUpperCase()), "string" == typeof s2.unixPermissions && (s2.unixPermissions = parseInt(s2.unixPermissions, 8)), s2.unixPermissions && 16384 & s2.unixPermissions && (s2.dir = true), s2.dosPermissions && 16 & s2.dosPermissions && (s2.dir = true), s2.dir && (e3 = f(e3)), s2.createFolders && (u2 = function(e4) {
                var t5 = (e4 = "/" === e4.slice(-1) ? e4.substring(0, e4.length - 1) : e4).lastIndexOf("/");
                return 0 < t5 ? e4.substring(0, t5) : "";
              }(e3)) && o2.call(this, u2, true), "string" === n3 && false === s2.binary && false === s2.base64);
              r4 && void 0 !== r4.binary || (s2.binary = !u2), (t4 instanceof l && 0 === t4.uncompressedSize || s2.dir || !t4 || 0 === t4.length) && (s2.base64 = false, s2.binary = true, t4 = "", s2.compression = "STORE"), n3 = t4 instanceof l || t4 instanceof a ? t4 : h.isNode && h.isStream(t4) ? new g(e3, t4) : i.prepareContent(e3, t4, s2.binary, s2.optimizedBinaryString, s2.base64), r4 = new d(e3, n3, s2);
              this.files[e3] = r4;
            }
            function o2(e3, t4) {
              return t4 = void 0 !== t4 ? t4 : c.createFolders, e3 = f(e3), this.files[e3] || n2.call(this, e3, null, { dir: true, createFolders: t4 }), this.files[e3];
            }
            var s = e2("./utf8"), i = e2("./utils"), a = e2("./stream/GenericWorker"), u = e2("./stream/StreamHelper"), c = e2("./defaults"), l = e2("./compressedObject"), d = e2("./zipObject"), p = e2("./generate"), h = e2("./nodejsUtils"), g = e2("./nodejs/NodejsStreamInputAdapter"), f = function(e3) {
              return "/" !== e3.slice(-1) && (e3 += "/"), e3;
            };
            function m(e3) {
              return "[object RegExp]" === Object.prototype.toString.call(e3);
            }
            t3.exports = { load: function() {
              throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.");
            }, forEach: function(e3) {
              var t4, r4, n3;
              for (t4 in this.files)
                n3 = this.files[t4], (r4 = t4.slice(this.root.length, t4.length)) && t4.slice(0, this.root.length) === this.root && e3(r4, n3);
            }, filter: function(e3) {
              var t4 = [];
              return this.forEach(function(r4, n3) {
                e3(r4, n3) && t4.push(n3);
              }), t4;
            }, file: function(e3, t4, r4) {
              return 1 !== arguments.length ? (e3 = this.root + e3, n2.call(this, e3, t4, r4), this) : m(e3) ? (o3 = e3, this.filter(function(e4, t5) {
                return !t5.dir && o3.test(e4);
              })) : (t4 = this.files[this.root + e3]) && !t4.dir ? t4 : null;
              var o3;
            }, folder: function(e3) {
              if (!e3)
                return this;
              if (m(e3))
                return this.filter(function(t5, r5) {
                  return r5.dir && e3.test(t5);
                });
              var t4 = this.root + e3, r4 = (t4 = o2.call(this, t4), this.clone());
              return r4.root = t4.name, r4;
            }, remove: function(e3) {
              e3 = this.root + e3;
              var t4 = this.files[e3];
              if (t4 || ("/" !== e3.slice(-1) && (e3 += "/"), t4 = this.files[e3]), t4 && !t4.dir)
                delete this.files[e3];
              else
                for (var r4 = this.filter(function(t5, r5) {
                  return r5.name.slice(0, e3.length) === e3;
                }), n3 = 0; n3 < r4.length; n3++)
                  delete this.files[r4[n3].name];
              return this;
            }, generate: function(e3) {
              throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.");
            }, generateInternalStream: function(e3) {
              var t4 = {};
              try {
                if ((t4 = i.extend(e3 || {}, { streamFiles: false, compression: "STORE", compressionOptions: null, type: "", platform: "DOS", comment: null, mimeType: "application/zip", encodeFileName: s.utf8encode })).type = t4.type.toLowerCase(), t4.compression = t4.compression.toUpperCase(), "binarystring" === t4.type && (t4.type = "string"), !t4.type)
                  throw new Error("No output type specified.");
                i.checkSupport(t4.type), "darwin" !== t4.platform && "freebsd" !== t4.platform && "linux" !== t4.platform && "sunos" !== t4.platform || (t4.platform = "UNIX"), "win32" === t4.platform && (t4.platform = "DOS");
                var r4 = t4.comment || this.comment || "", n3 = p.generateWorker(this, t4, r4);
              } catch (e4) {
                (n3 = new a("error")).error(e4);
              }
              return new u(n3, t4.type || "string", t4.mimeType);
            }, generateAsync: function(e3, t4) {
              return this.generateInternalStream(e3).accumulate(t4);
            }, generateNodeStream: function(e3, t4) {
              return (e3 = e3 || {}).type || (e3.type = "nodebuffer"), this.generateInternalStream(e3).toNodejsStream(t4);
            } };
          }, { "./compressedObject": 2, "./defaults": 5, "./generate": 9, "./nodejs/NodejsStreamInputAdapter": 12, "./nodejsUtils": 14, "./stream/GenericWorker": 28, "./stream/StreamHelper": 29, "./utf8": 31, "./utils": 32, "./zipObject": 35 }], 16: [function(e2, t3, r3) {
            t3.exports = e2("stream");
          }, { stream: void 0 }], 17: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./DataReader");
            function o2(e3) {
              n2.call(this, e3);
              for (var t4 = 0; t4 < this.data.length; t4++)
                e3[t4] = 255 & e3[t4];
            }
            e2("../utils").inherits(o2, n2), o2.prototype.byteAt = function(e3) {
              return this.data[this.zero + e3];
            }, o2.prototype.lastIndexOfSignature = function(e3) {
              for (var t4 = e3.charCodeAt(0), r4 = e3.charCodeAt(1), n3 = e3.charCodeAt(2), o3 = e3.charCodeAt(3), s = this.length - 4; 0 <= s; --s)
                if (this.data[s] === t4 && this.data[s + 1] === r4 && this.data[s + 2] === n3 && this.data[s + 3] === o3)
                  return s - this.zero;
              return -1;
            }, o2.prototype.readAndCheckSignature = function(e3) {
              var t4 = e3.charCodeAt(0), r4 = e3.charCodeAt(1), n3 = e3.charCodeAt(2), o3 = (e3 = e3.charCodeAt(3), this.readData(4));
              return t4 === o3[0] && r4 === o3[1] && n3 === o3[2] && e3 === o3[3];
            }, o2.prototype.readData = function(e3) {
              if (this.checkOffset(e3), 0 === e3)
                return [];
              var t4 = this.data.slice(this.zero + this.index, this.zero + this.index + e3);
              return this.index += e3, t4;
            }, t3.exports = o2;
          }, { "../utils": 32, "./DataReader": 18 }], 18: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("../utils");
            function o2(e3) {
              this.data = e3, this.length = e3.length, this.index = 0, this.zero = 0;
            }
            o2.prototype = { checkOffset: function(e3) {
              this.checkIndex(this.index + e3);
            }, checkIndex: function(e3) {
              if (this.length < this.zero + e3 || e3 < 0)
                throw new Error("End of data reached (data length = " + this.length + ", asked index = " + e3 + "). Corrupted zip ?");
            }, setIndex: function(e3) {
              this.checkIndex(e3), this.index = e3;
            }, skip: function(e3) {
              this.setIndex(this.index + e3);
            }, byteAt: function(e3) {
            }, readInt: function(e3) {
              var t4, r4 = 0;
              for (this.checkOffset(e3), t4 = this.index + e3 - 1; t4 >= this.index; t4--)
                r4 = (r4 << 8) + this.byteAt(t4);
              return this.index += e3, r4;
            }, readString: function(e3) {
              return n2.transformTo("string", this.readData(e3));
            }, readData: function(e3) {
            }, lastIndexOfSignature: function(e3) {
            }, readAndCheckSignature: function(e3) {
            }, readDate: function() {
              var e3 = this.readInt(4);
              return new Date(Date.UTC(1980 + (e3 >> 25 & 127), (e3 >> 21 & 15) - 1, e3 >> 16 & 31, e3 >> 11 & 31, e3 >> 5 & 63, (31 & e3) << 1));
            } }, t3.exports = o2;
          }, { "../utils": 32 }], 19: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./Uint8ArrayReader");
            function o2(e3) {
              n2.call(this, e3);
            }
            e2("../utils").inherits(o2, n2), o2.prototype.readData = function(e3) {
              this.checkOffset(e3);
              var t4 = this.data.slice(this.zero + this.index, this.zero + this.index + e3);
              return this.index += e3, t4;
            }, t3.exports = o2;
          }, { "../utils": 32, "./Uint8ArrayReader": 21 }], 20: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./DataReader");
            function o2(e3) {
              n2.call(this, e3);
            }
            e2("../utils").inherits(o2, n2), o2.prototype.byteAt = function(e3) {
              return this.data.charCodeAt(this.zero + e3);
            }, o2.prototype.lastIndexOfSignature = function(e3) {
              return this.data.lastIndexOf(e3) - this.zero;
            }, o2.prototype.readAndCheckSignature = function(e3) {
              return e3 === this.readData(4);
            }, o2.prototype.readData = function(e3) {
              this.checkOffset(e3);
              var t4 = this.data.slice(this.zero + this.index, this.zero + this.index + e3);
              return this.index += e3, t4;
            }, t3.exports = o2;
          }, { "../utils": 32, "./DataReader": 18 }], 21: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./ArrayReader");
            function o2(e3) {
              n2.call(this, e3);
            }
            e2("../utils").inherits(o2, n2), o2.prototype.readData = function(e3) {
              if (this.checkOffset(e3), 0 === e3)
                return new Uint8Array(0);
              var t4 = this.data.subarray(this.zero + this.index, this.zero + this.index + e3);
              return this.index += e3, t4;
            }, t3.exports = o2;
          }, { "../utils": 32, "./ArrayReader": 17 }], 22: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("../utils"), o2 = e2("../support"), s = e2("./ArrayReader"), i = e2("./StringReader"), a = e2("./NodeBufferReader"), u = e2("./Uint8ArrayReader");
            t3.exports = function(e3) {
              var t4 = n2.getTypeOf(e3);
              return n2.checkSupport(t4), "string" !== t4 || o2.uint8array ? "nodebuffer" === t4 ? new a(e3) : o2.uint8array ? new u(n2.transformTo("uint8array", e3)) : new s(n2.transformTo("array", e3)) : new i(e3);
            };
          }, { "../support": 30, "../utils": 32, "./ArrayReader": 17, "./NodeBufferReader": 19, "./StringReader": 20, "./Uint8ArrayReader": 21 }], 23: [function(e2, t3, r3) {
            "use strict";
            r3.LOCAL_FILE_HEADER = "PK", r3.CENTRAL_FILE_HEADER = "PK", r3.CENTRAL_DIRECTORY_END = "PK", r3.ZIP64_CENTRAL_DIRECTORY_LOCATOR = "PK\x07", r3.ZIP64_CENTRAL_DIRECTORY_END = "PK", r3.DATA_DESCRIPTOR = "PK\x07\b";
          }, {}], 24: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./GenericWorker"), o2 = e2("../utils");
            function s(e3) {
              n2.call(this, "ConvertWorker to " + e3), this.destType = e3;
            }
            o2.inherits(s, n2), s.prototype.processChunk = function(e3) {
              this.push({ data: o2.transformTo(this.destType, e3.data), meta: e3.meta });
            }, t3.exports = s;
          }, { "../utils": 32, "./GenericWorker": 28 }], 25: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./GenericWorker"), o2 = e2("../crc32");
            function s() {
              n2.call(this, "Crc32Probe"), this.withStreamInfo("crc32", 0);
            }
            e2("../utils").inherits(s, n2), s.prototype.processChunk = function(e3) {
              this.streamInfo.crc32 = o2(e3.data, this.streamInfo.crc32 || 0), this.push(e3);
            }, t3.exports = s;
          }, { "../crc32": 4, "../utils": 32, "./GenericWorker": 28 }], 26: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("../utils"), o2 = e2("./GenericWorker");
            function s(e3) {
              o2.call(this, "DataLengthProbe for " + e3), this.propName = e3, this.withStreamInfo(e3, 0);
            }
            n2.inherits(s, o2), s.prototype.processChunk = function(e3) {
              var t4;
              e3 && (t4 = this.streamInfo[this.propName] || 0, this.streamInfo[this.propName] = t4 + e3.data.length), o2.prototype.processChunk.call(this, e3);
            }, t3.exports = s;
          }, { "../utils": 32, "./GenericWorker": 28 }], 27: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("../utils"), o2 = e2("./GenericWorker");
            function s(e3) {
              o2.call(this, "DataWorker");
              var t4 = this;
              this.dataIsReady = false, this.index = 0, this.max = 0, this.data = null, this.type = "", this._tickScheduled = false, e3.then(function(e4) {
                t4.dataIsReady = true, t4.data = e4, t4.max = e4 && e4.length || 0, t4.type = n2.getTypeOf(e4), t4.isPaused || t4._tickAndRepeat();
              }, function(e4) {
                t4.error(e4);
              });
            }
            n2.inherits(s, o2), s.prototype.cleanUp = function() {
              o2.prototype.cleanUp.call(this), this.data = null;
            }, s.prototype.resume = function() {
              return !!o2.prototype.resume.call(this) && (!this._tickScheduled && this.dataIsReady && (this._tickScheduled = true, n2.delay(this._tickAndRepeat, [], this)), true);
            }, s.prototype._tickAndRepeat = function() {
              this._tickScheduled = false, this.isPaused || this.isFinished || (this._tick(), this.isFinished || (n2.delay(this._tickAndRepeat, [], this), this._tickScheduled = true));
            }, s.prototype._tick = function() {
              if (this.isPaused || this.isFinished)
                return false;
              var e3 = null, t4 = Math.min(this.max, this.index + 16384);
              if (this.index >= this.max)
                return this.end();
              switch (this.type) {
                case "string":
                  e3 = this.data.substring(this.index, t4);
                  break;
                case "uint8array":
                  e3 = this.data.subarray(this.index, t4);
                  break;
                case "array":
                case "nodebuffer":
                  e3 = this.data.slice(this.index, t4);
              }
              return this.index = t4, this.push({ data: e3, meta: { percent: this.max ? this.index / this.max * 100 : 0 } });
            }, t3.exports = s;
          }, { "../utils": 32, "./GenericWorker": 28 }], 28: [function(e2, t3, r3) {
            "use strict";
            function n2(e3) {
              this.name = e3 || "default", this.streamInfo = {}, this.generatedError = null, this.extraStreamInfo = {}, this.isPaused = true, this.isFinished = false, this.isLocked = false, this._listeners = { data: [], end: [], error: [] }, this.previous = null;
            }
            n2.prototype = { push: function(e3) {
              this.emit("data", e3);
            }, end: function() {
              if (this.isFinished)
                return false;
              this.flush();
              try {
                this.emit("end"), this.cleanUp(), this.isFinished = true;
              } catch (e3) {
                this.emit("error", e3);
              }
              return true;
            }, error: function(e3) {
              return !this.isFinished && (this.isPaused ? this.generatedError = e3 : (this.isFinished = true, this.emit("error", e3), this.previous && this.previous.error(e3), this.cleanUp()), true);
            }, on: function(e3, t4) {
              return this._listeners[e3].push(t4), this;
            }, cleanUp: function() {
              this.streamInfo = this.generatedError = this.extraStreamInfo = null, this._listeners = [];
            }, emit: function(e3, t4) {
              if (this._listeners[e3])
                for (var r4 = 0; r4 < this._listeners[e3].length; r4++)
                  this._listeners[e3][r4].call(this, t4);
            }, pipe: function(e3) {
              return e3.registerPrevious(this);
            }, registerPrevious: function(e3) {
              if (this.isLocked)
                throw new Error("The stream '" + this + "' has already been used.");
              this.streamInfo = e3.streamInfo, this.mergeStreamInfo(), this.previous = e3;
              var t4 = this;
              return e3.on("data", function(e4) {
                t4.processChunk(e4);
              }), e3.on("end", function() {
                t4.end();
              }), e3.on("error", function(e4) {
                t4.error(e4);
              }), this;
            }, pause: function() {
              return !this.isPaused && !this.isFinished && (this.isPaused = true, this.previous && this.previous.pause(), true);
            }, resume: function() {
              if (!this.isPaused || this.isFinished)
                return false;
              var e3 = this.isPaused = false;
              return this.generatedError && (this.error(this.generatedError), e3 = true), this.previous && this.previous.resume(), !e3;
            }, flush: function() {
            }, processChunk: function(e3) {
              this.push(e3);
            }, withStreamInfo: function(e3, t4) {
              return this.extraStreamInfo[e3] = t4, this.mergeStreamInfo(), this;
            }, mergeStreamInfo: function() {
              for (var e3 in this.extraStreamInfo)
                this.extraStreamInfo.hasOwnProperty(e3) && (this.streamInfo[e3] = this.extraStreamInfo[e3]);
            }, lock: function() {
              if (this.isLocked)
                throw new Error("The stream '" + this + "' has already been used.");
              this.isLocked = true, this.previous && this.previous.lock();
            }, toString: function() {
              var e3 = "Worker " + this.name;
              return this.previous ? this.previous + " -> " + e3 : e3;
            } }, t3.exports = n2;
          }, {}], 29: [function(e2, r3, n2) {
            "use strict";
            var o2 = e2("../utils"), s = e2("./ConvertWorker"), i = e2("./GenericWorker"), a = e2("../base64"), u = e2("../support"), c = e2("../external"), l = null;
            if (u.nodestream)
              try {
                l = e2("../nodejs/NodejsStreamOutputAdapter");
              } catch (e3) {
              }
            function d(e3, t3, r4) {
              var n3 = t3;
              switch (t3) {
                case "blob":
                case "arraybuffer":
                  n3 = "uint8array";
                  break;
                case "base64":
                  n3 = "string";
              }
              try {
                this._internalType = n3, this._outputType = t3, this._mimeType = r4, o2.checkSupport(n3), this._worker = e3.pipe(new s(n3)), e3.lock();
              } catch (e4) {
                this._worker = new i("error"), this._worker.error(e4);
              }
            }
            d.prototype = { accumulate: function(e3) {
              return r4 = this, n3 = e3, new c.Promise(function(e4, s2) {
                var i2 = [], u2 = r4._internalType, c2 = r4._outputType, l2 = r4._mimeType;
                r4.on("data", function(e5, t3) {
                  i2.push(e5), n3 && n3(t3);
                }).on("error", function(e5) {
                  i2 = [], s2(e5);
                }).on("end", function() {
                  try {
                    var r5 = function(e5, t3, r6) {
                      switch (e5) {
                        case "blob":
                          return o2.newBlob(o2.transformTo("arraybuffer", t3), r6);
                        case "base64":
                          return a.encode(t3);
                        default:
                          return o2.transformTo(e5, t3);
                      }
                    }(c2, function(e5, r6) {
                      for (var n4 = 0, o3 = null, s3 = 0, i3 = 0; i3 < r6.length; i3++)
                        s3 += r6[i3].length;
                      switch (e5) {
                        case "string":
                          return r6.join("");
                        case "array":
                          return Array.prototype.concat.apply([], r6);
                        case "uint8array":
                          for (o3 = new Uint8Array(s3), i3 = 0; i3 < r6.length; i3++)
                            o3.set(r6[i3], n4), n4 += r6[i3].length;
                          return o3;
                        case "nodebuffer":
                          return t2.concat(r6);
                        default:
                          throw new Error("concat : unsupported type '" + e5 + "'");
                      }
                    }(u2, i2), l2);
                    e4(r5);
                  } catch (r6) {
                    s2(r6);
                  }
                  i2 = [];
                }).resume();
              });
              var r4, n3;
            }, on: function(e3, t3) {
              var r4 = this;
              return "data" === e3 ? this._worker.on(e3, function(e4) {
                t3.call(r4, e4.data, e4.meta);
              }) : this._worker.on(e3, function() {
                o2.delay(t3, arguments, r4);
              }), this;
            }, resume: function() {
              return o2.delay(this._worker.resume, [], this._worker), this;
            }, pause: function() {
              return this._worker.pause(), this;
            }, toNodejsStream: function(e3) {
              if (o2.checkSupport("nodestream"), "nodebuffer" !== this._outputType)
                throw new Error(this._outputType + " is not supported by this method");
              return new l(this, { objectMode: "nodebuffer" !== this._outputType }, e3);
            } }, r3.exports = d;
          }, { "../base64": 1, "../external": 6, "../nodejs/NodejsStreamOutputAdapter": 13, "../support": 30, "../utils": 32, "./ConvertWorker": 24, "./GenericWorker": 28 }], 30: [function(e2, r3, n2) {
            "use strict";
            if (n2.base64 = true, n2.array = true, n2.string = true, n2.arraybuffer = "undefined" != typeof ArrayBuffer && "undefined" != typeof Uint8Array, n2.nodebuffer = void 0 !== t2, n2.uint8array = "undefined" != typeof Uint8Array, "undefined" == typeof ArrayBuffer)
              n2.blob = false;
            else {
              var o2 = new ArrayBuffer(0);
              try {
                n2.blob = 0 === new Blob([o2], { type: "application/zip" }).size;
              } catch (e3) {
                try {
                  var s = new (self.BlobBuilder || self.WebKitBlobBuilder || self.MozBlobBuilder || self.MSBlobBuilder)();
                  s.append(o2), n2.blob = 0 === s.getBlob("application/zip").size;
                } catch (e4) {
                  n2.blob = false;
                }
              }
            }
            try {
              n2.nodestream = !!e2("readable-stream").Readable;
            } catch (e3) {
              n2.nodestream = false;
            }
          }, { "readable-stream": 16 }], 31: [function(e2, t3, r3) {
            "use strict";
            for (var n2 = e2("./utils"), o2 = e2("./support"), s = e2("./nodejsUtils"), i = e2("./stream/GenericWorker"), a = new Array(256), u = 0; u < 256; u++)
              a[u] = 252 <= u ? 6 : 248 <= u ? 5 : 240 <= u ? 4 : 224 <= u ? 3 : 192 <= u ? 2 : 1;
            function c() {
              i.call(this, "utf-8 decode"), this.leftOver = null;
            }
            function l() {
              i.call(this, "utf-8 encode");
            }
            a[254] = a[254] = 1, r3.utf8encode = function(e3) {
              if (o2.nodebuffer)
                return s.newBufferFrom(e3, "utf-8");
              for (var t4, r4, n3, i2, a2 = e3, u2 = a2.length, c2 = 0, l2 = 0; l2 < u2; l2++)
                55296 == (64512 & (r4 = a2.charCodeAt(l2))) && l2 + 1 < u2 && 56320 == (64512 & (n3 = a2.charCodeAt(l2 + 1))) && (r4 = 65536 + (r4 - 55296 << 10) + (n3 - 56320), l2++), c2 += r4 < 128 ? 1 : r4 < 2048 ? 2 : r4 < 65536 ? 3 : 4;
              for (t4 = new (o2.uint8array ? Uint8Array : Array)(c2), l2 = i2 = 0; i2 < c2; l2++)
                55296 == (64512 & (r4 = a2.charCodeAt(l2))) && l2 + 1 < u2 && 56320 == (64512 & (n3 = a2.charCodeAt(l2 + 1))) && (r4 = 65536 + (r4 - 55296 << 10) + (n3 - 56320), l2++), r4 < 128 ? t4[i2++] = r4 : (r4 < 2048 ? t4[i2++] = 192 | r4 >>> 6 : (r4 < 65536 ? t4[i2++] = 224 | r4 >>> 12 : (t4[i2++] = 240 | r4 >>> 18, t4[i2++] = 128 | r4 >>> 12 & 63), t4[i2++] = 128 | r4 >>> 6 & 63), t4[i2++] = 128 | 63 & r4);
              return t4;
            }, r3.utf8decode = function(e3) {
              if (o2.nodebuffer)
                return n2.transformTo("nodebuffer", e3).toString("utf-8");
              for (var t4, r4, s2, i2 = e3 = n2.transformTo(o2.uint8array ? "uint8array" : "array", e3), u2 = i2.length, c2 = new Array(2 * u2), l2 = t4 = 0; l2 < u2; )
                if ((r4 = i2[l2++]) < 128)
                  c2[t4++] = r4;
                else if (4 < (s2 = a[r4]))
                  c2[t4++] = 65533, l2 += s2 - 1;
                else {
                  for (r4 &= 2 === s2 ? 31 : 3 === s2 ? 15 : 7; 1 < s2 && l2 < u2; )
                    r4 = r4 << 6 | 63 & i2[l2++], s2--;
                  1 < s2 ? c2[t4++] = 65533 : r4 < 65536 ? c2[t4++] = r4 : (r4 -= 65536, c2[t4++] = 55296 | r4 >> 10 & 1023, c2[t4++] = 56320 | 1023 & r4);
                }
              return c2.length !== t4 && (c2.subarray ? c2 = c2.subarray(0, t4) : c2.length = t4), n2.applyFromCharCode(c2);
            }, n2.inherits(c, i), c.prototype.processChunk = function(e3) {
              var t4 = n2.transformTo(o2.uint8array ? "uint8array" : "array", e3.data), s2 = (this.leftOver && this.leftOver.length && (o2.uint8array ? (s2 = t4, (t4 = new Uint8Array(s2.length + this.leftOver.length)).set(this.leftOver, 0), t4.set(s2, this.leftOver.length)) : t4 = this.leftOver.concat(t4), this.leftOver = null), function(e4, t5) {
                for (var r4 = (t5 = (t5 = t5 || e4.length) > e4.length ? e4.length : t5) - 1; 0 <= r4 && 128 == (192 & e4[r4]); )
                  r4--;
                return !(r4 < 0) && 0 !== r4 && r4 + a[e4[r4]] > t5 ? r4 : t5;
              }(t4)), i2 = t4;
              s2 !== t4.length && (o2.uint8array ? (i2 = t4.subarray(0, s2), this.leftOver = t4.subarray(s2, t4.length)) : (i2 = t4.slice(0, s2), this.leftOver = t4.slice(s2, t4.length))), this.push({ data: r3.utf8decode(i2), meta: e3.meta });
            }, c.prototype.flush = function() {
              this.leftOver && this.leftOver.length && (this.push({ data: r3.utf8decode(this.leftOver), meta: {} }), this.leftOver = null);
            }, r3.Utf8DecodeWorker = c, n2.inherits(l, i), l.prototype.processChunk = function(e3) {
              this.push({ data: r3.utf8encode(e3.data), meta: e3.meta });
            }, r3.Utf8EncodeWorker = l;
          }, { "./nodejsUtils": 14, "./stream/GenericWorker": 28, "./support": 30, "./utils": 32 }], 32: [function(e2, t3, n2) {
            "use strict";
            var o2 = e2("./support"), s = e2("./base64"), i = e2("./nodejsUtils"), a = e2("./external");
            function u(e3) {
              return e3;
            }
            function c(e3, t4) {
              for (var r3 = 0; r3 < e3.length; ++r3)
                t4[r3] = 255 & e3.charCodeAt(r3);
              return t4;
            }
            e2("setimmediate"), n2.newBlob = function(e3, t4) {
              n2.checkSupport("blob");
              try {
                return new Blob([e3], { type: t4 });
              } catch (n3) {
                try {
                  var r3 = new (self.BlobBuilder || self.WebKitBlobBuilder || self.MozBlobBuilder || self.MSBlobBuilder)();
                  return r3.append(e3), r3.getBlob(t4);
                } catch (e4) {
                  throw new Error("Bug : can't construct the Blob.");
                }
              }
            };
            var l = { stringifyByChunk: function(e3, t4, r3) {
              var n3 = [], o3 = 0, s2 = e3.length;
              if (s2 <= r3)
                return String.fromCharCode.apply(null, e3);
              for (; o3 < s2; )
                "array" === t4 || "nodebuffer" === t4 ? n3.push(String.fromCharCode.apply(null, e3.slice(o3, Math.min(o3 + r3, s2)))) : n3.push(String.fromCharCode.apply(null, e3.subarray(o3, Math.min(o3 + r3, s2)))), o3 += r3;
              return n3.join("");
            }, stringifyByChar: function(e3) {
              for (var t4 = "", r3 = 0; r3 < e3.length; r3++)
                t4 += String.fromCharCode(e3[r3]);
              return t4;
            }, applyCanBeUsed: { uint8array: function() {
              try {
                return o2.uint8array && 1 === String.fromCharCode.apply(null, new Uint8Array(1)).length;
              } catch (e3) {
                return false;
              }
            }(), nodebuffer: function() {
              try {
                return o2.nodebuffer && 1 === String.fromCharCode.apply(null, i.allocBuffer(1)).length;
              } catch (e3) {
                return false;
              }
            }() } };
            function d(e3) {
              var t4 = 65536, r3 = n2.getTypeOf(e3), o3 = true;
              if ("uint8array" === r3 ? o3 = l.applyCanBeUsed.uint8array : "nodebuffer" === r3 && (o3 = l.applyCanBeUsed.nodebuffer), o3)
                for (; 1 < t4; )
                  try {
                    return l.stringifyByChunk(e3, r3, t4);
                  } catch (e4) {
                    t4 = Math.floor(t4 / 2);
                  }
              return l.stringifyByChar(e3);
            }
            function p(e3, t4) {
              for (var r3 = 0; r3 < e3.length; r3++)
                t4[r3] = e3[r3];
              return t4;
            }
            n2.applyFromCharCode = d;
            var h = {};
            h.string = { string: u, array: function(e3) {
              return c(e3, new Array(e3.length));
            }, arraybuffer: function(e3) {
              return h.string.uint8array(e3).buffer;
            }, uint8array: function(e3) {
              return c(e3, new Uint8Array(e3.length));
            }, nodebuffer: function(e3) {
              return c(e3, i.allocBuffer(e3.length));
            } }, h.array = { string: d, array: u, arraybuffer: function(e3) {
              return new Uint8Array(e3).buffer;
            }, uint8array: function(e3) {
              return new Uint8Array(e3);
            }, nodebuffer: function(e3) {
              return i.newBufferFrom(e3);
            } }, h.arraybuffer = { string: function(e3) {
              return d(new Uint8Array(e3));
            }, array: function(e3) {
              return p(new Uint8Array(e3), new Array(e3.byteLength));
            }, arraybuffer: u, uint8array: function(e3) {
              return new Uint8Array(e3);
            }, nodebuffer: function(e3) {
              return i.newBufferFrom(new Uint8Array(e3));
            } }, h.uint8array = { string: d, array: function(e3) {
              return p(e3, new Array(e3.length));
            }, arraybuffer: function(e3) {
              return e3.buffer;
            }, uint8array: u, nodebuffer: function(e3) {
              return i.newBufferFrom(e3);
            } }, h.nodebuffer = { string: d, array: function(e3) {
              return p(e3, new Array(e3.length));
            }, arraybuffer: function(e3) {
              return h.nodebuffer.uint8array(e3).buffer;
            }, uint8array: function(e3) {
              return p(e3, new Uint8Array(e3.length));
            }, nodebuffer: u }, n2.transformTo = function(e3, t4) {
              if (t4 = t4 || "", !e3)
                return t4;
              n2.checkSupport(e3);
              var r3 = n2.getTypeOf(t4);
              return h[r3][e3](t4);
            }, n2.resolve = function(e3) {
              for (var t4 = e3.split("/"), r3 = [], n3 = 0; n3 < t4.length; n3++) {
                var o3 = t4[n3];
                "." === o3 || "" === o3 && 0 !== n3 && n3 !== t4.length - 1 || (".." === o3 ? r3.pop() : r3.push(o3));
              }
              return r3.join("/");
            }, n2.getTypeOf = function(e3) {
              return "string" == typeof e3 ? "string" : "[object Array]" === Object.prototype.toString.call(e3) ? "array" : o2.nodebuffer && i.isBuffer(e3) ? "nodebuffer" : o2.uint8array && e3 instanceof Uint8Array ? "uint8array" : o2.arraybuffer && e3 instanceof ArrayBuffer ? "arraybuffer" : void 0;
            }, n2.checkSupport = function(e3) {
              if (!o2[e3.toLowerCase()])
                throw new Error(e3 + " is not supported by this platform");
            }, n2.MAX_VALUE_16BITS = 65535, n2.MAX_VALUE_32BITS = -1, n2.pretty = function(e3) {
              for (var t4, r3 = "", n3 = 0; n3 < (e3 || "").length; n3++)
                r3 += "\\x" + ((t4 = e3.charCodeAt(n3)) < 16 ? "0" : "") + t4.toString(16).toUpperCase();
              return r3;
            }, n2.delay = function(e3, t4, n3) {
              r2(function() {
                e3.apply(n3 || null, t4 || []);
              });
            }, n2.inherits = function(e3, t4) {
              function r3() {
              }
              r3.prototype = t4.prototype, e3.prototype = new r3();
            }, n2.extend = function() {
              for (var e3, t4 = {}, r3 = 0; r3 < arguments.length; r3++)
                for (e3 in arguments[r3])
                  arguments[r3].hasOwnProperty(e3) && void 0 === t4[e3] && (t4[e3] = arguments[r3][e3]);
              return t4;
            }, n2.prepareContent = function(e3, t4, r3, i2, u2) {
              return a.Promise.resolve(t4).then(function(e4) {
                return o2.blob && (e4 instanceof Blob || -1 !== ["[object File]", "[object Blob]"].indexOf(Object.prototype.toString.call(e4))) && "undefined" != typeof FileReader ? new a.Promise(function(t5, r4) {
                  var n3 = new FileReader();
                  n3.onload = function(e5) {
                    t5(e5.target.result);
                  }, n3.onerror = function(e5) {
                    r4(e5.target.error);
                  }, n3.readAsArrayBuffer(e4);
                }) : e4;
              }).then(function(t5) {
                var l2 = n2.getTypeOf(t5);
                return l2 ? ("arraybuffer" === l2 ? t5 = n2.transformTo("uint8array", t5) : "string" === l2 && (u2 ? t5 = s.decode(t5) : r3 && true !== i2 && (t5 = c(l2 = t5, new (o2.uint8array ? Uint8Array : Array)(l2.length)))), t5) : a.Promise.reject(new Error("Can't read the data of '" + e3 + "'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"));
              });
            };
          }, { "./base64": 1, "./external": 6, "./nodejsUtils": 14, "./support": 30, setimmediate: 54 }], 33: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./reader/readerFor"), o2 = e2("./utils"), s = e2("./signature"), i = e2("./zipEntry"), a = (e2("./utf8"), e2("./support"));
            function u(e3) {
              this.files = [], this.loadOptions = e3;
            }
            u.prototype = { checkSignature: function(e3) {
              var t4;
              if (!this.reader.readAndCheckSignature(e3))
                throw this.reader.index -= 4, t4 = this.reader.readString(4), new Error("Corrupted zip or bug: unexpected signature (" + o2.pretty(t4) + ", expected " + o2.pretty(e3) + ")");
            }, isSignature: function(e3, t4) {
              var r4 = this.reader.index;
              this.reader.setIndex(e3), e3 = this.reader.readString(4) === t4;
              return this.reader.setIndex(r4), e3;
            }, readBlockEndOfCentral: function() {
              this.diskNumber = this.reader.readInt(2), this.diskWithCentralDirStart = this.reader.readInt(2), this.centralDirRecordsOnThisDisk = this.reader.readInt(2), this.centralDirRecords = this.reader.readInt(2), this.centralDirSize = this.reader.readInt(4), this.centralDirOffset = this.reader.readInt(4), this.zipCommentLength = this.reader.readInt(2);
              var e3 = this.reader.readData(this.zipCommentLength), t4 = a.uint8array ? "uint8array" : "array";
              t4 = o2.transformTo(t4, e3);
              this.zipComment = this.loadOptions.decodeFileName(t4);
            }, readBlockZip64EndOfCentral: function() {
              this.zip64EndOfCentralSize = this.reader.readInt(8), this.reader.skip(4), this.diskNumber = this.reader.readInt(4), this.diskWithCentralDirStart = this.reader.readInt(4), this.centralDirRecordsOnThisDisk = this.reader.readInt(8), this.centralDirRecords = this.reader.readInt(8), this.centralDirSize = this.reader.readInt(8), this.centralDirOffset = this.reader.readInt(8), this.zip64ExtensibleData = {};
              for (var e3, t4, r4, n3 = this.zip64EndOfCentralSize - 44; 0 < n3; )
                e3 = this.reader.readInt(2), t4 = this.reader.readInt(4), r4 = this.reader.readData(t4), this.zip64ExtensibleData[e3] = { id: e3, length: t4, value: r4 };
            }, readBlockZip64EndOfCentralLocator: function() {
              if (this.diskWithZip64CentralDirStart = this.reader.readInt(4), this.relativeOffsetEndOfZip64CentralDir = this.reader.readInt(8), this.disksCount = this.reader.readInt(4), 1 < this.disksCount)
                throw new Error("Multi-volumes zip are not supported");
            }, readLocalFiles: function() {
              for (var e3, t4 = 0; t4 < this.files.length; t4++)
                e3 = this.files[t4], this.reader.setIndex(e3.localHeaderOffset), this.checkSignature(s.LOCAL_FILE_HEADER), e3.readLocalPart(this.reader), e3.handleUTF8(), e3.processAttributes();
            }, readCentralDir: function() {
              var e3;
              for (this.reader.setIndex(this.centralDirOffset); this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER); )
                (e3 = new i({ zip64: this.zip64 }, this.loadOptions)).readCentralPart(this.reader), this.files.push(e3);
              if (this.centralDirRecords !== this.files.length && 0 !== this.centralDirRecords && 0 === this.files.length)
                throw new Error("Corrupted zip or bug: expected " + this.centralDirRecords + " records in central dir, got " + this.files.length);
            }, readEndOfCentral: function() {
              var e3 = this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);
              if (e3 < 0)
                throw this.isSignature(0, s.LOCAL_FILE_HEADER) ? new Error("Corrupted zip: can't find end of central directory") : new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");
              this.reader.setIndex(e3);
              var t4 = e3;
              if (this.checkSignature(s.CENTRAL_DIRECTORY_END), this.readBlockEndOfCentral(), this.diskNumber === o2.MAX_VALUE_16BITS || this.diskWithCentralDirStart === o2.MAX_VALUE_16BITS || this.centralDirRecordsOnThisDisk === o2.MAX_VALUE_16BITS || this.centralDirRecords === o2.MAX_VALUE_16BITS || this.centralDirSize === o2.MAX_VALUE_32BITS || this.centralDirOffset === o2.MAX_VALUE_32BITS) {
                if (this.zip64 = true, (e3 = this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR)) < 0)
                  throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");
                if (this.reader.setIndex(e3), this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR), this.readBlockZip64EndOfCentralLocator(), !this.isSignature(this.relativeOffsetEndOfZip64CentralDir, s.ZIP64_CENTRAL_DIRECTORY_END) && (this.relativeOffsetEndOfZip64CentralDir = this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END), this.relativeOffsetEndOfZip64CentralDir < 0))
                  throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");
                this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir), this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END), this.readBlockZip64EndOfCentral();
              }
              if (e3 = this.centralDirOffset + this.centralDirSize, 0 < (e3 = t4 - (e3 = this.zip64 ? e3 + 20 + (12 + this.zip64EndOfCentralSize) : e3)))
                this.isSignature(t4, s.CENTRAL_FILE_HEADER) || (this.reader.zero = e3);
              else if (e3 < 0)
                throw new Error("Corrupted zip: missing " + Math.abs(e3) + " bytes.");
            }, prepareReader: function(e3) {
              this.reader = n2(e3);
            }, load: function(e3) {
              this.prepareReader(e3), this.readEndOfCentral(), this.readCentralDir(), this.readLocalFiles();
            } }, t3.exports = u;
          }, { "./reader/readerFor": 22, "./signature": 23, "./support": 30, "./utf8": 31, "./utils": 32, "./zipEntry": 34 }], 34: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./reader/readerFor"), o2 = e2("./utils"), s = e2("./compressedObject"), i = e2("./crc32"), a = e2("./utf8"), u = e2("./compressions"), c = e2("./support");
            function l(e3, t4) {
              this.options = e3, this.loadOptions = t4;
            }
            l.prototype = { isEncrypted: function() {
              return 1 == (1 & this.bitFlag);
            }, useUTF8: function() {
              return 2048 == (2048 & this.bitFlag);
            }, readLocalPart: function(e3) {
              var t4;
              if (e3.skip(22), this.fileNameLength = e3.readInt(2), t4 = e3.readInt(2), this.fileName = e3.readData(this.fileNameLength), e3.skip(t4), -1 === this.compressedSize || -1 === this.uncompressedSize)
                throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");
              if (null === (t4 = function(e4) {
                for (var t5 in u)
                  if (u.hasOwnProperty(t5) && u[t5].magic === e4)
                    return u[t5];
                return null;
              }(this.compressionMethod)))
                throw new Error("Corrupted zip : compression " + o2.pretty(this.compressionMethod) + " unknown (inner file : " + o2.transformTo("string", this.fileName) + ")");
              this.decompressed = new s(this.compressedSize, this.uncompressedSize, this.crc32, t4, e3.readData(this.compressedSize));
            }, readCentralPart: function(e3) {
              this.versionMadeBy = e3.readInt(2), e3.skip(2), this.bitFlag = e3.readInt(2), this.compressionMethod = e3.readString(2), this.date = e3.readDate(), this.crc32 = e3.readInt(4), this.compressedSize = e3.readInt(4), this.uncompressedSize = e3.readInt(4);
              var t4 = e3.readInt(2);
              if (this.extraFieldsLength = e3.readInt(2), this.fileCommentLength = e3.readInt(2), this.diskNumberStart = e3.readInt(2), this.internalFileAttributes = e3.readInt(2), this.externalFileAttributes = e3.readInt(4), this.localHeaderOffset = e3.readInt(4), this.isEncrypted())
                throw new Error("Encrypted zip are not supported");
              e3.skip(t4), this.readExtraFields(e3), this.parseZIP64ExtraField(e3), this.fileComment = e3.readData(this.fileCommentLength);
            }, processAttributes: function() {
              this.unixPermissions = null, this.dosPermissions = null;
              var e3 = this.versionMadeBy >> 8;
              this.dir = !!(16 & this.externalFileAttributes), 0 == e3 && (this.dosPermissions = 63 & this.externalFileAttributes), 3 == e3 && (this.unixPermissions = this.externalFileAttributes >> 16 & 65535), this.dir || "/" !== this.fileNameStr.slice(-1) || (this.dir = true);
            }, parseZIP64ExtraField: function(e3) {
              var t4;
              this.extraFields[1] && (t4 = n2(this.extraFields[1].value), this.uncompressedSize === o2.MAX_VALUE_32BITS && (this.uncompressedSize = t4.readInt(8)), this.compressedSize === o2.MAX_VALUE_32BITS && (this.compressedSize = t4.readInt(8)), this.localHeaderOffset === o2.MAX_VALUE_32BITS && (this.localHeaderOffset = t4.readInt(8)), this.diskNumberStart === o2.MAX_VALUE_32BITS && (this.diskNumberStart = t4.readInt(4)));
            }, readExtraFields: function(e3) {
              var t4, r4, n3, o3 = e3.index + this.extraFieldsLength;
              for (this.extraFields || (this.extraFields = {}); e3.index + 4 < o3; )
                t4 = e3.readInt(2), r4 = e3.readInt(2), n3 = e3.readData(r4), this.extraFields[t4] = { id: t4, length: r4, value: n3 };
              e3.setIndex(o3);
            }, handleUTF8: function() {
              var e3, t4 = c.uint8array ? "uint8array" : "array";
              this.useUTF8() ? (this.fileNameStr = a.utf8decode(this.fileName), this.fileCommentStr = a.utf8decode(this.fileComment)) : (null !== (e3 = this.findExtraFieldUnicodePath()) ? this.fileNameStr = e3 : (e3 = o2.transformTo(t4, this.fileName), this.fileNameStr = this.loadOptions.decodeFileName(e3)), null !== (e3 = this.findExtraFieldUnicodeComment()) ? this.fileCommentStr = e3 : (e3 = o2.transformTo(t4, this.fileComment), this.fileCommentStr = this.loadOptions.decodeFileName(e3)));
            }, findExtraFieldUnicodePath: function() {
              var e3, t4 = this.extraFields[28789];
              return t4 && 1 === (e3 = n2(t4.value)).readInt(1) && i(this.fileName) === e3.readInt(4) ? a.utf8decode(e3.readData(t4.length - 5)) : null;
            }, findExtraFieldUnicodeComment: function() {
              var e3, t4 = this.extraFields[25461];
              return t4 && 1 === (e3 = n2(t4.value)).readInt(1) && i(this.fileComment) === e3.readInt(4) ? a.utf8decode(e3.readData(t4.length - 5)) : null;
            } }, t3.exports = l;
          }, { "./compressedObject": 2, "./compressions": 3, "./crc32": 4, "./reader/readerFor": 22, "./support": 30, "./utf8": 31, "./utils": 32 }], 35: [function(e2, t3, r3) {
            "use strict";
            function n2(e3, t4, r4) {
              this.name = e3, this.dir = r4.dir, this.date = r4.date, this.comment = r4.comment, this.unixPermissions = r4.unixPermissions, this.dosPermissions = r4.dosPermissions, this._data = t4, this._dataBinary = r4.binary, this.options = { compression: r4.compression, compressionOptions: r4.compressionOptions };
            }
            var o2 = e2("./stream/StreamHelper"), s = e2("./stream/DataWorker"), i = e2("./utf8"), a = e2("./compressedObject"), u = e2("./stream/GenericWorker");
            n2.prototype = { internalStream: function(e3) {
              var t4 = null, r4 = "string";
              try {
                if (!e3)
                  throw new Error("No output type specified.");
                var n3 = "string" === (r4 = e3.toLowerCase()) || "text" === r4, s2 = ("binarystring" !== r4 && "text" !== r4 || (r4 = "string"), t4 = this._decompressWorker(), !this._dataBinary);
                s2 && !n3 && (t4 = t4.pipe(new i.Utf8EncodeWorker())), !s2 && n3 && (t4 = t4.pipe(new i.Utf8DecodeWorker()));
              } catch (e4) {
                (t4 = new u("error")).error(e4);
              }
              return new o2(t4, r4, "");
            }, async: function(e3, t4) {
              return this.internalStream(e3).accumulate(t4);
            }, nodeStream: function(e3, t4) {
              return this.internalStream(e3 || "nodebuffer").toNodejsStream(t4);
            }, _compressWorker: function(e3, t4) {
              if (this._data instanceof a && this._data.compression.magic === e3.magic)
                return this._data.getCompressedWorker();
              var r4 = this._decompressWorker();
              return this._dataBinary || (r4 = r4.pipe(new i.Utf8EncodeWorker())), a.createWorkerFrom(r4, e3, t4);
            }, _decompressWorker: function() {
              return this._data instanceof a ? this._data.getContentWorker() : this._data instanceof u ? this._data : new s(this._data);
            } };
            for (var c = ["asText", "asBinary", "asNodeBuffer", "asUint8Array", "asArrayBuffer"], l = function() {
              throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.");
            }, d = 0; d < c.length; d++)
              n2.prototype[c[d]] = l;
            t3.exports = n2;
          }, { "./compressedObject": 2, "./stream/DataWorker": 27, "./stream/GenericWorker": 28, "./stream/StreamHelper": 29, "./utf8": 31 }], 36: [function(e2, t3, r3) {
            (function(e3) {
              "use strict";
              var r4, n2, o2, s, i = e3.MutationObserver || e3.WebKitMutationObserver, a = i ? (n2 = 0, i = new i(c), o2 = e3.document.createTextNode(""), i.observe(o2, { characterData: true }), function() {
                o2.data = n2 = ++n2 % 2;
              }) : e3.setImmediate || void 0 === e3.MessageChannel ? "document" in e3 && "onreadystatechange" in e3.document.createElement("script") ? function() {
                var t4 = e3.document.createElement("script");
                t4.onreadystatechange = function() {
                  c(), t4.onreadystatechange = null, t4.parentNode.removeChild(t4), t4 = null;
                }, e3.document.documentElement.appendChild(t4);
              } : function() {
                setTimeout(c, 0);
              } : ((s = new e3.MessageChannel()).port1.onmessage = c, function() {
                s.port2.postMessage(0);
              }), u = [];
              function c() {
                var e4, t4;
                r4 = true;
                for (var n3 = u.length; n3; ) {
                  for (t4 = u, u = [], e4 = -1; ++e4 < n3; )
                    t4[e4]();
                  n3 = u.length;
                }
                r4 = false;
              }
              t3.exports = function(e4) {
                1 !== u.push(e4) || r4 || a();
              };
            }).call(this, void 0 !== n ? n : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
          }, {}], 37: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("immediate");
            function o2() {
            }
            var s = {}, i = ["REJECTED"], a = ["FULFILLED"], u = ["PENDING"];
            function c(e3) {
              if ("function" != typeof e3)
                throw new TypeError("resolver must be a function");
              this.state = u, this.queue = [], this.outcome = void 0, e3 !== o2 && h(this, e3);
            }
            function l(e3, t4, r4) {
              this.promise = e3, "function" == typeof t4 && (this.onFulfilled = t4, this.callFulfilled = this.otherCallFulfilled), "function" == typeof r4 && (this.onRejected = r4, this.callRejected = this.otherCallRejected);
            }
            function d(e3, t4, r4) {
              n2(function() {
                var n3;
                try {
                  n3 = t4(r4);
                } catch (n4) {
                  return s.reject(e3, n4);
                }
                n3 === e3 ? s.reject(e3, new TypeError("Cannot resolve promise with itself")) : s.resolve(e3, n3);
              });
            }
            function p(e3) {
              var t4 = e3 && e3.then;
              if (e3 && ("object" == typeof e3 || "function" == typeof e3) && "function" == typeof t4)
                return function() {
                  t4.apply(e3, arguments);
                };
            }
            function h(e3, t4) {
              var r4 = false;
              function n3(t5) {
                r4 || (r4 = true, s.reject(e3, t5));
              }
              function o3(t5) {
                r4 || (r4 = true, s.resolve(e3, t5));
              }
              var i2 = g(function() {
                t4(o3, n3);
              });
              "error" === i2.status && n3(i2.value);
            }
            function g(e3, t4) {
              var r4 = {};
              try {
                r4.value = e3(t4), r4.status = "success";
              } catch (e4) {
                r4.status = "error", r4.value = e4;
              }
              return r4;
            }
            (t3.exports = c).prototype.finally = function(e3) {
              if ("function" != typeof e3)
                return this;
              var t4 = this.constructor;
              return this.then(function(r4) {
                return t4.resolve(e3()).then(function() {
                  return r4;
                });
              }, function(r4) {
                return t4.resolve(e3()).then(function() {
                  throw r4;
                });
              });
            }, c.prototype.catch = function(e3) {
              return this.then(null, e3);
            }, c.prototype.then = function(e3, t4) {
              if ("function" != typeof e3 && this.state === a || "function" != typeof t4 && this.state === i)
                return this;
              var r4 = new this.constructor(o2);
              return this.state !== u ? d(r4, this.state === a ? e3 : t4, this.outcome) : this.queue.push(new l(r4, e3, t4)), r4;
            }, l.prototype.callFulfilled = function(e3) {
              s.resolve(this.promise, e3);
            }, l.prototype.otherCallFulfilled = function(e3) {
              d(this.promise, this.onFulfilled, e3);
            }, l.prototype.callRejected = function(e3) {
              s.reject(this.promise, e3);
            }, l.prototype.otherCallRejected = function(e3) {
              d(this.promise, this.onRejected, e3);
            }, s.resolve = function(e3, t4) {
              var r4 = g(p, t4);
              if ("error" === r4.status)
                return s.reject(e3, r4.value);
              if (r4 = r4.value)
                h(e3, r4);
              else {
                e3.state = a, e3.outcome = t4;
                for (var n3 = -1, o3 = e3.queue.length; ++n3 < o3; )
                  e3.queue[n3].callFulfilled(t4);
              }
              return e3;
            }, s.reject = function(e3, t4) {
              e3.state = i, e3.outcome = t4;
              for (var r4 = -1, n3 = e3.queue.length; ++r4 < n3; )
                e3.queue[r4].callRejected(t4);
              return e3;
            }, c.resolve = function(e3) {
              return e3 instanceof this ? e3 : s.resolve(new this(o2), e3);
            }, c.reject = function(e3) {
              var t4 = new this(o2);
              return s.reject(t4, e3);
            }, c.all = function(e3) {
              var t4 = this;
              if ("[object Array]" !== Object.prototype.toString.call(e3))
                return this.reject(new TypeError("must be an array"));
              var r4 = e3.length, n3 = false;
              if (!r4)
                return this.resolve([]);
              for (var i2 = new Array(r4), a2 = 0, u2 = -1, c2 = new this(o2); ++u2 < r4; )
                !function(e4, o3) {
                  t4.resolve(e4).then(function(e5) {
                    i2[o3] = e5, ++a2 !== r4 || n3 || (n3 = true, s.resolve(c2, i2));
                  }, function(e5) {
                    n3 || (n3 = true, s.reject(c2, e5));
                  });
                }(e3[u2], u2);
              return c2;
            }, c.race = function(e3) {
              if ("[object Array]" !== Object.prototype.toString.call(e3))
                return this.reject(new TypeError("must be an array"));
              var t4 = e3.length, r4 = false;
              if (!t4)
                return this.resolve([]);
              for (var n3, i2 = -1, a2 = new this(o2); ++i2 < t4; )
                n3 = e3[i2], this.resolve(n3).then(function(e4) {
                  r4 || (r4 = true, s.resolve(a2, e4));
                }, function(e4) {
                  r4 || (r4 = true, s.reject(a2, e4));
                });
              return a2;
            };
          }, { immediate: 36 }], 38: [function(e2, t3, r3) {
            "use strict";
            var n2 = {};
            (0, e2("./lib/utils/common").assign)(n2, e2("./lib/deflate"), e2("./lib/inflate"), e2("./lib/zlib/constants")), t3.exports = n2;
          }, { "./lib/deflate": 39, "./lib/inflate": 40, "./lib/utils/common": 41, "./lib/zlib/constants": 44 }], 39: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./zlib/deflate"), o2 = e2("./utils/common"), s = e2("./utils/strings"), i = e2("./zlib/messages"), a = e2("./zlib/zstream"), u = Object.prototype.toString;
            function c(e3) {
              if (!(this instanceof c))
                return new c(e3);
              this.options = o2.assign({ level: -1, method: 8, chunkSize: 16384, windowBits: 15, memLevel: 8, strategy: 0, to: "" }, e3 || {});
              var t4 = ((e3 = this.options).raw && 0 < e3.windowBits ? e3.windowBits = -e3.windowBits : e3.gzip && 0 < e3.windowBits && e3.windowBits < 16 && (e3.windowBits += 16), this.err = 0, this.msg = "", this.ended = false, this.chunks = [], this.strm = new a(), this.strm.avail_out = 0, n2.deflateInit2(this.strm, e3.level, e3.method, e3.windowBits, e3.memLevel, e3.strategy));
              if (0 !== t4)
                throw new Error(i[t4]);
              if (e3.header && n2.deflateSetHeader(this.strm, e3.header), e3.dictionary) {
                if (e3 = "string" == typeof e3.dictionary ? s.string2buf(e3.dictionary) : "[object ArrayBuffer]" === u.call(e3.dictionary) ? new Uint8Array(e3.dictionary) : e3.dictionary, 0 !== (t4 = n2.deflateSetDictionary(this.strm, e3)))
                  throw new Error(i[t4]);
                this._dict_set = true;
              }
            }
            function l(e3, t4) {
              if ((t4 = new c(t4)).push(e3, true), t4.err)
                throw t4.msg || i[t4.err];
              return t4.result;
            }
            c.prototype.push = function(e3, t4) {
              var r4, i2, a2 = this.strm, c2 = this.options.chunkSize;
              if (this.ended)
                return false;
              i2 = t4 === ~~t4 ? t4 : true === t4 ? 4 : 0, "string" == typeof e3 ? a2.input = s.string2buf(e3) : "[object ArrayBuffer]" === u.call(e3) ? a2.input = new Uint8Array(e3) : a2.input = e3, a2.next_in = 0, a2.avail_in = a2.input.length;
              do {
                if (0 === a2.avail_out && (a2.output = new o2.Buf8(c2), a2.next_out = 0, a2.avail_out = c2), 1 !== (r4 = n2.deflate(a2, i2)) && 0 !== r4)
                  return this.onEnd(r4), !(this.ended = true);
              } while (0 !== a2.avail_out && (0 !== a2.avail_in || 4 !== i2 && 2 !== i2) || ("string" === this.options.to ? this.onData(s.buf2binstring(o2.shrinkBuf(a2.output, a2.next_out))) : this.onData(o2.shrinkBuf(a2.output, a2.next_out))), (0 < a2.avail_in || 0 === a2.avail_out) && 1 !== r4);
              return 4 === i2 ? (r4 = n2.deflateEnd(this.strm), this.onEnd(r4), this.ended = true, 0 === r4) : 2 !== i2 || (this.onEnd(0), !(a2.avail_out = 0));
            }, c.prototype.onData = function(e3) {
              this.chunks.push(e3);
            }, c.prototype.onEnd = function(e3) {
              0 === e3 && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = o2.flattenChunks(this.chunks)), this.chunks = [], this.err = e3, this.msg = this.strm.msg;
            }, r3.Deflate = c, r3.deflate = l, r3.deflateRaw = function(e3, t4) {
              return (t4 = t4 || {}).raw = true, l(e3, t4);
            }, r3.gzip = function(e3, t4) {
              return (t4 = t4 || {}).gzip = true, l(e3, t4);
            };
          }, { "./utils/common": 41, "./utils/strings": 42, "./zlib/deflate": 46, "./zlib/messages": 51, "./zlib/zstream": 53 }], 40: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./zlib/inflate"), o2 = e2("./utils/common"), s = e2("./utils/strings"), i = e2("./zlib/constants"), a = e2("./zlib/messages"), u = e2("./zlib/zstream"), c = e2("./zlib/gzheader"), l = Object.prototype.toString;
            function d(e3) {
              if (!(this instanceof d))
                return new d(e3);
              this.options = o2.assign({ chunkSize: 16384, windowBits: 0, to: "" }, e3 || {});
              var t4 = this.options;
              if ((e3 = (t4.raw && 0 <= t4.windowBits && t4.windowBits < 16 && (t4.windowBits = -t4.windowBits, 0 === t4.windowBits && (t4.windowBits = -15)), !(0 <= t4.windowBits && t4.windowBits < 16) || e3 && e3.windowBits || (t4.windowBits += 32), 15 < t4.windowBits && t4.windowBits < 48 && 0 == (15 & t4.windowBits) && (t4.windowBits |= 15), this.err = 0, this.msg = "", this.ended = false, this.chunks = [], this.strm = new u(), this.strm.avail_out = 0, n2.inflateInit2(this.strm, t4.windowBits))) !== i.Z_OK)
                throw new Error(a[e3]);
              this.header = new c(), n2.inflateGetHeader(this.strm, this.header);
            }
            function p(e3, t4) {
              if ((t4 = new d(t4)).push(e3, true), t4.err)
                throw t4.msg || a[t4.err];
              return t4.result;
            }
            d.prototype.push = function(e3, t4) {
              var r4, a2, u2, c2, d2, p2 = this.strm, h = this.options.chunkSize, g = this.options.dictionary, f = false;
              if (this.ended)
                return false;
              a2 = t4 === ~~t4 ? t4 : true === t4 ? i.Z_FINISH : i.Z_NO_FLUSH, "string" == typeof e3 ? p2.input = s.binstring2buf(e3) : "[object ArrayBuffer]" === l.call(e3) ? p2.input = new Uint8Array(e3) : p2.input = e3, p2.next_in = 0, p2.avail_in = p2.input.length;
              do {
                if (0 === p2.avail_out && (p2.output = new o2.Buf8(h), p2.next_out = 0, p2.avail_out = h), (r4 = n2.inflate(p2, i.Z_NO_FLUSH)) === i.Z_NEED_DICT && g && (d2 = "string" == typeof g ? s.string2buf(g) : "[object ArrayBuffer]" === l.call(g) ? new Uint8Array(g) : g, r4 = n2.inflateSetDictionary(this.strm, d2)), r4 === i.Z_BUF_ERROR && true === f && (r4 = i.Z_OK, f = false), r4 !== i.Z_STREAM_END && r4 !== i.Z_OK)
                  return this.onEnd(r4), !(this.ended = true);
              } while (!p2.next_out || 0 !== p2.avail_out && r4 !== i.Z_STREAM_END && (0 !== p2.avail_in || a2 !== i.Z_FINISH && a2 !== i.Z_SYNC_FLUSH) || ("string" === this.options.to ? (d2 = s.utf8border(p2.output, p2.next_out), u2 = p2.next_out - d2, c2 = s.buf2string(p2.output, d2), p2.next_out = u2, p2.avail_out = h - u2, u2 && o2.arraySet(p2.output, p2.output, d2, u2, 0), this.onData(c2)) : this.onData(o2.shrinkBuf(p2.output, p2.next_out))), 0 === p2.avail_in && 0 === p2.avail_out && (f = true), (0 < p2.avail_in || 0 === p2.avail_out) && r4 !== i.Z_STREAM_END);
              return (a2 = r4 === i.Z_STREAM_END ? i.Z_FINISH : a2) === i.Z_FINISH ? (r4 = n2.inflateEnd(this.strm), this.onEnd(r4), this.ended = true, r4 === i.Z_OK) : a2 !== i.Z_SYNC_FLUSH || (this.onEnd(i.Z_OK), !(p2.avail_out = 0));
            }, d.prototype.onData = function(e3) {
              this.chunks.push(e3);
            }, d.prototype.onEnd = function(e3) {
              e3 === i.Z_OK && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = o2.flattenChunks(this.chunks)), this.chunks = [], this.err = e3, this.msg = this.strm.msg;
            }, r3.Inflate = d, r3.inflate = p, r3.inflateRaw = function(e3, t4) {
              return (t4 = t4 || {}).raw = true, p(e3, t4);
            }, r3.ungzip = p;
          }, { "./utils/common": 41, "./utils/strings": 42, "./zlib/constants": 44, "./zlib/gzheader": 47, "./zlib/inflate": 49, "./zlib/messages": 51, "./zlib/zstream": 53 }], 41: [function(e2, t3, r3) {
            "use strict";
            var n2 = "undefined" != typeof Uint8Array && "undefined" != typeof Uint16Array && "undefined" != typeof Int32Array, o2 = (r3.assign = function(e3) {
              for (var t4 = Array.prototype.slice.call(arguments, 1); t4.length; ) {
                var r4 = t4.shift();
                if (r4) {
                  if ("object" != typeof r4)
                    throw new TypeError(r4 + "must be non-object");
                  for (var n3 in r4)
                    r4.hasOwnProperty(n3) && (e3[n3] = r4[n3]);
                }
              }
              return e3;
            }, r3.shrinkBuf = function(e3, t4) {
              return e3.length === t4 ? e3 : e3.subarray ? e3.subarray(0, t4) : (e3.length = t4, e3);
            }, { arraySet: function(e3, t4, r4, n3, o3) {
              if (t4.subarray && e3.subarray)
                e3.set(t4.subarray(r4, r4 + n3), o3);
              else
                for (var s2 = 0; s2 < n3; s2++)
                  e3[o3 + s2] = t4[r4 + s2];
            }, flattenChunks: function(e3) {
              for (var t4, r4, n3, o3, s2 = t4 = 0, i = e3.length; s2 < i; s2++)
                t4 += e3[s2].length;
              for (o3 = new Uint8Array(t4), s2 = r4 = 0, i = e3.length; s2 < i; s2++)
                n3 = e3[s2], o3.set(n3, r4), r4 += n3.length;
              return o3;
            } }), s = { arraySet: function(e3, t4, r4, n3, o3) {
              for (var s2 = 0; s2 < n3; s2++)
                e3[o3 + s2] = t4[r4 + s2];
            }, flattenChunks: function(e3) {
              return [].concat.apply([], e3);
            } };
            r3.setTyped = function(e3) {
              e3 ? (r3.Buf8 = Uint8Array, r3.Buf16 = Uint16Array, r3.Buf32 = Int32Array, r3.assign(r3, o2)) : (r3.Buf8 = Array, r3.Buf16 = Array, r3.Buf32 = Array, r3.assign(r3, s));
            }, r3.setTyped(n2);
          }, {}], 42: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./common"), o2 = true, s = true;
            try {
              String.fromCharCode.apply(null, [0]);
            } catch (e3) {
              o2 = false;
            }
            try {
              String.fromCharCode.apply(null, new Uint8Array(1));
            } catch (e3) {
              s = false;
            }
            for (var i = new n2.Buf8(256), a = 0; a < 256; a++)
              i[a] = 252 <= a ? 6 : 248 <= a ? 5 : 240 <= a ? 4 : 224 <= a ? 3 : 192 <= a ? 2 : 1;
            function u(e3, t4) {
              if (t4 < 65537 && (e3.subarray && s || !e3.subarray && o2))
                return String.fromCharCode.apply(null, n2.shrinkBuf(e3, t4));
              for (var r4 = "", i2 = 0; i2 < t4; i2++)
                r4 += String.fromCharCode(e3[i2]);
              return r4;
            }
            i[254] = i[254] = 1, r3.string2buf = function(e3) {
              for (var t4, r4, o3, s2, i2 = e3.length, a2 = 0, u2 = 0; u2 < i2; u2++)
                55296 == (64512 & (r4 = e3.charCodeAt(u2))) && u2 + 1 < i2 && 56320 == (64512 & (o3 = e3.charCodeAt(u2 + 1))) && (r4 = 65536 + (r4 - 55296 << 10) + (o3 - 56320), u2++), a2 += r4 < 128 ? 1 : r4 < 2048 ? 2 : r4 < 65536 ? 3 : 4;
              for (t4 = new n2.Buf8(a2), u2 = s2 = 0; s2 < a2; u2++)
                55296 == (64512 & (r4 = e3.charCodeAt(u2))) && u2 + 1 < i2 && 56320 == (64512 & (o3 = e3.charCodeAt(u2 + 1))) && (r4 = 65536 + (r4 - 55296 << 10) + (o3 - 56320), u2++), r4 < 128 ? t4[s2++] = r4 : (r4 < 2048 ? t4[s2++] = 192 | r4 >>> 6 : (r4 < 65536 ? t4[s2++] = 224 | r4 >>> 12 : (t4[s2++] = 240 | r4 >>> 18, t4[s2++] = 128 | r4 >>> 12 & 63), t4[s2++] = 128 | r4 >>> 6 & 63), t4[s2++] = 128 | 63 & r4);
              return t4;
            }, r3.buf2binstring = function(e3) {
              return u(e3, e3.length);
            }, r3.binstring2buf = function(e3) {
              for (var t4 = new n2.Buf8(e3.length), r4 = 0, o3 = t4.length; r4 < o3; r4++)
                t4[r4] = e3.charCodeAt(r4);
              return t4;
            }, r3.buf2string = function(e3, t4) {
              for (var r4, n3, o3, s2 = t4 || e3.length, a2 = new Array(2 * s2), c = r4 = 0; c < s2; )
                if ((n3 = e3[c++]) < 128)
                  a2[r4++] = n3;
                else if (4 < (o3 = i[n3]))
                  a2[r4++] = 65533, c += o3 - 1;
                else {
                  for (n3 &= 2 === o3 ? 31 : 3 === o3 ? 15 : 7; 1 < o3 && c < s2; )
                    n3 = n3 << 6 | 63 & e3[c++], o3--;
                  1 < o3 ? a2[r4++] = 65533 : n3 < 65536 ? a2[r4++] = n3 : (n3 -= 65536, a2[r4++] = 55296 | n3 >> 10 & 1023, a2[r4++] = 56320 | 1023 & n3);
                }
              return u(a2, r4);
            }, r3.utf8border = function(e3, t4) {
              for (var r4 = (t4 = (t4 = t4 || e3.length) > e3.length ? e3.length : t4) - 1; 0 <= r4 && 128 == (192 & e3[r4]); )
                r4--;
              return !(r4 < 0) && 0 !== r4 && r4 + i[e3[r4]] > t4 ? r4 : t4;
            };
          }, { "./common": 41 }], 43: [function(e2, t3, r3) {
            "use strict";
            t3.exports = function(e3, t4, r4, n2) {
              for (var o2 = 65535 & e3 | 0, s = e3 >>> 16 & 65535 | 0, i = 0; 0 !== r4; ) {
                for (r4 -= i = 2e3 < r4 ? 2e3 : r4; s = s + (o2 = o2 + t4[n2++] | 0) | 0, --i; )
                  ;
                o2 %= 65521, s %= 65521;
              }
              return o2 | s << 16 | 0;
            };
          }, {}], 44: [function(e2, t3, r3) {
            "use strict";
            t3.exports = { Z_NO_FLUSH: 0, Z_PARTIAL_FLUSH: 1, Z_SYNC_FLUSH: 2, Z_FULL_FLUSH: 3, Z_FINISH: 4, Z_BLOCK: 5, Z_TREES: 6, Z_OK: 0, Z_STREAM_END: 1, Z_NEED_DICT: 2, Z_ERRNO: -1, Z_STREAM_ERROR: -2, Z_DATA_ERROR: -3, Z_BUF_ERROR: -5, Z_NO_COMPRESSION: 0, Z_BEST_SPEED: 1, Z_BEST_COMPRESSION: 9, Z_DEFAULT_COMPRESSION: -1, Z_FILTERED: 1, Z_HUFFMAN_ONLY: 2, Z_RLE: 3, Z_FIXED: 4, Z_DEFAULT_STRATEGY: 0, Z_BINARY: 0, Z_TEXT: 1, Z_UNKNOWN: 2, Z_DEFLATED: 8 };
          }, {}], 45: [function(e2, t3, r3) {
            "use strict";
            var n2 = function() {
              for (var e3 = [], t4 = 0; t4 < 256; t4++) {
                for (var r4 = t4, n3 = 0; n3 < 8; n3++)
                  r4 = 1 & r4 ? 3988292384 ^ r4 >>> 1 : r4 >>> 1;
                e3[t4] = r4;
              }
              return e3;
            }();
            t3.exports = function(e3, t4, r4, o2) {
              var s = n2, i = o2 + r4;
              e3 ^= -1;
              for (var a = o2; a < i; a++)
                e3 = e3 >>> 8 ^ s[255 & (e3 ^ t4[a])];
              return -1 ^ e3;
            };
          }, {}], 46: [function(e2, t3, r3) {
            "use strict";
            var n2, o2 = e2("../utils/common"), s = e2("./trees"), i = e2("./adler32"), a = e2("./crc32"), u = e2("./messages"), c = -2, l = 258, d = 262, p = 113;
            function h(e3, t4) {
              return e3.msg = u[t4], t4;
            }
            function g(e3) {
              return (e3 << 1) - (4 < e3 ? 9 : 0);
            }
            function f(e3) {
              for (var t4 = e3.length; 0 <= --t4; )
                e3[t4] = 0;
            }
            function m(e3) {
              var t4 = e3.state, r4 = t4.pending;
              0 !== (r4 = r4 > e3.avail_out ? e3.avail_out : r4) && (o2.arraySet(e3.output, t4.pending_buf, t4.pending_out, r4, e3.next_out), e3.next_out += r4, t4.pending_out += r4, e3.total_out += r4, e3.avail_out -= r4, t4.pending -= r4, 0 === t4.pending && (t4.pending_out = 0));
            }
            function _(e3, t4) {
              s._tr_flush_block(e3, 0 <= e3.block_start ? e3.block_start : -1, e3.strstart - e3.block_start, t4), e3.block_start = e3.strstart, m(e3.strm);
            }
            function v(e3, t4) {
              e3.pending_buf[e3.pending++] = t4;
            }
            function b(e3, t4) {
              e3.pending_buf[e3.pending++] = t4 >>> 8 & 255, e3.pending_buf[e3.pending++] = 255 & t4;
            }
            function y(e3, t4) {
              var r4, n3, o3 = e3.max_chain_length, s2 = e3.strstart, i2 = e3.prev_length, a2 = e3.nice_match, u2 = e3.strstart > e3.w_size - d ? e3.strstart - (e3.w_size - d) : 0, c2 = e3.window, p2 = e3.w_mask, h2 = e3.prev, g2 = e3.strstart + l, f2 = c2[s2 + i2 - 1], m2 = c2[s2 + i2];
              e3.prev_length >= e3.good_match && (o3 >>= 2), a2 > e3.lookahead && (a2 = e3.lookahead);
              do {
                if (c2[(r4 = t4) + i2] === m2 && c2[r4 + i2 - 1] === f2 && c2[r4] === c2[s2] && c2[++r4] === c2[s2 + 1]) {
                  for (s2 += 2, r4++; c2[++s2] === c2[++r4] && c2[++s2] === c2[++r4] && c2[++s2] === c2[++r4] && c2[++s2] === c2[++r4] && c2[++s2] === c2[++r4] && c2[++s2] === c2[++r4] && c2[++s2] === c2[++r4] && c2[++s2] === c2[++r4] && s2 < g2; )
                    ;
                  if (n3 = l - (g2 - s2), s2 = g2 - l, i2 < n3) {
                    if (e3.match_start = t4, a2 <= (i2 = n3))
                      break;
                    f2 = c2[s2 + i2 - 1], m2 = c2[s2 + i2];
                  }
                }
              } while ((t4 = h2[t4 & p2]) > u2 && 0 != --o3);
              return i2 <= e3.lookahead ? i2 : e3.lookahead;
            }
            function M(e3) {
              var t4, r4, n3, s2, u2, c2, l2, p2, h2, g2 = e3.w_size;
              do {
                if (p2 = e3.window_size - e3.lookahead - e3.strstart, e3.strstart >= g2 + (g2 - d)) {
                  for (o2.arraySet(e3.window, e3.window, g2, g2, 0), e3.match_start -= g2, e3.strstart -= g2, e3.block_start -= g2, t4 = r4 = e3.hash_size; n3 = e3.head[--t4], e3.head[t4] = g2 <= n3 ? n3 - g2 : 0, --r4; )
                    ;
                  for (t4 = r4 = g2; n3 = e3.prev[--t4], e3.prev[t4] = g2 <= n3 ? n3 - g2 : 0, --r4; )
                    ;
                  p2 += g2;
                }
                if (0 === e3.strm.avail_in)
                  break;
                if (u2 = e3.strm, c2 = e3.window, l2 = e3.strstart + e3.lookahead, h2 = void 0, r4 = 0 === (h2 = (p2 = p2) < (h2 = u2.avail_in) ? p2 : h2) ? 0 : (u2.avail_in -= h2, o2.arraySet(c2, u2.input, u2.next_in, h2, l2), 1 === u2.state.wrap ? u2.adler = i(u2.adler, c2, h2, l2) : 2 === u2.state.wrap && (u2.adler = a(u2.adler, c2, h2, l2)), u2.next_in += h2, u2.total_in += h2, h2), e3.lookahead += r4, e3.lookahead + e3.insert >= 3)
                  for (s2 = e3.strstart - e3.insert, e3.ins_h = e3.window[s2], e3.ins_h = (e3.ins_h << e3.hash_shift ^ e3.window[s2 + 1]) & e3.hash_mask; e3.insert && (e3.ins_h = (e3.ins_h << e3.hash_shift ^ e3.window[s2 + 3 - 1]) & e3.hash_mask, e3.prev[s2 & e3.w_mask] = e3.head[e3.ins_h], e3.head[e3.ins_h] = s2, s2++, e3.insert--, !(e3.lookahead + e3.insert < 3)); )
                    ;
              } while (e3.lookahead < d && 0 !== e3.strm.avail_in);
            }
            function I(e3, t4) {
              for (var r4, n3; ; ) {
                if (e3.lookahead < d) {
                  if (M(e3), e3.lookahead < d && 0 === t4)
                    return 1;
                  if (0 === e3.lookahead)
                    break;
                }
                if (r4 = 0, e3.lookahead >= 3 && (e3.ins_h = (e3.ins_h << e3.hash_shift ^ e3.window[e3.strstart + 3 - 1]) & e3.hash_mask, r4 = e3.prev[e3.strstart & e3.w_mask] = e3.head[e3.ins_h], e3.head[e3.ins_h] = e3.strstart), 0 !== r4 && e3.strstart - r4 <= e3.w_size - d && (e3.match_length = y(e3, r4)), e3.match_length >= 3)
                  if (n3 = s._tr_tally(e3, e3.strstart - e3.match_start, e3.match_length - 3), e3.lookahead -= e3.match_length, e3.match_length <= e3.max_lazy_match && e3.lookahead >= 3) {
                    for (e3.match_length--; e3.strstart++, e3.ins_h = (e3.ins_h << e3.hash_shift ^ e3.window[e3.strstart + 3 - 1]) & e3.hash_mask, r4 = e3.prev[e3.strstart & e3.w_mask] = e3.head[e3.ins_h], e3.head[e3.ins_h] = e3.strstart, 0 != --e3.match_length; )
                      ;
                    e3.strstart++;
                  } else
                    e3.strstart += e3.match_length, e3.match_length = 0, e3.ins_h = e3.window[e3.strstart], e3.ins_h = (e3.ins_h << e3.hash_shift ^ e3.window[e3.strstart + 1]) & e3.hash_mask;
                else
                  n3 = s._tr_tally(e3, 0, e3.window[e3.strstart]), e3.lookahead--, e3.strstart++;
                if (n3 && (_(e3, false), 0 === e3.strm.avail_out))
                  return 1;
              }
              return e3.insert = e3.strstart < 2 ? e3.strstart : 2, 4 === t4 ? (_(e3, true), 0 === e3.strm.avail_out ? 3 : 4) : e3.last_lit && (_(e3, false), 0 === e3.strm.avail_out) ? 1 : 2;
            }
            function k(e3, t4) {
              for (var r4, n3, o3; ; ) {
                if (e3.lookahead < d) {
                  if (M(e3), e3.lookahead < d && 0 === t4)
                    return 1;
                  if (0 === e3.lookahead)
                    break;
                }
                if (r4 = 0, e3.lookahead >= 3 && (e3.ins_h = (e3.ins_h << e3.hash_shift ^ e3.window[e3.strstart + 3 - 1]) & e3.hash_mask, r4 = e3.prev[e3.strstart & e3.w_mask] = e3.head[e3.ins_h], e3.head[e3.ins_h] = e3.strstart), e3.prev_length = e3.match_length, e3.prev_match = e3.match_start, e3.match_length = 2, 0 !== r4 && e3.prev_length < e3.max_lazy_match && e3.strstart - r4 <= e3.w_size - d && (e3.match_length = y(e3, r4), e3.match_length <= 5 && (1 === e3.strategy || 3 === e3.match_length && 4096 < e3.strstart - e3.match_start) && (e3.match_length = 2)), e3.prev_length >= 3 && e3.match_length <= e3.prev_length) {
                  for (o3 = e3.strstart + e3.lookahead - 3, n3 = s._tr_tally(e3, e3.strstart - 1 - e3.prev_match, e3.prev_length - 3), e3.lookahead -= e3.prev_length - 1, e3.prev_length -= 2; ++e3.strstart <= o3 && (e3.ins_h = (e3.ins_h << e3.hash_shift ^ e3.window[e3.strstart + 3 - 1]) & e3.hash_mask, r4 = e3.prev[e3.strstart & e3.w_mask] = e3.head[e3.ins_h], e3.head[e3.ins_h] = e3.strstart), 0 != --e3.prev_length; )
                    ;
                  if (e3.match_available = 0, e3.match_length = 2, e3.strstart++, n3 && (_(e3, false), 0 === e3.strm.avail_out))
                    return 1;
                } else if (e3.match_available) {
                  if ((n3 = s._tr_tally(e3, 0, e3.window[e3.strstart - 1])) && _(e3, false), e3.strstart++, e3.lookahead--, 0 === e3.strm.avail_out)
                    return 1;
                } else
                  e3.match_available = 1, e3.strstart++, e3.lookahead--;
              }
              return e3.match_available && (n3 = s._tr_tally(e3, 0, e3.window[e3.strstart - 1]), e3.match_available = 0), e3.insert = e3.strstart < 2 ? e3.strstart : 2, 4 === t4 ? (_(e3, true), 0 === e3.strm.avail_out ? 3 : 4) : e3.last_lit && (_(e3, false), 0 === e3.strm.avail_out) ? 1 : 2;
            }
            function w(e3, t4, r4, n3, o3) {
              this.good_length = e3, this.max_lazy = t4, this.nice_length = r4, this.max_chain = n3, this.func = o3;
            }
            function C() {
              this.strm = null, this.status = 0, this.pending_buf = null, this.pending_buf_size = 0, this.pending_out = 0, this.pending = 0, this.wrap = 0, this.gzhead = null, this.gzindex = 0, this.method = 8, this.last_flush = -1, this.w_size = 0, this.w_bits = 0, this.w_mask = 0, this.window = null, this.window_size = 0, this.prev = null, this.head = null, this.ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this.hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this.match_length = 0, this.prev_match = 0, this.match_available = 0, this.strstart = 0, this.match_start = 0, this.lookahead = 0, this.prev_length = 0, this.max_chain_length = 0, this.max_lazy_match = 0, this.level = 0, this.strategy = 0, this.good_match = 0, this.nice_match = 0, this.dyn_ltree = new o2.Buf16(1146), this.dyn_dtree = new o2.Buf16(122), this.bl_tree = new o2.Buf16(78), f(this.dyn_ltree), f(this.dyn_dtree), f(this.bl_tree), this.l_desc = null, this.d_desc = null, this.bl_desc = null, this.bl_count = new o2.Buf16(16), this.heap = new o2.Buf16(573), f(this.heap), this.heap_len = 0, this.heap_max = 0, this.depth = new o2.Buf16(573), f(this.depth), this.l_buf = 0, this.lit_bufsize = 0, this.last_lit = 0, this.d_buf = 0, this.opt_len = 0, this.static_len = 0, this.matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid = 0;
            }
            function S(e3) {
              var t4;
              return e3 && e3.state ? (e3.total_in = e3.total_out = 0, e3.data_type = 2, (t4 = e3.state).pending = 0, t4.pending_out = 0, t4.wrap < 0 && (t4.wrap = -t4.wrap), t4.status = t4.wrap ? 42 : p, e3.adler = 2 === t4.wrap ? 0 : 1, t4.last_flush = 0, s._tr_init(t4), 0) : h(e3, c);
            }
            function D(e3) {
              var t4 = S(e3);
              return 0 === t4 && ((e3 = e3.state).window_size = 2 * e3.w_size, f(e3.head), e3.max_lazy_match = n2[e3.level].max_lazy, e3.good_match = n2[e3.level].good_length, e3.nice_match = n2[e3.level].nice_length, e3.max_chain_length = n2[e3.level].max_chain, e3.strstart = 0, e3.block_start = 0, e3.lookahead = 0, e3.insert = 0, e3.match_length = e3.prev_length = 2, e3.match_available = 0, e3.ins_h = 0), t4;
            }
            function q(e3, t4, r4, n3, s2, i2) {
              if (!e3)
                return c;
              var a2 = 1;
              if (-1 === t4 && (t4 = 6), n3 < 0 ? (a2 = 0, n3 = -n3) : 15 < n3 && (a2 = 2, n3 -= 16), s2 < 1 || 9 < s2 || 8 !== r4 || n3 < 8 || 15 < n3 || t4 < 0 || 9 < t4 || i2 < 0 || 4 < i2)
                return h(e3, c);
              8 === n3 && (n3 = 9);
              var u2 = new C();
              return (e3.state = u2).strm = e3, u2.wrap = a2, u2.gzhead = null, u2.w_bits = n3, u2.w_size = 1 << u2.w_bits, u2.w_mask = u2.w_size - 1, u2.hash_bits = s2 + 7, u2.hash_size = 1 << u2.hash_bits, u2.hash_mask = u2.hash_size - 1, u2.hash_shift = ~~((u2.hash_bits + 3 - 1) / 3), u2.window = new o2.Buf8(2 * u2.w_size), u2.head = new o2.Buf16(u2.hash_size), u2.prev = new o2.Buf16(u2.w_size), u2.lit_bufsize = 1 << s2 + 6, u2.pending_buf_size = 4 * u2.lit_bufsize, u2.pending_buf = new o2.Buf8(u2.pending_buf_size), u2.d_buf = +u2.lit_bufsize, u2.l_buf = 3 * u2.lit_bufsize, u2.level = t4, u2.strategy = i2, u2.method = r4, D(e3);
            }
            n2 = [new w(0, 0, 0, 0, function(e3, t4) {
              var r4 = 65535;
              for (r4 > e3.pending_buf_size - 5 && (r4 = e3.pending_buf_size - 5); ; ) {
                if (e3.lookahead <= 1) {
                  if (M(e3), 0 === e3.lookahead && 0 === t4)
                    return 1;
                  if (0 === e3.lookahead)
                    break;
                }
                e3.strstart += e3.lookahead, e3.lookahead = 0;
                var n3 = e3.block_start + r4;
                if ((0 === e3.strstart || e3.strstart >= n3) && (e3.lookahead = e3.strstart - n3, e3.strstart = n3, _(e3, false), 0 === e3.strm.avail_out))
                  return 1;
                if (e3.strstart - e3.block_start >= e3.w_size - d && (_(e3, false), 0 === e3.strm.avail_out))
                  return 1;
              }
              return e3.insert = 0, 4 === t4 ? (_(e3, true), 0 === e3.strm.avail_out ? 3 : 4) : (e3.strstart > e3.block_start && (_(e3, false), e3.strm.avail_out), 1);
            }), new w(4, 4, 8, 4, I), new w(4, 5, 16, 8, I), new w(4, 6, 32, 32, I), new w(4, 4, 16, 16, k), new w(8, 16, 32, 32, k), new w(8, 16, 128, 128, k), new w(8, 32, 128, 256, k), new w(32, 128, 258, 1024, k), new w(32, 258, 258, 4096, k)], r3.deflateInit = function(e3, t4) {
              return q(e3, t4, 8, 15, 8, 0);
            }, r3.deflateInit2 = q, r3.deflateReset = D, r3.deflateResetKeep = S, r3.deflateSetHeader = function(e3, t4) {
              return e3 && e3.state && 2 === e3.state.wrap ? (e3.state.gzhead = t4, 0) : c;
            }, r3.deflate = function(e3, t4) {
              var r4, o3, i2, u2;
              if (!e3 || !e3.state || 5 < t4 || t4 < 0)
                return e3 ? h(e3, c) : c;
              if (o3 = e3.state, !e3.output || !e3.input && 0 !== e3.avail_in || 666 === o3.status && 4 !== t4)
                return h(e3, 0 === e3.avail_out ? -5 : c);
              if (o3.strm = e3, r4 = o3.last_flush, o3.last_flush = t4, 42 === o3.status && (2 === o3.wrap ? (e3.adler = 0, v(o3, 31), v(o3, 139), v(o3, 8), o3.gzhead ? (v(o3, (o3.gzhead.text ? 1 : 0) + (o3.gzhead.hcrc ? 2 : 0) + (o3.gzhead.extra ? 4 : 0) + (o3.gzhead.name ? 8 : 0) + (o3.gzhead.comment ? 16 : 0)), v(o3, 255 & o3.gzhead.time), v(o3, o3.gzhead.time >> 8 & 255), v(o3, o3.gzhead.time >> 16 & 255), v(o3, o3.gzhead.time >> 24 & 255), v(o3, 9 === o3.level ? 2 : 2 <= o3.strategy || o3.level < 2 ? 4 : 0), v(o3, 255 & o3.gzhead.os), o3.gzhead.extra && o3.gzhead.extra.length && (v(o3, 255 & o3.gzhead.extra.length), v(o3, o3.gzhead.extra.length >> 8 & 255)), o3.gzhead.hcrc && (e3.adler = a(e3.adler, o3.pending_buf, o3.pending, 0)), o3.gzindex = 0, o3.status = 69) : (v(o3, 0), v(o3, 0), v(o3, 0), v(o3, 0), v(o3, 0), v(o3, 9 === o3.level ? 2 : 2 <= o3.strategy || o3.level < 2 ? 4 : 0), v(o3, 3), o3.status = p)) : (d2 = 8 + (o3.w_bits - 8 << 4) << 8, d2 |= (2 <= o3.strategy || o3.level < 2 ? 0 : o3.level < 6 ? 1 : 6 === o3.level ? 2 : 3) << 6, 0 !== o3.strstart && (d2 |= 32), d2 += 31 - d2 % 31, o3.status = p, b(o3, d2), 0 !== o3.strstart && (b(o3, e3.adler >>> 16), b(o3, 65535 & e3.adler)), e3.adler = 1)), 69 === o3.status)
                if (o3.gzhead.extra) {
                  for (i2 = o3.pending; o3.gzindex < (65535 & o3.gzhead.extra.length) && (o3.pending !== o3.pending_buf_size || (o3.gzhead.hcrc && o3.pending > i2 && (e3.adler = a(e3.adler, o3.pending_buf, o3.pending - i2, i2)), m(e3), i2 = o3.pending, o3.pending !== o3.pending_buf_size)); )
                    v(o3, 255 & o3.gzhead.extra[o3.gzindex]), o3.gzindex++;
                  o3.gzhead.hcrc && o3.pending > i2 && (e3.adler = a(e3.adler, o3.pending_buf, o3.pending - i2, i2)), o3.gzindex === o3.gzhead.extra.length && (o3.gzindex = 0, o3.status = 73);
                } else
                  o3.status = 73;
              if (73 === o3.status)
                if (o3.gzhead.name) {
                  i2 = o3.pending;
                  do {
                    if (o3.pending === o3.pending_buf_size && (o3.gzhead.hcrc && o3.pending > i2 && (e3.adler = a(e3.adler, o3.pending_buf, o3.pending - i2, i2)), m(e3), i2 = o3.pending, o3.pending === o3.pending_buf_size)) {
                      u2 = 1;
                      break;
                    }
                  } while (u2 = o3.gzindex < o3.gzhead.name.length ? 255 & o3.gzhead.name.charCodeAt(o3.gzindex++) : 0, v(o3, u2), 0 !== u2);
                  o3.gzhead.hcrc && o3.pending > i2 && (e3.adler = a(e3.adler, o3.pending_buf, o3.pending - i2, i2)), 0 === u2 && (o3.gzindex = 0, o3.status = 91);
                } else
                  o3.status = 91;
              if (91 === o3.status)
                if (o3.gzhead.comment) {
                  i2 = o3.pending;
                  do {
                    if (o3.pending === o3.pending_buf_size && (o3.gzhead.hcrc && o3.pending > i2 && (e3.adler = a(e3.adler, o3.pending_buf, o3.pending - i2, i2)), m(e3), i2 = o3.pending, o3.pending === o3.pending_buf_size)) {
                      u2 = 1;
                      break;
                    }
                  } while (u2 = o3.gzindex < o3.gzhead.comment.length ? 255 & o3.gzhead.comment.charCodeAt(o3.gzindex++) : 0, v(o3, u2), 0 !== u2);
                  o3.gzhead.hcrc && o3.pending > i2 && (e3.adler = a(e3.adler, o3.pending_buf, o3.pending - i2, i2)), 0 === u2 && (o3.status = 103);
                } else
                  o3.status = 103;
              if (103 === o3.status && (o3.gzhead.hcrc ? (o3.pending + 2 > o3.pending_buf_size && m(e3), o3.pending + 2 <= o3.pending_buf_size && (v(o3, 255 & e3.adler), v(o3, e3.adler >> 8 & 255), e3.adler = 0, o3.status = p)) : o3.status = p), 0 !== o3.pending) {
                if (m(e3), 0 === e3.avail_out)
                  return o3.last_flush = -1, 0;
              } else if (0 === e3.avail_in && g(t4) <= g(r4) && 4 !== t4)
                return h(e3, -5);
              if (666 === o3.status && 0 !== e3.avail_in)
                return h(e3, -5);
              if (0 !== e3.avail_in || 0 !== o3.lookahead || 0 !== t4 && 666 !== o3.status) {
                var d2 = 2 === o3.strategy ? function(e4, t5) {
                  for (var r5; ; ) {
                    if (0 === e4.lookahead && (M(e4), 0 === e4.lookahead)) {
                      if (0 === t5)
                        return 1;
                      break;
                    }
                    if (e4.match_length = 0, r5 = s._tr_tally(e4, 0, e4.window[e4.strstart]), e4.lookahead--, e4.strstart++, r5 && (_(e4, false), 0 === e4.strm.avail_out))
                      return 1;
                  }
                  return e4.insert = 0, 4 === t5 ? (_(e4, true), 0 === e4.strm.avail_out ? 3 : 4) : e4.last_lit && (_(e4, false), 0 === e4.strm.avail_out) ? 1 : 2;
                }(o3, t4) : 3 === o3.strategy ? function(e4, t5) {
                  for (var r5, n3, o4, i3, a2 = e4.window; ; ) {
                    if (e4.lookahead <= l) {
                      if (M(e4), e4.lookahead <= l && 0 === t5)
                        return 1;
                      if (0 === e4.lookahead)
                        break;
                    }
                    if (e4.match_length = 0, e4.lookahead >= 3 && 0 < e4.strstart && (n3 = a2[o4 = e4.strstart - 1]) === a2[++o4] && n3 === a2[++o4] && n3 === a2[++o4]) {
                      for (i3 = e4.strstart + l; n3 === a2[++o4] && n3 === a2[++o4] && n3 === a2[++o4] && n3 === a2[++o4] && n3 === a2[++o4] && n3 === a2[++o4] && n3 === a2[++o4] && n3 === a2[++o4] && o4 < i3; )
                        ;
                      e4.match_length = l - (i3 - o4), e4.match_length > e4.lookahead && (e4.match_length = e4.lookahead);
                    }
                    if (e4.match_length >= 3 ? (r5 = s._tr_tally(e4, 1, e4.match_length - 3), e4.lookahead -= e4.match_length, e4.strstart += e4.match_length, e4.match_length = 0) : (r5 = s._tr_tally(e4, 0, e4.window[e4.strstart]), e4.lookahead--, e4.strstart++), r5 && (_(e4, false), 0 === e4.strm.avail_out))
                      return 1;
                  }
                  return e4.insert = 0, 4 === t5 ? (_(e4, true), 0 === e4.strm.avail_out ? 3 : 4) : e4.last_lit && (_(e4, false), 0 === e4.strm.avail_out) ? 1 : 2;
                }(o3, t4) : n2[o3.level].func(o3, t4);
                if (3 !== d2 && 4 !== d2 || (o3.status = 666), 1 === d2 || 3 === d2)
                  return 0 === e3.avail_out && (o3.last_flush = -1), 0;
                if (2 === d2 && (1 === t4 ? s._tr_align(o3) : 5 !== t4 && (s._tr_stored_block(o3, 0, 0, false), 3 === t4 && (f(o3.head), 0 === o3.lookahead && (o3.strstart = 0, o3.block_start = 0, o3.insert = 0))), m(e3), 0 === e3.avail_out))
                  return o3.last_flush = -1, 0;
              }
              return 4 !== t4 ? 0 : o3.wrap <= 0 ? 1 : (2 === o3.wrap ? (v(o3, 255 & e3.adler), v(o3, e3.adler >> 8 & 255), v(o3, e3.adler >> 16 & 255), v(o3, e3.adler >> 24 & 255), v(o3, 255 & e3.total_in), v(o3, e3.total_in >> 8 & 255), v(o3, e3.total_in >> 16 & 255), v(o3, e3.total_in >> 24 & 255)) : (b(o3, e3.adler >>> 16), b(o3, 65535 & e3.adler)), m(e3), 0 < o3.wrap && (o3.wrap = -o3.wrap), 0 !== o3.pending ? 0 : 1);
            }, r3.deflateEnd = function(e3) {
              var t4;
              return e3 && e3.state ? 42 !== (t4 = e3.state.status) && 69 !== t4 && 73 !== t4 && 91 !== t4 && 103 !== t4 && t4 !== p && 666 !== t4 ? h(e3, c) : (e3.state = null, t4 === p ? h(e3, -3) : 0) : c;
            }, r3.deflateSetDictionary = function(e3, t4) {
              var r4, n3, s2, a2, u2, l2, d2, p2 = t4.length;
              if (!e3 || !e3.state)
                return c;
              if (2 === (a2 = (r4 = e3.state).wrap) || 1 === a2 && 42 !== r4.status || r4.lookahead)
                return c;
              for (1 === a2 && (e3.adler = i(e3.adler, t4, p2, 0)), r4.wrap = 0, p2 >= r4.w_size && (0 === a2 && (f(r4.head), r4.strstart = 0, r4.block_start = 0, r4.insert = 0), d2 = new o2.Buf8(r4.w_size), o2.arraySet(d2, t4, p2 - r4.w_size, r4.w_size, 0), t4 = d2, p2 = r4.w_size), d2 = e3.avail_in, u2 = e3.next_in, l2 = e3.input, e3.avail_in = p2, e3.next_in = 0, e3.input = t4, M(r4); r4.lookahead >= 3; ) {
                for (n3 = r4.strstart, s2 = r4.lookahead - 2; r4.ins_h = (r4.ins_h << r4.hash_shift ^ r4.window[n3 + 3 - 1]) & r4.hash_mask, r4.prev[n3 & r4.w_mask] = r4.head[r4.ins_h], r4.head[r4.ins_h] = n3, n3++, --s2; )
                  ;
                r4.strstart = n3, r4.lookahead = 2, M(r4);
              }
              return r4.strstart += r4.lookahead, r4.block_start = r4.strstart, r4.insert = r4.lookahead, r4.lookahead = 0, r4.match_length = r4.prev_length = 2, r4.match_available = 0, e3.next_in = u2, e3.input = l2, e3.avail_in = d2, r4.wrap = a2, 0;
            }, r3.deflateInfo = "pako deflate (from Nodeca project)";
          }, { "../utils/common": 41, "./adler32": 43, "./crc32": 45, "./messages": 51, "./trees": 52 }], 47: [function(e2, t3, r3) {
            "use strict";
            t3.exports = function() {
              this.text = 0, this.time = 0, this.xflags = 0, this.os = 0, this.extra = null, this.extra_len = 0, this.name = "", this.comment = "", this.hcrc = 0, this.done = false;
            };
          }, {}], 48: [function(e2, t3, r3) {
            "use strict";
            t3.exports = function(e3, t4) {
              var r4, n2, o2, s, i, a, u = e3.state, c = e3.next_in, l = e3.input, d = c + (e3.avail_in - 5), p = e3.next_out, h = e3.output, g = p - (t4 - e3.avail_out), f = p + (e3.avail_out - 257), m = u.dmax, _ = u.wsize, v = u.whave, b = u.wnext, y = u.window, M = u.hold, I = u.bits, k = u.lencode, w = u.distcode, C = (1 << u.lenbits) - 1, S = (1 << u.distbits) - 1;
              e:
                do {
                  for (I < 15 && (M += l[c++] << I, I += 8, M += l[c++] << I, I += 8), r4 = k[M & C]; ; ) {
                    if (M >>>= n2 = r4 >>> 24, I -= n2, 0 == (n2 = r4 >>> 16 & 255))
                      h[p++] = 65535 & r4;
                    else {
                      if (!(16 & n2)) {
                        if (0 == (64 & n2)) {
                          r4 = k[(65535 & r4) + (M & (1 << n2) - 1)];
                          continue;
                        }
                        if (32 & n2) {
                          u.mode = 12;
                          break e;
                        }
                        e3.msg = "invalid literal/length code", u.mode = 30;
                        break e;
                      }
                      for (o2 = 65535 & r4, (n2 &= 15) && (I < n2 && (M += l[c++] << I, I += 8), o2 += M & (1 << n2) - 1, M >>>= n2, I -= n2), I < 15 && (M += l[c++] << I, I += 8, M += l[c++] << I, I += 8), r4 = w[M & S]; ; ) {
                        if (M >>>= n2 = r4 >>> 24, I -= n2, !(16 & (n2 = r4 >>> 16 & 255))) {
                          if (0 == (64 & n2)) {
                            r4 = w[(65535 & r4) + (M & (1 << n2) - 1)];
                            continue;
                          }
                          e3.msg = "invalid distance code", u.mode = 30;
                          break e;
                        }
                        if (s = 65535 & r4, I < (n2 &= 15) && (M += l[c++] << I, (I += 8) < n2 && (M += l[c++] << I, I += 8)), m < (s += M & (1 << n2) - 1)) {
                          e3.msg = "invalid distance too far back", u.mode = 30;
                          break e;
                        }
                        if (M >>>= n2, I -= n2, (n2 = p - g) < s) {
                          if (v < (n2 = s - n2) && u.sane) {
                            e3.msg = "invalid distance too far back", u.mode = 30;
                            break e;
                          }
                          if (a = y, (i = 0) === b) {
                            if (i += _ - n2, n2 < o2) {
                              for (o2 -= n2; h[p++] = y[i++], --n2; )
                                ;
                              i = p - s, a = h;
                            }
                          } else if (b < n2) {
                            if (i += _ + b - n2, (n2 -= b) < o2) {
                              for (o2 -= n2; h[p++] = y[i++], --n2; )
                                ;
                              if (i = 0, b < o2) {
                                for (o2 -= n2 = b; h[p++] = y[i++], --n2; )
                                  ;
                                i = p - s, a = h;
                              }
                            }
                          } else if (i += b - n2, n2 < o2) {
                            for (o2 -= n2; h[p++] = y[i++], --n2; )
                              ;
                            i = p - s, a = h;
                          }
                          for (; 2 < o2; )
                            h[p++] = a[i++], h[p++] = a[i++], h[p++] = a[i++], o2 -= 3;
                          o2 && (h[p++] = a[i++], 1 < o2 && (h[p++] = a[i++]));
                        } else {
                          for (i = p - s; h[p++] = h[i++], h[p++] = h[i++], h[p++] = h[i++], 2 < (o2 -= 3); )
                            ;
                          o2 && (h[p++] = h[i++], 1 < o2 && (h[p++] = h[i++]));
                        }
                        break;
                      }
                    }
                    break;
                  }
                } while (c < d && p < f);
              c -= o2 = I >> 3, M &= (1 << (I -= o2 << 3)) - 1, e3.next_in = c, e3.next_out = p, e3.avail_in = c < d ? d - c + 5 : 5 - (c - d), e3.avail_out = p < f ? f - p + 257 : 257 - (p - f), u.hold = M, u.bits = I;
            };
          }, {}], 49: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("../utils/common"), o2 = e2("./adler32"), s = e2("./crc32"), i = e2("./inffast"), a = e2("./inftrees"), u = -2;
            function c(e3) {
              return (e3 >>> 24 & 255) + (e3 >>> 8 & 65280) + ((65280 & e3) << 8) + ((255 & e3) << 24);
            }
            function l() {
              this.mode = 0, this.last = false, this.wrap = 0, this.havedict = false, this.flags = 0, this.dmax = 0, this.check = 0, this.total = 0, this.head = null, this.wbits = 0, this.wsize = 0, this.whave = 0, this.wnext = 0, this.window = null, this.hold = 0, this.bits = 0, this.length = 0, this.offset = 0, this.extra = 0, this.lencode = null, this.distcode = null, this.lenbits = 0, this.distbits = 0, this.ncode = 0, this.nlen = 0, this.ndist = 0, this.have = 0, this.next = null, this.lens = new n2.Buf16(320), this.work = new n2.Buf16(288), this.lendyn = null, this.distdyn = null, this.sane = 0, this.back = 0, this.was = 0;
            }
            function d(e3) {
              var t4;
              return e3 && e3.state ? (t4 = e3.state, e3.total_in = e3.total_out = t4.total = 0, e3.msg = "", t4.wrap && (e3.adler = 1 & t4.wrap), t4.mode = 1, t4.last = 0, t4.havedict = 0, t4.dmax = 32768, t4.head = null, t4.hold = 0, t4.bits = 0, t4.lencode = t4.lendyn = new n2.Buf32(852), t4.distcode = t4.distdyn = new n2.Buf32(592), t4.sane = 1, t4.back = -1, 0) : u;
            }
            function p(e3) {
              var t4;
              return e3 && e3.state ? ((t4 = e3.state).wsize = 0, t4.whave = 0, t4.wnext = 0, d(e3)) : u;
            }
            function h(e3, t4) {
              var r4, n3;
              return e3 && e3.state ? (n3 = e3.state, t4 < 0 ? (r4 = 0, t4 = -t4) : (r4 = 1 + (t4 >> 4), t4 < 48 && (t4 &= 15)), t4 && (t4 < 8 || 15 < t4) ? u : (null !== n3.window && n3.wbits !== t4 && (n3.window = null), n3.wrap = r4, n3.wbits = t4, p(e3))) : u;
            }
            function g(e3, t4) {
              var r4;
              return e3 ? (r4 = new l(), (e3.state = r4).window = null, 0 !== (r4 = h(e3, t4)) && (e3.state = null), r4) : u;
            }
            var f, m, _ = true;
            function v(e3, t4, r4, o3) {
              var s2;
              return null === (e3 = e3.state).window && (e3.wsize = 1 << e3.wbits, e3.wnext = 0, e3.whave = 0, e3.window = new n2.Buf8(e3.wsize)), o3 >= e3.wsize ? (n2.arraySet(e3.window, t4, r4 - e3.wsize, e3.wsize, 0), e3.wnext = 0, e3.whave = e3.wsize) : (o3 < (s2 = e3.wsize - e3.wnext) && (s2 = o3), n2.arraySet(e3.window, t4, r4 - o3, s2, e3.wnext), (o3 -= s2) ? (n2.arraySet(e3.window, t4, r4 - o3, o3, 0), e3.wnext = o3, e3.whave = e3.wsize) : (e3.wnext += s2, e3.wnext === e3.wsize && (e3.wnext = 0), e3.whave < e3.wsize && (e3.whave += s2))), 0;
            }
            r3.inflateReset = p, r3.inflateReset2 = h, r3.inflateResetKeep = d, r3.inflateInit = function(e3) {
              return g(e3, 15);
            }, r3.inflateInit2 = g, r3.inflate = function(e3, t4) {
              var r4, l2, d2, p2, h2, g2, b, y, M, I, k, w, C, S, D, q, R, O, A, x, P, T, E, L, j = 0, G = new n2.Buf8(4), U = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
              if (!e3 || !e3.state || !e3.output || !e3.input && 0 !== e3.avail_in)
                return u;
              12 === (r4 = e3.state).mode && (r4.mode = 13), h2 = e3.next_out, d2 = e3.output, b = e3.avail_out, p2 = e3.next_in, l2 = e3.input, g2 = e3.avail_in, y = r4.hold, M = r4.bits, I = g2, k = b, T = 0;
              e:
                for (; ; )
                  switch (r4.mode) {
                    case 1:
                      if (0 === r4.wrap) {
                        r4.mode = 13;
                        break;
                      }
                      for (; M < 16; ) {
                        if (0 === g2)
                          break e;
                        g2--, y += l2[p2++] << M, M += 8;
                      }
                      if (2 & r4.wrap && 35615 === y) {
                        G[r4.check = 0] = 255 & y, G[1] = y >>> 8 & 255, r4.check = s(r4.check, G, 2, 0), M = y = 0, r4.mode = 2;
                        break;
                      }
                      if (r4.flags = 0, r4.head && (r4.head.done = false), !(1 & r4.wrap) || (((255 & y) << 8) + (y >> 8)) % 31) {
                        e3.msg = "incorrect header check", r4.mode = 30;
                        break;
                      }
                      if (8 != (15 & y)) {
                        e3.msg = "unknown compression method", r4.mode = 30;
                        break;
                      }
                      if (M -= 4, P = 8 + (15 & (y >>>= 4)), 0 === r4.wbits)
                        r4.wbits = P;
                      else if (P > r4.wbits) {
                        e3.msg = "invalid window size", r4.mode = 30;
                        break;
                      }
                      r4.dmax = 1 << P, e3.adler = r4.check = 1, r4.mode = 512 & y ? 10 : 12, M = y = 0;
                      break;
                    case 2:
                      for (; M < 16; ) {
                        if (0 === g2)
                          break e;
                        g2--, y += l2[p2++] << M, M += 8;
                      }
                      if (r4.flags = y, 8 != (255 & r4.flags)) {
                        e3.msg = "unknown compression method", r4.mode = 30;
                        break;
                      }
                      if (57344 & r4.flags) {
                        e3.msg = "unknown header flags set", r4.mode = 30;
                        break;
                      }
                      r4.head && (r4.head.text = y >> 8 & 1), 512 & r4.flags && (G[0] = 255 & y, G[1] = y >>> 8 & 255, r4.check = s(r4.check, G, 2, 0)), M = y = 0, r4.mode = 3;
                    case 3:
                      for (; M < 32; ) {
                        if (0 === g2)
                          break e;
                        g2--, y += l2[p2++] << M, M += 8;
                      }
                      r4.head && (r4.head.time = y), 512 & r4.flags && (G[0] = 255 & y, G[1] = y >>> 8 & 255, G[2] = y >>> 16 & 255, G[3] = y >>> 24 & 255, r4.check = s(r4.check, G, 4, 0)), M = y = 0, r4.mode = 4;
                    case 4:
                      for (; M < 16; ) {
                        if (0 === g2)
                          break e;
                        g2--, y += l2[p2++] << M, M += 8;
                      }
                      r4.head && (r4.head.xflags = 255 & y, r4.head.os = y >> 8), 512 & r4.flags && (G[0] = 255 & y, G[1] = y >>> 8 & 255, r4.check = s(r4.check, G, 2, 0)), M = y = 0, r4.mode = 5;
                    case 5:
                      if (1024 & r4.flags) {
                        for (; M < 16; ) {
                          if (0 === g2)
                            break e;
                          g2--, y += l2[p2++] << M, M += 8;
                        }
                        r4.length = y, r4.head && (r4.head.extra_len = y), 512 & r4.flags && (G[0] = 255 & y, G[1] = y >>> 8 & 255, r4.check = s(r4.check, G, 2, 0)), M = y = 0;
                      } else
                        r4.head && (r4.head.extra = null);
                      r4.mode = 6;
                    case 6:
                      if (1024 & r4.flags && ((w = g2 < (w = r4.length) ? g2 : w) && (r4.head && (P = r4.head.extra_len - r4.length, r4.head.extra || (r4.head.extra = new Array(r4.head.extra_len)), n2.arraySet(r4.head.extra, l2, p2, w, P)), 512 & r4.flags && (r4.check = s(r4.check, l2, w, p2)), g2 -= w, p2 += w, r4.length -= w), r4.length))
                        break e;
                      r4.length = 0, r4.mode = 7;
                    case 7:
                      if (2048 & r4.flags) {
                        if (0 === g2)
                          break e;
                        for (w = 0; P = l2[p2 + w++], r4.head && P && r4.length < 65536 && (r4.head.name += String.fromCharCode(P)), P && w < g2; )
                          ;
                        if (512 & r4.flags && (r4.check = s(r4.check, l2, w, p2)), g2 -= w, p2 += w, P)
                          break e;
                      } else
                        r4.head && (r4.head.name = null);
                      r4.length = 0, r4.mode = 8;
                    case 8:
                      if (4096 & r4.flags) {
                        if (0 === g2)
                          break e;
                        for (w = 0; P = l2[p2 + w++], r4.head && P && r4.length < 65536 && (r4.head.comment += String.fromCharCode(P)), P && w < g2; )
                          ;
                        if (512 & r4.flags && (r4.check = s(r4.check, l2, w, p2)), g2 -= w, p2 += w, P)
                          break e;
                      } else
                        r4.head && (r4.head.comment = null);
                      r4.mode = 9;
                    case 9:
                      if (512 & r4.flags) {
                        for (; M < 16; ) {
                          if (0 === g2)
                            break e;
                          g2--, y += l2[p2++] << M, M += 8;
                        }
                        if (y !== (65535 & r4.check)) {
                          e3.msg = "header crc mismatch", r4.mode = 30;
                          break;
                        }
                        M = y = 0;
                      }
                      r4.head && (r4.head.hcrc = r4.flags >> 9 & 1, r4.head.done = true), e3.adler = r4.check = 0, r4.mode = 12;
                      break;
                    case 10:
                      for (; M < 32; ) {
                        if (0 === g2)
                          break e;
                        g2--, y += l2[p2++] << M, M += 8;
                      }
                      e3.adler = r4.check = c(y), M = y = 0, r4.mode = 11;
                    case 11:
                      if (0 === r4.havedict)
                        return e3.next_out = h2, e3.avail_out = b, e3.next_in = p2, e3.avail_in = g2, r4.hold = y, r4.bits = M, 2;
                      e3.adler = r4.check = 1, r4.mode = 12;
                    case 12:
                      if (5 === t4 || 6 === t4)
                        break e;
                    case 13:
                      if (r4.last) {
                        y >>>= 7 & M, M -= 7 & M, r4.mode = 27;
                        break;
                      }
                      for (; M < 3; ) {
                        if (0 === g2)
                          break e;
                        g2--, y += l2[p2++] << M, M += 8;
                      }
                      switch (r4.last = 1 & y, --M, 3 & (y >>>= 1)) {
                        case 0:
                          r4.mode = 14;
                          break;
                        case 1:
                          B = z = void 0;
                          var B, z = r4;
                          if (_) {
                            for (f = new n2.Buf32(512), m = new n2.Buf32(32), B = 0; B < 144; )
                              z.lens[B++] = 8;
                            for (; B < 256; )
                              z.lens[B++] = 9;
                            for (; B < 280; )
                              z.lens[B++] = 7;
                            for (; B < 288; )
                              z.lens[B++] = 8;
                            for (a(1, z.lens, 0, 288, f, 0, z.work, { bits: 9 }), B = 0; B < 32; )
                              z.lens[B++] = 5;
                            a(2, z.lens, 0, 32, m, 0, z.work, { bits: 5 }), _ = false;
                          }
                          if (z.lencode = f, z.lenbits = 9, z.distcode = m, z.distbits = 5, r4.mode = 20, 6 !== t4)
                            break;
                          y >>>= 2, M -= 2;
                          break e;
                        case 2:
                          r4.mode = 17;
                          break;
                        case 3:
                          e3.msg = "invalid block type", r4.mode = 30;
                      }
                      y >>>= 2, M -= 2;
                      break;
                    case 14:
                      for (y >>>= 7 & M, M -= 7 & M; M < 32; ) {
                        if (0 === g2)
                          break e;
                        g2--, y += l2[p2++] << M, M += 8;
                      }
                      if ((65535 & y) != (y >>> 16 ^ 65535)) {
                        e3.msg = "invalid stored block lengths", r4.mode = 30;
                        break;
                      }
                      if (r4.length = 65535 & y, M = y = 0, r4.mode = 15, 6 === t4)
                        break e;
                    case 15:
                      r4.mode = 16;
                    case 16:
                      if (w = r4.length) {
                        if (0 === (w = b < (w = g2 < w ? g2 : w) ? b : w))
                          break e;
                        n2.arraySet(d2, l2, p2, w, h2), g2 -= w, p2 += w, b -= w, h2 += w, r4.length -= w;
                        break;
                      }
                      r4.mode = 12;
                      break;
                    case 17:
                      for (; M < 14; ) {
                        if (0 === g2)
                          break e;
                        g2--, y += l2[p2++] << M, M += 8;
                      }
                      if (r4.nlen = 257 + (31 & y), y >>>= 5, M -= 5, r4.ndist = 1 + (31 & y), y >>>= 5, M -= 5, r4.ncode = 4 + (15 & y), y >>>= 4, M -= 4, 286 < r4.nlen || 30 < r4.ndist) {
                        e3.msg = "too many length or distance symbols", r4.mode = 30;
                        break;
                      }
                      r4.have = 0, r4.mode = 18;
                    case 18:
                      for (; r4.have < r4.ncode; ) {
                        for (; M < 3; ) {
                          if (0 === g2)
                            break e;
                          g2--, y += l2[p2++] << M, M += 8;
                        }
                        r4.lens[U[r4.have++]] = 7 & y, y >>>= 3, M -= 3;
                      }
                      for (; r4.have < 19; )
                        r4.lens[U[r4.have++]] = 0;
                      if (r4.lencode = r4.lendyn, r4.lenbits = 7, E = { bits: r4.lenbits }, T = a(0, r4.lens, 0, 19, r4.lencode, 0, r4.work, E), r4.lenbits = E.bits, T) {
                        e3.msg = "invalid code lengths set", r4.mode = 30;
                        break;
                      }
                      r4.have = 0, r4.mode = 19;
                    case 19:
                      for (; r4.have < r4.nlen + r4.ndist; ) {
                        for (; q = (j = r4.lencode[y & (1 << r4.lenbits) - 1]) >>> 16 & 255, R = 65535 & j, !((D = j >>> 24) <= M); ) {
                          if (0 === g2)
                            break e;
                          g2--, y += l2[p2++] << M, M += 8;
                        }
                        if (R < 16)
                          y >>>= D, M -= D, r4.lens[r4.have++] = R;
                        else {
                          if (16 === R) {
                            for (L = D + 2; M < L; ) {
                              if (0 === g2)
                                break e;
                              g2--, y += l2[p2++] << M, M += 8;
                            }
                            if (y >>>= D, M -= D, 0 === r4.have) {
                              e3.msg = "invalid bit length repeat", r4.mode = 30;
                              break;
                            }
                            P = r4.lens[r4.have - 1], w = 3 + (3 & y), y >>>= 2, M -= 2;
                          } else if (17 === R) {
                            for (L = D + 3; M < L; ) {
                              if (0 === g2)
                                break e;
                              g2--, y += l2[p2++] << M, M += 8;
                            }
                            P = 0, w = 3 + (7 & (y >>>= D)), y >>>= 3, M = M - D - 3;
                          } else {
                            for (L = D + 7; M < L; ) {
                              if (0 === g2)
                                break e;
                              g2--, y += l2[p2++] << M, M += 8;
                            }
                            P = 0, w = 11 + (127 & (y >>>= D)), y >>>= 7, M = M - D - 7;
                          }
                          if (r4.have + w > r4.nlen + r4.ndist) {
                            e3.msg = "invalid bit length repeat", r4.mode = 30;
                            break;
                          }
                          for (; w--; )
                            r4.lens[r4.have++] = P;
                        }
                      }
                      if (30 === r4.mode)
                        break;
                      if (0 === r4.lens[256]) {
                        e3.msg = "invalid code -- missing end-of-block", r4.mode = 30;
                        break;
                      }
                      if (r4.lenbits = 9, E = { bits: r4.lenbits }, T = a(1, r4.lens, 0, r4.nlen, r4.lencode, 0, r4.work, E), r4.lenbits = E.bits, T) {
                        e3.msg = "invalid literal/lengths set", r4.mode = 30;
                        break;
                      }
                      if (r4.distbits = 6, r4.distcode = r4.distdyn, E = { bits: r4.distbits }, T = a(2, r4.lens, r4.nlen, r4.ndist, r4.distcode, 0, r4.work, E), r4.distbits = E.bits, T) {
                        e3.msg = "invalid distances set", r4.mode = 30;
                        break;
                      }
                      if (r4.mode = 20, 6 === t4)
                        break e;
                    case 20:
                      r4.mode = 21;
                    case 21:
                      if (6 <= g2 && 258 <= b) {
                        e3.next_out = h2, e3.avail_out = b, e3.next_in = p2, e3.avail_in = g2, r4.hold = y, r4.bits = M, i(e3, k), h2 = e3.next_out, d2 = e3.output, b = e3.avail_out, p2 = e3.next_in, l2 = e3.input, g2 = e3.avail_in, y = r4.hold, M = r4.bits, 12 === r4.mode && (r4.back = -1);
                        break;
                      }
                      for (r4.back = 0; q = (j = r4.lencode[y & (1 << r4.lenbits) - 1]) >>> 16 & 255, R = 65535 & j, !((D = j >>> 24) <= M); ) {
                        if (0 === g2)
                          break e;
                        g2--, y += l2[p2++] << M, M += 8;
                      }
                      if (q && 0 == (240 & q)) {
                        for (O = D, A = q, x = R; q = (j = r4.lencode[x + ((y & (1 << O + A) - 1) >> O)]) >>> 16 & 255, R = 65535 & j, !(O + (D = j >>> 24) <= M); ) {
                          if (0 === g2)
                            break e;
                          g2--, y += l2[p2++] << M, M += 8;
                        }
                        y >>>= O, M -= O, r4.back += O;
                      }
                      if (y >>>= D, M -= D, r4.back += D, r4.length = R, 0 === q) {
                        r4.mode = 26;
                        break;
                      }
                      if (32 & q) {
                        r4.back = -1, r4.mode = 12;
                        break;
                      }
                      if (64 & q) {
                        e3.msg = "invalid literal/length code", r4.mode = 30;
                        break;
                      }
                      r4.extra = 15 & q, r4.mode = 22;
                    case 22:
                      if (r4.extra) {
                        for (L = r4.extra; M < L; ) {
                          if (0 === g2)
                            break e;
                          g2--, y += l2[p2++] << M, M += 8;
                        }
                        r4.length += y & (1 << r4.extra) - 1, y >>>= r4.extra, M -= r4.extra, r4.back += r4.extra;
                      }
                      r4.was = r4.length, r4.mode = 23;
                    case 23:
                      for (; q = (j = r4.distcode[y & (1 << r4.distbits) - 1]) >>> 16 & 255, R = 65535 & j, !((D = j >>> 24) <= M); ) {
                        if (0 === g2)
                          break e;
                        g2--, y += l2[p2++] << M, M += 8;
                      }
                      if (0 == (240 & q)) {
                        for (O = D, A = q, x = R; q = (j = r4.distcode[x + ((y & (1 << O + A) - 1) >> O)]) >>> 16 & 255, R = 65535 & j, !(O + (D = j >>> 24) <= M); ) {
                          if (0 === g2)
                            break e;
                          g2--, y += l2[p2++] << M, M += 8;
                        }
                        y >>>= O, M -= O, r4.back += O;
                      }
                      if (y >>>= D, M -= D, r4.back += D, 64 & q) {
                        e3.msg = "invalid distance code", r4.mode = 30;
                        break;
                      }
                      r4.offset = R, r4.extra = 15 & q, r4.mode = 24;
                    case 24:
                      if (r4.extra) {
                        for (L = r4.extra; M < L; ) {
                          if (0 === g2)
                            break e;
                          g2--, y += l2[p2++] << M, M += 8;
                        }
                        r4.offset += y & (1 << r4.extra) - 1, y >>>= r4.extra, M -= r4.extra, r4.back += r4.extra;
                      }
                      if (r4.offset > r4.dmax) {
                        e3.msg = "invalid distance too far back", r4.mode = 30;
                        break;
                      }
                      r4.mode = 25;
                    case 25:
                      if (0 === b)
                        break e;
                      if (r4.offset > (w = k - b)) {
                        if ((w = r4.offset - w) > r4.whave && r4.sane) {
                          e3.msg = "invalid distance too far back", r4.mode = 30;
                          break;
                        }
                        C = w > r4.wnext ? (w -= r4.wnext, r4.wsize - w) : r4.wnext - w, w > r4.length && (w = r4.length), S = r4.window;
                      } else
                        S = d2, C = h2 - r4.offset, w = r4.length;
                      for (b -= w = b < w ? b : w, r4.length -= w; d2[h2++] = S[C++], --w; )
                        ;
                      0 === r4.length && (r4.mode = 21);
                      break;
                    case 26:
                      if (0 === b)
                        break e;
                      d2[h2++] = r4.length, b--, r4.mode = 21;
                      break;
                    case 27:
                      if (r4.wrap) {
                        for (; M < 32; ) {
                          if (0 === g2)
                            break e;
                          g2--, y |= l2[p2++] << M, M += 8;
                        }
                        if (k -= b, e3.total_out += k, r4.total += k, k && (e3.adler = r4.check = (r4.flags ? s : o2)(r4.check, d2, k, h2 - k)), k = b, (r4.flags ? y : c(y)) !== r4.check) {
                          e3.msg = "incorrect data check", r4.mode = 30;
                          break;
                        }
                        M = y = 0;
                      }
                      r4.mode = 28;
                    case 28:
                      if (r4.wrap && r4.flags) {
                        for (; M < 32; ) {
                          if (0 === g2)
                            break e;
                          g2--, y += l2[p2++] << M, M += 8;
                        }
                        if (y !== (4294967295 & r4.total)) {
                          e3.msg = "incorrect length check", r4.mode = 30;
                          break;
                        }
                        M = y = 0;
                      }
                      r4.mode = 29;
                    case 29:
                      T = 1;
                      break e;
                    case 30:
                      T = -3;
                      break e;
                    case 31:
                      return -4;
                    default:
                      return u;
                  }
              return e3.next_out = h2, e3.avail_out = b, e3.next_in = p2, e3.avail_in = g2, r4.hold = y, r4.bits = M, (r4.wsize || k !== e3.avail_out && r4.mode < 30 && (r4.mode < 27 || 4 !== t4)) && v(e3, e3.output, e3.next_out, k - e3.avail_out) ? (r4.mode = 31, -4) : (I -= e3.avail_in, k -= e3.avail_out, e3.total_in += I, e3.total_out += k, r4.total += k, r4.wrap && k && (e3.adler = r4.check = (r4.flags ? s : o2)(r4.check, d2, k, e3.next_out - k)), e3.data_type = r4.bits + (r4.last ? 64 : 0) + (12 === r4.mode ? 128 : 0) + (20 === r4.mode || 15 === r4.mode ? 256 : 0), T = (0 == I && 0 === k || 4 === t4) && 0 === T ? -5 : T);
            }, r3.inflateEnd = function(e3) {
              if (!e3 || !e3.state)
                return u;
              var t4 = e3.state;
              return t4.window && (t4.window = null), e3.state = null, 0;
            }, r3.inflateGetHeader = function(e3, t4) {
              return e3 && e3.state && 0 != (2 & (e3 = e3.state).wrap) ? ((e3.head = t4).done = false, 0) : u;
            }, r3.inflateSetDictionary = function(e3, t4) {
              var r4, n3 = t4.length;
              return !e3 || !e3.state || 0 !== (r4 = e3.state).wrap && 11 !== r4.mode ? u : 11 === r4.mode && o2(1, t4, n3, 0) !== r4.check ? -3 : v(e3, t4, n3, n3) ? (r4.mode = 31, -4) : (r4.havedict = 1, 0);
            }, r3.inflateInfo = "pako inflate (from Nodeca project)";
          }, { "../utils/common": 41, "./adler32": 43, "./crc32": 45, "./inffast": 48, "./inftrees": 50 }], 50: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("../utils/common"), o2 = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0], s = [16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78], i = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0], a = [16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64];
            t3.exports = function(e3, t4, r4, u, c, l, d, p) {
              var h, g, f, m, _, v, b, y, M, I = p.bits, k = 0, w = 0, C = 0, S = 0, D = 0, q = 0, R = 0, O = 0, A = 0, x = 0, P = null, T = 0, E = new n2.Buf16(16), L = new n2.Buf16(16), j = null, G = 0;
              for (k = 0; k <= 15; k++)
                E[k] = 0;
              for (w = 0; w < u; w++)
                E[t4[r4 + w]]++;
              for (D = I, S = 15; 1 <= S && 0 === E[S]; S--)
                ;
              if (S < D && (D = S), 0 === S)
                return c[l++] = 20971520, c[l++] = 20971520, p.bits = 1, 0;
              for (C = 1; C < S && 0 === E[C]; C++)
                ;
              for (D < C && (D = C), k = O = 1; k <= 15; k++)
                if ((O = (O << 1) - E[k]) < 0)
                  return -1;
              if (0 < O && (0 === e3 || 1 !== S))
                return -1;
              for (L[1] = 0, k = 1; k < 15; k++)
                L[k + 1] = L[k] + E[k];
              for (w = 0; w < u; w++)
                0 !== t4[r4 + w] && (d[L[t4[r4 + w]]++] = w);
              if (v = 0 === e3 ? (P = j = d, 19) : 1 === e3 ? (P = o2, T -= 257, j = s, G -= 257, 256) : (P = i, j = a, -1), k = C, _ = l, R = w = x = 0, f = -1, m = (A = 1 << (q = D)) - 1, 1 === e3 && 852 < A || 2 === e3 && 592 < A)
                return 1;
              for (; ; ) {
                for (M = d[w] < v ? (y = 0, d[w]) : d[w] > v ? (y = j[G + d[w]], P[T + d[w]]) : (y = 96, 0), h = 1 << (b = k - R), C = g = 1 << q; c[_ + (x >> R) + (g -= h)] = b << 24 | y << 16 | M | 0, 0 !== g; )
                  ;
                for (h = 1 << k - 1; x & h; )
                  h >>= 1;
                if (x = 0 !== h ? (x & h - 1) + h : 0, w++, 0 == --E[k]) {
                  if (k === S)
                    break;
                  k = t4[r4 + d[w]];
                }
                if (D < k && (x & m) !== f) {
                  for (_ += C, O = 1 << (q = k - (R = 0 === R ? D : R)); q + R < S && !((O -= E[q + R]) <= 0); )
                    q++, O <<= 1;
                  if (A += 1 << q, 1 === e3 && 852 < A || 2 === e3 && 592 < A)
                    return 1;
                  c[f = x & m] = D << 24 | q << 16 | _ - l | 0;
                }
              }
              return 0 !== x && (c[_ + x] = k - R << 24 | 64 << 16 | 0), p.bits = D, 0;
            };
          }, { "../utils/common": 41 }], 51: [function(e2, t3, r3) {
            "use strict";
            t3.exports = { 2: "need dictionary", 1: "stream end", 0: "", "-1": "file error", "-2": "stream error", "-3": "data error", "-4": "insufficient memory", "-5": "buffer error", "-6": "incompatible version" };
          }, {}], 52: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("../utils/common");
            function o2(e3) {
              for (var t4 = e3.length; 0 <= --t4; )
                e3[t4] = 0;
            }
            var s = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0], i = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13], a = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7], u = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15], c = new Array(576), l = (o2(c), new Array(60)), d = (o2(l), new Array(512)), p = (o2(d), new Array(256)), h = (o2(p), new Array(29));
            o2(h);
            var g, f, m, _ = new Array(30);
            function v(e3, t4, r4, n3, o3) {
              this.static_tree = e3, this.extra_bits = t4, this.extra_base = r4, this.elems = n3, this.max_length = o3, this.has_stree = e3 && e3.length;
            }
            function b(e3, t4) {
              this.dyn_tree = e3, this.max_code = 0, this.stat_desc = t4;
            }
            function y(e3) {
              return e3 < 256 ? d[e3] : d[256 + (e3 >>> 7)];
            }
            function M(e3, t4) {
              e3.pending_buf[e3.pending++] = 255 & t4, e3.pending_buf[e3.pending++] = t4 >>> 8 & 255;
            }
            function I(e3, t4, r4) {
              e3.bi_valid > 16 - r4 ? (e3.bi_buf |= t4 << e3.bi_valid & 65535, M(e3, e3.bi_buf), e3.bi_buf = t4 >> 16 - e3.bi_valid, e3.bi_valid += r4 - 16) : (e3.bi_buf |= t4 << e3.bi_valid & 65535, e3.bi_valid += r4);
            }
            function k(e3, t4, r4) {
              I(e3, r4[2 * t4], r4[2 * t4 + 1]);
            }
            function w(e3, t4) {
              for (var r4 = 0; r4 |= 1 & e3, e3 >>>= 1, r4 <<= 1, 0 < --t4; )
                ;
              return r4 >>> 1;
            }
            function C(e3, t4, r4) {
              for (var n3, o3 = new Array(16), s2 = 0, i2 = 1; i2 <= 15; i2++)
                o3[i2] = s2 = s2 + r4[i2 - 1] << 1;
              for (n3 = 0; n3 <= t4; n3++) {
                var a2 = e3[2 * n3 + 1];
                0 !== a2 && (e3[2 * n3] = w(o3[a2]++, a2));
              }
            }
            function S(e3) {
              for (var t4 = 0; t4 < 286; t4++)
                e3.dyn_ltree[2 * t4] = 0;
              for (t4 = 0; t4 < 30; t4++)
                e3.dyn_dtree[2 * t4] = 0;
              for (t4 = 0; t4 < 19; t4++)
                e3.bl_tree[2 * t4] = 0;
              e3.dyn_ltree[512] = 1, e3.opt_len = e3.static_len = 0, e3.last_lit = e3.matches = 0;
            }
            function D(e3) {
              8 < e3.bi_valid ? M(e3, e3.bi_buf) : 0 < e3.bi_valid && (e3.pending_buf[e3.pending++] = e3.bi_buf), e3.bi_buf = 0, e3.bi_valid = 0;
            }
            function q(e3, t4, r4, n3) {
              var o3 = 2 * t4, s2 = 2 * r4;
              return e3[o3] < e3[s2] || e3[o3] === e3[s2] && n3[t4] <= n3[r4];
            }
            function R(e3, t4, r4) {
              for (var n3 = e3.heap[r4], o3 = r4 << 1; o3 <= e3.heap_len && (o3 < e3.heap_len && q(t4, e3.heap[o3 + 1], e3.heap[o3], e3.depth) && o3++, !q(t4, n3, e3.heap[o3], e3.depth)); )
                e3.heap[r4] = e3.heap[o3], r4 = o3, o3 <<= 1;
              e3.heap[r4] = n3;
            }
            function O(e3, t4, r4) {
              var n3, o3, a2, u2, c2 = 0;
              if (0 !== e3.last_lit)
                for (; n3 = e3.pending_buf[e3.d_buf + 2 * c2] << 8 | e3.pending_buf[e3.d_buf + 2 * c2 + 1], o3 = e3.pending_buf[e3.l_buf + c2], c2++, 0 == n3 ? k(e3, o3, t4) : (k(e3, (a2 = p[o3]) + 256 + 1, t4), 0 !== (u2 = s[a2]) && I(e3, o3 -= h[a2], u2), k(e3, a2 = y(--n3), r4), 0 !== (u2 = i[a2]) && I(e3, n3 -= _[a2], u2)), c2 < e3.last_lit; )
                  ;
              k(e3, 256, t4);
            }
            function A(e3, t4) {
              var r4, n3, o3, s2 = t4.dyn_tree, i2 = t4.stat_desc.static_tree, a2 = t4.stat_desc.has_stree, u2 = t4.stat_desc.elems, c2 = -1;
              for (e3.heap_len = 0, e3.heap_max = 573, r4 = 0; r4 < u2; r4++)
                0 !== s2[2 * r4] ? (e3.heap[++e3.heap_len] = c2 = r4, e3.depth[r4] = 0) : s2[2 * r4 + 1] = 0;
              for (; e3.heap_len < 2; )
                s2[2 * (o3 = e3.heap[++e3.heap_len] = c2 < 2 ? ++c2 : 0)] = 1, e3.depth[o3] = 0, e3.opt_len--, a2 && (e3.static_len -= i2[2 * o3 + 1]);
              for (t4.max_code = c2, r4 = e3.heap_len >> 1; 1 <= r4; r4--)
                R(e3, s2, r4);
              for (o3 = u2; r4 = e3.heap[1], e3.heap[1] = e3.heap[e3.heap_len--], R(e3, s2, 1), n3 = e3.heap[1], e3.heap[--e3.heap_max] = r4, e3.heap[--e3.heap_max] = n3, s2[2 * o3] = s2[2 * r4] + s2[2 * n3], e3.depth[o3] = (e3.depth[r4] >= e3.depth[n3] ? e3.depth[r4] : e3.depth[n3]) + 1, s2[2 * r4 + 1] = s2[2 * n3 + 1] = o3, e3.heap[1] = o3++, R(e3, s2, 1), 2 <= e3.heap_len; )
                ;
              e3.heap[--e3.heap_max] = e3.heap[1];
              for (var l2, d2, p2, h2, g2, f2 = e3, m2 = t4.dyn_tree, _2 = t4.max_code, v2 = t4.stat_desc.static_tree, b2 = t4.stat_desc.has_stree, y2 = t4.stat_desc.extra_bits, M2 = t4.stat_desc.extra_base, I2 = t4.stat_desc.max_length, k2 = 0, w2 = 0; w2 <= 15; w2++)
                f2.bl_count[w2] = 0;
              for (m2[2 * f2.heap[f2.heap_max] + 1] = 0, l2 = f2.heap_max + 1; l2 < 573; l2++)
                I2 < (w2 = m2[2 * m2[2 * (d2 = f2.heap[l2]) + 1] + 1] + 1) && (w2 = I2, k2++), m2[2 * d2 + 1] = w2, _2 < d2 || (f2.bl_count[w2]++, h2 = 0, M2 <= d2 && (h2 = y2[d2 - M2]), g2 = m2[2 * d2], f2.opt_len += g2 * (w2 + h2), b2 && (f2.static_len += g2 * (v2[2 * d2 + 1] + h2)));
              if (0 !== k2) {
                do {
                  for (w2 = I2 - 1; 0 === f2.bl_count[w2]; )
                    w2--;
                } while (f2.bl_count[w2]--, f2.bl_count[w2 + 1] += 2, f2.bl_count[I2]--, 0 < (k2 -= 2));
                for (w2 = I2; 0 !== w2; w2--)
                  for (d2 = f2.bl_count[w2]; 0 !== d2; )
                    _2 < (p2 = f2.heap[--l2]) || (m2[2 * p2 + 1] !== w2 && (f2.opt_len += (w2 - m2[2 * p2 + 1]) * m2[2 * p2], m2[2 * p2 + 1] = w2), d2--);
              }
              C(s2, c2, e3.bl_count);
            }
            function x(e3, t4, r4) {
              var n3, o3, s2 = -1, i2 = t4[1], a2 = 0, u2 = 7, c2 = 4;
              for (0 === i2 && (u2 = 138, c2 = 3), t4[2 * (r4 + 1) + 1] = 65535, n3 = 0; n3 <= r4; n3++)
                o3 = i2, i2 = t4[2 * (n3 + 1) + 1], ++a2 < u2 && o3 === i2 || (a2 < c2 ? e3.bl_tree[2 * o3] += a2 : 0 !== o3 ? (o3 !== s2 && e3.bl_tree[2 * o3]++, e3.bl_tree[32]++) : a2 <= 10 ? e3.bl_tree[34]++ : e3.bl_tree[36]++, s2 = o3, c2 = (a2 = 0) === i2 ? (u2 = 138, 3) : o3 === i2 ? (u2 = 6, 3) : (u2 = 7, 4));
            }
            function P(e3, t4, r4) {
              var n3, o3, s2 = -1, i2 = t4[1], a2 = 0, u2 = 7, c2 = 4;
              for (0 === i2 && (u2 = 138, c2 = 3), n3 = 0; n3 <= r4; n3++)
                if (o3 = i2, i2 = t4[2 * (n3 + 1) + 1], !(++a2 < u2 && o3 === i2)) {
                  if (a2 < c2)
                    for (; k(e3, o3, e3.bl_tree), 0 != --a2; )
                      ;
                  else
                    0 !== o3 ? (o3 !== s2 && (k(e3, o3, e3.bl_tree), a2--), k(e3, 16, e3.bl_tree), I(e3, a2 - 3, 2)) : a2 <= 10 ? (k(e3, 17, e3.bl_tree), I(e3, a2 - 3, 3)) : (k(e3, 18, e3.bl_tree), I(e3, a2 - 11, 7));
                  s2 = o3, c2 = (a2 = 0) === i2 ? (u2 = 138, 3) : o3 === i2 ? (u2 = 6, 3) : (u2 = 7, 4);
                }
            }
            o2(_);
            var T = false;
            function E(e3, t4, r4, o3) {
              I(e3, 0 + (o3 ? 1 : 0), 3), o3 = t4, t4 = r4, D(r4 = e3), M(r4, t4), M(r4, ~t4), n2.arraySet(r4.pending_buf, r4.window, o3, t4, r4.pending), r4.pending += t4;
            }
            r3._tr_init = function(e3) {
              if (!T) {
                for (var t4, r4, n3, o3, u2 = new Array(16), y2 = n3 = 0; y2 < 28; y2++)
                  for (h[y2] = n3, t4 = 0; t4 < 1 << s[y2]; t4++)
                    p[n3++] = y2;
                for (p[n3 - 1] = y2, y2 = o3 = 0; y2 < 16; y2++)
                  for (_[y2] = o3, t4 = 0; t4 < 1 << i[y2]; t4++)
                    d[o3++] = y2;
                for (o3 >>= 7; y2 < 30; y2++)
                  for (_[y2] = o3 << 7, t4 = 0; t4 < 1 << i[y2] - 7; t4++)
                    d[256 + o3++] = y2;
                for (r4 = 0; r4 <= 15; r4++)
                  u2[r4] = 0;
                for (t4 = 0; t4 <= 143; )
                  c[2 * t4 + 1] = 8, t4++, u2[8]++;
                for (; t4 <= 255; )
                  c[2 * t4 + 1] = 9, t4++, u2[9]++;
                for (; t4 <= 279; )
                  c[2 * t4 + 1] = 7, t4++, u2[7]++;
                for (; t4 <= 287; )
                  c[2 * t4 + 1] = 8, t4++, u2[8]++;
                for (C(c, 287, u2), t4 = 0; t4 < 30; t4++)
                  l[2 * t4 + 1] = 5, l[2 * t4] = w(t4, 5);
                g = new v(c, s, 257, 286, 15), f = new v(l, i, 0, 30, 15), m = new v(new Array(0), a, 0, 19, 7), T = true;
              }
              e3.l_desc = new b(e3.dyn_ltree, g), e3.d_desc = new b(e3.dyn_dtree, f), e3.bl_desc = new b(e3.bl_tree, m), e3.bi_buf = 0, e3.bi_valid = 0, S(e3);
            }, r3._tr_stored_block = E, r3._tr_flush_block = function(e3, t4, r4, n3) {
              var o3, s2, i2, a2 = 0;
              if (0 < e3.level ? (2 === e3.strm.data_type && (e3.strm.data_type = function(e4) {
                for (var t5 = 4093624447, r5 = 0; r5 <= 31; r5++, t5 >>>= 1)
                  if (1 & t5 && 0 !== e4.dyn_ltree[2 * r5])
                    return 0;
                if (0 !== e4.dyn_ltree[18] || 0 !== e4.dyn_ltree[20] || 0 !== e4.dyn_ltree[26])
                  return 1;
                for (r5 = 32; r5 < 256; r5++)
                  if (0 !== e4.dyn_ltree[2 * r5])
                    return 1;
                return 0;
              }(e3)), A(e3, e3.l_desc), A(e3, e3.d_desc), a2 = function(e4) {
                var t5;
                for (x(e4, e4.dyn_ltree, e4.l_desc.max_code), x(e4, e4.dyn_dtree, e4.d_desc.max_code), A(e4, e4.bl_desc), t5 = 18; 3 <= t5 && 0 === e4.bl_tree[2 * u[t5] + 1]; t5--)
                  ;
                return e4.opt_len += 3 * (t5 + 1) + 5 + 5 + 4, t5;
              }(e3), o3 = e3.opt_len + 3 + 7 >>> 3, (s2 = e3.static_len + 3 + 7 >>> 3) <= o3 && (o3 = s2)) : o3 = s2 = r4 + 5, r4 + 4 <= o3 && -1 !== t4)
                E(e3, t4, r4, n3);
              else if (4 === e3.strategy || s2 === o3)
                I(e3, 2 + (n3 ? 1 : 0), 3), O(e3, c, l);
              else {
                I(e3, 4 + (n3 ? 1 : 0), 3);
                var d2 = e3, p2 = (t4 = e3.l_desc.max_code + 1, r4 = e3.d_desc.max_code + 1, a2 + 1);
                for (I(d2, t4 - 257, 5), I(d2, r4 - 1, 5), I(d2, p2 - 4, 4), i2 = 0; i2 < p2; i2++)
                  I(d2, d2.bl_tree[2 * u[i2] + 1], 3);
                P(d2, d2.dyn_ltree, t4 - 1), P(d2, d2.dyn_dtree, r4 - 1), O(e3, e3.dyn_ltree, e3.dyn_dtree);
              }
              S(e3), n3 && D(e3);
            }, r3._tr_tally = function(e3, t4, r4) {
              return e3.pending_buf[e3.d_buf + 2 * e3.last_lit] = t4 >>> 8 & 255, e3.pending_buf[e3.d_buf + 2 * e3.last_lit + 1] = 255 & t4, e3.pending_buf[e3.l_buf + e3.last_lit] = 255 & r4, e3.last_lit++, 0 === t4 ? e3.dyn_ltree[2 * r4]++ : (e3.matches++, t4--, e3.dyn_ltree[2 * (p[r4] + 256 + 1)]++, e3.dyn_dtree[2 * y(t4)]++), e3.last_lit === e3.lit_bufsize - 1;
            }, r3._tr_align = function(e3) {
              I(e3, 2, 3), k(e3, 256, c), 16 === (e3 = e3).bi_valid ? (M(e3, e3.bi_buf), e3.bi_buf = 0, e3.bi_valid = 0) : 8 <= e3.bi_valid && (e3.pending_buf[e3.pending++] = 255 & e3.bi_buf, e3.bi_buf >>= 8, e3.bi_valid -= 8);
            };
          }, { "../utils/common": 41 }], 53: [function(e2, t3, r3) {
            "use strict";
            t3.exports = function() {
              this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = "", this.state = null, this.data_type = 2, this.adler = 0;
            };
          }, {}], 54: [function(e2, t3, r3) {
            (function(e3) {
              !function(e4, t4) {
                "use strict";
                var r4, n2, s, i, a, u, c, l, d;
                function p(e5) {
                  delete a[e5];
                }
                function h(e5) {
                  if (u)
                    setTimeout(h, 0, e5);
                  else {
                    var t5 = a[e5];
                    if (t5) {
                      u = true;
                      try {
                        var r5 = t5.callback, n3 = t5.args;
                        switch (n3.length) {
                          case 0:
                            r5();
                            break;
                          case 1:
                            r5(n3[0]);
                            break;
                          case 2:
                            r5(n3[0], n3[1]);
                            break;
                          case 3:
                            r5(n3[0], n3[1], n3[2]);
                            break;
                          default:
                            r5.apply(void 0, n3);
                        }
                      } finally {
                        p(e5), u = false;
                      }
                    }
                  }
                }
                function g(t5) {
                  t5.source === e4 && "string" == typeof t5.data && 0 === t5.data.indexOf(s) && h(+t5.data.slice(s.length));
                }
                e4.setImmediate || (i = 1, u = !(a = {}), c = e4.document, l = (l = Object.getPrototypeOf && Object.getPrototypeOf(e4)) && l.setTimeout ? l : e4, d = "[object process]" === {}.toString.call(e4.process) ? function(e5) {
                  o.nextTick(function() {
                    h(e5);
                  });
                } : function() {
                  var t5, r5;
                  if (e4.postMessage && !e4.importScripts)
                    return t5 = true, r5 = e4.onmessage, e4.onmessage = function() {
                      t5 = false;
                    }, e4.postMessage("", "*"), e4.onmessage = r5, t5;
                }() ? (s = "setImmediate$" + Math.random() + "$", e4.addEventListener ? e4.addEventListener("message", g, false) : e4.attachEvent("onmessage", g), function(t5) {
                  e4.postMessage(s + t5, "*");
                }) : e4.MessageChannel ? ((n2 = new MessageChannel()).port1.onmessage = function(e5) {
                  h(e5.data);
                }, function(e5) {
                  n2.port2.postMessage(e5);
                }) : c && "onreadystatechange" in c.createElement("script") ? (r4 = c.documentElement, function(e5) {
                  var t5 = c.createElement("script");
                  t5.onreadystatechange = function() {
                    h(e5), t5.onreadystatechange = null, r4.removeChild(t5), t5 = null;
                  }, r4.appendChild(t5);
                }) : function(e5) {
                  setTimeout(h, 0, e5);
                }, l.setImmediate = function(e5) {
                  "function" != typeof e5 && (e5 = new Function("" + e5));
                  for (var t5 = new Array(arguments.length - 1), r5 = 0; r5 < t5.length; r5++)
                    t5[r5] = arguments[r5 + 1];
                  return a[i] = { callback: e5, args: t5 }, d(i), i++;
                }, l.clearImmediate = p);
              }("undefined" == typeof self ? void 0 === e3 ? this : e3 : self);
            }).call(this, void 0 !== n ? n : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
          }, {}] }, {}, [10])(10);
        }).call(this, r(113).Buffer, r(117).setImmediate, r(12), r(47));
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return a;
        });
        t = r(3);
        var n = r.n(t), o = r(1), s = r(0), i = function(e2, t2) {
          var r2 = "function" == typeof Symbol && e2[Symbol.iterator];
          if (!r2)
            return e2;
          var n2, o2, s2 = r2.call(e2), i2 = [];
          try {
            for (; (void 0 === t2 || 0 < t2--) && !(n2 = s2.next()).done; )
              i2.push(n2.value);
          } catch (e3) {
            o2 = { error: e3 };
          } finally {
            try {
              n2 && !n2.done && (r2 = s2.return) && r2.call(s2);
            } finally {
              if (o2)
                throw o2.error;
            }
          }
          return i2;
        }, a = (u.prototype.initEngine = function(e2, t2, r2) {
          return this.eventBusMap.set(e2, r2), r2 = { handle: e2, appID: t2, token: "", tokenExpireTime: 0, user: {}, cloudSetting: { app_config: { main_domain_url: "zego.im", data_reporter_url: "webzim-report.zego.im", log_uploader_url: "webzim-detaillog.zego.im" }, qps: { get_room_user_attrs: "5/30", send_msg: 100, send_barrage_msg: 100, default_token: 30, max_token: 100, interval_add_token: 5, max_handle_req: 10 }, req_to: { def: 3e3, send_msg: 1e4 }, retry: { login_max_itvl: 300 } }, cryptoConfig: {}, mailHBConfig: { conv_list_seq: n.a.fromString("0"), group_list_seq: n.a.fromString("0"), call_list_seq: n.a.fromString("0"), conv_pinned_list_seq: 0, c2c_statemsg_seq: n.a.fromString("0"), extra_msg_list_seq: n.a.fromString("0"), fetch_c2c_msg_count: 0, fetch_group_msg_count: 0, fetch_room_msg_count: 0, fetch_conv_list: 0, fetch_group_list: 0, usermail_hb_interval: 1e4, msg_to: 1e4, msg_itvl: 3e4, list_to: 1e4, list_itvl: 3e4, reaction_brief_len: 5, state_seq_reduce_num: -1 } }, this.engineConfigMap.set(e2, r2), r2;
        }, u.prototype.unInitEngine = function(e2, t2) {
          var r2 = this.engineConfigMap.get(e2);
          r2 && (r2.cloudTimer && clearInterval(r2.cloudTimer), r2.cloudTimer = 0, r2.user = {}, r2.sessionID = void 0, r2.serverUserID = void 0, r2.controls = void 0, t2 && (this.engineConfigMap.delete(e2), this.eventBusMap.delete(e2)));
        }, u.prototype.fetchZGLogConfig = function(e2) {
          var t2 = this.advancedConfig.geoFence.host.detaillog, r2 = this.advancedConfig.geoFence.host.logreport;
          return t2 && r2 ? [t2 + "/zglog/zip", r2] : (r2 = (t2 = this.engineConfigMap.get(e2).cloudSetting.app_config).main_domain_url, e2 = t2.data_reporter_url, t2 = t2.log_uploader_url, ["https://" + this.appendBackupDomain(t2, r2) + "/zglog/zip", "wss://" + this.appendBackupDomain(e2, r2) + "/zglog/web"]);
        }, u.prototype.fetchZGLogWhitelistUrl = function(e2) {
          var t2 = this.advancedConfig.geoFence.host.detaillog;
          return t2 ? t2 + "/zglog/whitelist" : (e2 = (t2 = this.engineConfigMap.get(e2).cloudSetting.app_config).main_domain_url, t2 = t2.log_uploader_url, "https://" + this.appendBackupDomain(t2, e2) + "/zglog/whitelist");
        }, u.prototype.startSyncRemoteConfig = function(e2, t2, r2) {
          var n2 = this, o2 = this.engineConfigMap.get(t2);
          return o2.cloudTimer || (o2.cloudTimer = setInterval(function() {
            o2.token && n2.syncRemoteConfig(e2, o2);
          }, 36e5)), this.syncRemoteConfig(e2, o2, r2);
        }, u.prototype.syncRemoteConfig = function(e2, t2, r2) {
          return r2 = { appid: t2.appID, id_name: t2.user.userID, product: "ZIM", files: ["config", "biz_conf"], param: { platform: "1", sdk_version: "" + this.deviceInfo.sdk_ver }, timestamp: Date.now(), biztype: 0, deviceid: o.g, compress: false, mode: "online", token: r2 || t2.token }, e2.sendHttpRequest({ url: "/cloud-setting/get", method: "POST" }, r2, 10).then(function(e3) {
            if (!(e3 && e3.data && e3.data.biz_conf && e3.data.biz_conf.data))
              return false;
            var r3 = (r3 = null == (r3 = null == (r3 = e3.data.config) ? void 0 : r3.data) ? void 0 : r3.app_config) ? { main_domain_url: r3.main_domain_url, data_reporter_url: r3.data_reporter_url, log_uploader_url: r3.log_uploader_url } : t2.cloudSetting.app_config, n2 = (r3 = (e3.data.biz_conf.data.app_config = r3, e3.data.biz_conf.data)).qps, o2 = (r3 = r3.req_to, (a2 = i(String(n2.send_msg).split("~"), 2))[0]), a2 = a2[1];
            o2 = (a2 = (n2.send_msg = 1e3 * Number(a2) / Number(o2), i(String(n2.send_barrage_msg).split("~"), 2)))[0], a2 = a2[1], o2 = (a2 = (n2.send_barrage_msg = 1e3 * Number(a2) / Number(o2), i(n2.get_room_user_attrs.split("/"), 2)))[0], n2 = a2[1];
            return s.l.get_user_attribute_qps = +o2, s.l.get_user_attribute_interval = 1e3 * +n2, r3.def = 1e3 * r3.def, r3.send_msg = 1e3 * r3.send_msg, Object.assign(t2.cloudSetting, e3.data.biz_conf.data), true;
          });
        }, u.prototype.appendBackupDomain = function(e2, t2) {
          return -1 == e2.indexOf(".") ? e2 + "." + t2 : e2;
        }, u.prototype.onNetworkStatusChange = function() {
          var e2, t2, r2 = this, n2 = { wifi: 2, "2g": 3, "3g": 4, "4g": 5, unknown: 32 };
          function s2(e3) {
            return e3.toLowerCase().replace("-", "");
          }
          o.n ? (o.n.getNetworkType({ success: function(e3) {
            r2.netType = s2(e3.networkType || "unknown"), r2.deviceInfo.net_type = n2[r2.netType] || n2.unknown;
          } }), o.n.onNetworkStatusChange(function(e3) {
            r2.netType = s2(e3.networkType || "unknown"), r2.deviceInfo.net_type = n2[r2.netType] || n2.unknown, r2.emitNetworkChange(e3.isConnected);
          })) : ((e2 = navigator.connection || navigator.mozConnection || navigator.webkitConnection) && (this.netType = s2(e2.type || e2.effectiveType || "unknown"), this.deviceInfo.net_type = n2[this.netType] || n2.unknown, e2.addEventListener("change", function() {
            r2.netType = s2(e2.type || e2.effectiveType || "unknown"), r2.deviceInfo.net_type = n2[r2.netType] || n2.unknown;
          })), t2 = function() {
            return r2.emitNetworkChange(navigator.onLine);
          }, window.addEventListener("online", t2), window.addEventListener("offline", t2));
        }, u.prototype.emitNetworkChange = function(e2) {
          var t2 = this;
          this.eventBusMap.forEach(function(r2) {
            return r2.exec(s.t.INetworkChange, e2, t2.netType);
          });
        }, u);
        function u(e2) {
          this.engineConfigMap = /* @__PURE__ */ new Map(), this.eventBusMap = /* @__PURE__ */ new Map(), this.advancedConfig = { zim_cross_platform: "", zim_product_source: "", geoFence: { reg: /(https?:\/\/)?([a-z0-9.-]+)\.([a-z]{2,})((\/[a-zA-Z0-9#]+\/?)*)/, type: s.w.None, areas: [], id: 0, host: { accesshub: "", logreport: "", detaillog: "", fileproxy: "" } } }, this.serverOffsetTime = 0, this.netType = "", this.deviceInfo = { sdk_ver: e2.split(".").reverse().reduce(function(e3, t2, r2) {
            return e3 + +t2 * Math.pow(100, r2);
          }, 0), term_type: o.n ? 7 : 6, device_id: o.g, net_type: 32 }, this.onNetworkStatusChange();
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return u;
        });
        t = r(3);
        var n = r.n(t), o = r(85), s = r(1), i = r(0), a = function() {
          return (a = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var o2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, o2) && (e2[o2] = t2[o2]);
            return e2;
          }).apply(this, arguments);
        }, u = (c.prototype.setDB = function(e2) {
          this.dataReport.setDB(e2);
        }, c.prototype.clearDB = function() {
          this.dataReport.clearDB();
        }, c.prototype.init = function(e2, t2) {
          this.isInited || (this.isInited = true, this.dataReport.init({ isProd: this.isProd, appID: e2, deviceID: this.settings.deviceInfo.device_id, serverUrl: t2, importantLevel: 0, levels: [0, 10] }));
        }, c.prototype.start = function(e2, t2, r2) {
          var n2;
          t2 ? ((n2 = /* @__PURE__ */ new Map()).set("userID", e2), n2.set("token", t2), r2 && n2.set("serverUrl", r2), this.dataReport.startReport(n2), this.dataReport.resume()) : this.dataReport.pause();
        }, c.prototype.beginNetworkRequest = function(e2, t2, r2, n2) {
          var o2 = this.createDateEvent(e2);
          o2.caller_type = r2, o2._req_ = n2, this.evenDatatMap.set(e2 + t2, o2);
        }, c.prototype.endNetworkRequest = function(e2, t2, r2, n2) {
          var o2 = this.evenDatatMap.get(e2 + t2);
          if (o2 && (!r2 || r2.code != i.W))
            return r2 && r2.code ? (o2.error = r2.code, o2.error_message = (r2.message || "") + (n2 || "")) : (o2.error_message = n2 || "", o2._rsp_ = r2), o2.time_consumed = Date.now() - o2.event_time, this.upload(o2, true), this.evenDatatMap.delete(e2 + t2), delete o2.error, delete o2.error_message, delete o2.sdk_version, delete o2.term_type, delete o2.net_type, delete o2.event, delete o2.event_time, delete o2.time_consumed, delete o2.time_offset, o2;
        }, c.prototype.reportNetworkRequest = function(e2, t2) {
          (e2 = this.createDateEvent(e2))._rsp_ = t2, this.upload(e2, true);
        }, c.prototype.reportSDKEvent = function(e2, t2) {
          e2 = this.createDateEvent(e2, t2), this.upload(e2, false);
        }, c.prototype.reportPushEvent = function(e2, t2, r2, n2) {
          var o2 = this.createDateEvent("/sdk/push");
          o2.push_cmd = e2, o2.push_id = r2, o2.push_type = this.stringify(n2), o2.time_consumed = t2, this.upload(o2, false), this.isProd;
        }, c.prototype.stringify = function(e2) {
          return JSON.stringify(e2, function(e3, t2) {
            return t2 instanceof Uint8Array ? "b=" + t2.length : t2 instanceof Array && 2 < t2.length ? [r2 = t2.length, t2[0], t2[r2 - 1]] : "string" == typeof t2 && 32 < t2.length ? "s=" + t2.length : t2 instanceof n.a ? t2.toString() : t2;
            var r2;
          }).replace(/\"(\w+)\":/g, "$1:");
        }, c.prototype.createDateEvent = function(e2, t2) {
          return a(a({ event: e2, event_time: Date.now(), time_consumed: 0, time_offset: this.settings.serverOffsetTime }, this.commonFields), t2);
        }, c.prototype.upload = function(e2, t2) {
          if (t2)
            try {
              this.hookCMDEvent(e2);
            } catch (e3) {
            }
          e2.net_type = this.settings.netType, t2 = JSON.stringify(e2, function(e3, t3) {
            return t3 instanceof n.a ? +t3.toString() : t3;
          }), this.dataReport.report(t2, -1 != this.unSaveEvents.indexOf(e2.event));
        }, c.prototype.set_offline_push = function(e2, t2) {
          e2.offline_push_w = t2 ? t2.pushStrategyId || "1" : "0", t2 && t2.custom_map && (e2.offline_push_map = JSON.stringify(t2.custom_map));
        }, c.prototype.hookCMDEvent = function(e2) {
          var t2, r2, n2, o2 = e2._req_, a2 = e2._rsp_;
          switch (delete e2._req_, delete e2._rsp_, e2.event) {
            case i.c.sw_login.cmd:
              e2.os_type = s.h, this.settings.advancedConfig.zim_cross_platform && (e2.cross_platform = this.settings.advancedConfig.zim_cross_platform), this.settings.advancedConfig.zim_product_source && (e2.product_source = this.settings.advancedConfig.zim_product_source), this.settings.advancedConfig.geoFence.id && (n2 = (r2 = this.settings.advancedConfig.geoFence).id, t2 = r2.type, r2 = r2.areas, e2.geo_fence = JSON.stringify({ id: n2, type: t2, areas: r2 })), e2.zpns_push_id = o2.zpns_push_id, e2.sdk_action = o2.sdk_action, e2.sdk_duration = o2.sdk_duration, e2.server_ip = o2.sdk_server_ip, a2 && (e2.usernid = a2.rspHeader.user_nid.toString(), e2.hb_interval = a2.hb_interval, e2.hb_timeout = a2.hb_timeout, e2.server_timestamp = a2.server_timestamp, e2.im_conf_json = a2.im_conf_json);
              break;
            case i.c.sw_logout.cmd:
              e2.logout_reason = o2.logout_reason;
              break;
            case i.c.sw_renew_token.cmd:
              e2.sdk_duration = o2.sdk_duration;
              break;
            case i.c.sw_hb.cmd:
              a2 && (e2.heartbeat_interval = a2.heartbeat_interval, e2.hb_timeout = a2.hb_timeout, e2.server_timestamp = a2.server_timestamp);
              break;
            case i.c.sw_push_kickout.cmd:
              e2.error = a2.code, e2.error_message = a2.key, e2.need_relogin = a2.seq;
              break;
            case i.c.sw_push_redirect.cmd:
              e2.error_message = a2.quey_user_id.join();
              break;
            case i.c.modify_user_info.cmd:
              e2.set_flag = o2.set_flag;
              break;
            case i.c.fetch_user_info.cmd:
              a2 && (e2.result_len = a2.result.length, e2.err_list_len = a2.err_list.length, 0 < e2.err_list_len && e2.err_list_len < 6 && (e2.err_list = JSON.stringify(a2.err_list)));
              break;
            case i.c.userstate_zpns_report.cmd:
              e2.zpns_push_id = o2.key;
              break;
            case i.c.usermail_hb.cmd:
              a2 && (e2.conv_list_seq = a2.conv_list_seq, e2.group_list_seq = a2.group_list_seq, e2.c2c_msg_seq = a2.c2c_msg_seq, e2.c2c_statemsg_seq = a2.c2c_statemsg_seq, e2.extra_msg_list_seq = a2.extra_msg_list_seq, e2.conv_pinned_list_seq = a2.conv_pinned_list_seq, e2.call_list_seq = a2.call_list_seq, e2.db_seq_json = JSON.stringify(o2.db_seq_json), e2.im_conf_json = JSON.stringify(Object(s.q)(this.pickCmds.usermail_hb, a2)));
              break;
            case i.c.usermail_convlist.cmd:
              e2.how = o2.how, e2.count = o2.count, e2.full_pull = o2.full_pull, e2.conv_list_seq = o2.conv_list_seq, a2 && (e2.rsp_conv_list_seq = a2.cur, e2.max_list_seq = a2.max, e2.full_list = a2.full_list, e2.fetch_end = a2.fetch_end, e2.conv_list_len = a2.svrCount, e2.degree = a2.degree);
              break;
            case i.c.usermail_convpinnedlist.cmd:
              e2.how = o2.how, e2.count = o2.count, e2.full_pull = o2.full_pull, e2.conv_pinned_list_seq = o2.conv_list_seq, a2 && (e2.rsp_conv_pinned_list_seq = a2.cur, e2.max_pinned_list_seq = a2.max, e2.full_list = a2.full_list, e2.fetch_end = a2.fetch_end, e2.conv_list_len = a2.svrCount, e2.degree = a2.degree);
              break;
            case i.c.usermail_del_conv.cmd:
              e2.conv_id = o2.conv_id, e2.conv_type = o2.conv_type, a2 && (e2.conv_list_seq = a2.conv_list_seq, e2.conv_msg_seq = a2.conv_msg_seq);
              break;
            case i.c.usermail_modify_conv_pinned_lv.cmd:
              e2.conv_id = o2.conv_id, e2.conv_type = o2.conv_type, e2.pinned_type = o2.pinned_type;
              break;
            case i.c.usermail_update_read_seq.cmd:
              e2.conv_id = o2.conv_id, e2.conv_type = o2.conv_type, e2.read_seq = o2.read_seq;
              break;
            case i.c.c2c_msglist.cmd:
              e2.conv_id = o2.conv_id, e2.conv_type = o2.conv_type, e2.how = o2.how, e2.count = o2.count, e2.mode = o2.mode, e2.login_fetch = o2.login_fetch, e2.conv_msg_seq = o2.conv_msg_seq, a2 && (e2.degree = a2.degree, e2.fetch_end = a2.fetch_end, e2.msgs_len = a2.svrCount, e2.dbSeq = a2.dbSeq, e2.next_conv_msg_seq = a2.next_seq, e2.max_conv_msg_seq = a2.maxSeq);
              break;
            case i.c.group_msglist.cmd:
              e2.group_id = o2.group_id, e2.how = o2.how, e2.count = o2.count, e2.sort_type = o2.sort_type, e2.conv_msg_seq = o2.conv_msg_seq, a2 && (e2.degree = a2.degree, e2.fetch_end = a2.fetch_end, e2.msgs_len = a2.svrCount, e2.dbSeq = a2.dbSeq, e2.next_conv_msg_seq = a2.next_seq, e2.max_conv_msg_seq = a2.maxSeq);
              break;
            case i.c.room_msglist.cmd:
              e2.room_id = o2.room_id, e2.sub_room_id = o2.sub_room_id, e2.room_session_id = o2.room_session_id.toString(), e2.room_user_session_id = o2.room_user_session_id.toString(), e2.how = o2.how, e2.count = o2.count, e2.sort_type = o2.sort_type, e2.conv_msg_seq = o2.conv_msg_seq, a2 && (e2.degree = a2.degree, e2.fetch_end = a2.fetch_end, e2.msgs_len = a2.svrCount, e2.dbSeq = a2.dbSeq, e2.next_conv_msg_seq = a2.next_seq, e2.max_conv_msg_seq = a2.maxSeq);
              break;
            case i.c.c2c_msg.cmd:
              e2.peer_user_id = o2.conv_id, e2.fetch_peer_user_info = o2.fetch_peer_user_info, e2.msg_type = o2.msg_info.msg_type, e2.msg_len = o2.msg_info.msg.length, e2.priority = o2.msg_info.priority_type, this.set_offline_push(e2, o2.msg_info.offline_push), a2 && (e2.conv_disable = a2.conv_disable, e2.send_count_after_read = a2.send_count_after_read, e2.msg_id = a2.msg_svr_info.msg_id, e2.conv_msg_seq = a2.msg_svr_info.conv_msg_seq, e2.c2c_msg_seq = a2.msg_svr_info.c2c_msg_seq, e2.has_content = a2.msg_svr_info.has_content, e2.msg_version = a2.msg_svr_info.version);
              break;
            case i.c.c2c_command.cmd:
              e2.peer_user_id = o2.conv_id, e2.msg_type = o2.command_msg_info.msg_type, e2.msg_len = o2.command_msg_info.msg.length, e2.priority = o2.command_msg_info.priority_type, a2 && (e2.msg_id = a2.command_svr_info.msg_id.toString(), e2.msg_time = a2.command_svr_info.conv_msg_seq);
              break;
            case i.c.c2c_del_msg.cmd:
              e2.conv_id = o2.conv_id, e2.conv_type = o2.conv_type, e2.msg_ids_len = o2.msg_ids.length, 0 < e2.msg_ids_len && e2.msg_ids_len < 6 && (e2.msg_ids = o2.msg_ids.join());
              break;
            case i.c.c2c_del_all_msg.cmd:
              e2.conv_id = o2.conv_id, e2.conv_type = o2.conv_type;
              break;
            case i.c.group_msg.cmd:
              e2.group_id = o2.conv_id, e2.msg_type = o2.msg_info.msg_type, e2.msg_len = o2.msg_info.msg.length, e2.priority = o2.msg_info.priority_type, this.set_offline_push(e2, o2.msg_info.offline_push), a2 && (e2.send_count_after_read = a2.send_count_after_read, e2.msg_id = a2.msg_svr_info.msg_id, e2.conv_msg_seq = a2.msg_svr_info.conv_msg_seq, e2.has_content = a2.msg_svr_info.has_content, e2.msg_version = a2.msg_svr_info.version);
              break;
            case i.c.group_command.cmd:
              e2.group_id = o2.conv_id, e2.msg_type = o2.command_msg_info.msg_type, e2.msg_len = o2.command_msg_info.msg.length, e2.priority = o2.command_msg_info.priority_type, a2 && (e2.msg_id = a2.command_svr_info.msg_id.toString(), e2.msg_time = a2.command_svr_info.conv_msg_seq);
              break;
            case i.c.group_del_msg.cmd:
              e2.group_id = o2.conv_id, e2.conv_msg_seq_len = o2.conv_msg_seq.length, 0 < e2.conv_msg_seq_len && e2.conv_msg_seq_len < 6 && (e2.conv_msg_seqs = o2.conv_msg_seq.join());
              break;
            case i.c.group_del_all_msg.cmd:
              e2.group_id = o2.conv_id;
              break;
            case i.c.room_msg.cmd:
              e2.room_id = o2.conv_id, e2.sub_room_id = o2.sub_room_id, e2.room_session_id = o2.room_session_id.toString(), e2.room_user_session_id = o2.room_user_session_id.toString(), e2.msg_type = o2.msg_info.msg_type, e2.msg_len = o2.msg_info.msg.length, e2.priority = o2.msg_info.priority_type, a2 && (e2.msg_id = a2.msg_svr_info.msg_id.toString(), e2.conv_msg_seq = a2.msg_svr_info.conv_msg_seq, e2.has_content = a2.msg_svr_info.has_content, e2.msg_version = a2.msg_svr_info.version);
              break;
            case i.c.room_command.cmd:
              e2.room_id = o2.conv_id, e2.sub_room_id = o2.sub_room_id, e2.room_session_id = o2.room_session_id.toString(), e2.room_user_session_id = o2.room_user_session_id.toString(), e2.msg_type = o2.command_msg_info.msg_type, e2.msg_len = o2.command_msg_info.msg.length, e2.priority = o2.command_msg_info.priority_type, a2 && (e2.msg_id = a2.msg_id.toString());
              break;
            case i.c.file_upload.cmd:
              e2.md5 = o2.md5, e2.file_type = o2.file_type, e2.name = o2.name, e2.size = o2.size, e2.duration = o2.duration, a2 && (e2.state = a2.state, e2.upload_url = a2.upload_req.url, e2.upload_url.indexOf("?") && (e2.upload_url = e2.upload_url.substring(0, e2.upload_url.indexOf("?"))));
              break;
            case i.c.file_process.cmd:
              e2.md5 = o2.md5, e2.file_type = o2.file_type, a2 && (e2.state = a2.state, e2.download_url = a2.download_url, e2.download_url.indexOf("?") && (e2.download_url = e2.download_url.substring(0, e2.download_url.indexOf("?"))));
              break;
            case i.c.c2c_conv_read_receipt.cmd:
              e2.conv_id = o2.group_id, e2.conv_msg_seq = o2.conv_msg_seq, a2 && (e2.receipt_seq = a2.conv_list_seq);
              break;
            case i.c.c2c_msg_read_receipt.cmd:
              e2.conv_id = o2.conv_id, e2.conv_msg_seq_len = o2.conv_msg_seq.length, a2 && (e2.receipt_seqs = JSON.stringify(a2.conv_msg_seq2_receipt_seq));
              break;
            case i.c.group_msg_read_receipt.cmd:
              e2.group_id = o2.conv_id, e2.conv_msg_seq_len = o2.conv_msg_seq.length, a2 && (e2.receipt_seqs = JSON.stringify(a2.conv_msg_seq2_receipt_seq));
              break;
            case i.c.msg_read_receipt_detail.cmd:
              e2.group_id = o2.group_id, e2.conv_msg_seq = o2.conv_msg_seq, e2.count = o2.count, a2 && (e2.list_seq = a2.list_seq, e2.fetch_end = a2.fetch_end, e2.next_list_seq = a2.next_list_seq, e2.read_count = a2.read_count, e2.unread_count = a2.unread_count, e2.read_members_len = a2.read_members_len, e2.unread_members_len = a2.unread_members_len, e2.degree = a2.degree);
              break;
            case i.c.c2c_msg_revoke.cmd:
            case i.c.group_msg_revoke.cmd:
              o2.conv_id && (e2.conv_id = o2.conv_id), e2.conv_msg_seq = o2.conv_msg_seq, e2.extended_data_len = (null == (n2 = o2.payload) ? void 0 : n2.length) || 0, this.set_offline_push(e2, o2.offline_push), a2 && (e2.statemsg_seq = a2.statemsg_seq);
              break;
            case i.c.c2c_add_reaction.cmd:
            case i.c.c2c_del_reaction.cmd:
            case i.c.group_add_reaction.cmd:
            case i.c.group_del_reaction.cmd:
              e2.conv_id = o2.conv_id, e2.conv_msg_seq = o2.conv_msg_seq, e2.reaction_key = Array.isArray(o2.reaction_key) ? o2.reaction_key[0] : o2.reaction_key, a2 && (e2.succ_list_len = a2.succ_list.length, e2.error_list_len = a2.error_list.length);
              break;
            case i.c.c2c_get_reaction.cmd:
            case i.c.group_get_reaction.cmd:
              e2.conv_id = o2.conv_id, e2.conv_msg_seq = o2.conv_msg_seq, e2.reaction_key = o2.reaction_key, e2.max_reaction_seq = o2.max_reaction_seq, e2.is_detail = o2.is_detail, a2 && (e2.rsp_max_reaction_seq = a2.max_reaction_seq, e2.total_user_count = a2.total_user_count, e2.user_reaction_len = a2.user_reaction.length, e2.include_self = a2.include_self);
              break;
            case i.c.c2c_reaction_list.cmd:
            case i.c.group_reaction_list.cmd:
              e2.conv_id = o2.conv_id, e2.conv_msg_seq = o2.conv_msg_seq, e2.start_reaction_seq = o2.start_reaction_seq, a2 && (e2.fetch_end = a2.fetch_end, e2.msg_next_reaction_seq = a2.msg_next_reaction_seq, e2.msg_max_reaction_seq = a2.msg_max_reaction_seq, e2.reaction_list_len = a2.svrCount, e2.degree = a2.degree);
              break;
            case i.c.extra_msglist.cmd:
              e2.how = o2.how, e2.count = o2.count, e2.list_seq = o2.list_seq, a2 && (e2.fetch_end = a2.fetch_end, e2.next_list_seq = a2.next_list_seq, e2.list_len = a2.svrCount, e2.degree = a2.degree);
              break;
            case i.c.c2c_msg_state_list.cmd:
            case i.c.group_msg_state_list.cmd:
              e2.conv_id = o2.conv_id, e2.min_msg_seq = o2.min_msg_seq, e2.max_msg_seq = o2.max_msg_seq, e2.how = o2.how, e2.statemsg_seq = o2.statemsg_seq, e2.count = o2.count, a2 && (e2.fetch_end = a2.fetch_end, e2.next_statemsg_seq = a2.next_statemsg_seq, e2.statemsg_list_len = a2.svrCount, e2.degree = a2.degree);
              break;
            case i.c.c2c_query_msg.cmd:
            case i.c.group_query_msg.cmd:
            case i.c.room_query_msg.cmd:
              e2.event == i.c.c2c_query_msg.cmd ? e2.conv_id = o2.room_id : e2.event == i.c.group_query_msg.cmd ? e2.group_id = o2.room_id : (e2.room_id = o2.room_id, e2.sub_room_id = o2.sub_room_id, e2.room_session_id = o2.room_session_id.toString(), e2.room_user_session_id = o2.room_user_session_id.toString()), e2.client_infos_len = o2.client_infos.length, a2 && (e2.msgs_len = a2.msgs.length, e2.fail_list_len = a2.fail_list.length);
              break;
            case i.c.room_create.cmd:
              e2.room_id = o2.room_id, a2 && (e2.sub_room_id = a2.sub_room_id, e2.room_session_id = a2.room_session_id.toString(), e2.room_user_session_id = a2.room_user_session_id.toString(), e2.destroy_delay = o2.destroy_delay || a2.destroy_delay, e2.room_info_interval = a2.room_info_interval, e2.userlist_enable = a2.userlist_enable, e2.userlist_merge_timeout = a2.userlist_merge_timeout, e2.userlist_interval = a2.userlist_interval, a2.attributes && (e2.attribute_seq = a2.attributes.attribute_seq, e2.attributes_len = a2.attributes.attributes.length), e2.attributes_pull_interval = a2.attributes_pull_interval, e2.attributes_merge_timeout = a2.attributes_merge_timeout, e2.msg_merge_timeout = a2.msg_merge_timeout, e2.msg_pull_interval = a2.msg_pull_interval, e2.enabled_offline_msg = a2.enabled_offline_msg, e2.conv_msg_seq = a2.conv_msg_seq);
              break;
            case i.c.room_enter.cmd:
              e2.room_id = o2.room_id, e2.create_if_not_exist = o2.create_if_not_exist, a2 && (e2.sub_room_id = a2.sub_room_id, e2.room_session_id = a2.room_session_id.toString(), e2.room_user_session_id = a2.room_user_session_id.toString(), e2.destroy_delay = o2.destroy_delay || a2.destroy_delay, e2.userlist_seq = a2.userlist_seq, e2.user_count = a2.user_count, e2.room_info_interval = a2.room_info_interval, e2.userlist_enable = a2.userlist_enable, e2.userlist_merge_timeout = a2.userlist_merge_timeout, e2.userlist_interval = a2.userlist_interval, a2.attributes && (e2.attribute_seq = a2.attributes.attribute_seq, e2.attributes_len = a2.attributes.attributes.length), e2.attributes_pull_interval = a2.attributes_pull_interval, e2.attributes_merge_timeout = a2.attributes_merge_timeout, e2.msg_merge_timeout = a2.msg_merge_timeout, e2.msg_pull_interval = a2.msg_pull_interval, e2.attribute_seq = a2.attribute_seq, e2.enabled_offline_msg = a2.enabled_offline_msg, e2.conv_msg_seq = a2.conv_msg_seq);
              break;
            case i.c.room_quit.cmd:
              e2.room_id = o2.room_id, e2.sub_room_id = o2.sub_room_id, e2.room_session_id = o2.room_session_id.toString(), e2.room_user_session_id = o2.room_user_session_id.toString();
              break;
            case i.c.room_info.cmd:
              e2.room_id = o2.room_id, e2.sub_room_id = o2.sub_room_id, e2.room_session_id = o2.room_session_id.toString(), a2 && (e2.userlist_seq = a2.userlist_seq, e2.user_count = a2.user_count, e2.room_info_interval = a2.room_info_interval, e2.ulist_to = a2.ulist_to, e2.ulist_itvl = a2.ulist_itvl, e2.attribute_seq = a2.attribute_seq, e2.max_conv_msg_seq = a2.max_conv_msg_seq);
              break;
            case i.c.room_userlist.cmd:
              e2.room_id = o2.room_id, e2.sub_room_id = o2.sub_room_id, e2.room_session_id = o2.room_session_id.toString(), e2.count = o2.count, e2.mode = o2.mode, e2.expect_seq = o2.expect_seq, e2.pos_flag = o2.pos_flag, a2 && (e2.rsp_pos_flag = a2.pos_flag, e2.userlist_seq = a2.userlist_seq, e2.user_count = a2.user_count, e2.users_len = a2.svrCount, e2.degree = a2.degree);
              break;
            case i.c.room_userinfos.cmd:
              e2.room_id = o2.room_id, e2.sub_room_id = o2.sub_room_id, e2.room_session_id = o2.room_session_id.toString(), e2.room_user_session_id = o2.room_user_session_id.toString(), e2.user_ids_len = o2.user_ids.length, a2 && (e2.user_infos_len = a2.result.length, e2.errlist_len = a2.err_list.length, 0 < e2.errlist_len && e2.errlist_len < 6 && (e2.errlist = JSON.stringify(a2.err_list)));
              break;
            case i.c.room_attributes.cmd:
              e2.room_id = o2.room_id, e2.sub_room_id = o2.sub_room_id, e2.room_session_id = o2.room_session_id.toString(), e2.attribute_seq = o2.attributes.attribute_seq, a2 && a2.attributes && (e2.rsp_attribute_seq = a2.attributes.attribute_seq, e2.attributes_len = a2.attributes.attributes.length);
              break;
            case i.c.room_attributes_modify.cmd:
              e2.room_id = o2.room_id, e2.sub_room_id = o2.sub_room_id, e2.room_session_id = o2.room_session_id.toString(), e2.force_modify = o2.force_modify, e2.set_member = o2.set_member, e2.op_fail_fast = o2.op_fail_fast, e2.attribute_seq = o2.attribute_seq, e2.attribute_action = null == (t2 = o2.attributes[0]) ? void 0 : t2.action, e2.attributes_len = o2.attributes.length, a2 && (a2.attributes && (e2.rsp_attribute_seq = a2.attributes.attribute_seq, e2.rsp_attributes_len = a2.attributes.attributes.length), e2.err_list_len = a2.err_list.length, 0 < e2.err_list_len && e2.err_list_len < 6 && (e2.err_list = JSON.stringify(a2.err_list)));
              break;
            case i.c.room_user_attributes_modify.cmd:
              e2.room_id = o2.room_id, e2.sub_room_id = o2.sub_room_id, e2.room_session_id = o2.room_session_id.toString(), e2.room_user_session_id = o2.room_user_session_id.toString(), e2.force_modify = o2.force_modify, e2.auto_save = o2.auto_save, e2.op_fail_fast = o2.op_fail_fast, e2.user_ids_len = o2.attributes.user_ids.length, e2.attributes_len = o2.attributes.modify_attribute.length, a2 && (e2.user_attributes_len = a2.user_attributes.length, e2.user_err_list_len = a2.user_err_list.length, 0 < e2.user_err_list_len && e2.user_err_list_len < 6 && (e2.user_err_list = JSON.stringify(a2.user_err_list)));
              break;
            case i.c.room_user_attributes_get.cmd:
              e2.room_id = o2.room_id, e2.sub_room_id = o2.sub_room_id, e2.room_session_id = o2.room_session_id.toString(), e2.room_user_session_id = o2.room_user_session_id.toString(), e2.req_attributes_len = o2.req_attributes.length, a2 && (e2.user_attributes_len = a2.user_attributes.length);
              break;
            case i.c.room_user_attributes_list_get.cmd:
              e2.room_id = o2.room_id, e2.sub_room_id = o2.sub_room_id, e2.room_session_id = o2.room_session_id.toString(), e2.room_user_session_id = o2.room_user_session_id.toString(), e2.pos_flag = o2.pos_flag, e2.count = o2.count, a2 && (e2.user_attributes_len = a2.user_attributes.length, e2.rsp_pos_flag = a2.pos_flag, e2.user_count = a2.user_count, e2.user_attributes_list_seq = a2.user_attributes_list_seq);
              break;
            case i.c.group_create.cmd:
              e2.group_id = o2.group_id, e2.group_name = o2.group_name, e2.group_notice = o2.group_notice, e2.user_ids_len = o2.user_ids.length, e2.attributes_len = (null == (r2 = o2.attributes) ? void 0 : r2.length) || 0, e2.group_avatar_len = (null == (n2 = o2.group_avatar) ? void 0 : n2.length) || 0, a2 && (e2.members_len = a2.members.length, e2.member_count = a2.member_count, e2.group_list_seq = a2.group_list_seq, e2.group_data_seq = a2.group_data_seq, e2.group_attribute_seq = a2.group_attribute_seq, e2.member_all_seq = a2.member_all_seq, e2.error_users_len = a2.error_users.length, 0 < e2.error_users_len && e2.error_users_len < 6 && (e2.error_users = JSON.stringify(a2.error_users)));
              break;
            case i.c.group_enter.cmd:
              e2.group_id = o2.group_id, a2 && (e2.group_name = a2.group_name, e2.group_avatar_len = (null == (t2 = a2.group_avatar) ? void 0 : t2.length) || 0, a2.properties && (e2.attributes_len = a2.properties.attributes.length), e2.member_count = a2.member_count, e2.group_list_seq = a2.group_list_seq, e2.group_data_seq = a2.group_data_seq, e2.group_attribute_seq = a2.group_attribute_seq, e2.member_all_seq = a2.member_all_seq, e2.conv_msg_seq = a2.conv_msg_seq);
              break;
            case i.c.group_invite.cmd:
              e2.group_id = o2.group_id, e2.user_ids_len = o2.user_ids.length, a2 && (e2.member_count = a2.member_count, e2.members_len = a2.members.length, e2.group_data_seq = a2.group_data_seq, e2.group_attribute_seq = a2.group_attribute_seq, e2.member_all_seq = a2.member_all_seq, e2.error_users_len = a2.error_users.length, 0 < e2.error_users_len && e2.error_users_len < 6 && (e2.error_users = JSON.stringify(a2.error_users)));
              break;
            case i.c.group_quit.cmd:
              e2.group_id = o2.group_id, e2.user_ids_len = o2.user_ids.length, e2.kickout_reason = o2.kickout_reason, a2 && (e2.member_count = a2.member_count, e2.member_all_seq = a2.member_all_seq, e2.error_users_len = a2.error_users.length, 0 < e2.error_users_len && e2.error_users_len < 6 && (e2.error_users = JSON.stringify(a2.error_users)));
              break;
            case i.c.group_kickout.cmd:
              e2.group_id = o2.group_id, a2 && (e2.group_list_seq = a2.group_list_seq);
              break;
            case i.c.group_destroy.cmd:
              e2.group_id = o2.group_id, a2 && (e2.group_list_seq = a2.conv_list_seq);
              break;
            case i.c.group_list.cmd:
              e2.how = o2.how, e2.full_pull = o2.full_pull, e2.count = o2.count, e2.cur_list_seq = o2.conv_list_seq, a2 && (e2.fetch_end = a2.fetch_end, e2.full_list = a2.full_list, e2.rsp_cur_list_seq = a2.cur, e2.max_list_seq = a2.max, e2.groups_len = a2.svrCount, e2.degree = a2.degree);
              break;
            case i.c.group_infos.cmd:
              e2.group_ids_len = o2.quey_user_id.length, a2 && (e2.group_infos_len = a2.group_infos.length, e2.fail_keys_len = a2.fail_keys.length);
              break;
            case i.c.group_owner_transfer.cmd:
              e2.group_id = o2.group_id, e2.req_user_id = o2.group_name, a2 && (e2.old_owner_data_seq = a2.conv_list_seq, e2.new_owner_data_seq = a2.conv_msg_seq);
              break;
            case i.c.group_data.cmd:
              e2.group_id = o2.group_id, a2 && (e2.group_name = a2.group_name, e2.group_notice = a2.group_notice, e2.group_avatar_len = (null == (r2 = a2.group_avatar) ? void 0 : r2.length) || 0, e2.group_data_seq = a2.group_data_seq);
              break;
            case i.c.group_attributes.cmd:
              e2.group_id = o2.group_id, e2.attributes_len = o2.attributes.attributes.length, e2.attribute_seq = o2.attributes.seq, a2 && (e2.rsp_attributes_len = a2.attributes.attributes.length, e2.rsp_attribute_seq = a2.attributes.seq);
              break;
            case i.c.group_mute.cmd:
              e2.group_id = o2.group_id, e2.enable = o2.enable;
              break;
            case i.c.group_modify_name.cmd:
              e2.group_id = o2.group_id, e2.group_name = o2.group_name, a2 && (e2.group_data_seq = a2.conv_list_seq);
              break;
            case i.c.group_modify_avatar.cmd:
              e2.group_id = o2.user_id, e2.group_avatar_len = o2.user_name.length, a2 && (e2.group_data_seq = a2.conv_list_seq);
              break;
            case i.c.group_modify_notice.cmd:
              e2.group_id = o2.group_id, e2.group_notice = o2.group_name, a2 && (e2.group_data_seq = a2.conv_list_seq);
              break;
            case i.c.group_modify_attributes.cmd:
              e2.group_id = o2.group_id, e2.attribute_action = o2.attributes.action, e2.attributes_len = o2.attributes.attributes.length, a2 && (e2.attribute_seq = a2.attributes.seq, e2.fail_keys_len = a2.fail_keys.length, 0 < e2.fail_keys_len && e2.fail_keys_len < 6 && (e2.fail_keys = JSON.stringify(a2.fail_keys)));
              break;
            case i.c.group_member_list.cmd:
              e2.how = o2.how, e2.group_id = o2.group_id, e2.count = o2.count, e2.full_pull = o2.full_pull, e2.cur_member_seq = o2.cur_member_seq, a2 && (e2.degree = a2.degree, e2.rsp_cur_member_seq = a2.cur_member_seq, e2.member_all_seq = a2.member_all_seq, e2.full_list = a2.full_list, e2.fetch_end = a2.fetch_end, e2.member_count = a2.member_count, e2.change_list_len = a2.svrCount);
              break;
            case i.c.group_members_by_seq.cmd:
              e2.group_id = o2.conv_id, e2.member_seqs_len = o2.conv_msg_seq.length, a2 && (e2.members_len = a2.members.length);
              break;
            case i.c.group_member_data.cmd:
              e2.group_id = o2.group_id, e2.req_user_id = o2.user_id, a2 && a2.member && a2.member.member_data && (n2 = a2.member.member_data, e2.user_name = n2.user_name, e2.group_nick_name = n2.group_nick_name, e2.role = n2.role, e2.user_avatar_len = (null == (t2 = n2.user_avatar) ? void 0 : t2.length) || 0);
              break;
            case i.c.group_member_nickname_set.cmd:
              e2.group_id = o2.group_id, e2.req_user_id = o2.group_name, e2.member_nickname = o2.group_notice, a2 && (e2.member_data_seq = a2.conv_list_seq);
              break;
            case i.c.group_member_role_set.cmd:
              e2.group_id = o2.group_id, e2.req_user_id = o2.user_id, e2.role = o2.role, a2 && (e2.member_data_seq = a2.conv_list_seq);
              break;
            case i.c.call_create.cmd:
              e2.call_id = o2.call_id, e2.user_ids_len = o2.user_ids.length, e2.extended_data_len = (null == (r2 = o2.payload) ? void 0 : r2.length) || 0, e2.call_mode = o2.call_mode, this.set_offline_push(e2, o2.offline_info), a2 && (e2.timeout = o2.timeout || a2.timeout, e2.call_seq = a2.call_seq, e2.call_list_seq = a2.call_list_seq, e2.create_time = a2.create_time, e2.err_list_len = a2.new_err_list.length, 0 < e2.err_list_len && e2.err_list_len < 6 && (e2.err_list = JSON.stringify(a2.new_err_list)));
              break;
            case i.c.call_cancel.cmd:
              e2.call_id = o2.call_id, e2.state = o2.timeout, e2.user_ids_len = o2.user_ids.length, e2.extended_data_len = (null == (n2 = o2.payload) ? void 0 : n2.length) || 0, this.set_offline_push(e2, o2.offline_info), a2 && (e2.call_seq = a2.call_seq, e2.call_list_seq = a2.now_time, e2.err_list_len = a2.err_list.length, 0 < e2.err_list_len && e2.err_list_len < 6 && (e2.err_list = JSON.stringify(a2.err_list)));
              break;
            case i.c.call_accept.cmd:
              e2.call_id = o2.user_id, e2.extended_data_len = (null == (t2 = o2.user_name) ? void 0 : t2.length) || 0, a2 && (e2.call_seq = a2.call_list_seq, e2.call_list_seq = a2.talk_time, e2.accept_time = a2.quit_time);
              break;
            case i.c.call_refuse.cmd:
              e2.call_id = o2.call_id, e2.extended_data_len = (null == (r2 = o2.extended_data) ? void 0 : r2.length) || 0, a2 && (e2.call_seq = a2.call_list_seq, e2.call_list_seq = a2.talk_time);
              break;
            case i.c.call_ack.cmd:
              e2.call_id = o2.call_id;
              break;
            case i.c.call_info.cmd:
              e2.call_id = o2.call_id, a2 && (e2.user_list_len = a2.user_list.length, e2.call_seq = a2.call_seq);
              break;
            case i.c.call_invite.cmd:
              e2.call_id = o2.call_id, e2.user_ids_len = o2.user_ids.length, this.set_offline_push(e2, o2.offline_info), a2 && (e2.call_seq = a2.call_seq, e2.timeout = a2.timeout, e2.err_list_len = a2.err_list.length, 0 < e2.err_list_len && e2.err_list_len < 6 && (e2.err_list = JSON.stringify(a2.err_list)));
              break;
            case i.c.call_quit.cmd:
              e2.call_id = o2.call_id, e2.extended_data_len = (null == (n2 = o2.payload) ? void 0 : n2.length) || 0, this.set_offline_push(e2, o2.offline_info), a2 && (e2.call_list_seq = a2.call_list_seq, e2.talk_time = a2.talk_time, e2.quit_time = a2.quit_time, e2.call_seq = a2.call_seq);
              break;
            case i.c.call_destroy.cmd:
              e2.call_id = o2.call_id, e2.extended_data_len = (null == (t2 = o2.payload) ? void 0 : t2.length) || 0, this.set_offline_push(e2, o2.offline_info), a2 && (e2.call_list_seq = a2.call_list_seq, e2.destroy_time = a2.talk_time);
              break;
            case i.c.call_list.cmd:
              e2.how = o2.how, e2.count = o2.count, e2.cur_list_seq = o2.cur_list_seq, a2 && (e2.rsp_cur_list_seq = a2.cur, e2.max_list_seq = a2.max, e2.fetch_end = a2.fetch_end, e2.calls_len = a2.svrCount, e2.degree = a2.degree);
          }
        }, c);
        function c(e2) {
          this.settings = e2, this.dataReport = new o.a("zim", s.n), this.evenDatatMap = /* @__PURE__ */ new Map(), this.isProd = true, this.isInited = false, this.commonFields = { error: 0, error_message: "", sdk_version: "2.12.0.0", term_type: s.n ? "miniprogram" : "web", net_type: "" }, this.unSaveEvents = [i.c.sw_hb.cmd, i.c.usermail_hb.cmd, i.c.room_info.cmd], this.pickCmds = { usermail_hb: ["msg_to", "msg_itvl", "list_to", "list_itvl", "conv_to", "conv_itvl", "group_to", "group_itvl"] };
        }
      }, function(e, t, r) {
        "use strict";
        var n = r(48);
        r.d(t, "a", function() {
          return n.a;
        });
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return u;
        });
        var n = r(87), o = r(90), s = r(4), i = function(e2, t2) {
          var r2 = "function" == typeof Symbol && e2[Symbol.iterator];
          if (!r2)
            return e2;
          var n2, o2, s2 = r2.call(e2), i2 = [];
          try {
            for (; (void 0 === t2 || 0 < t2--) && !(n2 = s2.next()).done; )
              i2.push(n2.value);
          } catch (e3) {
            o2 = { error: e3 };
          } finally {
            try {
              n2 && !n2.done && (r2 = s2.return) && r2.call(s2);
            } finally {
              if (o2)
                throw o2.error;
            }
          }
          return i2;
        }, a = function(e2, t2, r2) {
          if (r2 || 2 === arguments.length)
            for (var n2, o2 = 0, s2 = t2.length; o2 < s2; o2++)
              !n2 && o2 in t2 || ((n2 = n2 || Array.prototype.slice.call(t2, 0, o2))[o2] = t2[o2]);
          return e2.concat(n2 || Array.prototype.slice.call(t2));
        }, u = (c.prototype.setLogServer = function(e2) {
          this.openWebSocketLogServer(e2);
        }, c.prototype.setLogUrlParams = function(e2) {
          this.logParams = e2;
        }, c.prototype.openWebSocketLogServer = function(e2) {
          var t2, r2 = this;
          e2 && this.logParams.id_name && e2 != this.url && (this.url = e2, this.stopWebSocketServer(), t2 = { product: this.logParams.product, appid: this.logParams.appid, id_name: this.logParams.id_name, deviceid: this.logParams.deviceid, token: encodeURIComponent(this.logParams.signature) }, this.service.createSocket(e2, t2), this.service.openHandler(function() {
            r2.service.onPush(), r2.service.startCheck(), r2.openHandler();
          }), this.service.closeHandler(function() {
            r2.service.closeSocket();
          }));
        }, c.prototype.stopWebSocketServer = function() {
          this.service.closeSocket();
        }, c.prototype.openHandler = function() {
          this.startReport();
        }, c.prototype.setPostSucCallback = function(e2) {
          this.postSucCallback = e2;
        }, c.prototype.setPostFailCallback = function(e2) {
          this.postFailCallback = e2;
        }, c.prototype.reportAllowed = function() {
          return this.packageLen < this.PACKAGE_MAX_LEN;
        }, c.prototype.report = function(e2) {
          this.packageLen++, this.reportQueue.enqueue(e2), this.netWorkFail = false, this.failCount = 0, this.failStartTime = 0, this.startReport();
        }, c.prototype.startReport = function() {
          var e2, t2, r2 = this;
          this.reportQueue.size() < 1 || (e2 = this.reportQueue.dequeue(), t2 = 0, e2.forEach(function(e3) {
            return t2 += e3.value.length;
          }), this.tokenBucket.removeTokens(t2, function() {
            r2.reportData(e2, function() {
              r2.failCount = 0, r2.failStartTime = 0, r2.packageLen--, r2.postSucCallback && r2.postSucCallback(e2);
            }, function(t3) {
              r2.reportQueue.enqueue(e2), r2.failCount++, 0 == r2.failCount && (r2.failStartTime = Date.now());
              var n2 = (Date.now() - r2.failStartTime) / 1e3;
              if (10 <= r2.failCount && 60 < n2)
                return r2.netWorkFail = true, n2 = r2.decodeReportQueue(), void r2.postFailCallback(n2);
              t3 !== s.e && r2.startReport();
            });
          }));
        }, c.prototype.reportData = function(e2, t2, r2) {
          var n2 = this;
          e2 = e2.map(function(e3) {
            return e3.value;
          });
          this.service.sendMessage(e2, t2, function(e3) {
            e3 === s.e && n2.setLogServer(n2.url), r2 && r2(e3);
          });
        }, c.prototype.decodeReportQueue = function() {
          for (var e2 = []; this.reportQueue.size(); ) {
            var t2 = this.reportQueue.dequeue();
            e2.push.apply(e2, a([], i(t2), false));
          }
          return e2;
        }, c);
        function c(e2) {
          this.packageLen = 0, this.PACKAGE_MAX_LEN = 5, this.msgID = 0, this.logUploadTimer = null, this.logUploadInterval = 1e4, this.logCacheSend = [], this.logCacheMax = 100, this.failCount = 0, this.failStartTime = 0, this.netWorkFail = false, this.service = new n.a(e2), this.reportQueue = new s.d(), this.tokenBucket = new o.a(1e4, 2e3, "sec");
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return s;
        });
        var n = r(88), o = r(4), s = (i.prototype.handleSendCommandMsgRsp = function(e2) {
          var t2, r2 = this, n2 = this.service.sendCommandMap[e2.messageId];
          null != n2 && (t2 = n2._data, delete this.service.sendCommandMap[e2.messageId], this.service.sendCommandList.remove(n2), 0 === e2.code ? setTimeout(function() {
            t2 && null != t2.success && t2.success(e2, r2.cmdSeq);
          }, 0) : setTimeout(function() {
            t2 && null != t2.error && t2.error(e2, r2.cmdSeq);
          }, 0));
        }, i.prototype.onPush = function() {
          var e2 = this;
          this.service.onMessage = function(t2) {
            e2.handleSendCommandMsgRsp(t2);
          };
        }, i.prototype.closeHandler = function(e2) {
          this.service.closeHandler(e2);
        }, i.prototype.openHandler = function(e2) {
          this.service.openHandler(e2);
        }, i.prototype.errorHandler = function(e2) {
          this.service.errorHandler(e2);
        }, i.prototype.startCheck = function() {
          this.service.startCheck();
        }, i.prototype.stopCheck = function() {
          this.service.stopCheck();
        }, i.prototype.createSocket = function(e2, t2) {
          this.service.createSocket(e2, t2);
        }, i.prototype.closeSocket = function() {
          this.service.closeSocket();
        }, i.prototype.sendMessage = function(e2, t2, r2) {
          var n2 = this;
          this.service.isDisConnect() ? setTimeout(function() {
            n2.service.isDisConnect() ? r2 && r2(o.e) : n2.service.sendMessage(++n2.cmdSeq, e2, t2, r2);
          }, 100) : this.service.sendMessage(++this.cmdSeq, e2, t2, r2);
        }, i);
        function i(e2) {
          this.cmdSeq = 0, this.service = new n.a(e2);
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return s;
        });
        var n = r(89), o = r(4), s = (i.prototype.createSocket = function(e2, t2) {
          var n2 = this, o2 = this.miniProgram ? "zego.impl.wx" : "zego.impl.web";
          o2 = r(49)("./" + o2).createZegoWebSocket;
          try {
            this.socket = o2(e2, t2, this.miniProgram), this.socket.onerror = function() {
              n2.closeSocket(), n2.createSocket(e2, t2);
            };
          } catch (e3) {
          }
        }, i.prototype.closeSocket = function() {
          this.socket && (this.socket.onclose = null, this.socket.onerror = null, this.socket.close(), this.socket = null);
        }, i.prototype.isDisConnect = function() {
          return !this.socket;
        }, i.prototype.sendMessage = function(e2, t2, r2, o2) {
          if (void 0 === r2 && (r2 = null), void 0 === o2 && (o2 = null), this.socket) {
            r2 = { data: t2 = { message_id: e2, s: '{"speed_detail":['.concat(t2.join(), "]}") }, seq: e2, deleted: false, sendTime: Date.now(), timeOut: 6e3, success: r2, error: o2 }, r2 = this.sendCommandList.push(r2), this.sendCommandMap[e2] = r2;
            try {
              this.socket.send(Object(n.a)(JSON.stringify(t2)));
            } catch (o3) {
            }
          }
        }, i.prototype.checkSendMessageList = function(e2) {
          for (var t2 = e2.getFirst(); null != t2; )
            e2.remove(t2), t2._data && t2._data.error && setTimeout(function() {
              t2 && t2._data && t2._data.error && t2._data.error(o.f.TIMEOUT, t2._data.data.message_id, t2._data.data.s);
            }, 0), t2 = e2.getFirst();
        }, i.prototype.checkMessageListTimeout = function(e2, t2) {
          for (var r2 = e2.getFirst(), n2 = Date.now(), s2 = 0; !(null == r2 || r2._data && r2._data.sendTime + r2._data.timeOut > n2 || (r2._data && delete t2[r2._data.data.message_id], e2.remove(r2), r2._data && null == r2._data.error || r2._data && r2._data.sendTime + this.sendDataDropTimeout < n2 || r2 && r2._data && r2._data.error && r2._data.error(o.f.TIMEOUT, r2._data.data.message_id, r2._data.data.s), ++s2 >= this.sendDataCheckOnceCount)); )
            r2 = e2.getFirst();
        }, i.prototype.startCheck = function() {
          var e2 = this;
          this.checkMessageListTimeout(this.sendCommandList, this.sendCommandMap), this.sendDataCheckTimer = setTimeout(function() {
            e2.startCheck();
          }, this.sendDataCheckInterval);
        }, i.prototype.stopCheck = function() {
          this.checkSendMessageList(this.sendCommandList), clearTimeout(this.sendDataCheckTimer);
        }, i.prototype.openHandler = function(e2) {
          var t2 = this;
          this.socket && (this.socket.onopen = function(r2) {
            t2.responseHandler(), e2(r2);
          });
        }, i.prototype.responseHandler = function() {
          var e2 = this;
          this.socket && (this.socket.onmessage = function(t2) {
            t2 = "string" == typeof t2.data ? JSON.parse(t2.data) : JSON.parse(String.fromCharCode.apply(null, new Uint8Array(t2.data))), e2.onMessage(t2);
          });
        }, i.prototype.closeHandler = function(e2) {
          this.socket && (this.socket.onclose = function(t2) {
            e2(t2);
          });
        }, i.prototype.errorHandler = function(e2) {
          this.socket && (this.socket.onerror = e2);
        }, i.prototype.onMessage = function(e2) {
        }, i);
        function i(e2) {
          this.miniProgram = e2, this.socket = null, this.sendCommandList = new o.c(), this.sendCommandMap = {}, this.sendDataCheckOnceCount = 100, this.sendDataDropTimeout = 1e4, this.sendDataCheckInterval = 2e3;
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return dt;
        });
        function n(e2) {
          let t2 = e2.length;
          for (; 0 <= --t2; )
            e2[t2] = 0;
        }
        const o = 256, s = 286, i = 30, a = 15, u = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0]), c = new Uint8Array([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13]), l = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7]), d = new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]), p = new Array(576), h = (n(p), new Array(60)), g = (n(h), new Array(512)), f = (n(g), new Array(256)), m = (n(f), new Array(29)), _ = (n(m), new Array(i));
        function v(e2, t2, r2, n2, o2) {
          this.static_tree = e2, this.extra_bits = t2, this.extra_base = r2, this.elems = n2, this.max_length = o2, this.has_stree = e2 && e2.length;
        }
        let b, y, M;
        function I(e2, t2) {
          this.dyn_tree = e2, this.max_code = 0, this.stat_desc = t2;
        }
        n(_);
        const k = (e2) => e2 < 256 ? g[e2] : g[256 + (e2 >>> 7)], w = (e2, t2) => {
          e2.pending_buf[e2.pending++] = 255 & t2, e2.pending_buf[e2.pending++] = t2 >>> 8 & 255;
        }, C = (e2, t2, r2) => {
          e2.bi_valid > 16 - r2 ? (e2.bi_buf |= t2 << e2.bi_valid & 65535, w(e2, e2.bi_buf), e2.bi_buf = t2 >> 16 - e2.bi_valid, e2.bi_valid += r2 - 16) : (e2.bi_buf |= t2 << e2.bi_valid & 65535, e2.bi_valid += r2);
        }, S = (e2, t2, r2) => {
          C(e2, r2[2 * t2], r2[2 * t2 + 1]);
        }, D = (e2, t2) => {
          let r2 = 0;
          for (; r2 |= 1 & e2, e2 >>>= 1, r2 <<= 1, 0 < --t2; )
            ;
          return r2 >>> 1;
        }, q = (e2, t2, r2) => {
          const n2 = new Array(16);
          let o2, s2, i2 = 0;
          for (o2 = 1; o2 <= a; o2++)
            n2[o2] = i2 = i2 + r2[o2 - 1] << 1;
          for (s2 = 0; s2 <= t2; s2++) {
            var u2 = e2[2 * s2 + 1];
            0 !== u2 && (e2[2 * s2] = D(n2[u2]++, u2));
          }
        }, R = (e2) => {
          let t2;
          for (t2 = 0; t2 < s; t2++)
            e2.dyn_ltree[2 * t2] = 0;
          for (t2 = 0; t2 < i; t2++)
            e2.dyn_dtree[2 * t2] = 0;
          for (t2 = 0; t2 < 19; t2++)
            e2.bl_tree[2 * t2] = 0;
          e2.dyn_ltree[512] = 1, e2.opt_len = e2.static_len = 0, e2.last_lit = e2.matches = 0;
        }, O = (e2) => {
          8 < e2.bi_valid ? w(e2, e2.bi_buf) : 0 < e2.bi_valid && (e2.pending_buf[e2.pending++] = e2.bi_buf), e2.bi_buf = 0, e2.bi_valid = 0;
        }, A = (e2, t2, r2, n2) => {
          var o2 = 2 * t2, s2 = 2 * r2;
          return e2[o2] < e2[s2] || e2[o2] === e2[s2] && n2[t2] <= n2[r2];
        }, x = (e2, t2, r2) => {
          var n2 = e2.heap[r2];
          let o2 = r2 << 1;
          for (; o2 <= e2.heap_len && (o2 < e2.heap_len && A(t2, e2.heap[o2 + 1], e2.heap[o2], e2.depth) && o2++, !A(t2, n2, e2.heap[o2], e2.depth)); )
            e2.heap[r2] = e2.heap[o2], r2 = o2, o2 <<= 1;
          e2.heap[r2] = n2;
        }, P = (e2, t2, r2) => {
          var n2;
          let s2, i2, a2, l2 = 0;
          if (0 !== e2.last_lit)
            for (; n2 = e2.pending_buf[e2.d_buf + 2 * l2] << 8 | e2.pending_buf[e2.d_buf + 2 * l2 + 1], s2 = e2.pending_buf[e2.l_buf + l2], l2++, 0 == n2 ? S(e2, s2, t2) : (i2 = f[s2], S(e2, i2 + o + 1, t2), 0 !== (a2 = u[i2]) && (s2 -= m[i2], C(e2, s2, a2)), n2--, i2 = k(n2), S(e2, i2, r2), 0 !== (a2 = c[i2]) && (n2 -= _[i2], C(e2, n2, a2))), l2 < e2.last_lit; )
              ;
          S(e2, 256, t2);
        }, T = (e2, t2) => {
          const r2 = t2.dyn_tree;
          var n2 = t2.stat_desc.static_tree, o2 = t2.stat_desc.has_stree, s2 = t2.stat_desc.elems;
          let i2, u2, c2, l2 = -1;
          for (e2.heap_len = 0, e2.heap_max = 573, i2 = 0; i2 < s2; i2++)
            0 !== r2[2 * i2] ? (e2.heap[++e2.heap_len] = l2 = i2, e2.depth[i2] = 0) : r2[2 * i2 + 1] = 0;
          for (; e2.heap_len < 2; )
            c2 = e2.heap[++e2.heap_len] = l2 < 2 ? ++l2 : 0, r2[2 * c2] = 1, e2.depth[c2] = 0, e2.opt_len--, o2 && (e2.static_len -= n2[2 * c2 + 1]);
          for (t2.max_code = l2, i2 = e2.heap_len >> 1; 1 <= i2; i2--)
            x(e2, r2, i2);
          for (c2 = s2; i2 = e2.heap[1], e2.heap[1] = e2.heap[e2.heap_len--], x(e2, r2, 1), u2 = e2.heap[1], e2.heap[--e2.heap_max] = i2, e2.heap[--e2.heap_max] = u2, r2[2 * c2] = r2[2 * i2] + r2[2 * u2], e2.depth[c2] = (e2.depth[i2] >= e2.depth[u2] ? e2.depth[i2] : e2.depth[u2]) + 1, r2[2 * i2 + 1] = r2[2 * u2 + 1] = c2, e2.heap[1] = c2++, x(e2, r2, 1), 2 <= e2.heap_len; )
            ;
          e2.heap[--e2.heap_max] = e2.heap[1], ((e3, t3) => {
            const r3 = t3.dyn_tree;
            var n3, o3 = t3.max_code, s3 = t3.stat_desc.static_tree, i3 = t3.stat_desc.has_stree, u3 = t3.stat_desc.extra_bits, c3 = t3.stat_desc.extra_base, l3 = t3.stat_desc.max_length;
            let d2, p2, h2, g2, f2, m2 = 0;
            for (g2 = 0; g2 <= a; g2++)
              e3.bl_count[g2] = 0;
            for (r3[2 * e3.heap[e3.heap_max] + 1] = 0, d2 = e3.heap_max + 1; d2 < 573; d2++)
              p2 = e3.heap[d2], (g2 = r3[2 * r3[2 * p2 + 1] + 1] + 1) > l3 && (g2 = l3, m2++), r3[2 * p2 + 1] = g2, p2 > o3 || (e3.bl_count[g2]++, f2 = 0, p2 >= c3 && (f2 = u3[p2 - c3]), n3 = r3[2 * p2], e3.opt_len += n3 * (g2 + f2), i3 && (e3.static_len += n3 * (s3[2 * p2 + 1] + f2)));
            if (0 !== m2) {
              do {
                for (g2 = l3 - 1; 0 === e3.bl_count[g2]; )
                  g2--;
              } while (e3.bl_count[g2]--, e3.bl_count[g2 + 1] += 2, e3.bl_count[l3]--, 0 < (m2 -= 2));
              for (g2 = l3; 0 !== g2; g2--)
                for (p2 = e3.bl_count[g2]; 0 !== p2; )
                  o3 < (h2 = e3.heap[--d2]) || (r3[2 * h2 + 1] !== g2 && (e3.opt_len += (g2 - r3[2 * h2 + 1]) * r3[2 * h2], r3[2 * h2 + 1] = g2), p2--);
            }
          })(e2, t2), q(r2, l2, e2.bl_count);
        }, E = (e2, t2, r2) => {
          let n2, o2 = -1;
          var s2;
          let i2 = t2[1], a2 = 0, u2 = 7, c2 = 4;
          for (0 === i2 && (u2 = 138, c2 = 3), t2[2 * (r2 + 1) + 1] = 65535, n2 = 0; n2 <= r2; n2++)
            s2 = i2, i2 = t2[2 * (n2 + 1) + 1], ++a2 < u2 && s2 === i2 || (a2 < c2 ? e2.bl_tree[2 * s2] += a2 : 0 !== s2 ? (s2 !== o2 && e2.bl_tree[2 * s2]++, e2.bl_tree[32]++) : a2 <= 10 ? e2.bl_tree[34]++ : e2.bl_tree[36]++, a2 = 0, o2 = s2, c2 = 0 === i2 ? (u2 = 138, 3) : s2 === i2 ? (u2 = 6, 3) : (u2 = 7, 4));
        }, L = (e2, t2, r2) => {
          let n2, o2 = -1;
          var s2;
          let i2 = t2[1], a2 = 0, u2 = 7, c2 = 4;
          for (0 === i2 && (u2 = 138, c2 = 3), n2 = 0; n2 <= r2; n2++)
            if (s2 = i2, i2 = t2[2 * (n2 + 1) + 1], !(++a2 < u2 && s2 === i2)) {
              if (a2 < c2)
                for (; S(e2, s2, e2.bl_tree), 0 != --a2; )
                  ;
              else
                0 !== s2 ? (s2 !== o2 && (S(e2, s2, e2.bl_tree), a2--), S(e2, 16, e2.bl_tree), C(e2, a2 - 3, 2)) : a2 <= 10 ? (S(e2, 17, e2.bl_tree), C(e2, a2 - 3, 3)) : (S(e2, 18, e2.bl_tree), C(e2, a2 - 11, 7));
              a2 = 0, o2 = s2, c2 = 0 === i2 ? (u2 = 138, 3) : s2 === i2 ? (u2 = 6, 3) : (u2 = 7, 4);
            }
        };
        let j = false;
        const G = (e2, t2, r2, n2) => {
          C(e2, 0 + (n2 ? 1 : 0), 3), n2 = e2, e2 = t2, t2 = r2, r2 = true, O(n2), r2 && (w(n2, t2), w(n2, ~t2)), n2.pending_buf.set(n2.window.subarray(e2, e2 + t2), n2.pending), n2.pending += t2;
        };
        r = { _tr_init: (e2) => {
          if (!j) {
            {
              let e3, t2, r2, n2, o2;
              const d2 = new Array(16);
              for (r2 = 0, n2 = 0; n2 < 28; n2++)
                for (m[n2] = r2, e3 = 0; e3 < 1 << u[n2]; e3++)
                  f[r2++] = n2;
              for (f[r2 - 1] = n2, o2 = 0, n2 = 0; n2 < 16; n2++)
                for (_[n2] = o2, e3 = 0; e3 < 1 << c[n2]; e3++)
                  g[o2++] = n2;
              for (o2 >>= 7; n2 < i; n2++)
                for (_[n2] = o2 << 7, e3 = 0; e3 < 1 << c[n2] - 7; e3++)
                  g[256 + o2++] = n2;
              for (t2 = 0; t2 <= a; t2++)
                d2[t2] = 0;
              for (e3 = 0; e3 <= 143; )
                p[2 * e3 + 1] = 8, e3++, d2[8]++;
              for (; e3 <= 255; )
                p[2 * e3 + 1] = 9, e3++, d2[9]++;
              for (; e3 <= 279; )
                p[2 * e3 + 1] = 7, e3++, d2[7]++;
              for (; e3 <= 287; )
                p[2 * e3 + 1] = 8, e3++, d2[8]++;
              for (q(p, 287, d2), e3 = 0; e3 < i; e3++)
                h[2 * e3 + 1] = 5, h[2 * e3] = D(e3, 5);
              b = new v(p, u, 257, s, a), y = new v(h, c, 0, i, a), M = new v(new Array(0), l, 0, 19, 7);
            }
            j = true;
          }
          e2.l_desc = new I(e2.dyn_ltree, b), e2.d_desc = new I(e2.dyn_dtree, y), e2.bl_desc = new I(e2.bl_tree, M), e2.bi_buf = 0, e2.bi_valid = 0, R(e2);
        }, _tr_stored_block: G, _tr_flush_block: (e2, t2, r2, n2) => {
          let s2, i2, a2 = 0;
          if (0 < e2.level ? (2 === e2.strm.data_type && (e2.strm.data_type = ((e3) => {
            let t3, r3 = 4093624447;
            for (t3 = 0; t3 <= 31; t3++, r3 >>>= 1)
              if (1 & r3 && 0 !== e3.dyn_ltree[2 * t3])
                return 0;
            if (0 !== e3.dyn_ltree[18] || 0 !== e3.dyn_ltree[20] || 0 !== e3.dyn_ltree[26])
              return 1;
            for (t3 = 32; t3 < o; t3++)
              if (0 !== e3.dyn_ltree[2 * t3])
                return 1;
            return 0;
          })(e2)), T(e2, e2.l_desc), T(e2, e2.d_desc), a2 = ((e3) => {
            let t3;
            for (E(e3, e3.dyn_ltree, e3.l_desc.max_code), E(e3, e3.dyn_dtree, e3.d_desc.max_code), T(e3, e3.bl_desc), t3 = 18; 3 <= t3 && 0 === e3.bl_tree[2 * d[t3] + 1]; t3--)
              ;
            return e3.opt_len += 3 * (t3 + 1) + 5 + 5 + 4, t3;
          })(e2), s2 = e2.opt_len + 3 + 7 >>> 3, (i2 = e2.static_len + 3 + 7 >>> 3) <= s2 && (s2 = i2)) : s2 = i2 = r2 + 5, r2 + 4 <= s2 && -1 !== t2)
            G(e2, t2, r2, n2);
          else if (4 === e2.strategy || i2 === s2)
            C(e2, 2 + (n2 ? 1 : 0), 3), P(e2, p, h);
          else {
            C(e2, 4 + (n2 ? 1 : 0), 3);
            {
              var u2 = e2;
              t2 = e2.l_desc.max_code + 1, r2 = e2.d_desc.max_code + 1;
              var c2 = a2 + 1;
              let n3;
              for (C(u2, t2 - 257, 5), C(u2, r2 - 1, 5), C(u2, c2 - 4, 4), n3 = 0; n3 < c2; n3++)
                C(u2, u2.bl_tree[2 * d[n3] + 1], 3);
              L(u2, u2.dyn_ltree, t2 - 1), L(u2, u2.dyn_dtree, r2 - 1);
            }
            P(e2, e2.dyn_ltree, e2.dyn_dtree);
          }
          R(e2), n2 && O(e2);
        }, _tr_tally: (e2, t2, r2) => (e2.pending_buf[e2.d_buf + 2 * e2.last_lit] = t2 >>> 8 & 255, e2.pending_buf[e2.d_buf + 2 * e2.last_lit + 1] = 255 & t2, e2.pending_buf[e2.l_buf + e2.last_lit] = 255 & r2, e2.last_lit++, 0 === t2 ? e2.dyn_ltree[2 * r2]++ : (e2.matches++, t2--, e2.dyn_ltree[2 * (f[r2] + o + 1)]++, e2.dyn_dtree[2 * k(t2)]++), e2.last_lit === e2.lit_bufsize - 1), _tr_align: (e2) => {
          C(e2, 2, 3), S(e2, 256, p), 16 === (e2 = e2).bi_valid ? (w(e2, e2.bi_buf), e2.bi_buf = 0, e2.bi_valid = 0) : 8 <= e2.bi_valid && (e2.pending_buf[e2.pending++] = 255 & e2.bi_buf, e2.bi_buf >>= 8, e2.bi_valid -= 8);
        } };
        var U = (e2, t2, r2, n2) => {
          let o2 = 65535 & e2 | 0, s2 = e2 >>> 16 & 65535 | 0, i2 = 0;
          for (; 0 !== r2; ) {
            for (r2 -= i2 = 2e3 < r2 ? 2e3 : r2; o2 = o2 + t2[n2++] | 0, s2 = s2 + o2 | 0, --i2; )
              ;
            o2 %= 65521, s2 %= 65521;
          }
          return o2 | s2 << 16 | 0;
        };
        const B = new Uint32Array((() => {
          let e2, t2 = [];
          for (var r2 = 0; r2 < 256; r2++) {
            e2 = r2;
            for (var n2 = 0; n2 < 8; n2++)
              e2 = 1 & e2 ? 3988292384 ^ e2 >>> 1 : e2 >>> 1;
            t2[r2] = e2;
          }
          return t2;
        })());
        var z = (e2, t2, r2, n2) => {
          var o2 = B, s2 = n2 + r2;
          e2 ^= -1;
          for (let r3 = n2; r3 < s2; r3++)
            e2 = e2 >>> 8 ^ o2[255 & (e2 ^ t2[r3])];
          return -1 ^ e2;
        }, N = { 2: "need dictionary", 1: "stream end", 0: "", "-1": "file error", "-2": "stream error", "-3": "data error", "-4": "insufficient memory", "-5": "buffer error", "-6": "incompatible version" };
        t = { Z_NO_FLUSH: 0, Z_PARTIAL_FLUSH: 1, Z_SYNC_FLUSH: 2, Z_FULL_FLUSH: 3, Z_FINISH: 4, Z_BLOCK: 5, Z_TREES: 6, Z_OK: 0, Z_STREAM_END: 1, Z_NEED_DICT: 2, Z_ERRNO: -1, Z_STREAM_ERROR: -2, Z_DATA_ERROR: -3, Z_MEM_ERROR: -4, Z_BUF_ERROR: -5, Z_NO_COMPRESSION: 0, Z_BEST_SPEED: 1, Z_BEST_COMPRESSION: 9, Z_DEFAULT_COMPRESSION: -1, Z_FILTERED: 1, Z_HUFFMAN_ONLY: 2, Z_RLE: 3, Z_FIXED: 4, Z_DEFAULT_STRATEGY: 0, Z_BINARY: 0, Z_TEXT: 1, Z_UNKNOWN: 2, Z_DEFLATED: 8 };
        const { _tr_init: F, _tr_stored_block: K, _tr_flush_block: H, _tr_tally: Q, _tr_align: V } = r, { Z_NO_FLUSH: Z, Z_PARTIAL_FLUSH: J, Z_FULL_FLUSH: W, Z_FINISH: Y, Z_BLOCK: X, Z_OK: $, Z_STREAM_END: ee, Z_STREAM_ERROR: te, Z_DATA_ERROR: re, Z_BUF_ERROR: ne, Z_DEFAULT_COMPRESSION: oe, Z_FILTERED: se, Z_HUFFMAN_ONLY: ie, Z_RLE: ae, Z_FIXED: ue, Z_DEFAULT_STRATEGY: ce, Z_UNKNOWN: le, Z_DEFLATED: de } = t, pe = 258, he = 262, ge = 113, fe = (e2, t2) => (e2.msg = N[t2], t2), me = (e2) => (e2 << 1) - (4 < e2 ? 9 : 0), _e = (e2) => {
          let t2 = e2.length;
          for (; 0 <= --t2; )
            e2[t2] = 0;
        };
        let ve = (e2, t2, r2) => (t2 << e2.hash_shift ^ r2) & e2.hash_mask;
        const be = (e2) => {
          const t2 = e2.state;
          let r2 = t2.pending;
          0 !== (r2 = r2 > e2.avail_out ? e2.avail_out : r2) && (e2.output.set(t2.pending_buf.subarray(t2.pending_out, t2.pending_out + r2), e2.next_out), e2.next_out += r2, t2.pending_out += r2, e2.total_out += r2, e2.avail_out -= r2, t2.pending -= r2, 0 === t2.pending && (t2.pending_out = 0));
        }, ye = (e2, t2) => {
          H(e2, 0 <= e2.block_start ? e2.block_start : -1, e2.strstart - e2.block_start, t2), e2.block_start = e2.strstart, be(e2.strm);
        }, Me = (e2, t2) => {
          e2.pending_buf[e2.pending++] = t2;
        }, Ie = (e2, t2) => {
          e2.pending_buf[e2.pending++] = t2 >>> 8 & 255, e2.pending_buf[e2.pending++] = 255 & t2;
        }, ke = (e2, t2, r2, n2) => {
          let o2 = e2.avail_in;
          return 0 === (o2 = o2 > n2 ? n2 : o2) ? 0 : (e2.avail_in -= o2, t2.set(e2.input.subarray(e2.next_in, e2.next_in + o2), r2), 1 === e2.state.wrap ? e2.adler = U(e2.adler, t2, o2, r2) : 2 === e2.state.wrap && (e2.adler = z(e2.adler, t2, o2, r2)), e2.next_in += o2, e2.total_in += o2, o2);
        }, we = (e2, t2) => {
          let r2, n2 = e2.max_chain_length, o2 = e2.strstart;
          var s2;
          let i2 = e2.prev_length, a2 = e2.nice_match;
          var u2 = e2.strstart > e2.w_size - he ? e2.strstart - (e2.w_size - he) : 0, c2 = e2.window, l2 = e2.w_mask, d2 = e2.prev, p2 = e2.strstart + pe;
          let h2 = c2[o2 + i2 - 1], g2 = c2[o2 + i2];
          e2.prev_length >= e2.good_match && (n2 >>= 2), a2 > e2.lookahead && (a2 = e2.lookahead);
          do {
            if (c2[(r2 = t2) + i2] === g2 && c2[r2 + i2 - 1] === h2 && c2[r2] === c2[o2] && c2[++r2] === c2[o2 + 1]) {
              for (o2 += 2, r2++; c2[++o2] === c2[++r2] && c2[++o2] === c2[++r2] && c2[++o2] === c2[++r2] && c2[++o2] === c2[++r2] && c2[++o2] === c2[++r2] && c2[++o2] === c2[++r2] && c2[++o2] === c2[++r2] && c2[++o2] === c2[++r2] && o2 < p2; )
                ;
              if (s2 = pe - (p2 - o2), o2 = p2 - pe, s2 > i2) {
                if (e2.match_start = t2, (i2 = s2) >= a2)
                  break;
                h2 = c2[o2 + i2 - 1], g2 = c2[o2 + i2];
              }
            }
          } while ((t2 = d2[t2 & l2]) > u2 && 0 != --n2);
          return i2 <= e2.lookahead ? i2 : e2.lookahead;
        }, Ce = (e2) => {
          var t2 = e2.w_size;
          let r2, n2, o2, s2, i2;
          do {
            if (s2 = e2.window_size - e2.lookahead - e2.strstart, e2.strstart >= t2 + (t2 - he)) {
              for (e2.window.set(e2.window.subarray(t2, t2 + t2), 0), e2.match_start -= t2, e2.strstart -= t2, e2.block_start -= t2, n2 = e2.hash_size, r2 = n2; o2 = e2.head[--r2], e2.head[r2] = o2 >= t2 ? o2 - t2 : 0, --n2; )
                ;
              for (n2 = t2, r2 = n2; o2 = e2.prev[--r2], e2.prev[r2] = o2 >= t2 ? o2 - t2 : 0, --n2; )
                ;
              s2 += t2;
            }
            if (0 === e2.strm.avail_in)
              break;
            if (n2 = ke(e2.strm, e2.window, e2.strstart + e2.lookahead, s2), e2.lookahead += n2, e2.lookahead + e2.insert >= 3)
              for (i2 = e2.strstart - e2.insert, e2.ins_h = e2.window[i2], e2.ins_h = ve(e2, e2.ins_h, e2.window[i2 + 1]); e2.insert && (e2.ins_h = ve(e2, e2.ins_h, e2.window[i2 + 3 - 1]), e2.prev[i2 & e2.w_mask] = e2.head[e2.ins_h], e2.head[e2.ins_h] = i2, i2++, e2.insert--, !(e2.lookahead + e2.insert < 3)); )
                ;
          } while (e2.lookahead < he && 0 !== e2.strm.avail_in);
        };
        r = (e2, t2) => {
          let r2, n2;
          for (; ; ) {
            if (e2.lookahead < he) {
              if (Ce(e2), e2.lookahead < he && t2 === Z)
                return 1;
              if (0 === e2.lookahead)
                break;
            }
            if (r2 = 0, e2.lookahead >= 3 && (e2.ins_h = ve(e2, e2.ins_h, e2.window[e2.strstart + 3 - 1]), r2 = e2.prev[e2.strstart & e2.w_mask] = e2.head[e2.ins_h], e2.head[e2.ins_h] = e2.strstart), 0 !== r2 && e2.strstart - r2 <= e2.w_size - he && (e2.match_length = we(e2, r2)), e2.match_length >= 3)
              if (n2 = Q(e2, e2.strstart - e2.match_start, e2.match_length - 3), e2.lookahead -= e2.match_length, e2.match_length <= e2.max_lazy_match && e2.lookahead >= 3) {
                for (e2.match_length--; e2.strstart++, e2.ins_h = ve(e2, e2.ins_h, e2.window[e2.strstart + 3 - 1]), r2 = e2.prev[e2.strstart & e2.w_mask] = e2.head[e2.ins_h], e2.head[e2.ins_h] = e2.strstart, 0 != --e2.match_length; )
                  ;
                e2.strstart++;
              } else
                e2.strstart += e2.match_length, e2.match_length = 0, e2.ins_h = e2.window[e2.strstart], e2.ins_h = ve(e2, e2.ins_h, e2.window[e2.strstart + 1]);
            else
              n2 = Q(e2, 0, e2.window[e2.strstart]), e2.lookahead--, e2.strstart++;
            if (n2 && (ye(e2, false), 0 === e2.strm.avail_out))
              return 1;
          }
          return e2.insert = e2.strstart < 2 ? e2.strstart : 2, t2 === Y ? (ye(e2, true), 0 === e2.strm.avail_out ? 3 : 4) : e2.last_lit && (ye(e2, false), 0 === e2.strm.avail_out) ? 1 : 2;
        };
        var Se = (e2, t2) => {
          let r2, n2;
          for (var o2; ; ) {
            if (e2.lookahead < he) {
              if (Ce(e2), e2.lookahead < he && t2 === Z)
                return 1;
              if (0 === e2.lookahead)
                break;
            }
            if (r2 = 0, e2.lookahead >= 3 && (e2.ins_h = ve(e2, e2.ins_h, e2.window[e2.strstart + 3 - 1]), r2 = e2.prev[e2.strstart & e2.w_mask] = e2.head[e2.ins_h], e2.head[e2.ins_h] = e2.strstart), e2.prev_length = e2.match_length, e2.prev_match = e2.match_start, e2.match_length = 2, 0 !== r2 && e2.prev_length < e2.max_lazy_match && e2.strstart - r2 <= e2.w_size - he && (e2.match_length = we(e2, r2), e2.match_length <= 5 && (e2.strategy === se || 3 === e2.match_length && 4096 < e2.strstart - e2.match_start) && (e2.match_length = 2)), e2.prev_length >= 3 && e2.match_length <= e2.prev_length) {
              for (o2 = e2.strstart + e2.lookahead - 3, n2 = Q(e2, e2.strstart - 1 - e2.prev_match, e2.prev_length - 3), e2.lookahead -= e2.prev_length - 1, e2.prev_length -= 2; ++e2.strstart <= o2 && (e2.ins_h = ve(e2, e2.ins_h, e2.window[e2.strstart + 3 - 1]), r2 = e2.prev[e2.strstart & e2.w_mask] = e2.head[e2.ins_h], e2.head[e2.ins_h] = e2.strstart), 0 != --e2.prev_length; )
                ;
              if (e2.match_available = 0, e2.match_length = 2, e2.strstart++, n2 && (ye(e2, false), 0 === e2.strm.avail_out))
                return 1;
            } else if (e2.match_available) {
              if ((n2 = Q(e2, 0, e2.window[e2.strstart - 1])) && ye(e2, false), e2.strstart++, e2.lookahead--, 0 === e2.strm.avail_out)
                return 1;
            } else
              e2.match_available = 1, e2.strstart++, e2.lookahead--;
          }
          return e2.match_available && (n2 = Q(e2, 0, e2.window[e2.strstart - 1]), e2.match_available = 0), e2.insert = e2.strstart < 2 ? e2.strstart : 2, t2 === Y ? (ye(e2, true), 0 === e2.strm.avail_out ? 3 : 4) : e2.last_lit && (ye(e2, false), 0 === e2.strm.avail_out) ? 1 : 2;
        };
        function De(e2, t2, r2, n2, o2) {
          this.good_length = e2, this.max_lazy = t2, this.nice_length = r2, this.max_chain = n2, this.func = o2;
        }
        const qe = [new De(0, 0, 0, 0, (e2, t2) => {
          let r2 = 65535;
          for (r2 > e2.pending_buf_size - 5 && (r2 = e2.pending_buf_size - 5); ; ) {
            if (e2.lookahead <= 1) {
              if (Ce(e2), 0 === e2.lookahead && t2 === Z)
                return 1;
              if (0 === e2.lookahead)
                break;
            }
            e2.strstart += e2.lookahead, e2.lookahead = 0;
            var n2 = e2.block_start + r2;
            if ((0 === e2.strstart || e2.strstart >= n2) && (e2.lookahead = e2.strstart - n2, e2.strstart = n2, ye(e2, false), 0 === e2.strm.avail_out))
              return 1;
            if (e2.strstart - e2.block_start >= e2.w_size - he && (ye(e2, false), 0 === e2.strm.avail_out))
              return 1;
          }
          return e2.insert = 0, t2 === Y ? (ye(e2, true), 0 === e2.strm.avail_out ? 3 : 4) : (e2.strstart > e2.block_start && (ye(e2, false), e2.strm.avail_out), 1);
        }), new De(4, 4, 8, 4, r), new De(4, 5, 16, 8, r), new De(4, 6, 32, 32, r), new De(4, 4, 16, 16, Se), new De(8, 16, 32, 32, Se), new De(8, 16, 128, 128, Se), new De(8, 32, 128, 256, Se), new De(32, 128, 258, 1024, Se), new De(32, 258, 258, 4096, Se)];
        function Re() {
          this.strm = null, this.status = 0, this.pending_buf = null, this.pending_buf_size = 0, this.pending_out = 0, this.pending = 0, this.wrap = 0, this.gzhead = null, this.gzindex = 0, this.method = de, this.last_flush = -1, this.w_size = 0, this.w_bits = 0, this.w_mask = 0, this.window = null, this.window_size = 0, this.prev = null, this.head = null, this.ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this.hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this.match_length = 0, this.prev_match = 0, this.match_available = 0, this.strstart = 0, this.match_start = 0, this.lookahead = 0, this.prev_length = 0, this.max_chain_length = 0, this.max_lazy_match = 0, this.level = 0, this.strategy = 0, this.good_match = 0, this.nice_match = 0, this.dyn_ltree = new Uint16Array(1146), this.dyn_dtree = new Uint16Array(122), this.bl_tree = new Uint16Array(78), _e(this.dyn_ltree), _e(this.dyn_dtree), _e(this.bl_tree), this.l_desc = null, this.d_desc = null, this.bl_desc = null, this.bl_count = new Uint16Array(16), this.heap = new Uint16Array(573), _e(this.heap), this.heap_len = 0, this.heap_max = 0, this.depth = new Uint16Array(573), _e(this.depth), this.l_buf = 0, this.lit_bufsize = 0, this.last_lit = 0, this.d_buf = 0, this.opt_len = 0, this.static_len = 0, this.matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid = 0;
        }
        const Oe = (e2) => {
          if (!e2 || !e2.state)
            return fe(e2, te);
          e2.total_in = e2.total_out = 0, e2.data_type = le;
          const t2 = e2.state;
          return t2.pending = 0, t2.pending_out = 0, t2.wrap < 0 && (t2.wrap = -t2.wrap), t2.status = t2.wrap ? 42 : ge, e2.adler = 2 === t2.wrap ? 0 : 1, t2.last_flush = Z, F(t2), $;
        }, Ae = (e2) => {
          var t2 = Oe(e2);
          return t2 === $ && ((e2 = e2.state).window_size = 2 * e2.w_size, _e(e2.head), e2.max_lazy_match = qe[e2.level].max_lazy, e2.good_match = qe[e2.level].good_length, e2.nice_match = qe[e2.level].nice_length, e2.max_chain_length = qe[e2.level].max_chain, e2.strstart = 0, e2.block_start = 0, e2.lookahead = 0, e2.insert = 0, e2.match_length = e2.prev_length = 2, e2.match_available = 0, e2.ins_h = 0), t2;
        }, xe = (e2, t2, r2, n2, o2, s2) => {
          if (!e2)
            return te;
          let i2 = 1;
          if (t2 === oe && (t2 = 6), n2 < 0 ? (i2 = 0, n2 = -n2) : 15 < n2 && (i2 = 2, n2 -= 16), o2 < 1 || o2 > 9 || r2 !== de || n2 < 8 || 15 < n2 || t2 < 0 || 9 < t2 || s2 < 0 || s2 > ue)
            return fe(e2, te);
          8 === n2 && (n2 = 9);
          const a2 = new Re();
          return (e2.state = a2).strm = e2, a2.wrap = i2, a2.gzhead = null, a2.w_bits = n2, a2.w_size = 1 << a2.w_bits, a2.w_mask = a2.w_size - 1, a2.hash_bits = o2 + 7, a2.hash_size = 1 << a2.hash_bits, a2.hash_mask = a2.hash_size - 1, a2.hash_shift = ~~((a2.hash_bits + 3 - 1) / 3), a2.window = new Uint8Array(2 * a2.w_size), a2.head = new Uint16Array(a2.hash_size), a2.prev = new Uint16Array(a2.w_size), a2.lit_bufsize = 1 << o2 + 6, a2.pending_buf_size = 4 * a2.lit_bufsize, a2.pending_buf = new Uint8Array(a2.pending_buf_size), a2.d_buf = +a2.lit_bufsize, a2.l_buf = 3 * a2.lit_bufsize, a2.level = t2, a2.strategy = s2, a2.method = r2, Ae(e2);
        };
        var Pe = xe, Te = (e2, t2) => e2 && e2.state && 2 === e2.state.wrap ? (e2.state.gzhead = t2, $) : te, Ee = (e2, t2) => {
          let r2, n2;
          if (!e2 || !e2.state || t2 > X || t2 < 0)
            return e2 ? fe(e2, te) : te;
          const o2 = e2.state;
          if (!e2.output || !e2.input && 0 !== e2.avail_in || 666 === o2.status && t2 !== Y)
            return fe(e2, 0 === e2.avail_out ? ne : te);
          o2.strm = e2;
          var s2 = o2.last_flush;
          if (o2.last_flush = t2, 42 === o2.status)
            if (2 === o2.wrap)
              e2.adler = 0, Me(o2, 31), Me(o2, 139), Me(o2, 8), o2.gzhead ? (Me(o2, (o2.gzhead.text ? 1 : 0) + (o2.gzhead.hcrc ? 2 : 0) + (o2.gzhead.extra ? 4 : 0) + (o2.gzhead.name ? 8 : 0) + (o2.gzhead.comment ? 16 : 0)), Me(o2, 255 & o2.gzhead.time), Me(o2, o2.gzhead.time >> 8 & 255), Me(o2, o2.gzhead.time >> 16 & 255), Me(o2, o2.gzhead.time >> 24 & 255), Me(o2, 9 === o2.level ? 2 : o2.strategy >= ie || o2.level < 2 ? 4 : 0), Me(o2, 255 & o2.gzhead.os), o2.gzhead.extra && o2.gzhead.extra.length && (Me(o2, 255 & o2.gzhead.extra.length), Me(o2, o2.gzhead.extra.length >> 8 & 255)), o2.gzhead.hcrc && (e2.adler = z(e2.adler, o2.pending_buf, o2.pending, 0)), o2.gzindex = 0, o2.status = 69) : (Me(o2, 0), Me(o2, 0), Me(o2, 0), Me(o2, 0), Me(o2, 0), Me(o2, 9 === o2.level ? 2 : o2.strategy >= ie || o2.level < 2 ? 4 : 0), Me(o2, 3), o2.status = ge);
            else {
              let t3 = de + (o2.w_bits - 8 << 4) << 8, r3 = -1;
              r3 = o2.strategy >= ie || o2.level < 2 ? 0 : o2.level < 6 ? 1 : 6 === o2.level ? 2 : 3, t3 |= r3 << 6, 0 !== o2.strstart && (t3 |= 32), t3 += 31 - t3 % 31, o2.status = ge, Ie(o2, t3), 0 !== o2.strstart && (Ie(o2, e2.adler >>> 16), Ie(o2, 65535 & e2.adler)), e2.adler = 1;
            }
          if (69 === o2.status)
            if (o2.gzhead.extra) {
              for (r2 = o2.pending; o2.gzindex < (65535 & o2.gzhead.extra.length) && (o2.pending !== o2.pending_buf_size || (o2.gzhead.hcrc && o2.pending > r2 && (e2.adler = z(e2.adler, o2.pending_buf, o2.pending - r2, r2)), be(e2), r2 = o2.pending, o2.pending !== o2.pending_buf_size)); )
                Me(o2, 255 & o2.gzhead.extra[o2.gzindex]), o2.gzindex++;
              o2.gzhead.hcrc && o2.pending > r2 && (e2.adler = z(e2.adler, o2.pending_buf, o2.pending - r2, r2)), o2.gzindex === o2.gzhead.extra.length && (o2.gzindex = 0, o2.status = 73);
            } else
              o2.status = 73;
          if (73 === o2.status)
            if (o2.gzhead.name) {
              r2 = o2.pending;
              do {
                if (o2.pending === o2.pending_buf_size && (o2.gzhead.hcrc && o2.pending > r2 && (e2.adler = z(e2.adler, o2.pending_buf, o2.pending - r2, r2)), be(e2), r2 = o2.pending, o2.pending === o2.pending_buf_size)) {
                  n2 = 1;
                  break;
                }
              } while (n2 = o2.gzindex < o2.gzhead.name.length ? 255 & o2.gzhead.name.charCodeAt(o2.gzindex++) : 0, Me(o2, n2), 0 !== n2);
              o2.gzhead.hcrc && o2.pending > r2 && (e2.adler = z(e2.adler, o2.pending_buf, o2.pending - r2, r2)), 0 === n2 && (o2.gzindex = 0, o2.status = 91);
            } else
              o2.status = 91;
          if (91 === o2.status)
            if (o2.gzhead.comment) {
              r2 = o2.pending;
              do {
                if (o2.pending === o2.pending_buf_size && (o2.gzhead.hcrc && o2.pending > r2 && (e2.adler = z(e2.adler, o2.pending_buf, o2.pending - r2, r2)), be(e2), r2 = o2.pending, o2.pending === o2.pending_buf_size)) {
                  n2 = 1;
                  break;
                }
              } while (n2 = o2.gzindex < o2.gzhead.comment.length ? 255 & o2.gzhead.comment.charCodeAt(o2.gzindex++) : 0, Me(o2, n2), 0 !== n2);
              o2.gzhead.hcrc && o2.pending > r2 && (e2.adler = z(e2.adler, o2.pending_buf, o2.pending - r2, r2)), 0 === n2 && (o2.status = 103);
            } else
              o2.status = 103;
          if (103 === o2.status && (o2.gzhead.hcrc ? (o2.pending + 2 > o2.pending_buf_size && be(e2), o2.pending + 2 <= o2.pending_buf_size && (Me(o2, 255 & e2.adler), Me(o2, e2.adler >> 8 & 255), e2.adler = 0, o2.status = ge)) : o2.status = ge), 0 !== o2.pending) {
            if (be(e2), 0 === e2.avail_out)
              return o2.last_flush = -1, $;
          } else if (0 === e2.avail_in && me(t2) <= me(s2) && t2 !== Y)
            return fe(e2, ne);
          if (666 === o2.status && 0 !== e2.avail_in)
            return fe(e2, ne);
          if (0 !== e2.avail_in || 0 !== o2.lookahead || t2 !== Z && 666 !== o2.status) {
            if (3 !== (s2 = o2.strategy === ie ? ((e3, t3) => {
              for (var r3; ; ) {
                if (0 === e3.lookahead && (Ce(e3), 0 === e3.lookahead)) {
                  if (t3 === Z)
                    return 1;
                  break;
                }
                if (e3.match_length = 0, r3 = Q(e3, 0, e3.window[e3.strstart]), e3.lookahead--, e3.strstart++, r3 && (ye(e3, false), 0 === e3.strm.avail_out))
                  return 1;
              }
              return e3.insert = 0, t3 === Y ? (ye(e3, true), 0 === e3.strm.avail_out ? 3 : 4) : e3.last_lit && (ye(e3, false), 0 === e3.strm.avail_out) ? 1 : 2;
            })(o2, t2) : o2.strategy === ae ? ((e3, t3) => {
              let r3;
              var n3;
              let o3, s3;
              for (var i2 = e3.window; ; ) {
                if (e3.lookahead <= pe) {
                  if (Ce(e3), e3.lookahead <= pe && t3 === Z)
                    return 1;
                  if (0 === e3.lookahead)
                    break;
                }
                if (e3.match_length = 0, e3.lookahead >= 3 && 0 < e3.strstart && (n3 = i2[o3 = e3.strstart - 1]) === i2[++o3] && n3 === i2[++o3] && n3 === i2[++o3]) {
                  for (s3 = e3.strstart + pe; n3 === i2[++o3] && n3 === i2[++o3] && n3 === i2[++o3] && n3 === i2[++o3] && n3 === i2[++o3] && n3 === i2[++o3] && n3 === i2[++o3] && n3 === i2[++o3] && o3 < s3; )
                    ;
                  e3.match_length = pe - (s3 - o3), e3.match_length > e3.lookahead && (e3.match_length = e3.lookahead);
                }
                if (e3.match_length >= 3 ? (r3 = Q(e3, 1, e3.match_length - 3), e3.lookahead -= e3.match_length, e3.strstart += e3.match_length, e3.match_length = 0) : (r3 = Q(e3, 0, e3.window[e3.strstart]), e3.lookahead--, e3.strstart++), r3 && (ye(e3, false), 0 === e3.strm.avail_out))
                  return 1;
              }
              return e3.insert = 0, t3 === Y ? (ye(e3, true), 0 === e3.strm.avail_out ? 3 : 4) : e3.last_lit && (ye(e3, false), 0 === e3.strm.avail_out) ? 1 : 2;
            })(o2, t2) : qe[o2.level].func(o2, t2)) && 4 !== s2 || (o2.status = 666), 1 === s2 || 3 === s2)
              return 0 === e2.avail_out && (o2.last_flush = -1), $;
            if (2 === s2 && (t2 === J ? V(o2) : t2 !== X && (K(o2, 0, 0, false), t2 === W && (_e(o2.head), 0 === o2.lookahead && (o2.strstart = 0, o2.block_start = 0, o2.insert = 0))), be(e2), 0 === e2.avail_out))
              return o2.last_flush = -1, $;
          }
          return t2 !== Y ? $ : o2.wrap <= 0 ? ee : (2 === o2.wrap ? (Me(o2, 255 & e2.adler), Me(o2, e2.adler >> 8 & 255), Me(o2, e2.adler >> 16 & 255), Me(o2, e2.adler >> 24 & 255), Me(o2, 255 & e2.total_in), Me(o2, e2.total_in >> 8 & 255), Me(o2, e2.total_in >> 16 & 255), Me(o2, e2.total_in >> 24 & 255)) : (Ie(o2, e2.adler >>> 16), Ie(o2, 65535 & e2.adler)), be(e2), 0 < o2.wrap && (o2.wrap = -o2.wrap), 0 !== o2.pending ? $ : ee);
        }, Le = (e2) => {
          if (!e2 || !e2.state)
            return te;
          var t2 = e2.state.status;
          return 42 !== t2 && 69 !== t2 && 73 !== t2 && 91 !== t2 && 103 !== t2 && t2 !== ge && 666 !== t2 ? fe(e2, te) : (e2.state = null, t2 === ge ? fe(e2, re) : $);
        }, je = (e2, t2) => {
          let r2 = t2.length;
          if (!e2 || !e2.state)
            return te;
          const n2 = e2.state;
          var o2 = n2.wrap;
          if (2 === o2 || 1 === o2 && 42 !== n2.status || n2.lookahead)
            return te;
          if (1 === o2 && (e2.adler = U(e2.adler, t2, r2, 0)), n2.wrap = 0, r2 >= n2.w_size) {
            0 === o2 && (_e(n2.head), n2.strstart = 0, n2.block_start = 0, n2.insert = 0);
            let e3 = new Uint8Array(n2.w_size);
            e3.set(t2.subarray(r2 - n2.w_size, r2), 0), t2 = e3, r2 = n2.w_size;
          }
          var s2 = e2.avail_in, i2 = e2.next_in, a2 = e2.input;
          for (e2.avail_in = r2, e2.next_in = 0, e2.input = t2, Ce(n2); n2.lookahead >= 3; ) {
            let e3 = n2.strstart, t3 = n2.lookahead - 2;
            for (; n2.ins_h = ve(n2, n2.ins_h, n2.window[e3 + 3 - 1]), n2.prev[e3 & n2.w_mask] = n2.head[n2.ins_h], n2.head[n2.ins_h] = e3, e3++, --t3; )
              ;
            n2.strstart = e3, n2.lookahead = 2, Ce(n2);
          }
          return n2.strstart += n2.lookahead, n2.block_start = n2.strstart, n2.insert = n2.lookahead, n2.lookahead = 0, n2.match_length = n2.prev_length = 2, n2.match_available = 0, e2.next_in = i2, e2.input = a2, e2.avail_in = s2, n2.wrap = o2, $;
        };
        let Ge = true;
        try {
          String.fromCharCode.apply(null, new Uint8Array(1));
        } catch (t2) {
          Ge = false;
        }
        const Ue = new Uint8Array(256);
        for (let e2 = 0; e2 < 256; e2++)
          Ue[e2] = 252 <= e2 ? 6 : 248 <= e2 ? 5 : 240 <= e2 ? 4 : 224 <= e2 ? 3 : 192 <= e2 ? 2 : 1;
        Ue[254] = Ue[254] = 1;
        var Be = (e2) => {
          if ("function" == typeof TextEncoder && TextEncoder.prototype.encode)
            return new TextEncoder().encode(e2);
          let t2, r2, n2, o2, s2, i2 = e2.length, a2 = 0;
          for (o2 = 0; o2 < i2; o2++)
            55296 == (64512 & (r2 = e2.charCodeAt(o2))) && o2 + 1 < i2 && 56320 == (64512 & (n2 = e2.charCodeAt(o2 + 1))) && (r2 = 65536 + (r2 - 55296 << 10) + (n2 - 56320), o2++), a2 += r2 < 128 ? 1 : r2 < 2048 ? 2 : r2 < 65536 ? 3 : 4;
          for (t2 = new Uint8Array(a2), s2 = 0, o2 = 0; s2 < a2; o2++)
            55296 == (64512 & (r2 = e2.charCodeAt(o2))) && o2 + 1 < i2 && 56320 == (64512 & (n2 = e2.charCodeAt(o2 + 1))) && (r2 = 65536 + (r2 - 55296 << 10) + (n2 - 56320), o2++), r2 < 128 ? t2[s2++] = r2 : (r2 < 2048 ? t2[s2++] = 192 | r2 >>> 6 : (r2 < 65536 ? t2[s2++] = 224 | r2 >>> 12 : (t2[s2++] = 240 | r2 >>> 18, t2[s2++] = 128 | r2 >>> 12 & 63), t2[s2++] = 128 | r2 >>> 6 & 63), t2[s2++] = 128 | 63 & r2);
          return t2;
        }, ze = function() {
          this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = "", this.state = null, this.data_type = 2, this.adler = 0;
        };
        const Ne = Object.prototype.toString, { Z_NO_FLUSH: Fe, Z_SYNC_FLUSH: Ke, Z_FULL_FLUSH: He, Z_FINISH: Qe, Z_OK: Ve, Z_STREAM_END: Ze, Z_DEFAULT_COMPRESSION: Je, Z_DEFAULT_STRATEGY: We, Z_DEFLATED: Ye } = t;
        function Xe(e2) {
          this.options = function(e3) {
            const t3 = Array.prototype.slice.call(arguments, 1);
            for (; t3.length; ) {
              var r3 = t3.shift();
              if (r3) {
                if ("object" != typeof r3)
                  throw new TypeError(r3 + "must be non-object");
                for (const t4 in r3)
                  n2 = r3, o2 = t4, Object.prototype.hasOwnProperty.call(n2, o2) && (e3[t4] = r3[t4]);
              }
            }
            var n2, o2;
            return e3;
          }({ level: Je, method: Ye, chunkSize: 16384, windowBits: 15, memLevel: 8, strategy: We }, e2 || {});
          let t2 = this.options, r2 = (t2.raw && 0 < t2.windowBits ? t2.windowBits = -t2.windowBits : t2.gzip && 0 < t2.windowBits && t2.windowBits < 16 && (t2.windowBits += 16), this.err = 0, this.msg = "", this.ended = false, this.chunks = [], this.strm = new ze(), this.strm.avail_out = 0, Pe(this.strm, t2.level, t2.method, t2.windowBits, t2.memLevel, t2.strategy));
          if (r2 !== Ve)
            throw new Error(N[r2]);
          if (t2.header && Te(this.strm, t2.header), t2.dictionary) {
            let e3;
            if (e3 = "string" == typeof t2.dictionary ? Be(t2.dictionary) : "[object ArrayBuffer]" === Ne.call(t2.dictionary) ? new Uint8Array(t2.dictionary) : t2.dictionary, (r2 = je(this.strm, e3)) !== Ve)
              throw new Error(N[r2]);
            this._dict_set = true;
          }
        }
        function $e(e2, t2) {
          const r2 = new Xe(t2);
          if (r2.push(e2, true), r2.err)
            throw r2.msg || N[r2.err];
          return r2.result;
        }
        Xe.prototype.push = function(e2, t2) {
          const r2 = this.strm;
          var n2 = this.options.chunkSize;
          let o2, s2;
          if (this.ended)
            return false;
          for (s2 = t2 === ~~t2 ? t2 : true === t2 ? Qe : Fe, "string" == typeof e2 ? r2.input = Be(e2) : "[object ArrayBuffer]" === Ne.call(e2) ? r2.input = new Uint8Array(e2) : r2.input = e2, r2.next_in = 0, r2.avail_in = r2.input.length; ; )
            if (0 === r2.avail_out && (r2.output = new Uint8Array(n2), r2.next_out = 0, r2.avail_out = n2), (s2 === Ke || s2 === He) && r2.avail_out <= 6)
              this.onData(r2.output.subarray(0, r2.next_out)), r2.avail_out = 0;
            else {
              if (Ee(r2, s2) === Ze)
                return 0 < r2.next_out && this.onData(r2.output.subarray(0, r2.next_out)), o2 = Le(this.strm), this.onEnd(o2), this.ended = true, o2 === Ve;
              if (0 === r2.avail_out)
                this.onData(r2.output);
              else if (0 < s2 && 0 < r2.next_out)
                this.onData(r2.output.subarray(0, r2.next_out)), r2.avail_out = 0;
              else if (0 === r2.avail_in)
                break;
            }
          return true;
        }, Xe.prototype.onData = function(e2) {
          this.chunks.push(e2);
        }, Xe.prototype.onEnd = function(e2) {
          e2 === Ve && (this.result = ((e3) => {
            let t2 = 0;
            for (let r3 = 0, n3 = e3.length; r3 < n3; r3++)
              t2 += e3[r3].length;
            const r2 = new Uint8Array(t2);
            for (let t3 = 0, o2 = 0, s2 = e3.length; t3 < s2; t3++) {
              var n2 = e3[t3];
              r2.set(n2, o2), o2 += n2.length;
            }
            return r2;
          })(this.chunks)), this.chunks = [], this.err = e2, this.msg = this.strm.msg;
        }, r = { Deflate: Xe, deflate: $e, deflateRaw: function(e2, t2) {
          return (t2 = t2 || {}).raw = true, $e(e2, t2);
        }, gzip: function(e2, t2) {
          return (t2 = t2 || {}).gzip = true, $e(e2, t2);
        }, constants: t };
        new Uint16Array([3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0]), new Uint8Array([16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78]), new Uint16Array([1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0]), new Uint8Array([16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64]);
        const { Z_FINISH: et, Z_BLOCK: tt2, Z_TREES: rt, Z_OK: nt, Z_STREAM_END: ot, Z_NEED_DICT: st, Z_STREAM_ERROR: it, Z_DATA_ERROR: at, Z_MEM_ERROR: ut, Z_BUF_ERROR: ct, Z_DEFLATED: lt } = t;
        Object.prototype.toString;
        const {} = t;
        var dt = Se = r.deflate;
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return n;
        }), o.prototype.removeTokens = function(e2, t2) {
          var r2 = this;
          return this.bucketSize ? e2 > this.bucketSize ? (setTimeout(t2.bind(null, "Requested tokens " + e2 + " exceeds bucket size " + this.bucketSize, null), 0), false) : (this.drip(), e2 > this.content ? n2() : this.parentBucket ? this.parentBucket.removeTokens(e2, function(o2, s) {
            return o2 ? t2(o2, null) : e2 > r2.content ? n2() : (r2.content -= e2, void t2(null, Math.min(s, r2.content)));
          }) : (this.content -= e2, setTimeout(t2.bind(null, null, this.content), 0), true)) : (setTimeout(t2.bind(null, null, e2, Number.POSITIVE_INFINITY), 0), true);
          function n2() {
            var n3 = Math.ceil((e2 - r2.content) * (r2.interval / r2.tokensPerInterval));
            return setTimeout(function() {
              r2.removeTokens(e2, t2);
            }, n3), false;
          }
        }, o.prototype.tryRemoveTokens = function(e2) {
          return !(this.bucketSize && (e2 > this.bucketSize || (this.drip(), e2 > this.content || this.parentBucket && !this.parentBucket.tryRemoveTokens(e2) || (this.content -= e2, 0))));
        }, o.prototype.drip = function() {
          var e2, t2;
          this.tokensPerInterval ? (t2 = +/* @__PURE__ */ new Date(), e2 = Math.max(t2 - this.lastDrip, 0), this.lastDrip = t2, t2 = e2 * (this.tokensPerInterval / this.interval), this.content = Math.min(this.content + t2, this.bucketSize)) : this.content = this.bucketSize;
        };
        var n = o;
        function o(e2, t2, r2, n2) {
          if (this.bucketSize = 1, this.tokensPerInterval = 1, this.interval = 1e3, this.parentBucket = null, this.content = 0, this.lastDrip = 0, this.bucketSize = e2, this.tokensPerInterval = t2, "string" == typeof r2)
            switch (r2) {
              case "sec":
              case "second":
                this.interval = 1e3;
                break;
              case "min":
              case "minute":
                this.interval = 6e4;
                break;
              case "hr":
              case "hour":
                this.interval = 36e5;
                break;
              case "day":
                this.interval = 864e5;
                break;
              default:
                throw new Error("Invaid interval " + r2);
            }
          else
            this.interval = r2;
          this.parentBucket = n2, this.content = 0, this.lastDrip = +/* @__PURE__ */ new Date();
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return o;
        });
        var n = r(4), o = (s.prototype.enqueue = function(e2) {
          this.queue.enqueue(e2), e2 = e2.value.length, this.pendingDataSize += e2, this.size++, n.a.totalAvailCache -= e2, this.enCallback && this.enCallback(this.byteLength, this.size, this.pendingDataSize);
        }, s.prototype.dequeue = function() {
          var e2 = this.queue.dequeue();
          return this.size--, this.deCallback && this.deCallback(), e2;
        }, s.prototype.readReportData = function(e2) {
          return e2 = this.readData(e2), this.reset(), { totalLen: e2.totalLen, reportDataArr: e2.resArr };
        }, s.prototype.readStoreData = function(e2) {
          return e2 = Math.ceil(this.pendingDataSize * e2), e2 = this.readData(e2), this.refresh(e2.totalLen), e2.resArr;
        }, s.prototype.readData = function(e2) {
          for (var t2 = [], r2 = 0; this.queue.size(); ) {
            var n2 = this.dequeue();
            if (n2 && (t2.push(n2), r2 += n2.value.length), e2 < r2)
              break;
          }
          return { totalLen: r2, resArr: t2 };
        }, s.prototype.decodeReportData = function(e2) {
          var t2 = this;
          e2.forEach(function(e3) {
            t2.enqueue(e3);
          });
        }, s.prototype.setListener = function(e2) {
          this.enCallback = e2.enCallback, this.deCallback = e2.deCallback;
        }, s.prototype.getPendingDataInfo = function() {
          return { pendingDataSize: this.pendingDataSize, size: this.size };
        }, s.prototype.refresh = function(e2) {
          this.pendingDataSize -= e2, n.a.totalAvailCache += e2;
        }, s.prototype.reset = function() {
          this.byteLength = 0;
        }, s.prototype.clear = function() {
          this.queue.clear();
        }, s);
        function s() {
          this.queue = new n.d(), this.byteLength = 0, this.size = 0, this.pendingDataSize = 0;
        }
      }, function(e, t) {
      }, function(e, t, r) {
        var n;
        e.exports = (e = r(5), n = e.lib.WordArray, e.enc.Base64 = { stringify: function(e2) {
          for (var t2 = e2.words, r2 = e2.sigBytes, n2 = this._map, o = (e2.clamp(), []), s = 0; s < r2; s += 3)
            for (var i = (t2[s >>> 2] >>> 24 - s % 4 * 8 & 255) << 16 | (t2[s + 1 >>> 2] >>> 24 - (s + 1) % 4 * 8 & 255) << 8 | t2[s + 2 >>> 2] >>> 24 - (s + 2) % 4 * 8 & 255, a = 0; a < 4 && s + 0.75 * a < r2; a++)
              o.push(n2.charAt(i >>> 6 * (3 - a) & 63));
          var u = n2.charAt(64);
          if (u)
            for (; o.length % 4; )
              o.push(u);
          return o.join("");
        }, parse: function(e2) {
          var t2 = e2.length, r2 = this._map;
          if (!(o = this._reverseMap))
            for (var o = this._reverseMap = [], s = 0; s < r2.length; s++)
              o[r2.charCodeAt(s)] = s;
          var i = r2.charAt(64);
          return i && -1 !== (i = e2.indexOf(i)) && (t2 = i), function(e3, t3, r3) {
            for (var o2, s2, i2 = [], a = 0, u = 0; u < t3; u++)
              u % 4 && (o2 = r3[e3.charCodeAt(u - 1)] << u % 4 * 2, s2 = r3[e3.charCodeAt(u)] >>> 6 - u % 4 * 2, i2[a >>> 2] |= (o2 | s2) << 24 - a % 4 * 8, a++);
            return n.create(i2, a);
          }(e2, t2, o);
        }, _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=" }, e.enc.Base64);
      }, function(e, t, r) {
        var n, o, s, i;
        e.exports = (e = r(5), i = (r = e).lib, n = i.WordArray, o = i.Hasher, i = r.algo, s = [], i = i.SHA1 = o.extend({ _doReset: function() {
          this._hash = new n.init([1732584193, 4023233417, 2562383102, 271733878, 3285377520]);
        }, _doProcessBlock: function(e2, t2) {
          for (var r2 = this._hash.words, n2 = r2[0], o2 = r2[1], i2 = r2[2], a = r2[3], u = r2[4], c = 0; c < 80; c++) {
            c < 16 ? s[c] = 0 | e2[t2 + c] : (l = s[c - 3] ^ s[c - 8] ^ s[c - 14] ^ s[c - 16], s[c] = l << 1 | l >>> 31);
            var l = (n2 << 5 | n2 >>> 27) + u + s[c];
            l += c < 20 ? 1518500249 + (o2 & i2 | ~o2 & a) : c < 40 ? 1859775393 + (o2 ^ i2 ^ a) : c < 60 ? (o2 & i2 | o2 & a | i2 & a) - 1894007588 : (o2 ^ i2 ^ a) - 899497514, u = a, a = i2, i2 = o2 << 30 | o2 >>> 2, o2 = n2, n2 = l;
          }
          r2[0] = r2[0] + n2 | 0, r2[1] = r2[1] + o2 | 0, r2[2] = r2[2] + i2 | 0, r2[3] = r2[3] + a | 0, r2[4] = r2[4] + u | 0;
        }, _doFinalize: function() {
          var e2 = this._data, t2 = e2.words, r2 = 8 * this._nDataBytes, n2 = 8 * e2.sigBytes;
          return t2[n2 >>> 5] |= 128 << 24 - n2 % 32, t2[14 + (64 + n2 >>> 9 << 4)] = Math.floor(r2 / 4294967296), t2[15 + (64 + n2 >>> 9 << 4)] = r2, e2.sigBytes = 4 * t2.length, this._process(), this._hash;
        }, clone: function() {
          var e2 = o.clone.call(this);
          return e2._hash = this._hash.clone(), e2;
        } }), r.SHA1 = o._createHelper(i), r.HmacSHA1 = o._createHmacHelper(i), e.SHA1);
      }, function(e, t, r) {
        var n;
        e.exports = (e = r(5), r = e.lib.Base, n = e.enc.Utf8, void (e.algo.HMAC = r.extend({ init: function(e2, t2) {
          e2 = this._hasher = new e2.init(), "string" == typeof t2 && (t2 = n.parse(t2));
          for (var r2 = e2.blockSize, o = 4 * r2, s = (e2 = ((t2 = t2.sigBytes > o ? e2.finalize(t2) : t2).clamp(), this._oKey = t2.clone()), t2 = this._iKey = t2.clone(), e2.words), i = t2.words, a = 0; a < r2; a++)
            s[a] ^= 1549556828, i[a] ^= 909522486;
          e2.sigBytes = t2.sigBytes = o, this.reset();
        }, reset: function() {
          var e2 = this._hasher;
          e2.reset(), e2.update(this._iKey);
        }, update: function(e2) {
          return this._hasher.update(e2), this;
        }, finalize: function(e2) {
          var t2 = this._hasher;
          e2 = t2.finalize(e2);
          return t2.reset(), t2.finalize(this._oKey.clone().concat(e2));
        } })));
      }, function(e, t, r) {
        var n, o, s, i, a, u, c, l, d, p, h, g;
        e.exports = (e = r(5), r(23), void (e.lib.Cipher || (r = (e = e).lib, n = r.Base, o = r.WordArray, s = r.BufferedBlockAlgorithm, (d = e.enc).Utf8, i = d.Base64, a = e.algo.EvpKDF, u = r.Cipher = s.extend({ cfg: n.extend(), createEncryptor: function(e2, t2) {
          return this.create(this._ENC_XFORM_MODE, e2, t2);
        }, createDecryptor: function(e2, t2) {
          return this.create(this._DEC_XFORM_MODE, e2, t2);
        }, init: function(e2, t2, r2) {
          this.cfg = this.cfg.extend(r2), this._xformMode = e2, this._key = t2, this.reset();
        }, reset: function() {
          s.reset.call(this), this._doReset();
        }, process: function(e2) {
          return this._append(e2), this._process();
        }, finalize: function(e2) {
          return e2 && this._append(e2), this._doFinalize();
        }, keySize: 4, ivSize: 4, _ENC_XFORM_MODE: 1, _DEC_XFORM_MODE: 2, _createHelper: function() {
          function e2(e3) {
            return "string" == typeof e3 ? g : p;
          }
          return function(t2) {
            return { encrypt: function(r2, n2, o2) {
              return e2(n2).encrypt(t2, r2, n2, o2);
            }, decrypt: function(r2, n2, o2) {
              return e2(n2).decrypt(t2, r2, n2, o2);
            } };
          };
        }() }), r.StreamCipher = u.extend({ _doFinalize: function() {
          return this._process(true);
        }, blockSize: 1 }), d = e.mode = {}, c = r.BlockCipherMode = n.extend({ createEncryptor: function(e2, t2) {
          return this.Encryptor.create(e2, t2);
        }, createDecryptor: function(e2, t2) {
          return this.Decryptor.create(e2, t2);
        }, init: function(e2, t2) {
          this._cipher = e2, this._iv = t2;
        } }), d = d.CBC = function() {
          var e2 = c.extend();
          function t2(e3, t3, r2) {
            var n2, o2 = this._iv;
            o2 ? (n2 = o2, this._iv = void 0) : n2 = this._prevBlock;
            for (var s2 = 0; s2 < r2; s2++)
              e3[t3 + s2] ^= n2[s2];
          }
          return e2.Encryptor = e2.extend({ processBlock: function(e3, r2) {
            var n2 = this._cipher, o2 = n2.blockSize;
            t2.call(this, e3, r2, o2), n2.encryptBlock(e3, r2), this._prevBlock = e3.slice(r2, r2 + o2);
          } }), e2.Decryptor = e2.extend({ processBlock: function(e3, r2) {
            var n2 = this._cipher, o2 = n2.blockSize, s2 = e3.slice(r2, r2 + o2);
            n2.decryptBlock(e3, r2), t2.call(this, e3, r2, o2), this._prevBlock = s2;
          } }), e2;
        }(), h = (e.pad = {}).Pkcs7 = { pad: function(e2, t2) {
          for (var r2 = (t2 = 4 * t2) - e2.sigBytes % t2, n2 = r2 << 24 | r2 << 16 | r2 << 8 | r2, s2 = [], i2 = 0; i2 < r2; i2 += 4)
            s2.push(n2);
          t2 = o.create(s2, r2), e2.concat(t2);
        }, unpad: function(e2) {
          var t2 = 255 & e2.words[e2.sigBytes - 1 >>> 2];
          e2.sigBytes -= t2;
        } }, r.BlockCipher = u.extend({ cfg: u.cfg.extend({ mode: d, padding: h }), reset: function() {
          u.reset.call(this);
          var e2, t2 = (r2 = this.cfg).iv, r2 = r2.mode;
          this._xformMode == this._ENC_XFORM_MODE ? e2 = r2.createEncryptor : (e2 = r2.createDecryptor, this._minBufferSize = 1), this._mode && this._mode.__creator == e2 ? this._mode.init(this, t2 && t2.words) : (this._mode = e2.call(r2, this, t2 && t2.words), this._mode.__creator = e2);
        }, _doProcessBlock: function(e2, t2) {
          this._mode.processBlock(e2, t2);
        }, _doFinalize: function() {
          var e2, t2 = this.cfg.padding;
          return this._xformMode == this._ENC_XFORM_MODE ? (t2.pad(this._data, this.blockSize), e2 = this._process(true)) : (e2 = this._process(true), t2.unpad(e2)), e2;
        }, blockSize: 4 }), l = r.CipherParams = n.extend({ init: function(e2) {
          this.mixIn(e2);
        }, toString: function(e2) {
          return (e2 || this.formatter).stringify(this);
        } }), d = (e.format = {}).OpenSSL = { stringify: function(e2) {
          var t2 = e2.ciphertext;
          return (e2 = (e2 = e2.salt) ? o.create([1398893684, 1701076831]).concat(e2).concat(t2) : t2).toString(i);
        }, parse: function(e2) {
          var t2, r2 = (e2 = i.parse(e2)).words;
          return 1398893684 == r2[0] && 1701076831 == r2[1] && (t2 = o.create(r2.slice(2, 4)), r2.splice(0, 4), e2.sigBytes -= 16), l.create({ ciphertext: e2, salt: t2 });
        } }, p = r.SerializableCipher = n.extend({ cfg: n.extend({ format: d }), encrypt: function(e2, t2, r2, n2) {
          n2 = this.cfg.extend(n2);
          t2 = (o2 = e2.createEncryptor(r2, n2)).finalize(t2);
          var o2 = o2.cfg;
          return l.create({ ciphertext: t2, key: r2, iv: o2.iv, algorithm: e2, mode: o2.mode, padding: o2.padding, blockSize: e2.blockSize, formatter: n2.format });
        }, decrypt: function(e2, t2, r2, n2) {
          return n2 = this.cfg.extend(n2), t2 = this._parse(t2, n2.format), e2.createDecryptor(r2, n2).finalize(t2.ciphertext);
        }, _parse: function(e2, t2) {
          return "string" == typeof e2 ? t2.parse(e2, this) : e2;
        } }), h = (e.kdf = {}).OpenSSL = { execute: function(e2, t2, r2, n2) {
          return n2 = n2 || o.random(8), e2 = a.create({ keySize: t2 + r2 }).compute(e2, n2), r2 = o.create(e2.words.slice(t2), 4 * r2), e2.sigBytes = 4 * t2, l.create({ key: e2, iv: r2, salt: n2 });
        } }, g = r.PasswordBasedCipher = p.extend({ cfg: p.cfg.extend({ kdf: h }), encrypt: function(e2, t2, r2, n2) {
          return r2 = (n2 = this.cfg.extend(n2)).kdf.execute(r2, e2.keySize, e2.ivSize), n2.iv = r2.iv, (e2 = p.encrypt.call(this, e2, t2, r2.key, n2)).mixIn(r2), e2;
        }, decrypt: function(e2, t2, r2, n2) {
          return n2 = this.cfg.extend(n2), t2 = this._parse(t2, n2.format), r2 = n2.kdf.execute(r2, e2.keySize, e2.ivSize, t2.salt), n2.iv = r2.iv, p.decrypt.call(this, e2, t2, r2.key, n2);
        } }))));
      }, function(e, t, r) {
        "use strict";
        var n = t;
        function o() {
          n.util._configure(), n.Writer._configure(n.BufferWriter), n.Reader._configure(n.BufferReader);
        }
        n.build = "minimal", n.Writer = r(24), n.BufferWriter = r(106), n.Reader = r(25), n.BufferReader = r(107), n.util = r(10), n.rpc = r(108), n.roots = r(110), n.configure = o, o();
      }, function(e, t, r) {
        "use strict";
        e.exports = function(e2, t2) {
          for (var r2 = new Array(arguments.length - 1), n = 0, o = 2, s = true; o < arguments.length; )
            r2[n++] = arguments[o++];
          return new Promise(function(o2, i) {
            r2[n] = function(e3) {
              if (s)
                if (s = false, e3)
                  i(e3);
                else {
                  for (var t3 = new Array(arguments.length - 1), r3 = 0; r3 < t3.length; )
                    t3[r3++] = arguments[r3];
                  o2.apply(null, t3);
                }
            };
            try {
              e2.apply(t2 || null, r2);
            } catch (e3) {
              s && (s = false, i(e3));
            }
          });
        };
      }, function(e, t, r) {
        "use strict";
        t.length = function(e2) {
          var t2 = e2.length;
          if (!t2)
            return 0;
          for (var r2 = 0; 1 < --t2 % 4 && "=" === e2.charAt(t2); )
            ++r2;
          return Math.ceil(3 * e2.length) / 4 - r2;
        };
        for (var n = new Array(64), o = new Array(123), s = 0; s < 64; )
          o[n[s] = s < 26 ? s + 65 : s < 52 ? s + 71 : s < 62 ? s - 4 : s - 59 | 43] = s++;
        t.encode = function(e2, t2, r2) {
          for (var o2, s2 = null, i2 = [], a = 0, u = 0; t2 < r2; ) {
            var c = e2[t2++];
            switch (u) {
              case 0:
                i2[a++] = n[c >> 2], o2 = (3 & c) << 4, u = 1;
                break;
              case 1:
                i2[a++] = n[o2 | c >> 4], o2 = (15 & c) << 2, u = 2;
                break;
              case 2:
                i2[a++] = n[o2 | c >> 6], i2[a++] = n[63 & c], u = 0;
            }
            8191 < a && ((s2 = s2 || []).push(String.fromCharCode.apply(String, i2)), a = 0);
          }
          return u && (i2[a++] = n[o2], i2[a++] = 61, 1 === u && (i2[a++] = 61)), s2 ? (a && s2.push(String.fromCharCode.apply(String, i2.slice(0, a))), s2.join("")) : String.fromCharCode.apply(String, i2.slice(0, a));
        };
        var i = "invalid encoding";
        t.decode = function(e2, t2, r2) {
          for (var n2, s2 = r2, a = 0, u = 0; u < e2.length; ) {
            var c = e2.charCodeAt(u++);
            if (61 === c && 1 < a)
              break;
            if (void 0 === (c = o[c]))
              throw Error(i);
            switch (a) {
              case 0:
                n2 = c, a = 1;
                break;
              case 1:
                t2[r2++] = n2 << 2 | (48 & c) >> 4, n2 = c, a = 2;
                break;
              case 2:
                t2[r2++] = (15 & n2) << 4 | (60 & c) >> 2, n2 = c, a = 3;
                break;
              case 3:
                t2[r2++] = (3 & n2) << 6 | c, a = 0;
            }
          }
          if (1 === a)
            throw Error(i);
          return r2 - s2;
        }, t.test = function(e2) {
          return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e2);
        };
      }, function(e, t, r) {
        "use strict";
        function n() {
          this._listeners = {};
        }
        (e.exports = n).prototype.on = function(e2, t2, r2) {
          return (this._listeners[e2] || (this._listeners[e2] = [])).push({ fn: t2, ctx: r2 || this }), this;
        }, n.prototype.off = function(e2, t2) {
          if (void 0 === e2)
            this._listeners = {};
          else if (void 0 === t2)
            this._listeners[e2] = [];
          else
            for (var r2 = this._listeners[e2], n2 = 0; n2 < r2.length; )
              r2[n2].fn === t2 ? r2.splice(n2, 1) : ++n2;
          return this;
        }, n.prototype.emit = function(e2) {
          var t2 = this._listeners[e2];
          if (t2) {
            for (var r2 = [], n2 = 1; n2 < arguments.length; )
              r2.push(arguments[n2++]);
            for (n2 = 0; n2 < t2.length; )
              t2[n2].fn.apply(t2[n2++].ctx, r2);
          }
          return this;
        };
      }, function(e, t, r) {
        "use strict";
        function n(e2) {
          function t2(e3, t3, r3, n3) {
            var o2 = t3 < 0 ? 1 : 0;
            0 === (t3 = o2 ? -t3 : t3) ? e3(0 < 1 / t3 ? 0 : 2147483648, r3, n3) : isNaN(t3) ? e3(2143289344, r3, n3) : e3(34028234663852886e22 < t3 ? (o2 << 31 | 2139095040) >>> 0 : t3 < 11754943508222875e-54 ? (o2 << 31 | Math.round(t3 / 1401298464324817e-60)) >>> 0 : (o2 << 31 | (e3 = Math.floor(Math.log(t3) / Math.LN2)) + 127 << 23 | 8388607 & Math.round(t3 * Math.pow(2, -e3) * 8388608)) >>> 0, r3, n3);
          }
          function r2(e3, t3, r3) {
            return t3 = 2 * ((e3 = e3(t3, r3)) >> 31) + 1, r3 = e3 >>> 23 & 255, e3 &= 8388607, 255 == r3 ? e3 ? NaN : 1 / 0 * t3 : 0 == r3 ? 1401298464324817e-60 * t3 * e3 : t3 * Math.pow(2, r3 - 150) * (8388608 + e3);
          }
          function n2(e3, t3, r3) {
            d[0] = e3, t3[r3] = p[0], t3[r3 + 1] = p[1], t3[r3 + 2] = p[2], t3[r3 + 3] = p[3];
          }
          function u(e3, t3, r3) {
            d[0] = e3, t3[r3] = p[3], t3[r3 + 1] = p[2], t3[r3 + 2] = p[1], t3[r3 + 3] = p[0];
          }
          function c(e3, t3) {
            return p[0] = e3[t3], p[1] = e3[t3 + 1], p[2] = e3[t3 + 2], p[3] = e3[t3 + 3], d[0];
          }
          function l(e3, t3) {
            return p[3] = e3[t3], p[2] = e3[t3 + 1], p[1] = e3[t3 + 2], p[0] = e3[t3 + 3], d[0];
          }
          var d, p, h, g, f;
          function m(e3, t3, r3, n3, o2, s2) {
            var i2, a2, u2 = n3 < 0 ? 1 : 0;
            0 === (n3 = u2 ? -n3 : n3) ? (e3(0, o2, s2 + t3), e3(0 < 1 / n3 ? 0 : 2147483648, o2, s2 + r3)) : isNaN(n3) ? (e3(0, o2, s2 + t3), e3(2146959360, o2, s2 + r3)) : 17976931348623157e292 < n3 ? (e3(0, o2, s2 + t3), e3((u2 << 31 | 2146435072) >>> 0, o2, s2 + r3)) : n3 < 22250738585072014e-324 ? (e3((i2 = n3 / 5e-324) >>> 0, o2, s2 + t3), e3((u2 << 31 | i2 / 4294967296) >>> 0, o2, s2 + r3)) : (1024 === (a2 = Math.floor(Math.log(n3) / Math.LN2)) && (a2 = 1023), e3(4503599627370496 * (i2 = n3 * Math.pow(2, -a2)) >>> 0, o2, s2 + t3), e3((u2 << 31 | a2 + 1023 << 20 | 1048576 * i2 & 1048575) >>> 0, o2, s2 + r3));
          }
          function _(e3, t3, r3, n3, o2) {
            return t3 = e3(n3, o2 + t3), n3 = 2 * ((e3 = e3(n3, o2 + r3)) >> 31) + 1, r3 = 4294967296 * (1048575 & e3) + t3, 2047 == (o2 = e3 >>> 20 & 2047) ? r3 ? NaN : 1 / 0 * n3 : 0 == o2 ? 5e-324 * n3 * r3 : n3 * Math.pow(2, o2 - 1075) * (r3 + 4503599627370496);
          }
          function v(e3, t3, r3) {
            h[0] = e3, t3[r3] = g[0], t3[r3 + 1] = g[1], t3[r3 + 2] = g[2], t3[r3 + 3] = g[3], t3[r3 + 4] = g[4], t3[r3 + 5] = g[5], t3[r3 + 6] = g[6], t3[r3 + 7] = g[7];
          }
          function b(e3, t3, r3) {
            h[0] = e3, t3[r3] = g[7], t3[r3 + 1] = g[6], t3[r3 + 2] = g[5], t3[r3 + 3] = g[4], t3[r3 + 4] = g[3], t3[r3 + 5] = g[2], t3[r3 + 6] = g[1], t3[r3 + 7] = g[0];
          }
          function y(e3, t3) {
            return g[0] = e3[t3], g[1] = e3[t3 + 1], g[2] = e3[t3 + 2], g[3] = e3[t3 + 3], g[4] = e3[t3 + 4], g[5] = e3[t3 + 5], g[6] = e3[t3 + 6], g[7] = e3[t3 + 7], h[0];
          }
          function M(e3, t3) {
            return g[7] = e3[t3], g[6] = e3[t3 + 1], g[5] = e3[t3 + 2], g[4] = e3[t3 + 3], g[3] = e3[t3 + 4], g[2] = e3[t3 + 5], g[1] = e3[t3 + 6], g[0] = e3[t3 + 7], h[0];
          }
          return "undefined" != typeof Float32Array ? (d = new Float32Array([-0]), f = 128 === (p = new Uint8Array(d.buffer))[3], e2.writeFloatLE = f ? n2 : u, e2.writeFloatBE = f ? u : n2, e2.readFloatLE = f ? c : l, e2.readFloatBE = f ? l : c) : (e2.writeFloatLE = t2.bind(null, o), e2.writeFloatBE = t2.bind(null, s), e2.readFloatLE = r2.bind(null, i), e2.readFloatBE = r2.bind(null, a)), "undefined" != typeof Float64Array ? (h = new Float64Array([-0]), f = 128 === (g = new Uint8Array(h.buffer))[7], e2.writeDoubleLE = f ? v : b, e2.writeDoubleBE = f ? b : v, e2.readDoubleLE = f ? y : M, e2.readDoubleBE = f ? M : y) : (e2.writeDoubleLE = m.bind(null, o, 0, 4), e2.writeDoubleBE = m.bind(null, s, 4, 0), e2.readDoubleLE = _.bind(null, i, 0, 4), e2.readDoubleBE = _.bind(null, a, 4, 0)), e2;
        }
        function o(e2, t2, r2) {
          t2[r2] = 255 & e2, t2[r2 + 1] = e2 >>> 8 & 255, t2[r2 + 2] = e2 >>> 16 & 255, t2[r2 + 3] = e2 >>> 24;
        }
        function s(e2, t2, r2) {
          t2[r2] = e2 >>> 24, t2[r2 + 1] = e2 >>> 16 & 255, t2[r2 + 2] = e2 >>> 8 & 255, t2[r2 + 3] = 255 & e2;
        }
        function i(e2, t2) {
          return (e2[t2] | e2[t2 + 1] << 8 | e2[t2 + 2] << 16 | e2[t2 + 3] << 24) >>> 0;
        }
        function a(e2, t2) {
          return (e2[t2] << 24 | e2[t2 + 1] << 16 | e2[t2 + 2] << 8 | e2[t2 + 3]) >>> 0;
        }
        e.exports = n(n);
      }, function(module, exports, __webpack_require__) {
        "use strict";
        function inquire(moduleName) {
          try {
            var mod = eval("quire".replace(/^/, "re"))(moduleName);
            if (mod && (mod.length || Object.keys(mod).length))
              return mod;
          } catch (e) {
          }
          return null;
        }
        module.exports = inquire;
      }, function(e, t, r) {
        "use strict";
        t.length = function(e2) {
          for (var t2, r2 = 0, n = 0; n < e2.length; ++n)
            (t2 = e2.charCodeAt(n)) < 128 ? r2 += 1 : t2 < 2048 ? r2 += 2 : 55296 == (64512 & t2) && 56320 == (64512 & e2.charCodeAt(n + 1)) ? (++n, r2 += 4) : r2 += 3;
          return r2;
        }, t.read = function(e2, t2, r2) {
          if (r2 - t2 < 1)
            return "";
          for (var n, o = null, s = [], i = 0; t2 < r2; )
            (n = e2[t2++]) < 128 ? s[i++] = n : 191 < n && n < 224 ? s[i++] = (31 & n) << 6 | 63 & e2[t2++] : 239 < n && n < 365 ? (n = ((7 & n) << 18 | (63 & e2[t2++]) << 12 | (63 & e2[t2++]) << 6 | 63 & e2[t2++]) - 65536, s[i++] = 55296 + (n >> 10), s[i++] = 56320 + (1023 & n)) : s[i++] = (15 & n) << 12 | (63 & e2[t2++]) << 6 | 63 & e2[t2++], 8191 < i && ((o = o || []).push(String.fromCharCode.apply(String, s)), i = 0);
          return o ? (i && o.push(String.fromCharCode.apply(String, s.slice(0, i))), o.join("")) : String.fromCharCode.apply(String, s.slice(0, i));
        }, t.write = function(e2, t2, r2) {
          for (var n, o, s = r2, i = 0; i < e2.length; ++i)
            (n = e2.charCodeAt(i)) < 128 ? t2[r2++] = n : (n < 2048 ? t2[r2++] = n >> 6 | 192 : (55296 == (64512 & n) && 56320 == (64512 & (o = e2.charCodeAt(i + 1))) ? (++i, t2[r2++] = (n = 65536 + ((1023 & n) << 10) + (1023 & o)) >> 18 | 240, t2[r2++] = n >> 12 & 63 | 128) : t2[r2++] = n >> 12 | 224, t2[r2++] = n >> 6 & 63 | 128), t2[r2++] = 63 & n | 128);
          return r2 - s;
        };
      }, function(e, t, r) {
        "use strict";
        e.exports = function(e2, t2, r2) {
          var n = r2 || 8192, o = n >>> 1, s = null, i = n;
          return function(r3) {
            return r3 < 1 || o < r3 ? e2(r3) : (n < i + r3 && (s = e2(n), i = 0), r3 = t2.call(s, i, i += r3), 7 & i && (i = 1 + (7 | i)), r3);
          };
        };
      }, function(e, t, r) {
        "use strict";
        e.exports = o;
        var n = r(10);
        function o(e2, t2) {
          this.lo = e2 >>> 0, this.hi = t2 >>> 0;
        }
        var s = o.zero = new o(0, 0), i = (s.toNumber = function() {
          return 0;
        }, s.zzEncode = s.zzDecode = function() {
          return this;
        }, s.length = function() {
          return 1;
        }, o.zeroHash = "\0\0\0\0\0\0\0\0", o.fromNumber = function(e2) {
          if (0 === e2)
            return s;
          var t2 = e2 < 0, r2 = (e2 = t2 ? -e2 : e2) >>> 0;
          e2 = (e2 - r2) / 4294967296 >>> 0;
          return t2 && (e2 = ~e2 >>> 0, r2 = ~r2 >>> 0, 4294967295 < ++r2 && (r2 = 0, 4294967295 < ++e2 && (e2 = 0))), new o(r2, e2);
        }, o.from = function(e2) {
          if ("number" == typeof e2)
            return o.fromNumber(e2);
          if (n.isString(e2)) {
            if (!n.Long)
              return o.fromNumber(parseInt(e2, 10));
            e2 = n.Long.fromString(e2);
          }
          return e2.low || e2.high ? new o(e2.low >>> 0, e2.high >>> 0) : s;
        }, o.prototype.toNumber = function(e2) {
          var t2;
          return !e2 && this.hi >>> 31 ? (e2 = 1 + ~this.lo >>> 0, t2 = ~this.hi >>> 0, -(e2 + 4294967296 * (t2 = e2 ? t2 : t2 + 1 >>> 0))) : this.lo + 4294967296 * this.hi;
        }, o.prototype.toLong = function(e2) {
          return n.Long ? new n.Long(0 | this.lo, 0 | this.hi, Boolean(e2)) : { low: 0 | this.lo, high: 0 | this.hi, unsigned: Boolean(e2) };
        }, String.prototype.charCodeAt);
        o.fromHash = function(e2) {
          return "\0\0\0\0\0\0\0\0" === e2 ? s : new o((i.call(e2, 0) | i.call(e2, 1) << 8 | i.call(e2, 2) << 16 | i.call(e2, 3) << 24) >>> 0, (i.call(e2, 4) | i.call(e2, 5) << 8 | i.call(e2, 6) << 16 | i.call(e2, 7) << 24) >>> 0);
        }, o.prototype.toHash = function() {
          return String.fromCharCode(255 & this.lo, this.lo >>> 8 & 255, this.lo >>> 16 & 255, this.lo >>> 24, 255 & this.hi, this.hi >>> 8 & 255, this.hi >>> 16 & 255, this.hi >>> 24);
        }, o.prototype.zzEncode = function() {
          var e2 = this.hi >> 31;
          return this.hi = ((this.hi << 1 | this.lo >>> 31) ^ e2) >>> 0, this.lo = (this.lo << 1 ^ e2) >>> 0, this;
        }, o.prototype.zzDecode = function() {
          var e2 = -(1 & this.lo);
          return this.lo = ((this.lo >>> 1 | this.hi << 31) ^ e2) >>> 0, this.hi = (this.hi >>> 1 ^ e2) >>> 0, this;
        }, o.prototype.length = function() {
          var e2 = this.lo, t2 = (this.lo >>> 28 | this.hi << 4) >>> 0, r2 = this.hi >>> 24;
          return 0 == r2 ? 0 == t2 ? e2 < 16384 ? e2 < 128 ? 1 : 2 : e2 < 2097152 ? 3 : 4 : t2 < 16384 ? t2 < 128 ? 5 : 6 : t2 < 2097152 ? 7 : 8 : r2 < 128 ? 9 : 10;
        };
      }, function(e, t, r) {
        "use strict";
        e.exports = s;
        var n = r(24), o = ((s.prototype = Object.create(n.prototype)).constructor = s, r(10));
        function s() {
          n.call(this);
        }
        function i(e2, t2, r2) {
          e2.length < 40 ? o.utf8.write(e2, t2, r2) : t2.utf8Write ? t2.utf8Write(e2, r2) : t2.write(e2, r2);
        }
        s._configure = function() {
          s.alloc = o._Buffer_allocUnsafe, s.writeBytesBuffer = o.Buffer && o.Buffer.prototype instanceof Uint8Array && "set" === o.Buffer.prototype.set.name ? function(e2, t2, r2) {
            t2.set(e2, r2);
          } : function(e2, t2, r2) {
            if (e2.copy)
              e2.copy(t2, r2, 0, e2.length);
            else
              for (var n2 = 0; n2 < e2.length; )
                t2[r2++] = e2[n2++];
          };
        }, s.prototype.bytes = function(e2) {
          var t2 = (e2 = o.isString(e2) ? o._Buffer_from(e2, "base64") : e2).length >>> 0;
          return this.uint32(t2), t2 && this._push(s.writeBytesBuffer, t2, e2), this;
        }, s.prototype.string = function(e2) {
          var t2 = o.Buffer.byteLength(e2);
          return this.uint32(t2), t2 && this._push(i, t2, e2), this;
        }, s._configure();
      }, function(e, t, r) {
        "use strict";
        e.exports = s;
        var n = r(25), o = ((s.prototype = Object.create(n.prototype)).constructor = s, r(10));
        function s(e2) {
          n.call(this, e2);
        }
        s._configure = function() {
          o.Buffer && (s.prototype._slice = o.Buffer.prototype.slice);
        }, s.prototype.string = function() {
          var e2 = this.uint32();
          return this.buf.utf8Slice ? this.buf.utf8Slice(this.pos, this.pos = Math.min(this.pos + e2, this.len)) : this.buf.toString("utf-8", this.pos, this.pos = Math.min(this.pos + e2, this.len));
        }, s._configure();
      }, function(e, t, r) {
        "use strict";
        t.Service = r(109);
      }, function(e, t, r) {
        "use strict";
        e.exports = o;
        var n = r(10);
        function o(e2, t2, r2) {
          if ("function" != typeof e2)
            throw TypeError("rpcImpl must be a function");
          n.EventEmitter.call(this), this.rpcImpl = e2, this.requestDelimited = Boolean(t2), this.responseDelimited = Boolean(r2);
        }
        ((o.prototype = Object.create(n.EventEmitter.prototype)).constructor = o).prototype.rpcCall = function e2(t2, r2, o2, s, i) {
          if (!s)
            throw TypeError("request must be specified");
          var a = this;
          if (!i)
            return n.asPromise(e2, a, t2, r2, o2, s);
          if (a.rpcImpl)
            try {
              return a.rpcImpl(t2, r2[a.requestDelimited ? "encodeDelimited" : "encode"](s).finish(), function(e3, r3) {
                if (e3)
                  return a.emit("error", e3, t2), i(e3);
                if (null !== r3) {
                  if (!(r3 instanceof o2))
                    try {
                      r3 = o2[a.responseDelimited ? "decodeDelimited" : "decode"](r3);
                    } catch (e4) {
                      return a.emit("error", e4, t2), i(e4);
                    }
                  return a.emit("data", r3, t2), i(null, r3);
                }
                a.end(true);
              });
            } catch (e3) {
              return a.emit("error", e3, t2), void setTimeout(function() {
                i(e3);
              }, 0);
            }
          else
            setTimeout(function() {
              i(Error("already ended"));
            }, 0);
        }, o.prototype.end = function(e2) {
          return this.rpcImpl && (e2 || this.rpcImpl(null, null, null), this.rpcImpl = null, this.emit("end").off()), this;
        };
      }, function(e, t, r) {
        "use strict";
        e.exports = {};
      }, function(e, t, r) {
        var n = { "./ZIMFileStoreBase": 40, "./ZIMFileStoreBase.ts": 40, "./ZIMFileStoreImpl": 41, "./ZIMFileStoreImpl.ts": 41, "./ZIMIDBImpl": 42, "./ZIMIDBImpl.ts": 42 };
        function o(e2) {
          return e2 = s(e2), r(e2);
        }
        function s(e2) {
          if (r.o(n, e2))
            return n[e2];
          throw (e2 = new Error("Cannot find module '" + e2 + "'")).code = "MODULE_NOT_FOUND", e2;
        }
        o.keys = function() {
          return Object.keys(n);
        }, o.resolve = s, (e.exports = o).id = 111;
      }, function(e, t, r) {
        var n = { "./formdata": 44, "./formdata.ts": 44, "./zego.fileHandler": 45, "./zego.fileHandler.ts": 45, "./zego.storeHandler": 46, "./zego.storeHandler.ts": 46 };
        function o(e2) {
          return e2 = s(e2), r(e2);
        }
        function s(e2) {
          if (r.o(n, e2))
            return n[e2];
          throw (e2 = new Error("Cannot find module '" + e2 + "'")).code = "MODULE_NOT_FOUND", e2;
        }
        o.keys = function() {
          return Object.keys(n);
        }, o.resolve = s, (e.exports = o).id = 112;
      }, function(e, t, r) {
        "use strict";
        (function(e2) {
          var n = r(114), o = r(115), s = r(116);
          function i() {
            return u.TYPED_ARRAY_SUPPORT ? 2147483647 : 1073741823;
          }
          function a(e3, t2) {
            if (i() < t2)
              throw new RangeError("Invalid typed array length");
            return u.TYPED_ARRAY_SUPPORT ? (e3 = new Uint8Array(t2)).__proto__ = u.prototype : (e3 = null === e3 ? new u(t2) : e3).length = t2, e3;
          }
          function u(e3, t2, r2) {
            if (!(u.TYPED_ARRAY_SUPPORT || this instanceof u))
              return new u(e3, t2, r2);
            if ("number" != typeof e3)
              return c(this, e3, t2, r2);
            if ("string" == typeof t2)
              throw new Error("If encoding is specified then the first argument must be a string");
            return d(this, e3);
          }
          function c(e3, t2, r2, n2) {
            if ("number" == typeof t2)
              throw new TypeError('"value" argument must not be a number');
            if ("undefined" != typeof ArrayBuffer && t2 instanceof ArrayBuffer) {
              var o2 = e3, i2 = t2, c2 = r2;
              if (i2.byteLength, c2 < 0 || i2.byteLength < c2)
                throw new RangeError("'offset' is out of bounds");
              if (i2.byteLength < c2 + (n2 || 0))
                throw new RangeError("'length' is out of bounds");
              return i2 = void 0 === c2 && void 0 === n2 ? new Uint8Array(i2) : void 0 === n2 ? new Uint8Array(i2, c2) : new Uint8Array(i2, c2, n2), u.TYPED_ARRAY_SUPPORT ? (o2 = i2).__proto__ = u.prototype : o2 = p(o2, i2), o2;
            }
            if ("string" != typeof t2) {
              if (c2 = e3, n2 = t2, u.isBuffer(n2))
                return 0 === (c2 = a(c2, i2 = 0 | h(n2.length))).length || n2.copy(c2, 0, 0, i2), c2;
              if (n2) {
                if ("undefined" != typeof ArrayBuffer && n2.buffer instanceof ArrayBuffer || "length" in n2)
                  return "number" != typeof n2.length || function(e4) {
                    return e4 != e4;
                  }(n2.length) ? a(c2, 0) : p(c2, n2);
                if ("Buffer" === n2.type && s(n2.data))
                  return p(c2, n2.data);
              }
              throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");
            }
            if (o2 = e3, n2 = t2, e3 = r2, !u.isEncoding(e3 = "string" == typeof e3 && "" !== e3 ? e3 : "utf8"))
              throw new TypeError('"encoding" must be a valid string encoding');
            return (n2 = (o2 = a(o2, t2 = 0 | g(n2, e3))).write(n2, e3)) !== t2 ? o2.slice(0, n2) : o2;
          }
          function l(e3) {
            if ("number" != typeof e3)
              throw new TypeError('"size" argument must be a number');
            if (e3 < 0)
              throw new RangeError('"size" argument must not be negative');
          }
          function d(e3, t2) {
            if (l(t2), e3 = a(e3, t2 < 0 ? 0 : 0 | h(t2)), !u.TYPED_ARRAY_SUPPORT)
              for (var r2 = 0; r2 < t2; ++r2)
                e3[r2] = 0;
            return e3;
          }
          function p(e3, t2) {
            var r2 = t2.length < 0 ? 0 : 0 | h(t2.length);
            e3 = a(e3, r2);
            for (var n2 = 0; n2 < r2; n2 += 1)
              e3[n2] = 255 & t2[n2];
            return e3;
          }
          function h(e3) {
            if (e3 >= i())
              throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + i().toString(16) + " bytes");
            return 0 | e3;
          }
          function g(e3, t2) {
            if (u.isBuffer(e3))
              return e3.length;
            if ("undefined" != typeof ArrayBuffer && "function" == typeof ArrayBuffer.isView && (ArrayBuffer.isView(e3) || e3 instanceof ArrayBuffer))
              return e3.byteLength;
            var r2 = (e3 = "string" != typeof e3 ? "" + e3 : e3).length;
            if (0 === r2)
              return 0;
            for (var n2 = false; ; )
              switch (t2) {
                case "ascii":
                case "latin1":
                case "binary":
                  return r2;
                case "utf8":
                case "utf-8":
                case void 0:
                  return A(e3).length;
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                  return 2 * r2;
                case "hex":
                  return r2 >>> 1;
                case "base64":
                  return x(e3).length;
                default:
                  if (n2)
                    return A(e3).length;
                  t2 = ("" + t2).toLowerCase(), n2 = true;
              }
          }
          function f(e3, t2, r2) {
            var o2, s2 = false;
            if ((t2 = void 0 === t2 || t2 < 0 ? 0 : t2) > this.length)
              return "";
            if ((r2 = void 0 === r2 || r2 > this.length ? this.length : r2) <= 0)
              return "";
            if ((r2 >>>= 0) <= (t2 >>>= 0))
              return "";
            for (e3 = e3 || "utf8"; ; )
              switch (e3) {
                case "hex":
                  var i2 = t2, a2 = r2, u2 = this.length;
                  (!a2 || a2 < 0 || u2 < a2) && (a2 = u2);
                  for (var c2 = "", l2 = i2 = !i2 || i2 < 0 ? 0 : i2; l2 < a2; ++l2)
                    c2 += function(e4) {
                      return e4 < 16 ? "0" + e4.toString(16) : e4.toString(16);
                    }(this[l2]);
                  return c2;
                case "utf8":
                case "utf-8":
                  return M(this, t2, r2);
                case "ascii":
                  u2 = t2;
                  var d2 = r2, p2 = "";
                  d2 = Math.min(this.length, d2);
                  for (var h2 = u2; h2 < d2; ++h2)
                    p2 += String.fromCharCode(127 & this[h2]);
                  return p2;
                case "latin1":
                case "binary":
                  i2 = t2;
                  var g2 = r2, f2 = "";
                  g2 = Math.min(this.length, g2);
                  for (var m2 = i2; m2 < g2; ++m2)
                    f2 += String.fromCharCode(this[m2]);
                  return f2;
                case "base64":
                  return _2 = this, o2 = r2, 0 === (v2 = t2) && o2 === _2.length ? n.fromByteArray(_2) : n.fromByteArray(_2.slice(v2, o2));
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                  for (var _2 = t2, v2 = r2, b2 = this.slice(_2, v2), y2 = "", I2 = 0; I2 < b2.length; I2 += 2)
                    y2 += String.fromCharCode(b2[I2] + 256 * b2[I2 + 1]);
                  return y2;
                default:
                  if (s2)
                    throw new TypeError("Unknown encoding: " + e3);
                  e3 = (e3 + "").toLowerCase(), s2 = true;
              }
          }
          function m(e3, t2, r2) {
            var n2 = e3[t2];
            e3[t2] = e3[r2], e3[r2] = n2;
          }
          function _(e3, t2, r2, n2, o2) {
            if (0 === e3.length)
              return -1;
            if ("string" == typeof r2 ? (n2 = r2, r2 = 0) : 2147483647 < r2 ? r2 = 2147483647 : r2 < -2147483648 && (r2 = -2147483648), r2 = +r2, (r2 = (r2 = isNaN(r2) ? o2 ? 0 : e3.length - 1 : r2) < 0 ? e3.length + r2 : r2) >= e3.length) {
              if (o2)
                return -1;
              r2 = e3.length - 1;
            } else if (r2 < 0) {
              if (!o2)
                return -1;
              r2 = 0;
            }
            if ("string" == typeof t2 && (t2 = u.from(t2, n2)), u.isBuffer(t2))
              return 0 === t2.length ? -1 : v(e3, t2, r2, n2, o2);
            if ("number" == typeof t2)
              return t2 &= 255, u.TYPED_ARRAY_SUPPORT && "function" == typeof Uint8Array.prototype.indexOf ? (o2 ? Uint8Array.prototype.indexOf : Uint8Array.prototype.lastIndexOf).call(e3, t2, r2) : v(e3, [t2], r2, n2, o2);
            throw new TypeError("val must be string, number or Buffer");
          }
          function v(e3, t2, r2, n2, o2) {
            var s2 = 1, i2 = e3.length, a2 = t2.length;
            if (void 0 !== n2 && ("ucs2" === (n2 = String(n2).toLowerCase()) || "ucs-2" === n2 || "utf16le" === n2 || "utf-16le" === n2)) {
              if (e3.length < 2 || t2.length < 2)
                return -1;
              i2 /= s2 = 2, a2 /= 2, r2 /= 2;
            }
            function u2(e4, t3) {
              return 1 === s2 ? e4[t3] : e4.readUInt16BE(t3 * s2);
            }
            if (o2)
              for (var c2 = -1, l2 = r2; l2 < i2; l2++)
                if (u2(e3, l2) === u2(t2, -1 === c2 ? 0 : l2 - c2)) {
                  if (l2 - (c2 = -1 === c2 ? l2 : c2) + 1 === a2)
                    return c2 * s2;
                } else
                  -1 !== c2 && (l2 -= l2 - c2), c2 = -1;
            else
              for (l2 = r2 = i2 < r2 + a2 ? i2 - a2 : r2; 0 <= l2; l2--) {
                for (var d2 = true, p2 = 0; p2 < a2; p2++)
                  if (u2(e3, l2 + p2) !== u2(t2, p2)) {
                    d2 = false;
                    break;
                  }
                if (d2)
                  return l2;
              }
            return -1;
          }
          function b(e3, t2, r2, n2) {
            return P(function(e4) {
              for (var t3 = [], r3 = 0; r3 < e4.length; ++r3)
                t3.push(255 & e4.charCodeAt(r3));
              return t3;
            }(t2), e3, r2, n2);
          }
          function y(e3, t2, r2, n2) {
            return P(function(e4, t3) {
              for (var r3, n3, o2 = [], s2 = 0; s2 < e4.length && !((t3 -= 2) < 0); ++s2)
                r3 = (n3 = e4.charCodeAt(s2)) >> 8, n3 %= 256, o2.push(n3), o2.push(r3);
              return o2;
            }(t2, e3.length - r2), e3, r2, n2);
          }
          function M(e3, t2, r2) {
            r2 = Math.min(e3.length, r2);
            for (var n2 = [], o2 = t2; o2 < r2; ) {
              var s2, i2, a2, u2, c2 = e3[o2], l2 = null, d2 = 239 < c2 ? 4 : 223 < c2 ? 3 : 191 < c2 ? 2 : 1;
              if (o2 + d2 <= r2)
                switch (d2) {
                  case 1:
                    c2 < 128 && (l2 = c2);
                    break;
                  case 2:
                    128 == (192 & (s2 = e3[o2 + 1])) && 127 < (u2 = (31 & c2) << 6 | 63 & s2) && (l2 = u2);
                    break;
                  case 3:
                    s2 = e3[o2 + 1], i2 = e3[o2 + 2], 128 == (192 & s2) && 128 == (192 & i2) && 2047 < (u2 = (15 & c2) << 12 | (63 & s2) << 6 | 63 & i2) && (u2 < 55296 || 57343 < u2) && (l2 = u2);
                    break;
                  case 4:
                    s2 = e3[o2 + 1], i2 = e3[o2 + 2], a2 = e3[o2 + 3], 128 == (192 & s2) && 128 == (192 & i2) && 128 == (192 & a2) && 65535 < (u2 = (15 & c2) << 18 | (63 & s2) << 12 | (63 & i2) << 6 | 63 & a2) && u2 < 1114112 && (l2 = u2);
                }
              null === l2 ? (l2 = 65533, d2 = 1) : 65535 < l2 && (l2 -= 65536, n2.push(l2 >>> 10 & 1023 | 55296), l2 = 56320 | 1023 & l2), n2.push(l2), o2 += d2;
            }
            var p2 = n2, h2 = p2.length;
            if (h2 <= I)
              return String.fromCharCode.apply(String, p2);
            for (var g2 = "", f2 = 0; f2 < h2; )
              g2 += String.fromCharCode.apply(String, p2.slice(f2, f2 += I));
            return g2;
          }
          t.Buffer = u, t.SlowBuffer = function(e3) {
            return +e3 != e3 && (e3 = 0), u.alloc(+e3);
          }, t.INSPECT_MAX_BYTES = 50, u.TYPED_ARRAY_SUPPORT = void 0 !== e2.TYPED_ARRAY_SUPPORT ? e2.TYPED_ARRAY_SUPPORT : function() {
            try {
              var e3 = new Uint8Array(1);
              return e3.__proto__ = { __proto__: Uint8Array.prototype, foo: function() {
                return 42;
              } }, 42 === e3.foo() && "function" == typeof e3.subarray && 0 === e3.subarray(1, 1).byteLength;
            } catch (e4) {
              return false;
            }
          }(), t.kMaxLength = i(), u.poolSize = 8192, u._augment = function(e3) {
            return e3.__proto__ = u.prototype, e3;
          }, u.from = function(e3, t2, r2) {
            return c(null, e3, t2, r2);
          }, u.TYPED_ARRAY_SUPPORT && (u.prototype.__proto__ = Uint8Array.prototype, u.__proto__ = Uint8Array, "undefined" != typeof Symbol && Symbol.species && u[Symbol.species] === u && Object.defineProperty(u, Symbol.species, { value: null, configurable: true })), u.alloc = function(e3, t2, r2) {
            return n2 = null, t2 = t2, r2 = r2, l(e3 = e3), e3 <= 0 || void 0 === t2 ? a(n2, e3) : "string" == typeof r2 ? a(n2, e3).fill(t2, r2) : a(n2, e3).fill(t2);
            var n2;
          }, u.allocUnsafe = function(e3) {
            return d(null, e3);
          }, u.allocUnsafeSlow = function(e3) {
            return d(null, e3);
          }, u.isBuffer = function(e3) {
            return !(null == e3 || !e3._isBuffer);
          }, u.compare = function(e3, t2) {
            if (!u.isBuffer(e3) || !u.isBuffer(t2))
              throw new TypeError("Arguments must be Buffers");
            if (e3 === t2)
              return 0;
            for (var r2 = e3.length, n2 = t2.length, o2 = 0, s2 = Math.min(r2, n2); o2 < s2; ++o2)
              if (e3[o2] !== t2[o2]) {
                r2 = e3[o2], n2 = t2[o2];
                break;
              }
            return r2 < n2 ? -1 : n2 < r2 ? 1 : 0;
          }, u.isEncoding = function(e3) {
            switch (String(e3).toLowerCase()) {
              case "hex":
              case "utf8":
              case "utf-8":
              case "ascii":
              case "latin1":
              case "binary":
              case "base64":
              case "ucs2":
              case "ucs-2":
              case "utf16le":
              case "utf-16le":
                return true;
              default:
                return false;
            }
          }, u.concat = function(e3, t2) {
            if (!s(e3))
              throw new TypeError('"list" argument must be an Array of Buffers');
            if (0 === e3.length)
              return u.alloc(0);
            if (void 0 === t2)
              for (o2 = t2 = 0; o2 < e3.length; ++o2)
                t2 += e3[o2].length;
            for (var r2 = u.allocUnsafe(t2), n2 = 0, o2 = 0; o2 < e3.length; ++o2) {
              var i2 = e3[o2];
              if (!u.isBuffer(i2))
                throw new TypeError('"list" argument must be an Array of Buffers');
              i2.copy(r2, n2), n2 += i2.length;
            }
            return r2;
          }, u.byteLength = g, u.prototype._isBuffer = true, u.prototype.swap16 = function() {
            var e3 = this.length;
            if (e3 % 2 != 0)
              throw new RangeError("Buffer size must be a multiple of 16-bits");
            for (var t2 = 0; t2 < e3; t2 += 2)
              m(this, t2, t2 + 1);
            return this;
          }, u.prototype.swap32 = function() {
            var e3 = this.length;
            if (e3 % 4 != 0)
              throw new RangeError("Buffer size must be a multiple of 32-bits");
            for (var t2 = 0; t2 < e3; t2 += 4)
              m(this, t2, t2 + 3), m(this, t2 + 1, t2 + 2);
            return this;
          }, u.prototype.swap64 = function() {
            var e3 = this.length;
            if (e3 % 8 != 0)
              throw new RangeError("Buffer size must be a multiple of 64-bits");
            for (var t2 = 0; t2 < e3; t2 += 8)
              m(this, t2, t2 + 7), m(this, t2 + 1, t2 + 6), m(this, t2 + 2, t2 + 5), m(this, t2 + 3, t2 + 4);
            return this;
          }, u.prototype.toString = function() {
            var e3 = 0 | this.length;
            return 0 == e3 ? "" : 0 === arguments.length ? M(this, 0, e3) : f.apply(this, arguments);
          }, u.prototype.equals = function(e3) {
            if (u.isBuffer(e3))
              return this === e3 || 0 === u.compare(this, e3);
            throw new TypeError("Argument must be a Buffer");
          }, u.prototype.inspect = function() {
            var e3 = "", r2 = t.INSPECT_MAX_BYTES;
            return 0 < this.length && (e3 = this.toString("hex", 0, r2).match(/.{2}/g).join(" "), this.length > r2 && (e3 += " ... ")), "<Buffer " + e3 + ">";
          }, u.prototype.compare = function(e3, t2, r2, n2, o2) {
            if (!u.isBuffer(e3))
              throw new TypeError("Argument must be a Buffer");
            if (void 0 === r2 && (r2 = e3 ? e3.length : 0), void 0 === n2 && (n2 = 0), void 0 === o2 && (o2 = this.length), (t2 = void 0 === t2 ? 0 : t2) < 0 || r2 > e3.length || n2 < 0 || o2 > this.length)
              throw new RangeError("out of range index");
            if (o2 <= n2 && r2 <= t2)
              return 0;
            if (o2 <= n2)
              return -1;
            if (r2 <= t2)
              return 1;
            if (this === e3)
              return 0;
            for (var s2 = (o2 >>>= 0) - (n2 >>>= 0), i2 = (r2 >>>= 0) - (t2 >>>= 0), a2 = Math.min(s2, i2), c2 = this.slice(n2, o2), l2 = e3.slice(t2, r2), d2 = 0; d2 < a2; ++d2)
              if (c2[d2] !== l2[d2]) {
                s2 = c2[d2], i2 = l2[d2];
                break;
              }
            return s2 < i2 ? -1 : i2 < s2 ? 1 : 0;
          }, u.prototype.includes = function(e3, t2, r2) {
            return -1 !== this.indexOf(e3, t2, r2);
          }, u.prototype.indexOf = function(e3, t2, r2) {
            return _(this, e3, t2, r2, true);
          }, u.prototype.lastIndexOf = function(e3, t2, r2) {
            return _(this, e3, t2, r2, false);
          }, u.prototype.write = function(e3, t2, r2, n2) {
            if (void 0 === t2)
              n2 = "utf8", r2 = this.length, t2 = 0;
            else if (void 0 === r2 && "string" == typeof t2)
              n2 = t2, r2 = this.length, t2 = 0;
            else {
              if (!isFinite(t2))
                throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
              t2 |= 0, isFinite(r2) ? (r2 |= 0, void 0 === n2 && (n2 = "utf8")) : (n2 = r2, r2 = void 0);
            }
            var o2 = this.length - t2;
            if ((void 0 === r2 || o2 < r2) && (r2 = o2), 0 < e3.length && (r2 < 0 || t2 < 0) || t2 > this.length)
              throw new RangeError("Attempt to write outside buffer bounds");
            n2 = n2 || "utf8";
            for (var s2, i2, a2, u2 = false; ; )
              switch (n2) {
                case "hex":
                  var c2 = e3, l2 = t2, d2 = r2, p2 = (l2 = Number(l2) || 0, this.length - l2);
                  if ((!d2 || p2 < (d2 = Number(d2))) && (d2 = p2), (p2 = c2.length) % 2 != 0)
                    throw new TypeError("Invalid hex string");
                  p2 / 2 < d2 && (d2 = p2 / 2);
                  for (var h2 = 0; h2 < d2; ++h2) {
                    var g2 = parseInt(c2.substr(2 * h2, 2), 16);
                    if (isNaN(g2))
                      return h2;
                    this[l2 + h2] = g2;
                  }
                  return h2;
                case "utf8":
                case "utf-8":
                  return p2 = t2, a2 = r2, P(A(e3, (i2 = this).length - p2), i2, p2, a2);
                case "ascii":
                  return b(this, e3, t2, r2);
                case "latin1":
                case "binary":
                  return b(this, e3, t2, r2);
                case "base64":
                  return i2 = this, a2 = t2, s2 = r2, P(x(e3), i2, a2, s2);
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                  return y(this, e3, t2, r2);
                default:
                  if (u2)
                    throw new TypeError("Unknown encoding: " + n2);
                  n2 = ("" + n2).toLowerCase(), u2 = true;
              }
          }, u.prototype.toJSON = function() {
            return { type: "Buffer", data: Array.prototype.slice.call(this._arr || this, 0) };
          };
          var I = 4096;
          function k(e3, t2, r2) {
            if (e3 % 1 != 0 || e3 < 0)
              throw new RangeError("offset is not uint");
            if (r2 < e3 + t2)
              throw new RangeError("Trying to access beyond buffer length");
          }
          function w(e3, t2, r2, n2, o2, s2) {
            if (!u.isBuffer(e3))
              throw new TypeError('"buffer" argument must be a Buffer instance');
            if (o2 < t2 || t2 < s2)
              throw new RangeError('"value" argument is out of bounds');
            if (r2 + n2 > e3.length)
              throw new RangeError("Index out of range");
          }
          function C(e3, t2, r2, n2) {
            t2 < 0 && (t2 = 65535 + t2 + 1);
            for (var o2 = 0, s2 = Math.min(e3.length - r2, 2); o2 < s2; ++o2)
              e3[r2 + o2] = (t2 & 255 << 8 * (n2 ? o2 : 1 - o2)) >>> 8 * (n2 ? o2 : 1 - o2);
          }
          function S(e3, t2, r2, n2) {
            t2 < 0 && (t2 = 4294967295 + t2 + 1);
            for (var o2 = 0, s2 = Math.min(e3.length - r2, 4); o2 < s2; ++o2)
              e3[r2 + o2] = t2 >>> 8 * (n2 ? o2 : 3 - o2) & 255;
          }
          function D(e3, t2, r2, n2) {
            if (r2 + n2 > e3.length)
              throw new RangeError("Index out of range");
            if (r2 < 0)
              throw new RangeError("Index out of range");
          }
          function q(e3, t2, r2, n2, s2) {
            return s2 || D(e3, 0, r2, 4), o.write(e3, t2, r2, n2, 23, 4), r2 + 4;
          }
          function R(e3, t2, r2, n2, s2) {
            return s2 || D(e3, 0, r2, 8), o.write(e3, t2, r2, n2, 52, 8), r2 + 8;
          }
          u.prototype.slice = function(e3, t2) {
            var r2 = this.length;
            if ((e3 = ~~e3) < 0 ? (e3 += r2) < 0 && (e3 = 0) : r2 < e3 && (e3 = r2), (t2 = void 0 === t2 ? r2 : ~~t2) < 0 ? (t2 += r2) < 0 && (t2 = 0) : r2 < t2 && (t2 = r2), t2 < e3 && (t2 = e3), u.TYPED_ARRAY_SUPPORT)
              (o2 = this.subarray(e3, t2)).__proto__ = u.prototype;
            else
              for (var n2 = t2 - e3, o2 = new u(n2, void 0), s2 = 0; s2 < n2; ++s2)
                o2[s2] = this[s2 + e3];
            return o2;
          }, u.prototype.readUIntLE = function(e3, t2, r2) {
            e3 |= 0, t2 |= 0, r2 || k(e3, t2, this.length);
            for (var n2 = this[e3], o2 = 1, s2 = 0; ++s2 < t2 && (o2 *= 256); )
              n2 += this[e3 + s2] * o2;
            return n2;
          }, u.prototype.readUIntBE = function(e3, t2, r2) {
            e3 |= 0, t2 |= 0, r2 || k(e3, t2, this.length);
            for (var n2 = this[e3 + --t2], o2 = 1; 0 < t2 && (o2 *= 256); )
              n2 += this[e3 + --t2] * o2;
            return n2;
          }, u.prototype.readUInt8 = function(e3, t2) {
            return t2 || k(e3, 1, this.length), this[e3];
          }, u.prototype.readUInt16LE = function(e3, t2) {
            return t2 || k(e3, 2, this.length), this[e3] | this[e3 + 1] << 8;
          }, u.prototype.readUInt16BE = function(e3, t2) {
            return t2 || k(e3, 2, this.length), this[e3] << 8 | this[e3 + 1];
          }, u.prototype.readUInt32LE = function(e3, t2) {
            return t2 || k(e3, 4, this.length), (this[e3] | this[e3 + 1] << 8 | this[e3 + 2] << 16) + 16777216 * this[e3 + 3];
          }, u.prototype.readUInt32BE = function(e3, t2) {
            return t2 || k(e3, 4, this.length), 16777216 * this[e3] + (this[e3 + 1] << 16 | this[e3 + 2] << 8 | this[e3 + 3]);
          }, u.prototype.readIntLE = function(e3, t2, r2) {
            e3 |= 0, t2 |= 0, r2 || k(e3, t2, this.length);
            for (var n2 = this[e3], o2 = 1, s2 = 0; ++s2 < t2 && (o2 *= 256); )
              n2 += this[e3 + s2] * o2;
            return (o2 *= 128) <= n2 && (n2 -= Math.pow(2, 8 * t2)), n2;
          }, u.prototype.readIntBE = function(e3, t2, r2) {
            e3 |= 0, t2 |= 0, r2 || k(e3, t2, this.length);
            for (var n2 = t2, o2 = 1, s2 = this[e3 + --n2]; 0 < n2 && (o2 *= 256); )
              s2 += this[e3 + --n2] * o2;
            return (o2 *= 128) <= s2 && (s2 -= Math.pow(2, 8 * t2)), s2;
          }, u.prototype.readInt8 = function(e3, t2) {
            return t2 || k(e3, 1, this.length), 128 & this[e3] ? -1 * (255 - this[e3] + 1) : this[e3];
          }, u.prototype.readInt16LE = function(e3, t2) {
            return t2 || k(e3, 2, this.length), 32768 & (t2 = this[e3] | this[e3 + 1] << 8) ? 4294901760 | t2 : t2;
          }, u.prototype.readInt16BE = function(e3, t2) {
            return t2 || k(e3, 2, this.length), 32768 & (t2 = this[e3 + 1] | this[e3] << 8) ? 4294901760 | t2 : t2;
          }, u.prototype.readInt32LE = function(e3, t2) {
            return t2 || k(e3, 4, this.length), this[e3] | this[e3 + 1] << 8 | this[e3 + 2] << 16 | this[e3 + 3] << 24;
          }, u.prototype.readInt32BE = function(e3, t2) {
            return t2 || k(e3, 4, this.length), this[e3] << 24 | this[e3 + 1] << 16 | this[e3 + 2] << 8 | this[e3 + 3];
          }, u.prototype.readFloatLE = function(e3, t2) {
            return t2 || k(e3, 4, this.length), o.read(this, e3, true, 23, 4);
          }, u.prototype.readFloatBE = function(e3, t2) {
            return t2 || k(e3, 4, this.length), o.read(this, e3, false, 23, 4);
          }, u.prototype.readDoubleLE = function(e3, t2) {
            return t2 || k(e3, 8, this.length), o.read(this, e3, true, 52, 8);
          }, u.prototype.readDoubleBE = function(e3, t2) {
            return t2 || k(e3, 8, this.length), o.read(this, e3, false, 52, 8);
          }, u.prototype.writeUIntLE = function(e3, t2, r2, n2) {
            e3 = +e3, t2 |= 0, r2 |= 0, n2 || w(this, e3, t2, r2, Math.pow(2, 8 * r2) - 1, 0);
            var o2 = 1, s2 = 0;
            for (this[t2] = 255 & e3; ++s2 < r2 && (o2 *= 256); )
              this[t2 + s2] = e3 / o2 & 255;
            return t2 + r2;
          }, u.prototype.writeUIntBE = function(e3, t2, r2, n2) {
            e3 = +e3, t2 |= 0, r2 |= 0, n2 || w(this, e3, t2, r2, Math.pow(2, 8 * r2) - 1, 0);
            var o2 = r2 - 1, s2 = 1;
            for (this[t2 + o2] = 255 & e3; 0 <= --o2 && (s2 *= 256); )
              this[t2 + o2] = e3 / s2 & 255;
            return t2 + r2;
          }, u.prototype.writeUInt8 = function(e3, t2, r2) {
            return e3 = +e3, t2 |= 0, r2 || w(this, e3, t2, 1, 255, 0), u.TYPED_ARRAY_SUPPORT || (e3 = Math.floor(e3)), this[t2] = 255 & e3, t2 + 1;
          }, u.prototype.writeUInt16LE = function(e3, t2, r2) {
            return e3 = +e3, t2 |= 0, r2 || w(this, e3, t2, 2, 65535, 0), u.TYPED_ARRAY_SUPPORT ? (this[t2] = 255 & e3, this[t2 + 1] = e3 >>> 8) : C(this, e3, t2, true), t2 + 2;
          }, u.prototype.writeUInt16BE = function(e3, t2, r2) {
            return e3 = +e3, t2 |= 0, r2 || w(this, e3, t2, 2, 65535, 0), u.TYPED_ARRAY_SUPPORT ? (this[t2] = e3 >>> 8, this[t2 + 1] = 255 & e3) : C(this, e3, t2, false), t2 + 2;
          }, u.prototype.writeUInt32LE = function(e3, t2, r2) {
            return e3 = +e3, t2 |= 0, r2 || w(this, e3, t2, 4, 4294967295, 0), u.TYPED_ARRAY_SUPPORT ? (this[t2 + 3] = e3 >>> 24, this[t2 + 2] = e3 >>> 16, this[t2 + 1] = e3 >>> 8, this[t2] = 255 & e3) : S(this, e3, t2, true), t2 + 4;
          }, u.prototype.writeUInt32BE = function(e3, t2, r2) {
            return e3 = +e3, t2 |= 0, r2 || w(this, e3, t2, 4, 4294967295, 0), u.TYPED_ARRAY_SUPPORT ? (this[t2] = e3 >>> 24, this[t2 + 1] = e3 >>> 16, this[t2 + 2] = e3 >>> 8, this[t2 + 3] = 255 & e3) : S(this, e3, t2, false), t2 + 4;
          }, u.prototype.writeIntLE = function(e3, t2, r2, n2) {
            e3 = +e3, t2 |= 0, n2 || w(this, e3, t2, r2, (n2 = Math.pow(2, 8 * r2 - 1)) - 1, -n2);
            var o2 = 0, s2 = 1, i2 = 0;
            for (this[t2] = 255 & e3; ++o2 < r2 && (s2 *= 256); )
              e3 < 0 && 0 === i2 && 0 !== this[t2 + o2 - 1] && (i2 = 1), this[t2 + o2] = (e3 / s2 >> 0) - i2 & 255;
            return t2 + r2;
          }, u.prototype.writeIntBE = function(e3, t2, r2, n2) {
            e3 = +e3, t2 |= 0, n2 || w(this, e3, t2, r2, (n2 = Math.pow(2, 8 * r2 - 1)) - 1, -n2);
            var o2 = r2 - 1, s2 = 1, i2 = 0;
            for (this[t2 + o2] = 255 & e3; 0 <= --o2 && (s2 *= 256); )
              e3 < 0 && 0 === i2 && 0 !== this[t2 + o2 + 1] && (i2 = 1), this[t2 + o2] = (e3 / s2 >> 0) - i2 & 255;
            return t2 + r2;
          }, u.prototype.writeInt8 = function(e3, t2, r2) {
            return e3 = +e3, t2 |= 0, r2 || w(this, e3, t2, 1, 127, -128), u.TYPED_ARRAY_SUPPORT || (e3 = Math.floor(e3)), this[t2] = 255 & (e3 = e3 < 0 ? 255 + e3 + 1 : e3), t2 + 1;
          }, u.prototype.writeInt16LE = function(e3, t2, r2) {
            return e3 = +e3, t2 |= 0, r2 || w(this, e3, t2, 2, 32767, -32768), u.TYPED_ARRAY_SUPPORT ? (this[t2] = 255 & e3, this[t2 + 1] = e3 >>> 8) : C(this, e3, t2, true), t2 + 2;
          }, u.prototype.writeInt16BE = function(e3, t2, r2) {
            return e3 = +e3, t2 |= 0, r2 || w(this, e3, t2, 2, 32767, -32768), u.TYPED_ARRAY_SUPPORT ? (this[t2] = e3 >>> 8, this[t2 + 1] = 255 & e3) : C(this, e3, t2, false), t2 + 2;
          }, u.prototype.writeInt32LE = function(e3, t2, r2) {
            return e3 = +e3, t2 |= 0, r2 || w(this, e3, t2, 4, 2147483647, -2147483648), u.TYPED_ARRAY_SUPPORT ? (this[t2] = 255 & e3, this[t2 + 1] = e3 >>> 8, this[t2 + 2] = e3 >>> 16, this[t2 + 3] = e3 >>> 24) : S(this, e3, t2, true), t2 + 4;
          }, u.prototype.writeInt32BE = function(e3, t2, r2) {
            return e3 = +e3, t2 |= 0, r2 || w(this, e3, t2, 4, 2147483647, -2147483648), e3 < 0 && (e3 = 4294967295 + e3 + 1), u.TYPED_ARRAY_SUPPORT ? (this[t2] = e3 >>> 24, this[t2 + 1] = e3 >>> 16, this[t2 + 2] = e3 >>> 8, this[t2 + 3] = 255 & e3) : S(this, e3, t2, false), t2 + 4;
          }, u.prototype.writeFloatLE = function(e3, t2, r2) {
            return q(this, e3, t2, true, r2);
          }, u.prototype.writeFloatBE = function(e3, t2, r2) {
            return q(this, e3, t2, false, r2);
          }, u.prototype.writeDoubleLE = function(e3, t2, r2) {
            return R(this, e3, t2, true, r2);
          }, u.prototype.writeDoubleBE = function(e3, t2, r2) {
            return R(this, e3, t2, false, r2);
          }, u.prototype.copy = function(e3, t2, r2, n2) {
            if (r2 = r2 || 0, n2 || 0 === n2 || (n2 = this.length), t2 >= e3.length && (t2 = e3.length), (n2 = 0 < n2 && n2 < r2 ? r2 : n2) === r2)
              return 0;
            if (0 === e3.length || 0 === this.length)
              return 0;
            if ((t2 = t2 || 0) < 0)
              throw new RangeError("targetStart out of bounds");
            if (r2 < 0 || r2 >= this.length)
              throw new RangeError("sourceStart out of bounds");
            if (n2 < 0)
              throw new RangeError("sourceEnd out of bounds");
            n2 > this.length && (n2 = this.length);
            var o2, s2 = (n2 = e3.length - t2 < n2 - r2 ? e3.length - t2 + r2 : n2) - r2;
            if (this === e3 && r2 < t2 && t2 < n2)
              for (o2 = s2 - 1; 0 <= o2; --o2)
                e3[o2 + t2] = this[o2 + r2];
            else if (s2 < 1e3 || !u.TYPED_ARRAY_SUPPORT)
              for (o2 = 0; o2 < s2; ++o2)
                e3[o2 + t2] = this[o2 + r2];
            else
              Uint8Array.prototype.set.call(e3, this.subarray(r2, r2 + s2), t2);
            return s2;
          }, u.prototype.fill = function(e3, t2, r2, n2) {
            if ("string" == typeof e3) {
              var o2;
              if ("string" == typeof t2 ? (n2 = t2, t2 = 0, r2 = this.length) : "string" == typeof r2 && (n2 = r2, r2 = this.length), 1 !== e3.length || (o2 = e3.charCodeAt(0)) < 256 && (e3 = o2), void 0 !== n2 && "string" != typeof n2)
                throw new TypeError("encoding must be a string");
              if ("string" == typeof n2 && !u.isEncoding(n2))
                throw new TypeError("Unknown encoding: " + n2);
            } else
              "number" == typeof e3 && (e3 &= 255);
            if (t2 < 0 || this.length < t2 || this.length < r2)
              throw new RangeError("Out of range index");
            if (r2 <= t2)
              return this;
            if (t2 >>>= 0, r2 = void 0 === r2 ? this.length : r2 >>> 0, "number" == typeof (e3 = e3 || 0))
              for (a2 = t2; a2 < r2; ++a2)
                this[a2] = e3;
            else
              for (var s2 = u.isBuffer(e3) ? e3 : A(new u(e3, n2).toString()), i2 = s2.length, a2 = 0; a2 < r2 - t2; ++a2)
                this[a2 + t2] = s2[a2 % i2];
            return this;
          };
          var O = /[^+\/0-9A-Za-z-_]/g;
          function A(e3, t2) {
            t2 = t2 || 1 / 0;
            for (var r2, n2 = e3.length, o2 = null, s2 = [], i2 = 0; i2 < n2; ++i2) {
              if (55295 < (r2 = e3.charCodeAt(i2)) && r2 < 57344) {
                if (!o2) {
                  if (56319 < r2) {
                    -1 < (t2 -= 3) && s2.push(239, 191, 189);
                    continue;
                  }
                  if (i2 + 1 === n2) {
                    -1 < (t2 -= 3) && s2.push(239, 191, 189);
                    continue;
                  }
                  o2 = r2;
                  continue;
                }
                if (r2 < 56320) {
                  -1 < (t2 -= 3) && s2.push(239, 191, 189), o2 = r2;
                  continue;
                }
                r2 = 65536 + (o2 - 55296 << 10 | r2 - 56320);
              } else
                o2 && -1 < (t2 -= 3) && s2.push(239, 191, 189);
              if (o2 = null, r2 < 128) {
                if (--t2 < 0)
                  break;
                s2.push(r2);
              } else if (r2 < 2048) {
                if ((t2 -= 2) < 0)
                  break;
                s2.push(r2 >> 6 | 192, 63 & r2 | 128);
              } else if (r2 < 65536) {
                if ((t2 -= 3) < 0)
                  break;
                s2.push(r2 >> 12 | 224, r2 >> 6 & 63 | 128, 63 & r2 | 128);
              } else {
                if (!(r2 < 1114112))
                  throw new Error("Invalid code point");
                if ((t2 -= 4) < 0)
                  break;
                s2.push(r2 >> 18 | 240, r2 >> 12 & 63 | 128, r2 >> 6 & 63 | 128, 63 & r2 | 128);
              }
            }
            return s2;
          }
          function x(e3) {
            return n.toByteArray(function(e4) {
              var t2;
              if ((e4 = ((t2 = e4).trim ? t2.trim() : t2.replace(/^\s+|\s+$/g, "")).replace(O, "")).length < 2)
                return "";
              for (; e4.length % 4 != 0; )
                e4 += "=";
              return e4;
            }(e3));
          }
          function P(e3, t2, r2, n2) {
            for (var o2 = 0; o2 < n2 && !(o2 + r2 >= t2.length || o2 >= e3.length); ++o2)
              t2[o2 + r2] = e3[o2];
            return o2;
          }
        }).call(this, r(12));
      }, function(e, t, r) {
        "use strict";
        t.byteLength = function(e2) {
          return 3 * ((e2 = c(e2))[0] + (e2 = e2[1])) / 4 - e2;
        }, t.toByteArray = function(e2) {
          var t2, r2, n2 = (i2 = c(e2))[0], i2 = i2[1], a2 = new s(function(e3, t3) {
            return 3 * (e3 + t3) / 4 - t3;
          }(n2, i2)), u2 = 0, l = 0 < i2 ? n2 - 4 : n2;
          for (r2 = 0; r2 < l; r2 += 4)
            t2 = o[e2.charCodeAt(r2)] << 18 | o[e2.charCodeAt(r2 + 1)] << 12 | o[e2.charCodeAt(r2 + 2)] << 6 | o[e2.charCodeAt(r2 + 3)], a2[u2++] = t2 >> 16 & 255, a2[u2++] = t2 >> 8 & 255, a2[u2++] = 255 & t2;
          return 2 === i2 && (t2 = o[e2.charCodeAt(r2)] << 2 | o[e2.charCodeAt(r2 + 1)] >> 4, a2[u2++] = 255 & t2), 1 === i2 && (t2 = o[e2.charCodeAt(r2)] << 10 | o[e2.charCodeAt(r2 + 1)] << 4 | o[e2.charCodeAt(r2 + 2)] >> 2, a2[u2++] = t2 >> 8 & 255, a2[u2++] = 255 & t2), a2;
        }, t.fromByteArray = function(e2) {
          for (var t2, r2 = e2.length, o2 = r2 % 3, s2 = [], i2 = 0, a2 = r2 - o2; i2 < a2; i2 += 16383)
            s2.push(function(e3, t3, r3) {
              for (var o3, s3 = [], i3 = t3; i3 < r3; i3 += 3)
                o3 = (e3[i3] << 16 & 16711680) + (e3[i3 + 1] << 8 & 65280) + (255 & e3[i3 + 2]), s3.push(function(e4) {
                  return n[e4 >> 18 & 63] + n[e4 >> 12 & 63] + n[e4 >> 6 & 63] + n[63 & e4];
                }(o3));
              return s3.join("");
            }(e2, i2, a2 < i2 + 16383 ? a2 : i2 + 16383));
          return 1 == o2 ? (t2 = e2[r2 - 1], s2.push(n[t2 >> 2] + n[t2 << 4 & 63] + "==")) : 2 == o2 && (t2 = (e2[r2 - 2] << 8) + e2[r2 - 1], s2.push(n[t2 >> 10] + n[t2 >> 4 & 63] + n[t2 << 2 & 63] + "=")), s2.join("");
        };
        for (var n = [], o = [], s = "undefined" != typeof Uint8Array ? Uint8Array : Array, i = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", a = 0, u = i.length; a < u; ++a)
          n[a] = i[a], o[i.charCodeAt(a)] = a;
        function c(e2) {
          var t2 = e2.length;
          if (0 < t2 % 4)
            throw new Error("Invalid string. Length must be a multiple of 4");
          return t2 = (e2 = -1 === (e2 = e2.indexOf("=")) ? t2 : e2) === t2 ? 0 : 4 - e2 % 4, [e2, t2];
        }
        o["-".charCodeAt(0)] = 62, o["_".charCodeAt(0)] = 63;
      }, function(e, t) {
        t.read = function(e2, t2, r, n, o) {
          var s, i, a = 8 * o - n - 1, u = (1 << a) - 1, c = u >> 1, l = -7, d = r ? o - 1 : 0, p = r ? -1 : 1;
          o = e2[t2 + d];
          for (d += p, s = o & (1 << -l) - 1, o >>= -l, l += a; 0 < l; s = 256 * s + e2[t2 + d], d += p, l -= 8)
            ;
          for (i = s & (1 << -l) - 1, s >>= -l, l += n; 0 < l; i = 256 * i + e2[t2 + d], d += p, l -= 8)
            ;
          if (0 === s)
            s = 1 - c;
          else {
            if (s === u)
              return i ? NaN : 1 / 0 * (o ? -1 : 1);
            i += Math.pow(2, n), s -= c;
          }
          return (o ? -1 : 1) * i * Math.pow(2, s - n);
        }, t.write = function(e2, t2, r, n, o, s) {
          var i, a, u = 8 * s - o - 1, c = (1 << u) - 1, l = c >> 1, d = 23 === o ? Math.pow(2, -24) - Math.pow(2, -77) : 0, p = n ? 0 : s - 1, h = n ? 1 : -1;
          s = t2 < 0 || 0 === t2 && 1 / t2 < 0 ? 1 : 0;
          for (t2 = Math.abs(t2), isNaN(t2) || t2 === 1 / 0 ? (a = isNaN(t2) ? 1 : 0, i = c) : (i = Math.floor(Math.log(t2) / Math.LN2), t2 * (n = Math.pow(2, -i)) < 1 && (i--, n *= 2), 2 <= (t2 += 1 <= i + l ? d / n : d * Math.pow(2, 1 - l)) * n && (i++, n /= 2), c <= i + l ? (a = 0, i = c) : 1 <= i + l ? (a = (t2 * n - 1) * Math.pow(2, o), i += l) : (a = t2 * Math.pow(2, l - 1) * Math.pow(2, o), i = 0)); 8 <= o; e2[r + p] = 255 & a, p += h, a /= 256, o -= 8)
            ;
          for (i = i << o | a, u += o; 0 < u; e2[r + p] = 255 & i, p += h, i /= 256, u -= 8)
            ;
          e2[r + p - h] |= 128 * s;
        };
      }, function(e, t) {
        var r = {}.toString;
        e.exports = Array.isArray || function(e2) {
          return "[object Array]" == r.call(e2);
        };
      }, function(e, t, r) {
        (function(e2) {
          var n = void 0 !== e2 && e2 || "undefined" != typeof self && self || window, o = Function.prototype.apply;
          function s(e3, t2) {
            this._id = e3, this._clearFn = t2;
          }
          t.setTimeout = function() {
            return new s(o.call(setTimeout, n, arguments), clearTimeout);
          }, t.setInterval = function() {
            return new s(o.call(setInterval, n, arguments), clearInterval);
          }, t.clearTimeout = t.clearInterval = function(e3) {
            e3 && e3.close();
          }, s.prototype.unref = s.prototype.ref = function() {
          }, s.prototype.close = function() {
            this._clearFn.call(n, this._id);
          }, t.enroll = function(e3, t2) {
            clearTimeout(e3._idleTimeoutId), e3._idleTimeout = t2;
          }, t.unenroll = function(e3) {
            clearTimeout(e3._idleTimeoutId), e3._idleTimeout = -1;
          }, t._unrefActive = t.active = function(e3) {
            clearTimeout(e3._idleTimeoutId);
            var t2 = e3._idleTimeout;
            0 <= t2 && (e3._idleTimeoutId = setTimeout(function() {
              e3._onTimeout && e3._onTimeout();
            }, t2));
          }, r(118), t.setImmediate = "undefined" != typeof self && self.setImmediate || void 0 !== e2 && e2.setImmediate || this && this.setImmediate, t.clearImmediate = "undefined" != typeof self && self.clearImmediate || void 0 !== e2 && e2.clearImmediate || this && this.clearImmediate;
        }).call(this, r(12));
      }, function(e, t, r) {
        (function(e2, t2) {
          !function(e3, r2) {
            "use strict";
            var n, o, s, i, a, u, c, l;
            function d(e4) {
              delete o[e4];
            }
            function p(e4) {
              if (s)
                setTimeout(p, 0, e4);
              else {
                var t3 = o[e4];
                if (t3) {
                  s = true;
                  try {
                    var r3 = t3, n2 = r3.callback, i2 = r3.args;
                    switch (i2.length) {
                      case 0:
                        n2();
                        break;
                      case 1:
                        n2(i2[0]);
                        break;
                      case 2:
                        n2(i2[0], i2[1]);
                        break;
                      case 3:
                        n2(i2[0], i2[1], i2[2]);
                        break;
                      default:
                        n2.apply(void 0, i2);
                    }
                  } finally {
                    d(e4), s = false;
                  }
                }
              }
            }
            e3.setImmediate || (n = 1, s = !(o = {}), i = e3.document, l = (l = Object.getPrototypeOf && Object.getPrototypeOf(e3)) && l.setTimeout ? l : e3, "[object process]" === {}.toString.call(e3.process) ? a = function(e4) {
              t2.nextTick(function() {
                p(e4);
              });
            } : function() {
              var t3, r3;
              if (e3.postMessage && !e3.importScripts)
                return t3 = true, r3 = e3.onmessage, e3.onmessage = function() {
                  t3 = false;
                }, e3.postMessage("", "*"), e3.onmessage = r3, t3;
            }() ? function() {
              function t3(t4) {
                t4.source === e3 && "string" == typeof t4.data && 0 === t4.data.indexOf(r3) && p(+t4.data.slice(r3.length));
              }
              var r3 = "setImmediate$" + Math.random() + "$";
              e3.addEventListener ? e3.addEventListener("message", t3, false) : e3.attachEvent("onmessage", t3), a = function(t4) {
                e3.postMessage(r3 + t4, "*");
              };
            }() : a = e3.MessageChannel ? ((c = new MessageChannel()).port1.onmessage = function(e4) {
              p(e4.data);
            }, function(e4) {
              c.port2.postMessage(e4);
            }) : i && "onreadystatechange" in i.createElement("script") ? (u = i.documentElement, function(e4) {
              var t3 = i.createElement("script");
              t3.onreadystatechange = function() {
                p(e4), t3.onreadystatechange = null, u.removeChild(t3), t3 = null;
              }, u.appendChild(t3);
            }) : function(e4) {
              setTimeout(p, 0, e4);
            }, l.setImmediate = function(e4) {
              "function" != typeof e4 && (e4 = new Function("" + e4));
              for (var t3 = new Array(arguments.length - 1), r3 = 0; r3 < t3.length; r3++)
                t3[r3] = arguments[r3 + 1];
              return o[n] = { callback: e4, args: t3 }, a(n), n++;
            }, l.clearImmediate = d);
          }("undefined" == typeof self ? void 0 === e2 ? this : e2 : self);
        }).call(this, r(12), r(47));
      }]);
    });
  }
});
export default require_zego_zim_web();
//# sourceMappingURL=zego-zim-web.js.map
