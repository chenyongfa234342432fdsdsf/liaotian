import{i as v}from"./chunk-d8234155.js";import{p as C}from"./chunk-f3e99ce8.js";import{l as E}from"./chunk-ba3e3861.js";import{r as p}from"./chunk-e9cd8943.js";import{g as L}from"./chunk-5af0d2a0.js";import{I as j}from"./chunk-d80cdd1c.js";import{u as O,C as F}from"./chunk-0437e48e.js";import{c as I}from"./chunk-99b8f121.js";import{N as T}from"./chunk-28c62a8f.js";import{L as D}from"./chunk-5f195378.js";import{L as A}from"./chunk-014979c9.js";import{N as R}from"./chunk-c03b3e6b.js";import{S as w}from"./chunk-eef16262.js";import{a as u,j as o}from"./chunk-c1d16543.js";import"./chunk-634a8a63.js";import"./chunk-09d047a9.js";import"./chunk-acb1a683.js";import"./chunk-cf010ec4.js";import"./chunk-fde55823.js";/* empty css              */import"./chunk-36a75920.js";import"./chunk-0feb7138.js";import"./chunk-e7397446.js";import"./chunk-faa47c2c.js";import"./chunk-cd3d6459.js";import"./chunk-ec38f500.js";import"./chunk-c1540bb6.js";import"./chunk-b4d6f2f0.js";import"./chunk-d368c681.js";import"./chunk-5212edba.js";import"./chunk-6b5946cf.js";import"./chunk-b745fb4d.js";/* empty css              */import"./chunk-23179642.js";import"./chunk-1a70223d.js";import"./chunk-01660bad.js";import"./chunk-d4125093.js";const B={"address-book":"search-friend-index-module__address-book--CcQ"};function G(n,_){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ#",c=Object.keys(n)[0],d=Object.keys(_)[0],N=e.includes(c)?e.indexOf(c):e.length,m=e.includes(d)?e.indexOf(d):e.length;return N-m}const U=1;function Ce(){const[n,_]=p.useState(""),[e,c]=p.useState([]),[d,N]=p.useState([]),{groupSelectedList:m,setGroupSelectedList:g}=O(),[k,S]=p.useState(!1);function x(r){const s=r.reduce((t,i)=>{let a=((i==null?void 0:i.friendRemark)||(i==null?void 0:i.nickName)||"")[0];const f=C(a,{style:C.STYLE_FIRST_LETTER})[0][0].toUpperCase();return/^[A-Za-z]/.test(f)?a=f:a="#",t[a]||(t[a]=[]),t[a].push({...i,isChecked:!1}),t},{});return Object.keys(s).map(t=>({[t]:s[t]}))}return p.useEffect(()=>{const r=d.filter(s=>{var t,i;return(i=(t=s.nickName)==null?void 0:t.toLowerCase())!=null&&i.includes(n.toLowerCase())?s:null});c(x(n===""?d:r))},[n]),p.useEffect(()=>{S(!0),g([]),L({}).then(r=>{var s;r.isOk&&r.data&&(c((s=x(r.data))==null?void 0:s.sort(G)),N(r.data)),S(!1)}).catch(()=>{S(!1)})},[]),u("div",{className:B["address-book"],children:[o(R,{titleText:v._("features_group_components_search_friend_index_bo7tiepivf")}),u("div",{className:"scroll-show",children:[o("div",{className:"pl-4 mt-4 mb-6 pr-4",children:o(w,{searchValue:n,setSearchValue:_})}),u("div",{className:"address-book-list",children:[!(e!=null&&e.length)&&!k&&(n?o(T,{name:"no_search_result",footerText:v._("features_group_components_search_friend_index_eppdggih18")}):o(A,{})),k?o("div",{className:"flex justify-center",children:o(D,{})}):e==null?void 0:e.map((r,s)=>o("div",{children:Object.keys(r).map(t=>{var i;return u("div",{children:[o("div",{className:"group-letter",children:t}),(i=r[t])==null?void 0:i.map((l,a)=>o(p.Fragment,{children:o(F,{line:!(s===e.length-1&&a===r[t].length-1),friendInfo:l,searchValue:n,isSelect:!!m.filter(h=>l.uid===h.uid).length,selectClick:h=>{const{friendInfo:f,isSelect:y}=h;g(y?[...m,f]:m.filter(b=>f.uid!==b.uid))}},a)},l==null?void 0:l.uid))]},t)})},s))]})]}),o("div",{className:"people-people-box",children:e!=null&&e.length&&!k?o("div",{className:"people-people",children:v._({id:"features_group_components_search_friend_index_pol3ckrodh",values:{0:m.length}})}):null}),m.length>=U&&o("div",{className:I("jump"),onClick:()=>{E("/group/create")},children:o(j,{name:"icon_set_next_step",fontSize:46})})]})}export{Ce as default};
