import{I as X,_ as Y,o as ee,h as re,c as ne,k as te,l as ae}from"./chunk-36a75920.js";import{R as z,r as m}from"./chunk-e9cd8943.js";import{j as g,a as T,F as V}from"./chunk-c1d16543.js";import{R as oe}from"./chunk-c1540bb6.js";import{E as le}from"./chunk-b4d6f2f0.js";function L(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function K(e){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?L(Object(n),!0).forEach(function(r){Y(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ie(e,a){var n=m.useContext(X),r=n.prefixCls,t=r===void 0?"arco":r,c=e.spin,l=e.className,i=K(K({"aria-hidden":!0,focusable:!1,ref:a},e),{},{className:"".concat(l?l+" ":"").concat(t,"-icon ").concat(t,"-icon-search")});return c&&(i.className="".concat(i.className," ").concat(t,"-icon-loading")),delete i.spin,delete i.isIcon,g("svg",{fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",...i,children:g("path",{d:"M33.072 33.071c6.248-6.248 6.248-16.379 0-22.627-6.249-6.249-16.38-6.249-22.628 0-6.248 6.248-6.248 16.379 0 22.627 6.248 6.248 16.38 6.248 22.628 0Zm0 0 8.485 8.485"})})}var j=z.forwardRef(ie);j.defaultProps={isIcon:!0};j.displayName="IconSearch";const pe=j;var ce=globalThis&&globalThis.__read||function(e,a){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),t,c=[],l;try{for(;(a===void 0||a-- >0)&&!(t=r.next()).done;)c.push(t.value)}catch(i){l={error:i}}finally{try{t&&!t.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return c};function ue(e){var a=e.value,n=e.maxLength,r=e.onChange,t=e.onKeyDown,c=e.onPressEnter,l=e.beforeTriggerValueChangeCallback,i=m.useRef(!1),b=ce(m.useState(""),2),C=b[0],s=b[1],v=function(o,f){l&&l(o),r&&o!==a&&(n===void 0||o.length<=n)&&r(o,f)};return{compositionValue:C,triggerValueChangeCallback:v,compositionHandler:function(o){i.current=o.type!=="compositionend",i.current||(s(void 0),v(o.target.value,o))},valueChangeHandler:function(o){var f=o.target.value;i.current?(i.current=!1,s(f)):(C&&s(void 0),v(f,o))},keyDownHandler:function(o){var f=o.keyCode||o.which;i.current||(t&&t(o),f===le.code&&c&&c(o))}}}var h=globalThis&&globalThis.__assign||function(){return h=Object.assign||function(e){for(var a,n=1,r=arguments.length;n<r;n++){a=arguments[n];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},h.apply(this,arguments)},se=globalThis&&globalThis.__rest||function(e,a){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&a.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,r=Object.getOwnPropertySymbols(e);t<r.length;t++)a.indexOf(r[t])<0&&Object.prototype.propertyIsEnumerable.call(e,r[t])&&(n[r[t]]=e[r[t]]);return n},fe=globalThis&&globalThis.__read||function(e,a){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),t,c=[],l;try{for(;(a===void 0||a-- >0)&&!(t=r.next()).done;)c.push(t.value)}catch(i){l={error:i}}finally{try{t&&!t.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return c},F=z.forwardRef(function(e,a){var n,r=e.allowClear,t=e.error,c=e.disabled,l=e.placeholder,i=e.className,b=e.style,C=e.height,s=e.prefixCls,v=e.hasParent,o=e.size,f=e.value,p=e.autoFitWidth,_=e.onClear,S=e.readOnly,M=e.onChange,$=e.onKeyDown,A=e.onPressEnter,O=e.maxLength,B=se(e,["allowClear","error","disabled","placeholder","className","style","height","prefixCls","hasParent","size","value","autoFitWidth","onClear","readOnly","onChange","onKeyDown","onPressEnter","maxLength"]),U=ee(B,["showWordLimit","className","defaultValue","addBefore","addAfter","afterStyle","beforeStyle","prefix","suffix"]),u=m.useRef(),w=m.useRef(),D=m.useRef(null),E=fe(m.useState(null),2),k=E[0],N=E[1],W=re(O)?O.errorOnly?void 0:O.length:O,y=ue({value:f,maxLength:W,onChange:M,onKeyDown:$,onPressEnter:A}),Z=y.compositionValue,q=y.valueChangeHandler,I=y.compositionHandler,G=y.keyDownHandler,J=y.triggerValueChangeCallback,Q=ne(s,s&&(n={},n[s+"-size-"+o]=o,n[s+"-error"]=t,n[s+"-disabled"]=c,n),v?void 0:i),x=h(h({"aria-invalid":t},U),{readOnly:S,maxLength:W,disabled:c,placeholder:l,value:Z||f||"",className:Q,onKeyDown:G,onChange:q,onCompositionStart:I,onCompositionUpdate:I,onCompositionEnd:I});m.useImperativeHandle(a,function(){return{dom:u.current,focus:function(){u.current&&u.current.focus&&u.current.focus()},blur:function(){u.current&&u.current.blur&&u.current.blur()}}},[]);var P=function(){if(w.current&&u.current)if(!x.value&&l)N(null);else{var d=w.current.offsetWidth;N(d+(d?8:4))}};m.useEffect(function(){return p&&P()},[]);var H=x.value||l;return T(V,{children:[r?T(V,{children:[g("input",{...h({ref:u},x)}),!S&&!c&&r&&f?g(te,{className:s+"-clear-icon",onClick:function(d){d.stopPropagation(),u.current&&u.current.focus&&u.current.focus(),J("",d),_&&_()},children:g(ae,{onMouseDown:function(d){d.preventDefault()}})}):null]}):g("input",{...h({ref:u},x,{style:v?{}:h(h(h({},b),"height"in e?{height:C}:{}),typeof k=="number"?{width:k}:{})})}),p&&g(oe,{onResize:function(){var d=w.current.offsetWidth;if(typeof p=="object"){var R=typeof p.delay=="function"?p.delay(d,D.current):p.delay;R?setTimeout(P,R):P()}else P();D.current=d},children:g("span",{className:s+"-mirror",ref:w,children:H&&H.replace(/\s/g,"Â ")})})]})});F.displayName="InputComponent";const ye=F;export{pe as I,ye as a,ue as u};
