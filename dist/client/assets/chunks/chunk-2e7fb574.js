import{g as f,c as T,d as j,a as O,f as Y,i as y}from"./chunk-d8234155.js";import{I as H}from"./chunk-d80cdd1c.js";import{a as $,b}from"./chunk-5af0d2a0.js";import{u as w}from"./chunk-79739c92.js";import{r as u}from"./chunk-e9cd8943.js";import{c as h}from"./chunk-99b8f121.js";import{L as F}from"./chunk-5f195378.js";import{L as R}from"./chunk-014979c9.js";import{u as A}from"./chunk-c5989daf.js";import{l as U}from"./chunk-ba3e3861.js";import{L as q}from"./chunk-5212edba.js";import{j as e,a as o,F as z}from"./chunk-c1d16543.js";import{f as L}from"./chunk-ec284ae6.js";import{u as V}from"./chunk-8f68cdf3.js";import"./chunk-36a75920.js";import"./chunk-0feb7138.js";import"./chunk-fde55823.js";import"./chunk-09d047a9.js";import"./chunk-acb1a683.js";import"./chunk-cf010ec4.js";import"./chunk-634a8a63.js";/* empty css              */import"./chunk-b745fb4d.js";import"./chunk-b3e26e36.js";import"./chunk-1d6b0b39.js";import"./chunk-5dde6c82.js";import"./chunk-38ad52ab.js";import"./chunk-6b5946cf.js";/* empty css              */const p="ANNOUNCEMENT_INFO";function B(){return f.get(p)}function G(t){return f.set(p,t)}function J(){return f.set(p,"")}function K(t){return{selectAnnouncementInfo:B()||{},setSelectAnnouncementInfo:i=>{t(Y(a=>{a.selectAnnouncementInfo=i,G(i)}))},removeSelectAnnouncementInfoCache:()=>{J()}}}const P=T(j(K,{name:"announcement-center-store"})),C=O(P),Q={"message-center":"announcement-center-index-module__message-center--i3j"},W={"message-list":"message-list-index-module__message-list--maN"},X={"list-item":"list-item-index-module__list-item--Yey"};function Z({itemData:t,isActive:i}){return e("div",{className:h(X["list-item"],{active:i}),children:e("div",{className:"item-info",children:o("p",{className:h("item-title"),children:[e(q,{src:t.logo}),t.name]})})})}function D(t){const{selectAnnouncementInfo:i,setSelectAnnouncementInfo:a}=C(),{loading:d,data:s}=w($),{hash:m,updateHash:r}=A(),l=n=>{r(""),a(n)},[c,k]=u.useState([]);return u.useEffect(()=>{var g,N,v,_,x,I;const n=s;if(n!=null&&n.isOk&&(n!=null&&n.data))if(k(((g=n.data)==null?void 0:g.dialogList)||[]),m&&((N=n==null?void 0:n.data)!=null&&N.dialogList)){const[se,S]=m.slice(1).split("/");if(S){const E=(v=n==null?void 0:n.data)==null?void 0:v.dialogList.find(M=>String(M.id)===S);a(E)}}else i!=null&&i.id||(x=(_=n.data)==null?void 0:_.dialogList)!=null&&x.length&&a((I=n.data)==null?void 0:I.dialogList[0])},[s]),o("div",{className:W["message-list"],children:[e("p",{className:"head",children:o("div",{className:"title",children:[e(H,{name:"a-Notselected",onClick:()=>{a(c[0]),U("/")}}),e("span",{children:y._("features_announcement_center_components_message_list_index_x_ntlrzyyu")})]})}),o("div",{className:"overflow-y-auto flex-1",children:[d&&e("div",{className:"flex justify-center mt-5",children:e(F,{})}),!d&&!(c!=null&&c.length)?e(R,{}):c.map(n=>e("div",{className:h("message-data",{"is-select":(i==null?void 0:i.id)===(n==null?void 0:n.id)}),onClick:()=>l(n),children:e(Z,{itemData:n,isActive:!1})},n.id))]})]})}const ee={"right-content":"right-content-index-module__right-content--fo5"},te={"announcement-article":"announcement-article-index-module__announcement-article--Eip"};function ne({id:t,onChangeArticle:i}){const[a,d]=u.useState({}),{announcementCenter:s,announcementList:m}=a,r=l=>{b({announceContentId:l}).then(c=>{c.isOk&&c.data&&d(c.data||[])})};return u.useEffect(()=>{r(t)},[t]),o("div",{className:te["announcement-article"],children:[o("div",{className:"article-content",children:[o("div",{className:"header",children:[e("h3",{children:s==null?void 0:s.name}),e("div",{className:"date-time",children:L((s==null?void 0:s.pushTimeStramp)||"")})]}),e("div",{className:"article-html",dangerouslySetInnerHTML:{__html:(s==null?void 0:s.content)||""}})]}),o("div",{className:"new-announcement",children:[e("p",{className:"content-right-header",children:y._("features_announcement_center_components_announcement_article_index_q4oeyxidda")}),e("div",{className:"content-right-body",children:m==null?void 0:m.map(l=>e("div",{className:"new-article-text",onClick:()=>i(l),children:l.name},l.id))})]})]})}function ie({selectData:t}){var m;const i=u.useRef(t),{hash:a,updateHash:d}=A(),s=r=>{d(`#${r.id}`)};return V(()=>{var c;const[r,l]=a.slice(1).split("/");l||(((c=i==null?void 0:i.current)==null?void 0:c.id)!==(t==null?void 0:t.id)&&d(""),i.current=t)},[t]),e("div",{className:ee["right-content"],children:a?e(ne,{id:a.slice(1),onChangeArticle:s}):o(z,{children:[e("h4",{className:"right-content-title",children:t==null?void 0:t.name}),e("div",{className:"content-list",children:(m=t==null?void 0:t.announcementTextVOList)==null?void 0:m.map(r=>o("div",{children:[e("div",{className:"list-items-title",onClick:()=>s(r),children:r.name}),e("div",{className:"push-time",children:L(r.pushTimeStramp,"YYYY-MM-DD")})]},r.id))})]})})}function He(){const{selectAnnouncementInfo:t}=C();return o("div",{className:Q["message-center"],children:[e("div",{className:"top-bg"}),o("div",{className:"message-info",children:[e("div",{className:"left-list",children:e(D,{selectData:t})}),e("div",{className:"right-content",children:e(ie,{selectData:t})})]})]})}export{He as default};
