import{i}from"./chunk-d8234155.js";import{r as s}from"./chunk-e9cd8943.js";import{I as u}from"./chunk-d80cdd1c.js";import{u as v,o as U,q as V}from"./chunk-fde55823.js";/* empty css              */import{g as O}from"./chunk-41ff5c14.js";import{C as R}from"./chunk-cb1a8670.js";import{N as G}from"./chunk-5b5bf05c.js";import{a as o,j as t}from"./chunk-c1d16543.js";import{M as g}from"./chunk-36a75920.js";import"./chunk-cf010ec4.js";import"./chunk-99b8f121.js";import"./chunk-09d047a9.js";import"./chunk-acb1a683.js";import"./chunk-634a8a63.js";import"./chunk-ba3e3861.js";import"./chunk-f3e99ce8.js";import"./chunk-23179642.js";import"./chunk-61229905.js";import"./chunk-0feb7138.js";import"./chunk-b745fb4d.js";import"./chunk-b4d6f2f0.js";import"./chunk-1a70223d.js";import"./chunk-01660bad.js";import"./chunk-d4125093.js";import"./chunk-c1540bb6.js";import"./chunk-5212edba.js";import"./chunk-278fdecb.js";const $="bind-mobile-binding-success-module__bindsuccess--Qtm",L={bindsuccess:$};function P(){const{userInfo:r}=v();return o("div",{className:L.bindsuccess,children:[t("div",{className:"success-icon",children:t(u,{name:"icon_set_binding_number1",fontSize:26,className:"mobile-icon"})}),t("p",{className:"success-label",children:i._("features_settings_center_bind_mobile_binding_success_ejh2f4d2gq")}),o("h3",{children:["+",r.mobileCountryCd," ",r.mobileNumber]})]})}const Q="bind-mobile-index-module__scoped--rLn",T={scoped:Q};function Ne(){const{userInfo:r,setUserInfo:S}=v(),[I,_]=s.useState(""),[l,b]=s.useState(""),[p,f]=s.useState(""),[a,x]=s.useState(""),[m,k]=s.useState(""),[c,h]=s.useState(0),[C,N]=s.useState("pennding"),[M,y]=s.useState(!1),A=()=>{y(!0)},q=()=>{y(!1)},B=e=>{_(e.countryName),b(e.countryEnCode),f(p)},E=()=>{if(!m){g.error(i._("features_settings_center_bind_mobile_index_nhuddnkozc"));return}U({regCountryCd:p,mobileCountryCd:l,mobileNumber:a,mobileCode:m}).then(n=>{if(n.isOk&&n.data){const d={...r,mobileNumber:a,mobileCountryCd:l};S(d),N("success")}})},j=()=>{if(!a){g.error(i._("features_settings_center_bind_mobile_index_0ra0n8jymv"));return}O({mobileNumber:a,mobileCountryCd:l,typeCd:"1"}).then(n=>{n.isOk&&n.data&&h(60)})},w=()=>{V({}).then(e=>{if(e.isOk&&e.data){let{countryName:n,countryShortName:d,countryEnCode:z}=e.data;_(n||""),b(z||""),f(d||"")}})};return s.useEffect(()=>{r.mobileNumber?N("success"):w()},[]),s.useEffect(()=>{let e=null;return c>0?e=setInterval(()=>{h(n=>n-1)},1e3):clearInterval(e),()=>{e&&clearInterval(e)}},[c]),o("div",{className:T.scoped,children:[t(G,{label:i._("features_settings_center_account_security_index_b_vtomrwck"),url:"/account-security"}),o("div",{className:"mobile-content",children:[C==="pennding"&&o("div",{children:[o("div",{className:"mobile-box",children:[o("div",{className:"list-item cursor-pointer",onClick:A,children:[t("span",{className:"area",children:I}),t(u,{name:"icon_chat_arrow",fontSize:16,className:"arrow-icon text-icon_color"})]}),o("div",{className:"list-item",children:[o("span",{className:"area-code",children:["+",l]}),t("input",{type:"text",value:a,placeholder:i._("features_settings_center_bind_mobile_index_rocukuvszt"),className:"mobile",onChange:e=>x(e.target.value)})]}),o("div",{className:"list-item",style:{border:"none"},children:[t("input",{type:"text",value:m,placeholder:i._("features_settings_center_bind_mobile_index_avn5naqutc"),className:"code",onChange:e=>k(e.target.value)}),t("button",{onClick:j,disabled:c>0,className:"getcode",type:"button",children:c>0?`${c}s`:i._("features_settings_center_bind_mobile_index_6ar4vb1hlx")})]})]}),t("div",{className:"commit-btn",onClick:E,children:t(u,{name:"icon_set_confirm",fontSize:24,className:"commit-icon"})})]}),t(R,{visible:M,onClose:q,onSelect:B}),C==="success"&&t(P,{})]})]})}export{Ne as default};
