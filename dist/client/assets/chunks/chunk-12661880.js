import{i as a}from"./chunk-d8234155.js";import{r as n}from"./chunk-e9cd8943.js";import{H as R}from"./chunk-e7397446.js";import{a as V,p as B,b as M}from"./chunk-b720646a.js";import{d as H}from"./chunk-fde55823.js";import{I as u}from"./chunk-d80cdd1c.js";/* empty css              */import"./chunk-23179642.js";import{I as O}from"./chunk-1a70223d.js";import{M as T,C as F}from"./chunk-3c42a90c.js";import{N as J}from"./chunk-28c62a8f.js";import{L as K}from"./chunk-5f195378.js";import{C as b}from"./chunk-4e694d97.js";import{A as W}from"./chunk-43f2ddc7.js";import{a as c,j as s}from"./chunk-c1d16543.js";import{M as l}from"./chunk-36a75920.js";import"./chunk-cf010ec4.js";import"./chunk-09d047a9.js";import"./chunk-acb1a683.js";import"./chunk-634a8a63.js";import"./chunk-ba3e3861.js";import"./chunk-99b8f121.js";import"./chunk-b4d6f2f0.js";import"./chunk-0feb7138.js";import"./chunk-01660bad.js";import"./chunk-d4125093.js";import"./chunk-c1540bb6.js";import"./chunk-5212edba.js";import"./chunk-6b5946cf.js";import"./chunk-b745fb4d.js";import"./chunk-faa47c2c.js";import"./chunk-cd3d6459.js";import"./chunk-ec38f500.js";const Q="addition-index-module__addition--pmN",U={addition:Q};function we(){var D,y;const C=H(),g=n.useRef(null),[r,f]=n.useState(""),[h,N]=n.useState(!0),[A,m]=n.useState(!1),[p,x]=n.useState(0),[v,w]=n.useState({uid:0,nickName:""}),[k,z]=n.useState({groupId:"",groupName:""}),[j,I]=n.useState(!1),[t,_]=n.useState({userData:[],groupData:[]}),P=async e=>{I(!0);const i=await V({keyword:e});I(!1);const{isOk:d,data:o}=i||{};d&&o&&_(o)},S=async e=>{m(!1);const i=await B({uid:e}),{isOk:d,data:o}=i||{};d&&(o!=null&&o.success)?l.success(a._("features_messenger_addition_index_t0o7celfir")):l.error(a._("features_messenger_addition_index_79dzbswbuk"))},E=async e=>{m(!1);const i=await M({groupId:e}),{isOk:d,data:o}=i||{};d&&(o!=null&&o.success)&&l.success(a._("features_messenger_addition_index_cprqb5qgyz"))},q=async e=>{C.joinGroup(e.toString()).then(d=>{E(d.groupInfo.baseInfo.groupID)}).catch(d=>{l.success(a._("features_messenger_addition_index_gnkdmx1nh1"))})},G=(e,i)=>{p===1&&S(i),p===2&&q(e)};return n.useEffect(()=>{},[t]),c("div",{className:U.addition,children:[s(W,{titleText:a._("features_messenger_addition_index_pngdv3umj8")}),c("div",{className:"scroll-show",children:[s("div",{className:"search-input",children:s(O,{type:"text",className:"search-input-comm",prefix:s(u,{name:"icon_chat_search"}),suffix:r.length&&s(u,{name:"icon_chat_delete",onClick:()=>{f(""),_({userData:[],groupData:[]})}}),placeholder:a._("features_group_components_search_input_index_tq98cmscdb"),value:r,onChange:e=>{e.length===0&&_({userData:[],groupData:[]}),f(e),N(!0)},onPressEnter:()=>{var e;(e=g.current)==null||e.click()}})}),j?s("div",{className:"flex justify-center mt-52",children:s(K,{})}):c("div",{children:[!!r.length&&h&&c("div",{className:"nav-item",ref:g,onClick:()=>{P(r),N(!1)},children:[c("div",{className:"nav-item-left",children:[s("div",{className:"nav-ico-box",children:s(u,{name:"icon_address_book_invite_friend",fontSize:20,className:"icon-color"})}),c("div",{className:"nav-text",children:[s("div",{className:"search-tips",children:a._("features_messenger_addition_index_bb0pp6w1mo")}),s(R,{highlightClassName:"highlighted",searchWords:[r],autoEscape:!0,textToHighlight:r})]})]}),s("div",{className:"nav-item-right"})]}),!!(t!=null&&t.userData.length)&&r.length!==0&&c("div",{className:"seek seek-p",children:[s("div",{className:"seek-title",children:a._("features_messenger_addition_index_dpifdzvxuo")}),s("div",{children:(D=t==null?void 0:t.userData)==null?void 0:D.map(e=>{const i=e.alreadyAdd?c("div",{className:"add-text",children:[s(u,{name:"icon_address_book_added",className:"added"}),a._("features_messenger_addition_index_j3tuca3fsx")]}):s("div",{className:"add-btn",onClick:()=>{m(!0),x(1),w({uid:e.uid,nickName:e.nickName})},children:a._("features_messenger_addition_index_hi1mctpr4u")});return s(b,{crewName:e.nickName,searchValue:r,right:i},e.nickName)})})]}),!!(t!=null&&t.groupData.length)&&r.length!==0&&c("div",{className:"seek",children:[s("div",{className:"seek-title",children:a._("features_messenger_addition_index_2eiozsmyrc")}),s("div",{children:(y=t==null?void 0:t.groupData)==null?void 0:y.map(e=>{const i=e.alreadyAdd?s("div",{className:"add-btn",children:a._("features_select_contact_group_f2v65kjlnm")}):s("div",{className:"add-btn",onClick:()=>{m(!0),x(2),z({groupId:e.groupId,groupName:e.groupName})},children:a._("features_messenger_addition_index_yzmdmfxw1y")});return s(b,{crewName:e.groupName,searchValue:r,right:i,icon:"icon_address_book_group"},e.groupName)})})]}),!(t!=null&&t.groupData.length)&&!(t!=null&&t.userData.length)&&r.length!==0&&!h&&s(J,{name:"no_search_result",footerText:a._("features_group_components_search_friend_index_eppdggih18")})]})]}),A&&s(T,{children:s(F,{title:p===1?v.nickName||"":k.groupName||"",content:p===1?a._("features_messenger_addition_index_1fx0wn_hbe"):a._("features_messenger_addition_index_0xlu0rnf6e"),confirmEvent:()=>{G(k.groupId,v.uid)},cancelEvent:()=>{m(!1)}})})]})}export{we as default};
