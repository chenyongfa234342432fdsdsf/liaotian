import{o as tn,u as At}from"./chunk-e9cd8943.js";const ea=e=>{let t=e.httpHandler;return{setHttpHandler(r){t=r},httpHandler(){return t},updateHttpClientConfig(r,n){t.updateHttpClientConfig(r,n)},httpHandlerConfigs(){return t.httpHandlerConfigs()}}},ta=e=>({httpHandler:e.httpHandler()});var xn;(function(e){e.HEADER="header",e.QUERY="query"})(xn||(xn={}));var Ct;(function(e){e.HTTP="http",e.HTTPS="https"})(Ct||(Ct={}));var Ft;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(Ft||(Ft={}));var Sn;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(Sn||(Sn={}));const ra="__smithy_context";var vn;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(vn||(vn={}));var Cn;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(Cn||(Cn={}));class de{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static isInstance(t){if(!t)return!1;const r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){const t=new de({...this,headers:{...this.headers}});return t.query&&(t.query=na(t.query)),t}}function na(e){return Object.keys(e).reduce((t,r)=>{const n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}class It{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;const r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}}function sa(e){return t=>async r=>{const{request:n}=r;return de.isInstance(n)&&n.body&&e.runtime==="node"&&(n.headers={...n.headers,Expect:"100-continue"}),t({...r,request:n})}}const ia={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},oa=e=>({applyToStack:t=>{t.add(sa(e),ia)}});const aa=e=>t=>async r=>{if(!de.isInstance(r.request))return t(r);const{request:n}=r,{handlerProtocol:s=""}=e.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let i=n.hostname;n.port!=null&&(i+=`:${n.port}`),n.headers.host=i}return t(r)},ca={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},ua=e=>({applyToStack:t=>{t.add(aa(e),ca)}}),da=()=>(e,t)=>async r=>{var n,s;try{const i=await e(r),{clientName:o,commandName:a,logger:c,dynamoDbDocumentClientOptions:u={}}=t,{overrideInputFilterSensitiveLog:d,overrideOutputFilterSensitiveLog:f}=u,p=d!=null?d:t.inputFilterSensitiveLog,g=f!=null?f:t.outputFilterSensitiveLog,{$metadata:w,...E}=i.output;return(n=c==null?void 0:c.info)==null||n.call(c,{clientName:o,commandName:a,input:p(r.input),output:g(E),metadata:w}),i}catch(i){const{clientName:o,commandName:a,logger:c,dynamoDbDocumentClientOptions:u={}}=t,{overrideInputFilterSensitiveLog:d}=u,f=d!=null?d:t.inputFilterSensitiveLog;throw(s=c==null?void 0:c.error)==null||s.call(c,{clientName:o,commandName:a,input:f(r.input),error:i,metadata:i.$metadata}),i}},la={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},fa=e=>({applyToStack:t=>{t.add(da(),la)}}),Rn="X-Amzn-Trace-Id",ha="AWS_LAMBDA_FUNCTION_NAME",pa="_X_AMZN_TRACE_ID",ga=e=>t=>async r=>{const{request:n}=r;if(!de.isInstance(n)||e.runtime!=="node"||n.headers.hasOwnProperty(Rn))return t(r);const s=process.env[ha],i=process.env[pa],o=a=>typeof a=="string"&&a.length>0;return o(s)&&o(i)&&(n.headers[Rn]=i),t({...r,request:n})},ma={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},ya=e=>({applyToStack:t=>{t.add(ga(e),ma)}});class Oi{trace(){}debug(){}info(){}warn(){}error(){}}const Ue=(e,t)=>{const r=[];if(e&&r.push(e),t)for(const n of t)r.push(n);return r},_e=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,Dt=()=>{let e=[],t=[],r=!1;const n=new Set,s=f=>f.sort((p,g)=>_n[g.step]-_n[p.step]||Bn[g.priority||"normal"]-Bn[p.priority||"normal"]),i=f=>{let p=!1;const g=w=>{const E=Ue(w.name,w.aliases);if(E.includes(f)){p=!0;for(const S of E)n.delete(S);return!1}return!0};return e=e.filter(g),t=t.filter(g),p},o=f=>{let p=!1;const g=w=>{if(w.middleware===f){p=!0;for(const E of Ue(w.name,w.aliases))n.delete(E);return!1}return!0};return e=e.filter(g),t=t.filter(g),p},a=f=>{var p;return e.forEach(g=>{f.add(g.middleware,{...g})}),t.forEach(g=>{f.addRelativeTo(g.middleware,{...g})}),(p=f.identifyOnResolve)==null||p.call(f,d.identifyOnResolve()),f},c=f=>{const p=[];return f.before.forEach(g=>{g.before.length===0&&g.after.length===0?p.push(g):p.push(...c(g))}),p.push(f),f.after.reverse().forEach(g=>{g.before.length===0&&g.after.length===0?p.push(g):p.push(...c(g))}),p},u=(f=!1)=>{const p=[],g=[],w={};return e.forEach(S=>{const C={...S,before:[],after:[]};for(const O of Ue(C.name,C.aliases))w[O]=C;p.push(C)}),t.forEach(S=>{const C={...S,before:[],after:[]};for(const O of Ue(C.name,C.aliases))w[O]=C;g.push(C)}),g.forEach(S=>{if(S.toMiddleware){const C=w[S.toMiddleware];if(C===void 0){if(f)return;throw new Error(`${S.toMiddleware} is not found when adding ${_e(S.name,S.aliases)} middleware ${S.relation} ${S.toMiddleware}`)}S.relation==="after"&&C.after.push(S),S.relation==="before"&&C.before.push(S)}}),s(p).map(c).reduce((S,C)=>(S.push(...C),S),[])},d={add:(f,p={})=>{const{name:g,override:w,aliases:E}=p,S={step:"initialize",priority:"normal",middleware:f,...p},C=Ue(g,E);if(C.length>0){if(C.some(O=>n.has(O))){if(!w)throw new Error(`Duplicate middleware name '${_e(g,E)}'`);for(const O of C){const $=e.findIndex(Ee=>{var Ye;return Ee.name===O||((Ye=Ee.aliases)==null?void 0:Ye.some(Kt=>Kt===O))});if($===-1)continue;const ae=e[$];if(ae.step!==S.step||S.priority!==ae.priority)throw new Error(`"${_e(ae.name,ae.aliases)}" middleware with ${ae.priority} priority in ${ae.step} step cannot be overridden by "${_e(g,E)}" middleware with ${S.priority} priority in ${S.step} step.`);e.splice($,1)}}for(const O of C)n.add(O)}e.push(S)},addRelativeTo:(f,p)=>{const{name:g,override:w,aliases:E}=p,S={middleware:f,...p},C=Ue(g,E);if(C.length>0){if(C.some(O=>n.has(O))){if(!w)throw new Error(`Duplicate middleware name '${_e(g,E)}'`);for(const O of C){const $=t.findIndex(Ee=>{var Ye;return Ee.name===O||((Ye=Ee.aliases)==null?void 0:Ye.some(Kt=>Kt===O))});if($===-1)continue;const ae=t[$];if(ae.toMiddleware!==S.toMiddleware||ae.relation!==S.relation)throw new Error(`"${_e(ae.name,ae.aliases)}" middleware ${ae.relation} "${ae.toMiddleware}" middleware cannot be overridden by "${_e(g,E)}" middleware ${S.relation} "${S.toMiddleware}" middleware.`);t.splice($,1)}}for(const O of C)n.add(O)}t.push(S)},clone:()=>a(Dt()),use:f=>{f.applyToStack(d)},remove:f=>typeof f=="string"?i(f):o(f),removeByTag:f=>{let p=!1;const g=w=>{const{tags:E,name:S,aliases:C}=w;if(E&&E.includes(f)){const O=Ue(S,C);for(const $ of O)n.delete($);return p=!0,!1}return!0};return e=e.filter(g),t=t.filter(g),p},concat:f=>{var g,w;const p=a(Dt());return p.use(f),p.identifyOnResolve(r||p.identifyOnResolve()||((w=(g=f.identifyOnResolve)==null?void 0:g.call(f))!=null?w:!1)),p},applyToStack:a,identify:()=>u(!0).map(f=>{var g;const p=(g=f.step)!=null?g:f.relation+" "+f.toMiddleware;return _e(f.name,f.aliases)+" - "+p}),identifyOnResolve(f){return typeof f=="boolean"&&(r=f),r},resolve:(f,p)=>{for(const g of u().map(w=>w.middleware).reverse())f=g(f,p);return r&&console.log(d.identify()),f}};return d},_n={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Bn={high:3,normal:2,low:1};class ba{constructor(t){this.middlewareStack=Dt(),this.config=t}send(t,r,n){const s=typeof r!="function"?r:void 0,i=typeof r=="function"?r:n,o=t.resolveMiddleware(this.middlewareStack,this.config,s);if(i)o(t).then(a=>i(null,a.output),a=>i(a)).catch(()=>{});else return o(t).then(a=>a.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}}const Oe={},Xe=new Array(64);for(let e=0,t="A".charCodeAt(0),r="Z".charCodeAt(0);e+t<=r;e++){const n=String.fromCharCode(e+t);Oe[n]=e,Xe[e]=n}for(let e=0,t="a".charCodeAt(0),r="z".charCodeAt(0);e+t<=r;e++){const n=String.fromCharCode(e+t),s=e+26;Oe[n]=s,Xe[s]=n}for(let e=0;e<10;e++){Oe[e.toString(10)]=e+52;const t=e.toString(10),r=e+52;Oe[t]=r,Xe[r]=t}Oe["+"]=62;Xe[62]="+";Oe["/"]=63;Xe[63]="/";const Ve=6,xt=8,wa=63,rn=e=>{let t=e.length/4*3;e.slice(-2)==="=="?t-=2:e.slice(-1)==="="&&t--;const r=new ArrayBuffer(t),n=new DataView(r);for(let s=0;s<e.length;s+=4){let i=0,o=0;for(let u=s,d=s+3;u<=d;u++)if(e[u]!=="="){if(!(e[u]in Oe))throw new TypeError(`Invalid character ${e[u]} in base64 string.`);i|=Oe[e[u]]<<(d-u)*Ve,o+=Ve}else i>>=Ve;const a=s/4*3;i>>=o%xt;const c=Math.floor(o/xt);for(let u=0;u<c;u++){const d=(c-u-1)*xt;n.setUint8(a+u,(i&255<<d)>>d)}}return new Uint8Array(r)};function nn(e){let t="";for(let r=0;r<e.length;r+=3){let n=0,s=0;for(let o=r,a=Math.min(r+3,e.length);o<a;o++)n|=e[o]<<(a-o-1)*xt,s+=xt;const i=Math.ceil(s/Ve);n<<=i*Ve-s;for(let o=1;o<=i;o++){const a=(i-o)*Ve;t+=Xe[(n&wa<<a)>>a]}t+="==".slice(0,4-i)}return t}const Bt=e=>new TextEncoder().encode(e),Ge=e=>typeof e=="string"?Bt(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),qt=e=>new TextDecoder("utf-8").decode(e);function Ea(e,t="utf-8"){return t==="base64"?nn(e):qt(e)}function Aa(e,t){return t==="base64"?je.mutate(rn(e)):je.mutate(Bt(e))}class je extends Uint8Array{static fromString(t,r="utf-8"){switch(typeof t){case"string":return Aa(t,r);default:throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}}static mutate(t){return Object.setPrototypeOf(t,je.prototype),t}transformToString(t="utf-8"){return Ea(this,t)}}const xa=(e,t)=>{const{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:s,checksumLocationName:i,streamHasher:o}=t,a=r!==void 0&&n!==void 0&&s!==void 0&&i!==void 0&&o!==void 0,c=a?o(s,e):void 0,u=e.getReader();return new ReadableStream({async pull(d){const{value:f,done:p}=await u.read();if(p){if(d.enqueue(`0\r
`),a){const g=r(await c);d.enqueue(`${i}:${g}\r
`),d.enqueue(`\r
`)}d.close()}else d.enqueue(`${(n(f)||0).toString(16)}\r
${f}\r
`)}})},Le=e=>encodeURIComponent(e).replace(/[!'()*]/g,Sa),Sa=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;function va(e){const t=[];for(let r of Object.keys(e).sort()){const n=e[r];if(r=Le(r),Array.isArray(n))for(let s=0,i=n.length;s<i;s++)t.push(`${r}=${Le(n[s])}`);else{let s=r;(n||typeof n=="string")&&(s+=`=${Le(n)}`),t.push(s)}}return t.join("&")}function Ca(e=0){return new Promise((t,r)=>{e&&setTimeout(()=>{const n=new Error(`Request did not complete within ${e} ms`);n.name="TimeoutError",r(n)},e)})}const Ra={supported:typeof Request<"u"&&"keepalive"in new Request("https://[::1]")};class _a{constructor(t){typeof t=="function"?this.configProvider=t().then(r=>r||{}):(this.config=t!=null?t:{},this.configProvider=Promise.resolve(this.config))}destroy(){}async handle(t,{abortSignal:r}={}){var E,S;this.config||(this.config=await this.configProvider);const n=this.config.requestTimeout,s=this.config.keepAlive===!0;if(r!=null&&r.aborted){const C=new Error("Request aborted");return C.name="AbortError",Promise.reject(C)}let i=t.path;const o=va(t.query||{});o&&(i+=`?${o}`),t.fragment&&(i+=`#${t.fragment}`);let a="";if(t.username!=null||t.password!=null){const C=(E=t.username)!=null?E:"",O=(S=t.password)!=null?S:"";a=`${C}:${O}@`}const{port:c,method:u}=t,d=`${t.protocol}//${a}${t.hostname}${c?`:${c}`:""}${i}`,p={body:u==="GET"||u==="HEAD"?void 0:t.body,headers:new Headers(t.headers),method:u};typeof AbortController<"u"&&(p.signal=r),Ra.supported&&(p.keepalive=s);const g=new Request(d,p),w=[fetch(g).then(C=>{const O=C.headers,$={};for(const Ee of O.entries())$[Ee[0]]=Ee[1];return C.body!=null?{response:new It({headers:$,reason:C.statusText,statusCode:C.status,body:C.body})}:C.blob().then(Ee=>({response:new It({headers:$,reason:C.statusText,statusCode:C.status,body:Ee})}))}),Ca(n)];return r&&w.push(new Promise((C,O)=>{r.onabort=()=>{const $=new Error("Request aborted");$.name="AbortError",O($)}})),Promise.race(w)}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[t]=r,n))}httpHandlerConfigs(){var t;return(t=this.config)!=null?t:{}}}const Mi=e=>typeof Blob=="function"&&e instanceof Blob?Ba(e):Ta(e);async function Ba(e){const t=await ka(e),r=rn(t);return new Uint8Array(r)}async function Ta(e){let t=new Uint8Array(0);const r=e.getReader();let n=!1;for(;!n;){const{done:s,value:i}=await r.read();if(i){const o=t;t=new Uint8Array(o.length+i.length),t.set(o),t.set(i,o.length)}n=s}return t}function ka(e){return new Promise((t,r)=>{const n=new FileReader;n.onloadend=()=>{var a;if(n.readyState!==2)return r(new Error("Reader aborted too early"));const s=(a=n.result)!=null?a:"",i=s.indexOf(","),o=i>-1?i+1:s.length;t(s.substring(o))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(e)})}const Fi={},Lr={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),Fi[e]=t,Lr[t]=e}function Pa(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){const n=e.slice(r,r+2).toLowerCase();if(n in Lr)t[r/2]=Lr[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function fe(e){let t="";for(let r=0;r<e.byteLength;r++)t+=Fi[e[r]];return t}const Tn="The stream has already been transformed.",Na=e=>{var s,i;if(!kn(e)&&!Pn(e)){const o=((i=(s=e==null?void 0:e.__proto__)==null?void 0:s.constructor)==null?void 0:i.name)||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${o}`)}let t=!1;const r=async()=>{if(t)throw new Error(Tn);return t=!0,await Mi(e)},n=o=>{if(typeof o.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return o.stream()};return Object.assign(e,{transformToByteArray:r,transformToString:async o=>{const a=await r();if(o==="base64")return nn(a);if(o==="hex")return fe(a);if(o===void 0||o==="utf8"||o==="utf-8")return qt(a);if(typeof TextDecoder=="function")return new TextDecoder(o).decode(a);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(Tn);if(t=!0,kn(e))return n(e);if(Pn(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})},kn=e=>typeof Blob=="function"&&e instanceof Blob,Pn=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream,Ii=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return je.mutate(e);if(!e)return je.mutate(new Uint8Array);const r=t.streamCollector(e);return je.mutate(await r)};class Oa{constructor(){this.middlewareStack=Dt()}}const St="***SensitiveInformation***",Ma=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},Fa=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ia=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Da(e){const t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),s=e.getUTCDate(),i=e.getUTCHours(),o=e.getUTCMinutes(),a=e.getUTCSeconds(),c=s<10?`0${s}`:`${s}`,u=i<10?`0${i}`:`${i}`,d=o<10?`0${o}`:`${o}`,f=a<10?`0${a}`:`${a}`;return`${Fa[n]}, ${c} ${Ia[r]} ${t} ${u}:${d}:${f} GMT`}class sn extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,sn.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}}const Ua=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,s])=>{(e[n]==null||e[n]==="")&&(e[n]=s)});const r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e},$a=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{const s=Ha(e),i=s.httpStatusCode?s.httpStatusCode+"":void 0,o=new r({name:(t==null?void 0:t.code)||(t==null?void 0:t.Code)||n||i||"UnknownError",$fault:"client",$metadata:s});throw Ua(o,t)},La=e=>({output:t,parsedBody:r,errorCode:n})=>{$a({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},Ha=e=>{var t,r;return{httpStatusCode:e.statusCode,requestId:(r=(t=e.headers["x-amzn-requestid"])!=null?t:e.headers["x-amzn-request-id"])!=null?r:e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},ja=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},qa=e=>{const t=[];for(const r in Ft){const n=Ft[r];e[n]!==void 0&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}},za=e=>{const t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},Va=e=>{let t=e.retryStrategy;return{setRetryStrategy(r){t=r},retryStrategy(){return t}}},Ga=e=>{const t={};return t.retryStrategy=e.retryStrategy(),t},Wa=e=>({...qa(e),...Va(e)}),Ka=e=>({...za(e),...Ga(e)});function Nn(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}const Di=e=>{const t="#text";for(const r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=Di(e[r]));return e},Hr=function(){const e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),r=new t;return Object.setPrototypeOf(r,e.prototype),r};Hr.prototype=Object.create(String.prototype,{constructor:{value:Hr,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(Hr,String);function Ut(e,t,r){let n,s,i;if(typeof t>"u"&&typeof r>"u")n={},i=e;else{if(n=e,typeof t=="function")return s=t,i=r,Xa(n,s,i);i=t}for(const o of Object.keys(i)){if(!Array.isArray(i[o])){n[o]=i[o];continue}Za(n,null,i,o)}return n}const Xa=(e,t,r)=>Ut(e,Object.entries(r).reduce((n,[s,i])=>(Array.isArray(i)?n[s]=i:typeof i=="function"?n[s]=[t,i()]:n[s]=[t,i],n),{})),Za=(e,t,r,n)=>{if(t!==null){let o=r[n];typeof o=="function"&&(o=[,o]);const[a=Ya,c=Qa,u=n]=o;(typeof a=="function"&&a(t[u])||typeof a!="function"&&a)&&(e[n]=c(t[u]));return}let[s,i]=r[n];if(typeof i=="function"){let o;const a=s===void 0&&(o=i())!=null,c=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;a?e[n]=o:c&&(e[n]=i())}else{const o=s===void 0&&i!=null,a=typeof s=="function"&&!!s(i)||typeof s!="function"&&!!s;(o||a)&&(e[n]=i)}},Ya=e=>e!=null,Qa=e=>e,On=(e,t,r,n,s,i)=>{if(t!=null&&t[r]!==void 0){const o=n();if(o.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(s,i?o.split("/").map(a=>Nn(a)).join("/"):Nn(o))}else throw new Error("No value provided for input HTTP label: "+r+".");return e},Ja="content-length";function ec(){return(e,t)=>async r=>{var s;const{request:n}=r;if(de.isInstance(n)&&!n.headers[Ja]){const i="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";typeof((s=t==null?void 0:t.logger)==null?void 0:s.warn)=="function"&&!(t.logger instanceof Oi)?t.logger.warn(i):console.warn(i)}return e({...r})}}const tc={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},rc=e=>({applyToStack:t=>{t.add(ec(),tc)}}),nc=e=>(t,r)=>async n=>{const s=await e.region(),i=e.region;r.__s3RegionRedirect&&(e.region=async()=>(e.region=i,r.__s3RegionRedirect));const o=await t(n);if(r.__s3RegionRedirect){const a=await e.region();if(s!==a)throw new Error("Region was not restored following S3 region redirect.")}return o},sc={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"};function ic(e){return(t,r)=>async n=>{var s;try{return await t(n)}catch(i){if(e.followRegionRedirects&&i.$metadata.httpStatusCode===301){try{const o=i.$response.headers["x-amz-bucket-region"];(s=r.logger)==null||s.debug(`Redirecting from ${await e.region()} to ${o}`),r.__s3RegionRedirect=o}catch(o){throw new Error("Region redirect failed: "+o)}return t(n)}else throw i}}}const oc={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0},ac=e=>({applyToStack:t=>{t.add(ic(e),oc),t.addRelativeTo(nc(e),sc)}}),cc=e=>{var t,r,n,s;return{...e,forcePathStyle:(t=e.forcePathStyle)!=null?t:!1,useAccelerateEndpoint:(r=e.useAccelerateEndpoint)!=null?r:!1,disableMultiregionAccessPoints:(n=e.disableMultiregionAccessPoints)!=null?n:!1,followRegionRedirects:(s=e.followRegionRedirects)!=null?s:!1}},uc=e=>typeof e=="string"&&e.indexOf("arn:")===0&&e.split(":").length>=6;function dc(){return e=>async t=>{const{input:{Bucket:r}}=t;if(typeof r=="string"&&!uc(r)&&r.indexOf("/")>=0){const n=new Error(`Bucket name shouldn't contain '/', received '${r}'`);throw n.name="InvalidBucketName",n}return e({...t})}}const lc={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},fc=e=>({applyToStack:t=>{t.add(dc(),lc)}}),Ui=(e,t,r)=>{let n,s,i,o=!1;const a=async()=>{s||(s=e());try{n=await s,i=!0,o=!1}finally{s=void 0}return n};return t===void 0?async c=>((!i||c!=null&&c.forceRefresh)&&(n=await a()),n):async c=>((!i||c!=null&&c.forceRefresh)&&(n=await a()),o?n:r&&!r(n)?(o=!0,n):(t(n)&&await a(),n))};var Xt={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var jr=function(e,t){return jr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},jr(e,t)};function hc(e,t){jr(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var qr=function(){return qr=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},qr.apply(this,arguments)};function pc(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function gc(e,t,r,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}function mc(e,t){return function(r,n){t(r,n,e)}}function yc(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function bc(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(a,c)}u((n=n.apply(e,t||[])).next())})}function wc(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Ec(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function Ac(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function zr(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function $i(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function xc(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat($i(arguments[t]));return e}function Sc(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var i=arguments[t],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function Rt(e){return this instanceof Rt?(this.v=e,this):new Rt(e)}function vc(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(p){n[p]&&(s[p]=function(g){return new Promise(function(w,E){i.push([p,g,w,E])>1||a(p,g)})})}function a(p,g){try{c(n[p](g))}catch(w){f(i[0][3],w)}}function c(p){p.value instanceof Rt?Promise.resolve(p.value.v).then(u,d):f(i[0][2],p)}function u(p){a("next",p)}function d(p){a("throw",p)}function f(p,g){p(g),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Cc(e){var t,r;return t={},n("next"),n("throw",function(s){throw s}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(s,i){t[s]=e[s]?function(o){return(r=!r)?{value:Rt(e[s](o)),done:s==="return"}:i?i(o):o}:i}}function Rc(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof zr=="function"?zr(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(o){return new Promise(function(a,c){o=e[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}function _c(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function Bc(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function Tc(e){return e&&e.__esModule?e:{default:e}}function kc(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function Pc(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}const Nc=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return qr},__asyncDelegator:Cc,__asyncGenerator:vc,__asyncValues:Rc,__await:Rt,__awaiter:bc,__classPrivateFieldGet:kc,__classPrivateFieldSet:Pc,__createBinding:Ec,__decorate:gc,__exportStar:Ac,__extends:hc,__generator:wc,__importDefault:Tc,__importStar:Bc,__makeTemplateObject:_c,__metadata:yc,__param:mc,__read:$i,__rest:pc,__spread:xc,__spreadArrays:Sc,__values:zr},Symbol.toStringTag,{value:"Module"})),we=tn(Nc);var Zt={},Qe={};const Oc=e=>{const t=[];for(let r=0,n=e.length;r<n;r++){const s=e.charCodeAt(r);if(s<128)t.push(s);else if(s<2048)t.push(s>>6|192,s&63|128);else if(r+1<e.length&&(s&64512)===55296&&(e.charCodeAt(r+1)&64512)===56320){const i=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023);t.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else t.push(s>>12|224,s>>6&63|128,s&63|128)}return Uint8Array.from(t)},Mc=e=>{let t="";for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s<128)t+=String.fromCharCode(s);else if(192<=s&&s<224){const i=e[++r];t+=String.fromCharCode((s&31)<<6|i&63)}else if(240<=s&&s<365){const o="%"+[s,e[++r],e[++r],e[++r]].map(a=>a.toString(16)).join("%");t+=decodeURIComponent(o)}else t+=String.fromCharCode((s&15)<<12|(e[++r]&63)<<6|e[++r]&63)}return t};function Fc(e){return new TextEncoder().encode(e)}function Ic(e){return new TextDecoder("utf-8").decode(e)}const Dc=e=>typeof TextEncoder=="function"?Fc(e):Oc(e),Uc=e=>typeof TextDecoder=="function"?Ic(e):Mc(e),$c=Object.freeze(Object.defineProperty({__proto__:null,fromUtf8:Dc,toUtf8:Uc},Symbol.toStringTag,{value:"Module"})),zt=tn($c);var Mn;function Lc(){if(Mn)return Qe;Mn=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.convertToBuffer=void 0;var e=zt,t=typeof Buffer<"u"&&Buffer.from?function(n){return Buffer.from(n,"utf8")}:e.fromUtf8;function r(n){return n instanceof Uint8Array?n:typeof n=="string"?t(n):ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(n)}return Qe.convertToBuffer=r,Qe}var Je={},Fn;function Hc(){if(Fn)return Je;Fn=1,Object.defineProperty(Je,"__esModule",{value:!0}),Je.isEmptyData=void 0;function e(t){return typeof t=="string"?t.length===0:t.byteLength===0}return Je.isEmptyData=e,Je}var et={},In;function jc(){if(In)return et;In=1,Object.defineProperty(et,"__esModule",{value:!0}),et.numToUint8=void 0;function e(t){return new Uint8Array([(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255])}return et.numToUint8=e,et}var tt={},Dn;function qc(){if(Dn)return tt;Dn=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.uint32ArrayFrom=void 0;function e(t){if(!Uint32Array.from){for(var r=new Uint32Array(t.length),n=0;n<t.length;)r[n]=t[n],n+=1;return r}return Uint32Array.from(t)}return tt.uint32ArrayFrom=e,tt}var Un;function Fe(){return Un||(Un=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.uint32ArrayFrom=e.numToUint8=e.isEmptyData=e.convertToBuffer=void 0;var t=Lc();Object.defineProperty(e,"convertToBuffer",{enumerable:!0,get:function(){return t.convertToBuffer}});var r=Hc();Object.defineProperty(e,"isEmptyData",{enumerable:!0,get:function(){return r.isEmptyData}});var n=jc();Object.defineProperty(e,"numToUint8",{enumerable:!0,get:function(){return n.numToUint8}});var s=qc();Object.defineProperty(e,"uint32ArrayFrom",{enumerable:!0,get:function(){return s.uint32ArrayFrom}})}(Zt)),Zt}var rt={},$n;function zc(){if($n)return rt;$n=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.AwsCrc32=void 0;var e=we,t=Fe(),r=Li(),n=function(){function s(){this.crc32=new r.Crc32}return s.prototype.update=function(i){(0,t.isEmptyData)(i)||this.crc32.update((0,t.convertToBuffer)(i))},s.prototype.digest=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(i){return[2,(0,t.numToUint8)(this.crc32.digest())]})})},s.prototype.reset=function(){this.crc32=new r.Crc32},s}();return rt.AwsCrc32=n,rt}var Ln;function Li(){return Ln||(Ln=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AwsCrc32=e.Crc32=e.crc32=void 0;var t=we,r=Fe();function n(c){return new s().update(c).digest()}e.crc32=n;var s=function(){function c(){this.checksum=4294967295}return c.prototype.update=function(u){var d,f;try{for(var p=t.__values(u),g=p.next();!g.done;g=p.next()){var w=g.value;this.checksum=this.checksum>>>8^o[(this.checksum^w)&255]}}catch(E){d={error:E}}finally{try{g&&!g.done&&(f=p.return)&&f.call(p)}finally{if(d)throw d.error}}return this},c.prototype.digest=function(){return(this.checksum^4294967295)>>>0},c}();e.Crc32=s;var i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],o=(0,r.uint32ArrayFrom)(i),a=zc();Object.defineProperty(e,"AwsCrc32",{enumerable:!0,get:function(){return a.AwsCrc32}})}(Xt)),Xt}var on=Li();class vt{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);const r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(t));n>-1&&s>0;n--,s/=256)r[n]=s;return t<0&&Hn(r),new vt(r)}valueOf(){const t=this.bytes.slice(0),r=t[0]&128;return r&&Hn(t),parseInt(fe(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}}function Hn(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}class Hi{constructor(t,r){this.toUtf8=t,this.fromUtf8=r}format(t){const r=[];for(const i of Object.keys(t)){const o=this.fromUtf8(i);r.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(t[i]))}const n=new Uint8Array(r.reduce((i,o)=>i+o.byteLength,0));let s=0;for(const i of r)n.set(i,s),s+=i.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":const r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":const n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(t.value.bytes,1),s;case"binary":const i=new DataView(new ArrayBuffer(3+t.value.byteLength));i.setUint8(0,6),i.setUint16(1,t.value.byteLength,!1);const o=new Uint8Array(i.buffer);return o.set(t.value,3),o;case"string":const a=this.fromUtf8(t.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);const u=new Uint8Array(c.buffer);return u.set(a,3),u;case"timestamp":const d=new Uint8Array(9);return d[0]=8,d.set(vt.fromNumber(t.value.valueOf()).bytes,1),d;case"uuid":if(!Jc.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);const f=new Uint8Array(17);return f[0]=9,f.set(Pa(t.value.replace(/\-/g,"")),1),f}}parse(t){const r={};let n=0;for(;n<t.byteLength;){const s=t.getUint8(n++),i=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,s));switch(n+=s,t.getUint8(n++)){case 0:r[i]={type:qn,value:!0};break;case 1:r[i]={type:qn,value:!1};break;case 2:r[i]={type:Vc,value:t.getInt8(n++)};break;case 3:r[i]={type:Gc,value:t.getInt16(n,!1)},n+=2;break;case 4:r[i]={type:Wc,value:t.getInt32(n,!1)},n+=4;break;case 5:r[i]={type:Kc,value:new vt(new Uint8Array(t.buffer,t.byteOffset+n,8))},n+=8;break;case 6:const o=t.getUint16(n,!1);n+=2,r[i]={type:Xc,value:new Uint8Array(t.buffer,t.byteOffset+n,o)},n+=o;break;case 7:const a=t.getUint16(n,!1);n+=2,r[i]={type:Zc,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,a))},n+=a;break;case 8:r[i]={type:Yc,value:new Date(new vt(new Uint8Array(t.buffer,t.byteOffset+n,8)).valueOf())},n+=8;break;case 9:const c=new Uint8Array(t.buffer,t.byteOffset+n,16);n+=16,r[i]={type:Qc,value:`${fe(c.subarray(0,4))}-${fe(c.subarray(4,6))}-${fe(c.subarray(6,8))}-${fe(c.subarray(8,10))}-${fe(c.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}}var jn;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(jn||(jn={}));const qn="boolean",Vc="byte",Gc="short",Wc="integer",Kc="long",Xc="binary",Zc="string",Yc="timestamp",Qc="uuid",Jc=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,ji=4,Pe=ji*2,$e=4,eu=Pe+$e*2;function tu({byteLength:e,byteOffset:t,buffer:r}){if(e<eu)throw new Error("Provided message too short to accommodate event stream message overhead");const n=new DataView(r,t,e),s=n.getUint32(0,!1);if(e!==s)throw new Error("Reported message length does not match received message length");const i=n.getUint32(ji,!1),o=n.getUint32(Pe,!1),a=n.getUint32(e-$e,!1),c=new on.Crc32().update(new Uint8Array(r,t,Pe));if(o!==c.digest())throw new Error(`The prelude checksum specified in the message (${o}) does not match the calculated CRC32 checksum (${c.digest()})`);if(c.update(new Uint8Array(r,t+Pe,e-(Pe+$e))),a!==c.digest())throw new Error(`The message checksum (${c.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,t+Pe+$e,i),body:new Uint8Array(r,t+Pe+$e+i,s-i-(Pe+$e+$e))}}class ru{constructor(t,r){this.headerMarshaller=new Hi(t,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(t){this.messageBuffer.push(this.decode(t))}endOfStream(){this.isEndOfStream=!0}getMessage(){const t=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return t},isEndOfStream(){return r}}}getAvailableMessages(){const t=this.messageBuffer;this.messageBuffer=[];const r=this.isEndOfStream;return{getMessages(){return t},isEndOfStream(){return r}}}encode({headers:t,body:r}){const n=this.headerMarshaller.format(t),s=n.byteLength+r.byteLength+16,i=new Uint8Array(s),o=new DataView(i.buffer,i.byteOffset,i.byteLength),a=new on.Crc32;return o.setUint32(0,s,!1),o.setUint32(4,n.byteLength,!1),o.setUint32(8,a.update(i.subarray(0,8)).digest(),!1),i.set(n,12),i.set(r,n.byteLength+12),o.setUint32(s-4,a.update(i.subarray(8,s-4)).digest(),!1),i}decode(t){const{headers:r,body:n}=tu(t);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(t){return this.headerMarshaller.format(t)}}class nu{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const t of this.options.inputStream)yield this.options.decoder.decode(t)}}class su{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const t of this.options.messageStream)yield this.options.encoder.encode(t);this.options.includeEndFrame&&(yield new Uint8Array(0))}}class iu{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const t of this.options.messageStream){const r=await this.options.deserializer(t);r!==void 0&&(yield r)}}}class ou{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const t of this.options.inputStream)yield this.options.serializer(t)}}const be=e=>{if(typeof e=="function")return e;const t=Promise.resolve(e);return()=>t},au="X-Amz-Algorithm",cu="X-Amz-Credential",qi="X-Amz-Date",uu="X-Amz-SignedHeaders",du="X-Amz-Expires",zi="X-Amz-Signature",Vi="X-Amz-Security-Token",Gi="authorization",Wi=qi.toLowerCase(),lu="date",fu=[Gi,Wi,lu],hu=zi.toLowerCase(),Vr="x-amz-content-sha256",pu=Vi.toLowerCase(),gu={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},mu=/^proxy-/,yu=/^sec-/,Yt="AWS4-HMAC-SHA256",bu="AWS4-HMAC-SHA256-PAYLOAD",wu="UNSIGNED-PAYLOAD",Eu=50,Ki="aws4_request",Au=60*60*24*7,Tt={},Qt=[],Jt=(e,t,r)=>`${e}/${t}/${r}/${Ki}`,xu=async(e,t,r,n,s)=>{const i=await zn(e,t.secretAccessKey,t.accessKeyId),o=`${r}:${n}:${s}:${fe(i)}:${t.sessionToken}`;if(o in Tt)return Tt[o];for(Qt.push(o);Qt.length>Eu;)delete Tt[Qt.shift()];let a=`AWS4${t.secretAccessKey}`;for(const c of[r,n,s,Ki])a=await zn(e,a,c);return Tt[o]=a},zn=(e,t,r)=>{const n=new e(t);return n.update(Ge(r)),n.digest()},Vn=({headers:e},t,r)=>{const n={};for(const s of Object.keys(e).sort()){if(e[s]==null)continue;const i=s.toLowerCase();(i in gu||t!=null&&t.has(i)||mu.test(i)||yu.test(i))&&(!r||r&&!r.has(i))||(n[i]=e[s].trim().replace(/\s+/g," "))}return n},Su=({query:e={}})=>{const t=[],r={};for(const n of Object.keys(e).sort()){if(n.toLowerCase()===hu)continue;t.push(n);const s=e[n];typeof s=="string"?r[n]=`${Le(n)}=${Le(s)}`:Array.isArray(s)&&(r[n]=s.slice(0).reduce((i,o)=>i.concat([`${Le(n)}=${Le(o)}`]),[]).sort().join("&"))}return t.map(n=>r[n]).filter(n=>n).join("&")},Xi=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]",er=async({headers:e,body:t},r)=>{for(const n of Object.keys(e))if(n.toLowerCase()===Vr)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||Xi(t)){const n=new r;return n.update(Ge(t)),fe(await n.digest())}return wu},vu=(e,t)=>{e=e.toLowerCase();for(const r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1},Zi=({headers:e,query:t,...r})=>({...r,headers:{...e},query:t?Cu(t):void 0}),Cu=e=>Object.keys(e).reduce((t,r)=>{const n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{}),Ru=(e,t={})=>{var s;const{headers:r,query:n={}}=typeof e.clone=="function"?e.clone():Zi(e);for(const i of Object.keys(r)){const o=i.toLowerCase();o.slice(0,6)==="x-amz-"&&!((s=t.unhoistableHeaders)!=null&&s.has(o))&&(n[i]=r[i],delete r[i])}return{...e,headers:r,query:n}},Gn=e=>{e=typeof e.clone=="function"?e.clone():Zi(e);for(const t of Object.keys(e.headers))fu.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},_u=e=>Bu(e).toISOString().replace(/\.\d{3}Z$/,"Z"),Bu=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;class Gr{constructor({applyChecksum:t,credentials:r,region:n,service:s,sha256:i,uriEscapePath:o=!0}){this.headerMarshaller=new Hi(qt,Bt),this.service=s,this.sha256=i,this.uriEscapePath=o,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=be(n),this.credentialProvider=be(r)}async presign(t,r={}){const{signingDate:n=new Date,expiresIn:s=3600,unsignableHeaders:i,unhoistableHeaders:o,signableHeaders:a,signingRegion:c,signingService:u}=r,d=await this.credentialProvider();this.validateResolvedCredentials(d);const f=c!=null?c:await this.regionProvider(),{longDate:p,shortDate:g}=kt(n);if(s>Au)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const w=Jt(g,f,u!=null?u:this.service),E=Ru(Gn(t),{unhoistableHeaders:o});d.sessionToken&&(E.query[Vi]=d.sessionToken),E.query[au]=Yt,E.query[cu]=`${d.accessKeyId}/${w}`,E.query[qi]=p,E.query[du]=s.toString(10);const S=Vn(E,i,a);return E.query[uu]=Wn(S),E.query[zi]=await this.getSignature(p,w,this.getSigningKey(d,f,g,u),this.createCanonicalRequest(E,S,await er(t,this.sha256))),E}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:s,signingRegion:i,signingService:o}){const a=i!=null?i:await this.regionProvider(),{shortDate:c,longDate:u}=kt(n),d=Jt(c,a,o!=null?o:this.service),f=await er({headers:{},body:r},this.sha256),p=new this.sha256;p.update(t);const g=fe(await p.digest()),w=[bu,u,d,s,g,f].join(`
`);return this.signString(w,{signingDate:n,signingRegion:a,signingService:o})}async signMessage(t,{signingDate:r=new Date,signingRegion:n,signingService:s}){return this.signEvent({headers:this.headerMarshaller.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:n,signingService:s,priorSignature:t.priorSignature}).then(o=>({message:t.message,signature:o}))}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:s}={}){const i=await this.credentialProvider();this.validateResolvedCredentials(i);const o=n!=null?n:await this.regionProvider(),{shortDate:a}=kt(r),c=new this.sha256(await this.getSigningKey(i,o,a,s));return c.update(Ge(t)),fe(await c.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:s,signingRegion:i,signingService:o}={}){const a=await this.credentialProvider();this.validateResolvedCredentials(a);const c=i!=null?i:await this.regionProvider(),u=Gn(t),{longDate:d,shortDate:f}=kt(r),p=Jt(f,c,o!=null?o:this.service);u.headers[Wi]=d,a.sessionToken&&(u.headers[pu]=a.sessionToken);const g=await er(u,this.sha256);!vu(Vr,u.headers)&&this.applyChecksum&&(u.headers[Vr]=g);const w=Vn(u,s,n),E=await this.getSignature(d,p,this.getSigningKey(a,c,f,o),this.createCanonicalRequest(u,w,g));return u.headers[Gi]=`${Yt} Credential=${a.accessKeyId}/${p}, SignedHeaders=${Wn(w)}, Signature=${E}`,u}createCanonicalRequest(t,r,n){const s=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${Su(t)}
${s.map(i=>`${i}:${r[i]}`).join(`
`)}

${s.join(";")}
${n}`}async createStringToSign(t,r,n){const s=new this.sha256;s.update(Ge(n));const i=await s.digest();return`${Yt}
${t}
${r}
${fe(i)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){const r=[];for(const i of t.split("/"))(i==null?void 0:i.length)!==0&&i!=="."&&(i===".."?r.pop():r.push(i));const n=`${t!=null&&t.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&(t!=null&&t.endsWith("/"))?"/":""}`;return encodeURIComponent(n).replace(/%2F/g,"/")}return t}async getSignature(t,r,n,s){const i=await this.createStringToSign(t,r,s),o=new this.sha256(await n);return o.update(Ge(i)),fe(await o.digest())}getSigningKey(t,r,n,s){return xu(this.sha256,t,n,r,s||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}}const kt=e=>{const t=_u(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},Wn=e=>Object.keys(e).sort().join(";"),Tu=3e5,ku=e=>{const t=e.credentials?Pu(e.credentials):e.credentialDefaultProvider(e),{signingEscapePath:r=!0,systemClockOffset:n=e.systemClockOffset||0,sha256:s}=e;let i;return e.signer?i=be(e.signer):e.regionInfoProvider?i=()=>be(e.region)().then(async o=>[await e.regionInfoProvider(o,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},o]).then(([o,a])=>{const{signingRegion:c,signingService:u}=o;e.signingRegion=e.signingRegion||c||a,e.signingName=e.signingName||u||e.serviceId;const d={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:s,uriEscapePath:r},f=e.signerConstructor||Gr;return new f(d)}):i=async o=>{o=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await be(e.region)(),properties:{}},o);const a=o.signingRegion,c=o.signingName;e.signingRegion=e.signingRegion||a,e.signingName=e.signingName||c||e.serviceId;const u={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:s,uriEscapePath:r},d=e.signerConstructor||Gr;return new d(u)},{...e,systemClockOffset:n,signingEscapePath:r,credentials:t,signer:i}},Pu=e=>typeof e=="function"?Ui(e,t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<Tu,t=>t.expiration!==void 0):be(e),Yi=e=>new Date(Date.now()+e),Nu=(e,t)=>Math.abs(Yi(t).getTime()-e)>=3e5,Kn=(e,t)=>{const r=Date.parse(e);return Nu(r,t)?r-Date.now():t},Ou=e=>(t,r)=>async function(n){var u,d,f,p;if(!de.isInstance(n.request))return t(n);const s=(f=(d=(u=r.endpointV2)==null?void 0:u.properties)==null?void 0:d.authSchemes)==null?void 0:f[0],i=(s==null?void 0:s.name)==="sigv4a"?(p=s==null?void 0:s.signingRegionSet)==null?void 0:p.join(","):void 0,o=await e.signer(s),a=await t({...n,request:await o.sign(n.request,{signingDate:Yi(e.systemClockOffset),signingRegion:i||r.signing_region,signingService:r.signing_service})}).catch(g=>{var E;const w=(E=g.ServerTime)!=null?E:Xn(g.$response);throw w&&(e.systemClockOffset=Kn(w,e.systemClockOffset)),g}),c=Xn(a.response);return c&&(e.systemClockOffset=Kn(c,e.systemClockOffset)),a},Xn=e=>{var t,r,n;return It.isInstance(e)?(n=(t=e.headers)==null?void 0:t.date)!=null?n:(r=e.headers)==null?void 0:r.Date:void 0},Mu={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},Fu=e=>({applyToStack:t=>{t.addRelativeTo(Ou(e),Mu)}});function Iu(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}const Du=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Qi=e=>Du.test(e)||e.startsWith("[")&&e.endsWith("]"),Uu=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),an=(e,t=!1)=>{if(!t)return Uu.test(e);const r=e.split(".");for(const n of r)if(!an(n))return!1;return!0},Wr={},_t="endpoints";function Me(e){return typeof e!="object"||e==null?e:"ref"in e?`$${Me(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(Me).join(", ")})`:JSON.stringify(e,null,2)}class he extends Error{constructor(t){super(t),this.name="EndpointError"}}const $u=(e,t)=>e===t,Lu=e=>{const t=e.split("."),r=[];for(const n of t){const s=n.indexOf("[");if(s!==-1){if(n.indexOf("]")!==n.length-1)throw new he(`Path: '${e}' does not end with ']'`);const i=n.slice(s+1,-1);if(Number.isNaN(parseInt(i)))throw new he(`Invalid array index: '${i}' in path: '${e}'`);s!==0&&r.push(n.slice(0,s)),r.push(i)}else r.push(n)}return r},Ji=(e,t)=>Lu(t).reduce((r,n)=>{if(typeof r!="object")throw new he(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e),Hu=e=>e!=null,ju=e=>!e,tr={[Ct.HTTP]:80,[Ct.HTTPS]:443},qu=e=>{const t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){const{hostname:p,port:g,protocol:w="",path:E="",query:S={}}=e,C=new URL(`${w}//${p}${g?`:${g}`:""}${E}`);return C.search=Object.entries(S).map(([O,$])=>`${O}=${$}`).join("&"),C}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;const r=t.href,{host:n,hostname:s,pathname:i,protocol:o,search:a}=t;if(a)return null;const c=o.slice(0,-1);if(!Object.values(Ct).includes(c))return null;const u=Qi(s),d=r.includes(`${n}:${tr[c]}`)||typeof e=="string"&&e.includes(`${n}:${tr[c]}`),f=`${n}${d?`:${tr[c]}`:""}`;return{scheme:c,authority:f,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:u}},zu=(e,t)=>e===t,Vu=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r),Gu=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),Wu={booleanEquals:$u,getAttr:Ji,isSet:Hu,isValidHostLabel:an,not:ju,parseURL:qu,stringEquals:zu,substring:Vu,uriEncode:Gu},eo=(e,t)=>{const r=[],n={...t.endpointParams,...t.referenceRecord};let s=0;for(;s<e.length;){const i=e.indexOf("{",s);if(i===-1){r.push(e.slice(s));break}r.push(e.slice(s,i));const o=e.indexOf("}",i);if(o===-1){r.push(e.slice(i));break}e[i+1]==="{"&&e[o+1]==="}"&&(r.push(e.slice(i+1,o)),s=o+2);const a=e.substring(i+1,o);if(a.includes("#")){const[c,u]=a.split("#");r.push(Ji(n[c],u))}else r.push(n[a]);s=o+1}return r.join("")},Ku=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],Vt=(e,t,r)=>{if(typeof e=="string")return eo(e,r);if(e.fn)return to(e,r);if(e.ref)return Ku(e,r);throw new he(`'${t}': ${String(e)} is not a string, function or reference.`)},to=({fn:e,argv:t},r)=>{const n=t.map(i=>["boolean","number"].includes(typeof i)?i:Vt(i,"arg",r)),s=e.split(".");return s[0]in Wr&&s[1]!=null?Wr[s[0]][s[1]](...n):Wu[e](...n)},Xu=({assign:e,...t},r)=>{var s,i;if(e&&e in r.referenceRecord)throw new he(`'${e}' is already defined in Reference Record.`);const n=to(t,r);return(i=(s=r.logger)==null?void 0:s.debug)==null||i.call(s,_t,`evaluateCondition: ${Me(t)} = ${Me(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}},cn=(e=[],t)=>{var n,s;const r={};for(const i of e){const{result:o,toAssign:a}=Xu(i,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!o)return{result:o};a&&(r[a.name]=a.value,(s=(n=t.logger)==null?void 0:n.debug)==null||s.call(n,_t,`assign: ${a.name} := ${Me(a.value)}`))}return{result:!0,referenceRecord:r}},Zu=(e,t)=>Object.entries(e).reduce((r,[n,s])=>({...r,[n]:s.map(i=>{const o=Vt(i,"Header value entry",t);if(typeof o!="string")throw new he(`Header '${n}' value '${o}' is not a string`);return o})}),{}),ro=(e,t)=>{if(Array.isArray(e))return e.map(r=>ro(r,t));switch(typeof e){case"string":return eo(e,t);case"object":if(e===null)throw new he(`Unexpected endpoint property: ${e}`);return no(e,t);case"boolean":return e;default:throw new he(`Unexpected endpoint property type: ${typeof e}`)}},no=(e,t)=>Object.entries(e).reduce((r,[n,s])=>({...r,[n]:ro(s,t)}),{}),Yu=(e,t)=>{const r=Vt(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new he(`Endpoint URL must be a string, got ${typeof r}`)},Qu=(e,t)=>{var d,f;const{conditions:r,endpoint:n}=e,{result:s,referenceRecord:i}=cn(r,t);if(!s)return;const o={...t,referenceRecord:{...t.referenceRecord,...i}},{url:a,properties:c,headers:u}=n;return(f=(d=t.logger)==null?void 0:d.debug)==null||f.call(d,_t,`Resolving endpoint from template: ${Me(n)}`),{...u!=null&&{headers:Zu(u,o)},...c!=null&&{properties:no(c,o)},url:Yu(a,o)}},Ju=(e,t)=>{const{conditions:r,error:n}=e,{result:s,referenceRecord:i}=cn(r,t);if(s)throw new he(Vt(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...i}}))},ed=(e,t)=>{const{conditions:r,rules:n}=e,{result:s,referenceRecord:i}=cn(r,t);if(s)return so(n,{...t,referenceRecord:{...t.referenceRecord,...i}})},so=(e,t)=>{for(const r of e)if(r.type==="endpoint"){const n=Qu(r,t);if(n)return n}else if(r.type==="error")Ju(r,t);else if(r.type==="tree"){const n=ed(r,t);if(n)return n}else throw new he(`Unknown endpoint rule: ${r}`);throw new he("Rules evaluation failed")},td=(e,t)=>{var u,d,f,p,g,w;const{endpointParams:r,logger:n}=t,{parameters:s,rules:i}=e;(d=(u=t.logger)==null?void 0:u.debug)==null||d.call(u,`${_t} Initial EndpointParams: ${Me(r)}`);const o=Object.entries(s).filter(([,E])=>E.default!=null).map(([E,S])=>[E,S.default]);if(o.length>0)for(const[E,S]of o)r[E]=(f=r[E])!=null?f:S;const a=Object.entries(s).filter(([,E])=>E.required).map(([E])=>E);for(const E of a)if(r[E]==null)throw new he(`Missing required parameter: '${E}'`);const c=so(i,{endpointParams:r,logger:n,referenceRecord:{}});if((p=t.endpointParams)!=null&&p.Endpoint)try{const E=new URL(t.endpointParams.Endpoint),{protocol:S,port:C}=E;c.url.protocol=S,c.url.port=C}catch{}return(w=(g=t.logger)==null?void 0:g.debug)==null||w.call(g,`${_t} Resolved endpoint: ${Me(c)}`),c},io=(e,t=!1)=>{if(t){for(const r of e.split("."))if(!io(r))return!1;return!0}return!(!an(e)||e.length<3||e.length>63||e!==e.toLowerCase()||Qi(e))},rd=e=>{const t=e.split(":");if(t.length<6)return null;const[r,n,s,i,o,...a]=t;return r!=="arn"||n===""||s===""||a[0]===""?null:{partition:n,service:s,region:i,accountId:o,resourceId:a[0].includes("/")?a[0].split("/"):a}},nd=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],sd="1.1",id={partitions:nd,version:sd};let od=id;const ad=e=>{const{partitions:t}=od;for(const n of t){const{regions:s,outputs:i}=n;for(const[o,a]of Object.entries(s))if(o===e)return{...i,...a}}for(const n of t){const{regionRegex:s,outputs:i}=n;if(new RegExp(s).test(e))return{...i}}const r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},cd={isVirtualHostableS3Bucket:io,parseArn:rd,partition:ad};Wr.aws=cd;const Zn="user-agent",rr="x-amz-user-agent",Yn=" ",nr="/",ud=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,dd=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,Qn="-",ld=e=>(t,r)=>async n=>{var f,p;const{request:s}=n;if(!de.isInstance(s))return t(n);const{headers:i}=s,o=((f=r==null?void 0:r.userAgent)==null?void 0:f.map(sr))||[],a=(await e.defaultUserAgentProvider()).map(sr),c=((p=e==null?void 0:e.customUserAgent)==null?void 0:p.map(sr))||[],u=[].concat([...a,...o,...c]).join(Yn),d=[...a.filter(g=>g.startsWith("aws-sdk-")),...c].join(Yn);return e.runtime!=="browser"?(d&&(i[rr]=i[rr]?`${i[Zn]} ${d}`:d),i[Zn]=u):i[rr]=u,t({...n,request:s})},sr=e=>{var o;const t=e[0].split(nr).map(a=>a.replace(ud,Qn)).join(nr),r=(o=e[1])==null?void 0:o.replace(dd,Qn),n=t.indexOf(nr),s=t.substring(0,n);let i=t.substring(n+1);return s==="api"&&(i=i.toLowerCase()),[s,i,r].filter(a=>a&&a.length>0).reduce((a,c,u)=>{switch(u){case 0:return c;case 1:return`${a}/${c}`;default:return`${a}#${c}`}},"")},fd={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},hd=e=>({applyToStack:t=>{t.add(ld(e),fd)}});var Jn;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(Jn||(Jn={}));const pd=!1,gd=!1,oo=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),es=e=>oo(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,md=e=>{const{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return es(t);const n=await t();return es(n)},useFipsEndpoint:async()=>{const n=typeof t=="string"?t:await t();return oo(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}},yd=e=>({...e,eventStreamMarshaller:e.eventStreamSerdeProvider(e)}),ts="content-length";function bd(e){return t=>async r=>{const n=r.request;if(de.isInstance(n)){const{body:s,headers:i}=n;if(s&&Object.keys(i).map(o=>o.toLowerCase()).indexOf(ts)===-1)try{const o=e(s);n.headers={...n.headers,[ts]:String(o)}}catch{}}return t({...r,request:n})}}const wd={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Ed=e=>({applyToStack:t=>{t.add(bd(e.bodyLengthChecker),wd)}}),Ad=async e=>{const t=(e==null?void 0:e.Bucket)||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Rd(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Cd(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},xd=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Sd=/(\d+\.){3}\d+/,vd=/\.\./,Cd=e=>xd.test(e)&&!Sd.test(e)&&!vd.test(e),Rd=e=>{const[t,r,n,s,i,o]=e.split(":"),a=t==="arn"&&e.split(":").length>=6,c=[t,r,n,i,o].filter(Boolean).length===5;if(a&&!c)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return t==="arn"&&!!r&&!!n&&!!i&&!!o},_d=(e,t,r)=>{const n=async()=>{var i;const s=(i=r[e])!=null?i:r[t];return typeof s=="function"?s():s};return e==="endpoint"||t==="endpoint"?async()=>{const s=await n();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){const{protocol:i,hostname:o,port:a,path:c}=s;return`${i}//${o}${a?":"+a:""}${c}`}}return s}:n},Bd=async e=>{};function Td(e){const t={};if(e=e.replace(/^\?/,""),e)for(const r of e.split("&")){let[n,s=null]=r.split("=");n=decodeURIComponent(n),s&&(s=decodeURIComponent(s)),n in t?Array.isArray(t[n])?t[n].push(s):t[n]=[t[n],s]:t[n]=s}return t}const $t=e=>{if(typeof e=="string")return $t(new URL(e));const{hostname:t,pathname:r,port:n,protocol:s,search:i}=e;let o;return i&&(o=Td(i)),{hostname:t,port:n?parseInt(n):void 0,protocol:s,path:r,query:o}},ao=e=>typeof e=="object"?"url"in e?$t(e.url):e:$t(e),kd=async(e,t,r,n)=>{if(!r.endpoint){const o=await Bd(r.serviceId||"");o&&(r.endpoint=()=>Promise.resolve(ao(o)))}const s=await Pd(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,n)},Pd=async(e,t,r)=>{var i;const n={},s=((i=t==null?void 0:t.getEndpointParameterInstructions)==null?void 0:i.call(t))||{};for(const[o,a]of Object.entries(s))switch(a.type){case"staticContextParams":n[o]=a.value;break;case"contextParams":n[o]=e[a.name];break;case"clientContextParams":case"builtInParams":n[o]=await _d(a.name,o,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(s).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await Ad(n),n},Nd=({config:e,instructions:t})=>(r,n)=>async s=>{var a,c;const i=await kd(s.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=i,n.authSchemes=(a=i.properties)==null?void 0:a.authSchemes;const o=(c=n.authSchemes)==null?void 0:c[0];return o&&(n.signing_region=o.signingRegion,n.signing_service=o.signingName),r({...s})},Od=(e,t)=>(r,n)=>async s=>{const{response:i}=await r(s);try{const o=await t(i,e);return{response:i,output:o}}catch(o){if(Object.defineProperty(o,"$response",{value:i}),!("$metadata"in o)){const a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";o.message+=`
  `+a}throw o}},Md=(e,t)=>(r,n)=>async s=>{var a;const i=(a=n.endpointV2)!=null&&a.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!i)throw new Error("No valid endpoint provider available.");const o=await t(s.input,{...e,endpoint:i});return r({...s,request:o})},Fd={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},co={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Id(e,t,r){return{applyToStack:n=>{n.add(Od(e,r),Fd),n.add(Md(e,t),co)}}}const Dd={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:co.name},Ud=(e,t)=>({applyToStack:r=>{r.addRelativeTo(Nd({config:e,instructions:t}),Dd)}}),$d=e=>{var i,o,a;const t=(i=e.tls)!=null?i:!0,{endpoint:r}=e,n=r!=null?async()=>ao(await be(r)()):void 0;return{...e,endpoint:n,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:be((o=e.useDualstackEndpoint)!=null?o:!1),useFipsEndpoint:be((a=e.useFipsEndpoint)!=null?a:!1)}};var We;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(We||(We={}));const Lt=3,Ld=We.STANDARD,Hd=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],jd=["TimeoutError","RequestTimeout","RequestTimeoutException"],qd=[500,502,503,504],zd=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],uo=e=>{var t,r;return((t=e.$metadata)==null?void 0:t.httpStatusCode)===429||Hd.includes(e.name)||((r=e.$retryable)==null?void 0:r.throttling)==!0},lo=e=>{var t;return jd.includes(e.name)||zd.includes((e==null?void 0:e.code)||"")||qd.includes(((t=e.$metadata)==null?void 0:t.httpStatusCode)||0)},Vd=e=>{var t;if(((t=e.$metadata)==null?void 0:t.httpStatusCode)!==void 0){const r=e.$metadata.httpStatusCode;return 500<=r&&r<=599&&!lo(e)}return!1};class Gd{constructor(t){var n,s,i,o,a;this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(n=t==null?void 0:t.beta)!=null?n:.7,this.minCapacity=(s=t==null?void 0:t.minCapacity)!=null?s:1,this.minFillRate=(i=t==null?void 0:t.minFillRate)!=null?i:.5,this.scaleConstant=(o=t==null?void 0:t.scaleConstant)!=null?o:.4,this.smooth=(a=t==null?void 0:t.smooth)!=null?a:.8;const r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){const r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){const t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}const r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),uo(t)){const s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());const n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){const n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}}const Kr=100,fo=20*1e3,Wd=500,rs=500,Kd=5,Xd=10,Zd=1,Yd="amz-sdk-invocation-id",Qd="amz-sdk-request",Jd=()=>{let e=Kr;return{computeNextBackoffDelay:n=>Math.floor(Math.min(fo,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}},ns=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(fo,e),getRetryCost:()=>r});class ho{constructor(t){this.maxAttempts=t,this.mode=We.STANDARD,this.capacity=rs,this.retryBackoffStrategy=Jd(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return ns({retryDelay:Kr,retryCount:0})}async refreshRetryTokenForRetry(t,r){const n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){const s=r.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?Wd:Kr);const i=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),o=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,i):i,a=this.getCapacityCost(s);return this.capacity-=a,ns({retryDelay:o,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){var r;this.capacity=Math.max(rs,this.capacity+((r=t.getRetryCost())!=null?r:Zd))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Lt}`),Lt}}shouldRetry(t,r,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?Xd:Kd}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}}class el{constructor(t,r){this.maxAttemptsProvider=t,this.mode=We.ADAPTIVE;const{rateLimiter:n}=r!=null?r:{};this.rateLimiter=n!=null?n:new Gd,this.standardRetryStrategy=new ho(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}}var Pt,tl=new Uint8Array(16);function rl(){if(!Pt&&(Pt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Pt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Pt(tl)}const nl=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function sl(e){return typeof e=="string"&&nl.test(e)}var Y=[];for(var ir=0;ir<256;++ir)Y.push((ir+256).toString(16).substr(1));function il(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(Y[e[t+0]]+Y[e[t+1]]+Y[e[t+2]]+Y[e[t+3]]+"-"+Y[e[t+4]]+Y[e[t+5]]+"-"+Y[e[t+6]]+Y[e[t+7]]+"-"+Y[e[t+8]]+Y[e[t+9]]+"-"+Y[e[t+10]]+Y[e[t+11]]+Y[e[t+12]]+Y[e[t+13]]+Y[e[t+14]]+Y[e[t+15]]).toLowerCase();if(!sl(r))throw TypeError("Stringified UUID is invalid");return r}function ol(e,t,r){e=e||{};var n=e.random||(e.rng||rl)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(var s=0;s<16;++s)t[r+s]=n[s];return t}return il(n)}const al=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`),cl=e=>{var n;const{retryStrategy:t}=e,r=be((n=e.maxAttempts)!=null?n:Lt);return{...e,maxAttempts:r,retryStrategy:async()=>t||(await be(e.retryMode)()===We.ADAPTIVE?new el(r):new ho(r))}},ul=e=>(t,r)=>async n=>{let s=await e.retryStrategy();const i=await e.maxAttempts();if(dl(s)){s=s;let o=await s.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,u=0;const{request:d}=n;for(de.isInstance(d)&&(d.headers[Yd]=ol());;)try{de.isInstance(d)&&(d.headers[Qd]=`attempt=${c+1}; max=${i}`);const{response:f,output:p}=await t(n);return s.recordSuccess(o),p.$metadata.attempts=c+1,p.$metadata.totalRetryDelay=u,{response:f,output:p}}catch(f){const p=ll(f);a=al(f);try{o=await s.refreshRetryTokenForRetry(o,p)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=u,a}c=o.getRetryCount();const g=o.getRetryDelay();u+=g,await new Promise(w=>setTimeout(w,g))}}else return s=s,s!=null&&s.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(t,n)},dl=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",ll=e=>{const t={errorType:fl(e)},r=gl(e.$response);return r&&(t.retryAfterHint=r),t},fl=e=>uo(e)?"THROTTLING":lo(e)?"TRANSIENT":Vd(e)?"SERVER_ERROR":"CLIENT_ERROR",hl={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},pl=e=>({applyToStack:t=>{t.add(ul(e),hl)}}),gl=e=>{if(!It.isInstance(e))return;const t=Object.keys(e.headers).find(i=>i.toLowerCase()==="retry-after");if(!t)return;const r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)},ml=e=>{var t,r,n,s,i,o;return{...e,useFipsEndpoint:(t=e.useFipsEndpoint)!=null?t:!1,useDualstackEndpoint:(r=e.useDualstackEndpoint)!=null?r:!1,forcePathStyle:(n=e.forcePathStyle)!=null?n:!1,useAccelerateEndpoint:(s=e.useAccelerateEndpoint)!=null?s:!1,useGlobalEndpoint:(i=e.useGlobalEndpoint)!=null?i:!1,disableMultiregionAccessPoints:(o=e.disableMultiregionAccessPoints)!=null?o:!1,defaultSigningName:"s3"}},yl="@aws-sdk/client-s3",bl="AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native",wl="3.441.0",El={build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo s3",test:"yarn test:unit","test:e2e":"yarn test:e2e:node && yarn test:e2e:browser","test:e2e:browser":"ts-mocha test/**/*.browser.ispec.ts && karma start karma.conf.js","test:e2e:node":"jest --c jest.config.e2e.js","test:unit":"ts-mocha test/unit/**/*.spec.ts"},Al="./dist-cjs/index.js",xl="./dist-types/index.d.ts",Sl="./dist-es/index.js",vl=!1,Cl={"@aws-crypto/sha1-browser":"3.0.0","@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.441.0","@aws-sdk/core":"3.441.0","@aws-sdk/credential-provider-node":"3.441.0","@aws-sdk/middleware-bucket-endpoint":"3.433.0","@aws-sdk/middleware-expect-continue":"3.433.0","@aws-sdk/middleware-flexible-checksums":"3.433.0","@aws-sdk/middleware-host-header":"3.433.0","@aws-sdk/middleware-location-constraint":"3.433.0","@aws-sdk/middleware-logger":"3.433.0","@aws-sdk/middleware-recursion-detection":"3.433.0","@aws-sdk/middleware-sdk-s3":"3.440.0","@aws-sdk/middleware-signing":"3.433.0","@aws-sdk/middleware-ssec":"3.433.0","@aws-sdk/middleware-user-agent":"3.438.0","@aws-sdk/region-config-resolver":"3.433.0","@aws-sdk/signature-v4-multi-region":"3.437.0","@aws-sdk/types":"3.433.0","@aws-sdk/util-endpoints":"3.438.0","@aws-sdk/util-user-agent-browser":"3.433.0","@aws-sdk/util-user-agent-node":"3.437.0","@aws-sdk/xml-builder":"3.310.0","@smithy/config-resolver":"^2.0.16","@smithy/eventstream-serde-browser":"^2.0.12","@smithy/eventstream-serde-config-resolver":"^2.0.12","@smithy/eventstream-serde-node":"^2.0.12","@smithy/fetch-http-handler":"^2.2.4","@smithy/hash-blob-browser":"^2.0.12","@smithy/hash-node":"^2.0.12","@smithy/hash-stream-node":"^2.0.12","@smithy/invalid-dependency":"^2.0.12","@smithy/md5-js":"^2.0.12","@smithy/middleware-content-length":"^2.0.14","@smithy/middleware-endpoint":"^2.1.3","@smithy/middleware-retry":"^2.0.18","@smithy/middleware-serde":"^2.0.12","@smithy/middleware-stack":"^2.0.6","@smithy/node-config-provider":"^2.1.3","@smithy/node-http-handler":"^2.1.8","@smithy/protocol-http":"^3.0.8","@smithy/smithy-client":"^2.1.12","@smithy/types":"^2.4.0","@smithy/url-parser":"^2.0.12","@smithy/util-base64":"^2.0.0","@smithy/util-body-length-browser":"^2.0.0","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.16","@smithy/util-defaults-mode-node":"^2.0.21","@smithy/util-endpoints":"^1.0.2","@smithy/util-retry":"^2.0.5","@smithy/util-stream":"^2.0.17","@smithy/util-utf8":"^2.0.0","@smithy/util-waiter":"^2.0.12","fast-xml-parser":"4.2.5",tslib:"^2.5.0"},Rl={"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},_l={node:">=14.0.0"},Bl={"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},Tl=["dist-*/**"],kl={name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},Pl="Apache-2.0",Nl={"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},Ol="https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3",Ml={type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-s3"},Fl={name:yl,description:bl,version:wl,scripts:El,main:Al,types:xl,module:Sl,sideEffects:vl,dependencies:Cl,devDependencies:Rl,engines:_l,typesVersions:Bl,files:Tl,author:kl,license:Pl,browser:Nl,"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:Ol,repository:Ml};var po={},nt={},st={},it={},ss;function go(){if(ss)return it;ss=1,Object.defineProperty(it,"__esModule",{value:!0}),it.isEmptyData=void 0;function e(t){return typeof t=="string"?t.length===0:t.byteLength===0}return it.isEmptyData=e,it}var or={},is;function mo(){return is||(is=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_DATA_SHA_1=e.SHA_1_HMAC_ALGO=e.SHA_1_HASH=void 0,e.SHA_1_HASH={name:"SHA-1"},e.SHA_1_HMAC_ALGO={name:"HMAC",hash:e.SHA_1_HASH},e.EMPTY_DATA_SHA_1=new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9])}(or)),or}const Il={};function Dl(){return typeof window<"u"?window:typeof self<"u"?self:Il}const Ul=Object.freeze(Object.defineProperty({__proto__:null,locateWindow:Dl},Symbol.toStringTag,{value:"Module"})),Ze=tn(Ul);var os;function yo(){if(os)return st;os=1,Object.defineProperty(st,"__esModule",{value:!0}),st.Sha1=void 0;var e=go(),t=mo(),r=zt,n=Ze,s=function(){function a(c){this.secret=c,this.reset()}return a.prototype.update=function(c){var u=this;(0,e.isEmptyData)(c)||(this.operation=this.operation.then(function(d){return d.onerror=function(){u.operation=Promise.reject(new Error("Error encountered updating hash"))},d.process(o(c)),d}),this.operation.catch(function(){}))},a.prototype.digest=function(){return this.operation.then(function(c){return new Promise(function(u,d){c.onerror=function(){d(new Error("Error encountered finalizing hash"))},c.oncomplete=function(){c.result&&u(new Uint8Array(c.result)),d(new Error("Error encountered finalizing hash"))},c.finish()})})},a.prototype.reset=function(){this.secret?(this.operation=i(this.secret).then(function(c){return(0,n.locateWindow)().msCrypto.subtle.sign(t.SHA_1_HMAC_ALGO,c)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,n.locateWindow)().msCrypto.subtle.digest("SHA-1"))},a}();st.Sha1=s;function i(a){return new Promise(function(c,u){var d=(0,n.locateWindow)().msCrypto.subtle.importKey("raw",o(a),t.SHA_1_HMAC_ALGO,!1,["sign"]);d.oncomplete=function(){d.result&&c(d.result),u(new Error("ImportKey completed without importing key."))},d.onerror=function(){u(new Error("ImportKey failed to import key."))}})}function o(a){return typeof a=="string"?(0,r.fromUtf8)(a):ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(a)}return st}var ot={},as;function bo(){if(as)return ot;as=1,Object.defineProperty(ot,"__esModule",{value:!0}),ot.Sha1=void 0;var e=zt,t=go(),r=mo(),n=Ze,s=function(){function o(a){this.toHash=new Uint8Array(0),a!==void 0&&(this.key=new Promise(function(c,u){(0,n.locateWindow)().crypto.subtle.importKey("raw",i(a),r.SHA_1_HMAC_ALGO,!1,["sign"]).then(c,u)}),this.key.catch(function(){}))}return o.prototype.update=function(a){if(!(0,t.isEmptyData)(a)){var c=i(a),u=new Uint8Array(this.toHash.byteLength+c.byteLength);u.set(this.toHash,0),u.set(c,this.toHash.byteLength),this.toHash=u}},o.prototype.digest=function(){var a=this;return this.key?this.key.then(function(c){return(0,n.locateWindow)().crypto.subtle.sign(r.SHA_1_HMAC_ALGO,c,a.toHash).then(function(u){return new Uint8Array(u)})}):(0,t.isEmptyData)(this.toHash)?Promise.resolve(r.EMPTY_DATA_SHA_1):Promise.resolve().then(function(){return(0,n.locateWindow)().crypto.subtle.digest(r.SHA_1_HASH,a.toHash)}).then(function(c){return Promise.resolve(new Uint8Array(c))})},o.prototype.reset=function(){this.toHash=new Uint8Array(0)},o}();ot.Sha1=s;function i(o){return typeof o=="string"?(0,e.fromUtf8)(o):ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(o)}return ot}var ar={},ge={},cs;function $l(){if(cs)return ge;cs=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.supportsZeroByteGCM=ge.supportsSubtleCrypto=ge.supportsSecureRandom=ge.supportsWebCrypto=void 0;var e=we,t=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function r(o){if(n(o)&&typeof o.crypto.subtle=="object"){var a=o.crypto.subtle;return s(a)}return!1}ge.supportsWebCrypto=r;function n(o){if(typeof o=="object"&&typeof o.crypto=="object"){var a=o.crypto.getRandomValues;return typeof a=="function"}return!1}ge.supportsSecureRandom=n;function s(o){return o&&t.every(function(a){return typeof o[a]=="function"})}ge.supportsSubtleCrypto=s;function i(o){return e.__awaiter(this,void 0,void 0,function(){var a,c;return e.__generator(this,function(u){switch(u.label){case 0:if(!s(o))return[2,!1];u.label=1;case 1:return u.trys.push([1,4,,5]),[4,o.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return a=u.sent(),[4,o.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},a,new Uint8Array(0))];case 3:return c=u.sent(),[2,c.byteLength===16];case 4:return u.sent(),[2,!1];case 5:return[2]}})})}return ge.supportsZeroByteGCM=i,ge}var us;function wo(){return us||(us=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=we;t.__exportStar($l(),e)}(ar)),ar}var cr={},ur={},ds;function Ll(){return ds||(ds=1,Object.defineProperty(ur,"__esModule",{value:!0})),ur}var dr={},ls;function Hl(){return ls||(ls=1,Object.defineProperty(dr,"__esModule",{value:!0})),dr}var lr={},fs;function jl(){return fs||(fs=1,Object.defineProperty(lr,"__esModule",{value:!0})),lr}var fr={},hs;function ql(){return hs||(hs=1,Object.defineProperty(fr,"__esModule",{value:!0})),fr}var at={},ps;function zl(){if(ps)return at;ps=1,Object.defineProperty(at,"__esModule",{value:!0}),at.isMsWindow=void 0;var e=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function t(n){return"MSInputMethodContext"in n&&"msCrypto"in n}function r(n){if(t(n)&&n.msCrypto.subtle!==void 0){var s=n.msCrypto,i=s.getRandomValues,o=s.subtle;return e.map(function(a){return o[a]}).concat(i).every(function(a){return typeof a=="function"})}return!1}return at.isMsWindow=r,at}var gs;function Eo(){return gs||(gs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=we;t.__exportStar(Ll(),e),t.__exportStar(Hl(),e),t.__exportStar(jl(),e),t.__exportStar(ql(),e),t.__exportStar(zl(),e)}(cr)),cr}var ms;function Vl(){if(ms)return nt;ms=1,Object.defineProperty(nt,"__esModule",{value:!0}),nt.Sha1=void 0;var e=yo(),t=bo(),r=wo(),n=Eo(),s=Ze,i=Fe(),o=function(){function a(c){if((0,r.supportsWebCrypto)((0,s.locateWindow)()))this.hash=new t.Sha1(c);else if((0,n.isMsWindow)((0,s.locateWindow)()))this.hash=new e.Sha1(c);else throw new Error("SHA1 not supported")}return a.prototype.update=function(c,u){this.hash.update((0,i.convertToBuffer)(c))},a.prototype.digest=function(){return this.hash.digest()},a.prototype.reset=function(){this.hash.reset()},a}();return nt.Sha1=o,nt}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WebCryptoSha1=e.Ie11Sha1=void 0;var t=we;t.__exportStar(Vl(),e);var r=yo();Object.defineProperty(e,"Ie11Sha1",{enumerable:!0,get:function(){return r.Sha1}});var n=bo();Object.defineProperty(e,"WebCryptoSha1",{enumerable:!0,get:function(){return n.Sha1}})})(po);var Ao={},ct={},ut={},dt={},ys;function Gl(){if(ys)return dt;ys=1,Object.defineProperty(dt,"__esModule",{value:!0}),dt.isEmptyData=void 0;function e(t){return typeof t=="string"?t.length===0:t.byteLength===0}return dt.isEmptyData=e,dt}var hr={},bs;function xo(){return bs||(bs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_DATA_SHA_256=e.SHA_256_HMAC_ALGO=e.SHA_256_HASH=void 0,e.SHA_256_HASH={name:"SHA-256"},e.SHA_256_HMAC_ALGO={name:"HMAC",hash:e.SHA_256_HASH},e.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])}(hr)),hr}var ws;function So(){if(ws)return ut;ws=1,Object.defineProperty(ut,"__esModule",{value:!0}),ut.Sha256=void 0;var e=Gl(),t=xo(),r=zt,n=Ze,s=function(){function a(c){this.secret=c,this.reset()}return a.prototype.update=function(c){var u=this;(0,e.isEmptyData)(c)||(this.operation=this.operation.then(function(d){return d.onerror=function(){u.operation=Promise.reject(new Error("Error encountered updating hash"))},d.process(o(c)),d}),this.operation.catch(function(){}))},a.prototype.digest=function(){return this.operation.then(function(c){return new Promise(function(u,d){c.onerror=function(){d(new Error("Error encountered finalizing hash"))},c.oncomplete=function(){c.result&&u(new Uint8Array(c.result)),d(new Error("Error encountered finalizing hash"))},c.finish()})})},a.prototype.reset=function(){this.secret?(this.operation=i(this.secret).then(function(c){return(0,n.locateWindow)().msCrypto.subtle.sign(t.SHA_256_HMAC_ALGO,c)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,n.locateWindow)().msCrypto.subtle.digest("SHA-256"))},a}();ut.Sha256=s;function i(a){return new Promise(function(c,u){var d=(0,n.locateWindow)().msCrypto.subtle.importKey("raw",o(a),t.SHA_256_HMAC_ALGO,!1,["sign"]);d.oncomplete=function(){d.result&&c(d.result),u(new Error("ImportKey completed without importing key."))},d.onerror=function(){u(new Error("ImportKey failed to import key."))}})}function o(a){return typeof a=="string"?(0,r.fromUtf8)(a):ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(a)}return ut}var lt={},Es;function vo(){if(Es)return lt;Es=1,Object.defineProperty(lt,"__esModule",{value:!0}),lt.Sha256=void 0;var e=Fe(),t=xo(),r=Ze,n=function(){function s(i){this.toHash=new Uint8Array(0),this.secret=i,this.reset()}return s.prototype.update=function(i){if(!(0,e.isEmptyData)(i)){var o=(0,e.convertToBuffer)(i),a=new Uint8Array(this.toHash.byteLength+o.byteLength);a.set(this.toHash,0),a.set(o,this.toHash.byteLength),this.toHash=a}},s.prototype.digest=function(){var i=this;return this.key?this.key.then(function(o){return(0,r.locateWindow)().crypto.subtle.sign(t.SHA_256_HMAC_ALGO,o,i.toHash).then(function(a){return new Uint8Array(a)})}):(0,e.isEmptyData)(this.toHash)?Promise.resolve(t.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,r.locateWindow)().crypto.subtle.digest(t.SHA_256_HASH,i.toHash)}).then(function(o){return Promise.resolve(new Uint8Array(o))})},s.prototype.reset=function(){var i=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(o,a){(0,r.locateWindow)().crypto.subtle.importKey("raw",(0,e.convertToBuffer)(i.secret),t.SHA_256_HMAC_ALGO,!1,["sign"]).then(o,a)}),this.key.catch(function(){}))},s}();return lt.Sha256=n,lt}var pr={},ft={},le={},As;function Co(){return As||(As=1,Object.defineProperty(le,"__esModule",{value:!0}),le.MAX_HASHABLE_LENGTH=le.INIT=le.KEY=le.DIGEST_LENGTH=le.BLOCK_SIZE=void 0,le.BLOCK_SIZE=64,le.DIGEST_LENGTH=32,le.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),le.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],le.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1),le}var ht={},xs;function Wl(){if(xs)return ht;xs=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.RawSha256=void 0;var e=Co(),t=function(){function r(){this.state=Int32Array.from(e.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return r.prototype.update=function(n){if(this.finished)throw new Error("Attempted to update an already finished hash.");var s=0,i=n.byteLength;if(this.bytesHashed+=i,this.bytesHashed*8>e.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;i>0;)this.buffer[this.bufferLength++]=n[s++],i--,this.bufferLength===e.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},r.prototype.digest=function(){if(!this.finished){var n=this.bytesHashed*8,s=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),i=this.bufferLength;if(s.setUint8(this.bufferLength++,128),i%e.BLOCK_SIZE>=e.BLOCK_SIZE-8){for(var o=this.bufferLength;o<e.BLOCK_SIZE;o++)s.setUint8(o,0);this.hashBuffer(),this.bufferLength=0}for(var o=this.bufferLength;o<e.BLOCK_SIZE-8;o++)s.setUint8(o,0);s.setUint32(e.BLOCK_SIZE-8,Math.floor(n/4294967296),!0),s.setUint32(e.BLOCK_SIZE-4,n),this.hashBuffer(),this.finished=!0}for(var a=new Uint8Array(e.DIGEST_LENGTH),o=0;o<8;o++)a[o*4]=this.state[o]>>>24&255,a[o*4+1]=this.state[o]>>>16&255,a[o*4+2]=this.state[o]>>>8&255,a[o*4+3]=this.state[o]>>>0&255;return a},r.prototype.hashBuffer=function(){for(var n=this,s=n.buffer,i=n.state,o=i[0],a=i[1],c=i[2],u=i[3],d=i[4],f=i[5],p=i[6],g=i[7],w=0;w<e.BLOCK_SIZE;w++){if(w<16)this.temp[w]=(s[w*4]&255)<<24|(s[w*4+1]&255)<<16|(s[w*4+2]&255)<<8|s[w*4+3]&255;else{var E=this.temp[w-2],S=(E>>>17|E<<15)^(E>>>19|E<<13)^E>>>10;E=this.temp[w-15];var C=(E>>>7|E<<25)^(E>>>18|E<<14)^E>>>3;this.temp[w]=(S+this.temp[w-7]|0)+(C+this.temp[w-16]|0)}var O=(((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&f^~d&p)|0)+(g+(e.KEY[w]+this.temp[w]|0)|0)|0,$=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&a^o&c^a&c)|0;g=p,p=f,f=d,d=u+O|0,u=c,c=a,a=o,o=O+$|0}i[0]+=o,i[1]+=a,i[2]+=c,i[3]+=u,i[4]+=d,i[5]+=f,i[6]+=p,i[7]+=g},r}();return ht.RawSha256=t,ht}var Ss;function Kl(){if(Ss)return ft;Ss=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.Sha256=void 0;var e=we,t=Co(),r=Wl(),n=Fe(),s=function(){function o(a){this.secret=a,this.hash=new r.RawSha256,this.reset()}return o.prototype.update=function(a){if(!((0,n.isEmptyData)(a)||this.error))try{this.hash.update((0,n.convertToBuffer)(a))}catch(c){this.error=c}},o.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},o.prototype.digest=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(a){return[2,this.digestSync()]})})},o.prototype.reset=function(){if(this.hash=new r.RawSha256,this.secret){this.outer=new r.RawSha256;var a=i(this.secret),c=new Uint8Array(t.BLOCK_SIZE);c.set(a);for(var u=0;u<t.BLOCK_SIZE;u++)a[u]^=54,c[u]^=92;this.hash.update(a),this.outer.update(c);for(var u=0;u<a.byteLength;u++)a[u]=0}},o}();ft.Sha256=s;function i(o){var a=(0,n.convertToBuffer)(o);if(a.byteLength>t.BLOCK_SIZE){var c=new r.RawSha256;c.update(a),a=c.digest()}var u=new Uint8Array(t.BLOCK_SIZE);return u.set(a),u}return ft}var vs;function Xl(){return vs||(vs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=we;t.__exportStar(Kl(),e)}(pr)),pr}var Cs;function Zl(){if(Cs)return ct;Cs=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.Sha256=void 0;var e=So(),t=vo(),r=Xl(),n=wo(),s=Eo(),i=Ze,o=Fe(),a=function(){function c(u){(0,n.supportsWebCrypto)((0,i.locateWindow)())?this.hash=new t.Sha256(u):(0,s.isMsWindow)((0,i.locateWindow)())?this.hash=new e.Sha256(u):this.hash=new r.Sha256(u)}return c.prototype.update=function(u,d){this.hash.update((0,o.convertToBuffer)(u))},c.prototype.digest=function(){return this.hash.digest()},c.prototype.reset=function(){this.hash.reset()},c}();return ct.Sha256=a,ct}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WebCryptoSha256=e.Ie11Sha256=void 0;var t=we;t.__exportStar(Zl(),e);var r=So();Object.defineProperty(e,"Ie11Sha256",{enumerable:!0,get:function(){return r.Sha256}});var n=vo();Object.defineProperty(e,"WebCryptoSha256",{enumerable:!0,get:function(){return n.Sha256}})})(Ao);const Yl={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},Ro={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},H={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},ie={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Ne={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class m{static getFirstMatch(t,r){const n=r.match(t);return n&&n.length>0&&n[1]||""}static getSecondMatch(t,r){const n=r.match(t);return n&&n.length>1&&n[2]||""}static matchAndReturnConst(t,r,n){if(t.test(r))return n}static getWindowsVersionName(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(t){const r=t.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(r.push(0),r[0]===10)switch(r[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(t){const r=t.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(r.push(0),!(r[0]===1&&r[1]<5)){if(r[0]===1&&r[1]<6)return"Cupcake";if(r[0]===1&&r[1]>=6)return"Donut";if(r[0]===2&&r[1]<2)return"Eclair";if(r[0]===2&&r[1]===2)return"Froyo";if(r[0]===2&&r[1]>2)return"Gingerbread";if(r[0]===3)return"Honeycomb";if(r[0]===4&&r[1]<1)return"Ice Cream Sandwich";if(r[0]===4&&r[1]<4)return"Jelly Bean";if(r[0]===4&&r[1]>=4)return"KitKat";if(r[0]===5)return"Lollipop";if(r[0]===6)return"Marshmallow";if(r[0]===7)return"Nougat";if(r[0]===8)return"Oreo";if(r[0]===9)return"Pie"}}static getVersionPrecision(t){return t.split(".").length}static compareVersions(t,r,n=!1){const s=m.getVersionPrecision(t),i=m.getVersionPrecision(r);let o=Math.max(s,i),a=0;const c=m.map([t,r],u=>{const d=o-m.getVersionPrecision(u),f=u+new Array(d+1).join(".0");return m.map(f.split("."),p=>new Array(20-p.length).join("0")+p).reverse()});for(n&&(a=o-Math.min(s,i)),o-=1;o>=a;){if(c[0][o]>c[1][o])return 1;if(c[0][o]===c[1][o]){if(o===a)return 0;o-=1}else if(c[0][o]<c[1][o])return-1}}static map(t,r){const n=[];let s;if(Array.prototype.map)return Array.prototype.map.call(t,r);for(s=0;s<t.length;s+=1)n.push(r(t[s]));return n}static find(t,r){let n,s;if(Array.prototype.find)return Array.prototype.find.call(t,r);for(n=0,s=t.length;n<s;n+=1){const i=t[n];if(r(i,n))return i}}static assign(t,...r){const n=t;let s,i;if(Object.assign)return Object.assign(t,...r);for(s=0,i=r.length;s<i;s+=1){const o=r[s];typeof o=="object"&&o!==null&&Object.keys(o).forEach(c=>{n[c]=o[c]})}return t}static getBrowserAlias(t){return Yl[t]}static getBrowserTypeByAlias(t){return Ro[t]||""}}const I=/version\/(\d+(\.?_?\d+)+)/i,Ql=[{test:[/googlebot/i],describe(e){const t={name:"Googlebot"},r=m.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||m.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/opera/i],describe(e){const t={name:"Opera"},r=m.getFirstMatch(I,e)||m.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe(e){const t={name:"Opera"},r=m.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||m.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:"Samsung Internet for Android"},r=m.getFirstMatch(I,e)||m.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe(e){const t={name:"NAVER Whale Browser"},r=m.getFirstMatch(I,e)||m.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe(e){const t={name:"MZ Browser"},r=m.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||m.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/focus/i],describe(e){const t={name:"Focus"},r=m.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||m.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/swing/i],describe(e){const t={name:"Swing"},r=m.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||m.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/coast/i],describe(e){const t={name:"Opera Coast"},r=m.getFirstMatch(I,e)||m.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){const t={name:"Opera Touch"},r=m.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||m.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe(e){const t={name:"Yandex Browser"},r=m.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||m.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe(e){const t={name:"UC Browser"},r=m.getFirstMatch(I,e)||m.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:"Maxthon"},r=m.getFirstMatch(I,e)||m.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe(e){const t={name:"Epiphany"},r=m.getFirstMatch(I,e)||m.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe(e){const t={name:"Puffin"},r=m.getFirstMatch(I,e)||m.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe(e){const t={name:"Sleipnir"},r=m.getFirstMatch(I,e)||m.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe(e){const t={name:"K-Meleon"},r=m.getFirstMatch(I,e)||m.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe(e){const t={name:"WeChat"},r=m.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||m.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=m.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||m.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe(e){const t={name:"Internet Explorer"},r=m.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe(e){const t={name:"Microsoft Edge"},r=m.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:"Microsoft Edge"},r=m.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe(e){const t={name:"Vivaldi"},r=m.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe(e){const t={name:"SeaMonkey"},r=m.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe(e){const t={name:"Sailfish"},r=m.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe(e){const t={name:"Amazon Silk"},r=m.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe(e){const t={name:"PhantomJS"},r=m.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe(e){const t={name:"SlimerJS"},r=m.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t={name:"BlackBerry"},r=m.getFirstMatch(I,e)||m.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:"WebOS Browser"},r=m.getFirstMatch(I,e)||m.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe(e){const t={name:"Bada"},r=m.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe(e){const t={name:"Tizen"},r=m.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||m.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe(e){const t={name:"QupZilla"},r=m.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||m.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:"Firefox"},r=m.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe(e){const t={name:"Electron"},r=m.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:"Miui"},r=m.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe(e){const t={name:"Chromium"},r=m.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||m.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:"Chrome"},r=m.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe(e){const t={name:"Google Search"},r=m.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){const t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){const t={name:"Android Browser"},r=m.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe(e){const t={name:"PlayStation 4"},r=m.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:"Safari"},r=m.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/.*/i],describe(e){const t=/^(.*)\/(.*) /,r=/^(.*)\/(.*)[ \t]\((.*)/,s=e.search("\\(")!==-1?r:t;return{name:m.getFirstMatch(s,e),version:m.getSecondMatch(s,e)}}}],Jl=[{test:[/Roku\/DVP/],describe(e){const t=m.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:ie.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=m.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:ie.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=m.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=m.getWindowsVersionName(t);return{name:ie.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){const t={name:ie.iOS},r=m.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe(e){const t=m.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=m.getMacOSVersionName(t),n={name:ie.MacOS,version:t};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=m.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:ie.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){const t=m.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=m.getAndroidVersionName(t),n={name:ie.Android,version:t};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=m.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:ie.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t=m.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||m.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||m.getFirstMatch(/\bbb(\d+)/i,e);return{name:ie.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=m.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:ie.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=m.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:ie.Tizen,version:t}}},{test:[/linux/i],describe(){return{name:ie.Linux}}},{test:[/CrOS/],describe(){return{name:ie.ChromeOS}}},{test:[/PlayStation 4/],describe(e){const t=m.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:ie.PlayStation4,version:t}}}],ef=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(e){const t=m.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:H.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:H.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:H.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:H.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:H.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:H.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:H.tablet}}},{test(e){const t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe(e){const t=m.getFirstMatch(/(ipod|iphone)/i,e);return{type:H.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:H.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:H.mobile}}},{test(e){return e.getBrowserName(!0)==="blackberry"},describe(){return{type:H.mobile,vendor:"BlackBerry"}}},{test(e){return e.getBrowserName(!0)==="bada"},describe(){return{type:H.mobile}}},{test(e){return e.getBrowserName()==="windows phone"},describe(){return{type:H.mobile,vendor:"Microsoft"}}},{test(e){const t=Number(String(e.getOSVersion()).split(".")[0]);return e.getOSName(!0)==="android"&&t>=3},describe(){return{type:H.tablet}}},{test(e){return e.getOSName(!0)==="android"},describe(){return{type:H.mobile}}},{test(e){return e.getOSName(!0)==="macos"},describe(){return{type:H.desktop,vendor:"Apple"}}},{test(e){return e.getOSName(!0)==="windows"},describe(){return{type:H.desktop}}},{test(e){return e.getOSName(!0)==="linux"},describe(){return{type:H.desktop}}},{test(e){return e.getOSName(!0)==="playstation 4"},describe(){return{type:H.tv}}},{test(e){return e.getOSName(!0)==="roku"},describe(){return{type:H.tv}}}],tf=[{test(e){return e.getBrowserName(!0)==="microsoft edge"},describe(e){if(/\sedg\//i.test(e))return{name:Ne.Blink};const r=m.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:Ne.EdgeHTML,version:r}}},{test:[/trident/i],describe(e){const t={name:Ne.Trident},r=m.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){return e.test(/presto/i)},describe(e){const t={name:Ne.Presto},r=m.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){const t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe(e){const t={name:Ne.Gecko},r=m.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:Ne.Blink}}},{test:[/(apple)?webkit/i],describe(e){const t={name:Ne.WebKit},r=m.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];class Rs{constructor(t,r=!1){if(t==null||t==="")throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},r!==!0&&this.parse()}getUA(){return this._ua}test(t){return t.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const t=m.find(Ql,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const t=m.find(Jl,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os}getOSName(t){const{name:r}=this.getOS();return t?String(r).toLowerCase()||"":r||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(t=!1){const{type:r}=this.getPlatform();return t?String(r).toLowerCase()||"":r||""}parsePlatform(){this.parsedResult.platform={};const t=m.find(ef,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const t=m.find(tf,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return m.assign({},this.parsedResult)}satisfies(t){const r={};let n=0;const s={};let i=0;if(Object.keys(t).forEach(a=>{const c=t[a];typeof c=="string"?(s[a]=c,i+=1):typeof c=="object"&&(r[a]=c,n+=1)}),n>0){const a=Object.keys(r),c=m.find(a,d=>this.isOS(d));if(c){const d=this.satisfies(r[c]);if(d!==void 0)return d}const u=m.find(a,d=>this.isPlatform(d));if(u){const d=this.satisfies(r[u]);if(d!==void 0)return d}}if(i>0){const a=Object.keys(s),c=m.find(a,u=>this.isBrowser(u,!0));if(c!==void 0)return this.compareVersion(s[c])}}isBrowser(t,r=!1){const n=this.getBrowserName().toLowerCase();let s=t.toLowerCase();const i=m.getBrowserTypeByAlias(s);return r&&i&&(s=i.toLowerCase()),s===n}compareVersion(t){let r=[0],n=t,s=!1;const i=this.getBrowserVersion();if(typeof i=="string")return t[0]===">"||t[0]==="<"?(n=t.substr(1),t[1]==="="?(s=!0,n=t.substr(2)):r=[],t[0]===">"?r.push(1):r.push(-1)):t[0]==="="?n=t.substr(1):t[0]==="~"&&(s=!0,n=t.substr(1)),r.indexOf(m.compareVersions(i,n,s))>-1}isOS(t){return this.getOSName(!0)===String(t).toLowerCase()}isPlatform(t){return this.getPlatformType(!0)===String(t).toLowerCase()}isEngine(t){return this.getEngineName(!0)===String(t).toLowerCase()}is(t,r=!1){return this.isBrowser(t,r)||this.isOS(t)||this.isPlatform(t)}some(t=[]){return t.some(r=>this.is(r))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class _o{static getParser(t,r=!1){if(typeof t!="string")throw new Error("UserAgent should be a string");return new Rs(t,r)}static parse(t){return new Rs(t).getResult()}static get BROWSER_MAP(){return Ro}static get ENGINE_MAP(){return Ne}static get OS_MAP(){return ie}static get PLATFORMS_MAP(){return H}}const rf=({serviceId:e,clientVersion:t})=>async()=>{var s,i,o,a,c,u,d;const r=typeof window<"u"&&((s=window==null?void 0:window.navigator)!=null&&s.userAgent)?_o.parse(window.navigator.userAgent):void 0,n=[["aws-sdk-js",t],["ua","2.0"],[`os/${((i=r==null?void 0:r.os)==null?void 0:i.name)||"other"}`,(o=r==null?void 0:r.os)==null?void 0:o.version],["lang/js"],["md/browser",`${(c=(a=r==null?void 0:r.browser)==null?void 0:a.name)!=null?c:"unknown"}_${(d=(u=r==null?void 0:r.browser)==null?void 0:u.version)!=null?d:"unknown"}`]];return e&&n.push([`api/${e}`,t]),n};function nf(e){let t=0,r=0,n=null,s=null;const i=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);t=a,r=4,n=new Uint8Array(a),new DataView(n.buffer).setUint32(0,a,!1)},o=async function*(){const a=e[Symbol.asyncIterator]();for(;;){const{value:c,done:u}=await a.next();if(u){if(t)if(t===r)yield n;else throw new Error("Truncated event message received.");else return;return}const d=c.length;let f=0;for(;f<d;){if(!n){const g=d-f;s||(s=new Uint8Array(4));const w=Math.min(4-r,g);if(s.set(c.slice(f,f+w),r),r+=w,f+=w,r<4)break;i(new DataView(s.buffer).getUint32(0,!1)),s=null}const p=Math.min(t-r,d-f);n.set(c.slice(f,f+p),r),r+=p,f+=p,t&&t===r&&(yield n,n=null,t=0,r=0)}}};return{[Symbol.asyncIterator]:o}}function sf(e,t){return async function(r){const{value:n}=r.headers[":message-type"];if(n==="error"){const s=new Error(r.headers[":error-message"].value||"UnknownError");throw s.name=r.headers[":error-code"].value,s}else if(n==="exception"){const s=r.headers[":exception-type"].value,i={[s]:r},o=await e(i);if(o.$unknown){const a=new Error(t(r.body));throw a.name=s,a}throw o[s]}else if(n==="event"){const s={[r.headers[":event-type"].value]:r},i=await e(s);return i.$unknown?void 0:i}else throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}let of=class{constructor({utf8Encoder:t,utf8Decoder:r}){this.eventStreamCodec=new ru(t,r),this.utfEncoder=t}deserialize(t,r){const n=nf(t);return new iu({messageStream:new nu({inputStream:n,decoder:this.eventStreamCodec}),deserializer:sf(r,this.utfEncoder)})}serialize(t,r){return new su({messageStream:new ou({inputStream:t,serializer:r}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};const af=e=>({[Symbol.asyncIterator]:async function*(){const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)return;yield n}}finally{t.releaseLock()}}}),cf=e=>{const t=e[Symbol.asyncIterator]();return new ReadableStream({async pull(r){const{done:n,value:s}=await t.next();if(n)return r.close();r.enqueue(s)}})};class uf{constructor({utf8Encoder:t,utf8Decoder:r}){this.universalMarshaller=new of({utf8Decoder:r,utf8Encoder:t})}deserialize(t,r){const n=df(t)?af(t):t;return this.universalMarshaller.deserialize(n,r)}serialize(t,r){const n=this.universalMarshaller.serialize(t,r);return typeof ReadableStream=="function"?cf(n):n}}const df=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream,lf=e=>new uf(e);function ff(e,t,r=1024*1024){return new Promise((n,s)=>{const i=new FileReader;i.addEventListener("error",s),i.addEventListener("abort",s);const o=e.size;let a=0;function c(){if(a>=o){n();return}i.readAsArrayBuffer(e.slice(a,Math.min(o,a+r)))}i.addEventListener("load",u=>{const d=u.target.result;t(new Uint8Array(d)),a+=d.byteLength,c()}),c()})}const hf=async function(t,r){const n=new t;return await ff(r,s=>{n.update(s)}),n.digest()},pf=e=>()=>Promise.reject(e),Be=64,gf=16,mf=[1732584193,4023233417,2562383102,271733878];class yf{constructor(){this.reset()}update(t){if(bf(t))return;if(this.finished)throw new Error("Attempted to update an already finished hash.");const r=wf(t);let n=0,{byteLength:s}=r;for(this.bytesHashed+=s;s>0;)this.buffer.setUint8(this.bufferLength++,r[n++]),s--,this.bufferLength===Be&&(this.hashBuffer(),this.bufferLength=0)}async digest(){if(!this.finished){const{buffer:r,bufferLength:n,bytesHashed:s}=this,i=s*8;if(r.setUint8(this.bufferLength++,128),n%Be>=Be-8){for(let o=this.bufferLength;o<Be;o++)r.setUint8(o,0);this.hashBuffer(),this.bufferLength=0}for(let o=this.bufferLength;o<Be-8;o++)r.setUint8(o,0);r.setUint32(Be-8,i>>>0,!0),r.setUint32(Be-4,Math.floor(i/4294967296),!0),this.hashBuffer(),this.finished=!0}const t=new DataView(new ArrayBuffer(gf));for(let r=0;r<4;r++)t.setUint32(r*4,this.state[r],!0);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}hashBuffer(){const{buffer:t,state:r}=this;let n=r[0],s=r[1],i=r[2],o=r[3];n=ee(n,s,i,o,t.getUint32(0,!0),7,3614090360),o=ee(o,n,s,i,t.getUint32(4,!0),12,3905402710),i=ee(i,o,n,s,t.getUint32(8,!0),17,606105819),s=ee(s,i,o,n,t.getUint32(12,!0),22,3250441966),n=ee(n,s,i,o,t.getUint32(16,!0),7,4118548399),o=ee(o,n,s,i,t.getUint32(20,!0),12,1200080426),i=ee(i,o,n,s,t.getUint32(24,!0),17,2821735955),s=ee(s,i,o,n,t.getUint32(28,!0),22,4249261313),n=ee(n,s,i,o,t.getUint32(32,!0),7,1770035416),o=ee(o,n,s,i,t.getUint32(36,!0),12,2336552879),i=ee(i,o,n,s,t.getUint32(40,!0),17,4294925233),s=ee(s,i,o,n,t.getUint32(44,!0),22,2304563134),n=ee(n,s,i,o,t.getUint32(48,!0),7,1804603682),o=ee(o,n,s,i,t.getUint32(52,!0),12,4254626195),i=ee(i,o,n,s,t.getUint32(56,!0),17,2792965006),s=ee(s,i,o,n,t.getUint32(60,!0),22,1236535329),n=te(n,s,i,o,t.getUint32(4,!0),5,4129170786),o=te(o,n,s,i,t.getUint32(24,!0),9,3225465664),i=te(i,o,n,s,t.getUint32(44,!0),14,643717713),s=te(s,i,o,n,t.getUint32(0,!0),20,3921069994),n=te(n,s,i,o,t.getUint32(20,!0),5,3593408605),o=te(o,n,s,i,t.getUint32(40,!0),9,38016083),i=te(i,o,n,s,t.getUint32(60,!0),14,3634488961),s=te(s,i,o,n,t.getUint32(16,!0),20,3889429448),n=te(n,s,i,o,t.getUint32(36,!0),5,568446438),o=te(o,n,s,i,t.getUint32(56,!0),9,3275163606),i=te(i,o,n,s,t.getUint32(12,!0),14,4107603335),s=te(s,i,o,n,t.getUint32(32,!0),20,1163531501),n=te(n,s,i,o,t.getUint32(52,!0),5,2850285829),o=te(o,n,s,i,t.getUint32(8,!0),9,4243563512),i=te(i,o,n,s,t.getUint32(28,!0),14,1735328473),s=te(s,i,o,n,t.getUint32(48,!0),20,2368359562),n=re(n,s,i,o,t.getUint32(20,!0),4,4294588738),o=re(o,n,s,i,t.getUint32(32,!0),11,2272392833),i=re(i,o,n,s,t.getUint32(44,!0),16,1839030562),s=re(s,i,o,n,t.getUint32(56,!0),23,4259657740),n=re(n,s,i,o,t.getUint32(4,!0),4,2763975236),o=re(o,n,s,i,t.getUint32(16,!0),11,1272893353),i=re(i,o,n,s,t.getUint32(28,!0),16,4139469664),s=re(s,i,o,n,t.getUint32(40,!0),23,3200236656),n=re(n,s,i,o,t.getUint32(52,!0),4,681279174),o=re(o,n,s,i,t.getUint32(0,!0),11,3936430074),i=re(i,o,n,s,t.getUint32(12,!0),16,3572445317),s=re(s,i,o,n,t.getUint32(24,!0),23,76029189),n=re(n,s,i,o,t.getUint32(36,!0),4,3654602809),o=re(o,n,s,i,t.getUint32(48,!0),11,3873151461),i=re(i,o,n,s,t.getUint32(60,!0),16,530742520),s=re(s,i,o,n,t.getUint32(8,!0),23,3299628645),n=ne(n,s,i,o,t.getUint32(0,!0),6,4096336452),o=ne(o,n,s,i,t.getUint32(28,!0),10,1126891415),i=ne(i,o,n,s,t.getUint32(56,!0),15,2878612391),s=ne(s,i,o,n,t.getUint32(20,!0),21,4237533241),n=ne(n,s,i,o,t.getUint32(48,!0),6,1700485571),o=ne(o,n,s,i,t.getUint32(12,!0),10,2399980690),i=ne(i,o,n,s,t.getUint32(40,!0),15,4293915773),s=ne(s,i,o,n,t.getUint32(4,!0),21,2240044497),n=ne(n,s,i,o,t.getUint32(32,!0),6,1873313359),o=ne(o,n,s,i,t.getUint32(60,!0),10,4264355552),i=ne(i,o,n,s,t.getUint32(24,!0),15,2734768916),s=ne(s,i,o,n,t.getUint32(52,!0),21,1309151649),n=ne(n,s,i,o,t.getUint32(16,!0),6,4149444226),o=ne(o,n,s,i,t.getUint32(44,!0),10,3174756917),i=ne(i,o,n,s,t.getUint32(8,!0),15,718787259),s=ne(s,i,o,n,t.getUint32(36,!0),21,3951481745),r[0]=n+r[0]&4294967295,r[1]=s+r[1]&4294967295,r[2]=i+r[2]&4294967295,r[3]=o+r[3]&4294967295}reset(){this.state=Uint32Array.from(mf),this.buffer=new DataView(new ArrayBuffer(Be)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}}function Gt(e,t,r,n,s,i){return t=(t+e&4294967295)+(n+i&4294967295)&4294967295,(t<<s|t>>>32-s)+r&4294967295}function ee(e,t,r,n,s,i,o){return Gt(t&r|~t&n,e,t,s,i,o)}function te(e,t,r,n,s,i,o){return Gt(t&n|r&~n,e,t,s,i,o)}function re(e,t,r,n,s,i,o){return Gt(t^r^n,e,t,s,i,o)}function ne(e,t,r,n,s,i,o){return Gt(r^(t|~n),e,t,s,i,o)}function bf(e){return typeof e=="string"?e.length===0:e.byteLength===0}function wf(e){return typeof e=="string"?Bt(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}const Ef=e=>{if(typeof e=="string"){let t=e.length;for(let r=t-1;r>=0;r--){const n=e.charCodeAt(r);n>127&&n<=2047?t++:n>2047&&n<=65535&&(t+=2),n>=56320&&n<=57343&&r--}return t}else{if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size}throw new Error(`Body Length computation failed for ${e}`)},Af={CrtSignerV4:null};class xf{constructor(t){this.sigv4Signer=new Gr(t),this.signerOptions=t}async sign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().sign(t,r)}return this.sigv4Signer.sign(t,r)}async presign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().presign(t,r)}return this.sigv4Signer.presign(t,r)}getSigv4aSigner(){if(!this.sigv4aSigner){let t=null;try{if(t=Af.CrtSignerV4,typeof t!="function")throw new Error}catch(r){throw r.message=`${r.message}
Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. 
You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`,r}this.sigv4aSigner=new t({...this.signerOptions,signingAlgorithm:1})}return this.sigv4aSigner}}const un="required",l="type",h="conditions",y="fn",b="argv",k="ref",Q="assign",R="url",_="properties",ve="authSchemes",Ce="disableDoubleEncoding",Re="signingName",Ie="signingRegion",B="headers",_s=!1,Ae=!0,xe="isSet",A="tree",se="booleanEquals",v="error",Ht="aws.partition",L="stringEquals",q="getAttr",pe="name",pt="substring",Bo="hardwareType",To="regionPrefix",Bs="bucketAliasSuffix",Xr="outpostId",qe="isValidHostLabel",ye="not",ko="parseURL",dn="s3-outposts",x="endpoint",Ts="aws.isVirtualHostableS3Bucket",Ke="s3",Po="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",No="{url#scheme}://{Bucket}.{url#authority}{url#path}",Oo="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",ks="https://{Bucket}.s3.{partitionResult#dnsSuffix}",Mo="aws.parseArn",Fo="bucketArn",Io="arnType",jt="",ln="s3-object-lambda",Do="accesspoint",fn="accessPointName",Ps="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",Ns="mrapPartition",Os="outpostType",Ms="arnPrefix",Uo="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",Fs="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",Zr="{url#scheme}://{url#authority}{url#path}",Is="https://s3.{partitionResult#dnsSuffix}",gr={[un]:!1,[l]:"String"},ze={[un]:!0,default:!1,[l]:"Boolean"},mr={[un]:!1,[l]:"Boolean"},me={[y]:se,[b]:[{[k]:"Accelerate"},!0]},U={[y]:se,[b]:[{[k]:"UseFIPS"},!0]},D={[y]:se,[b]:[{[k]:"UseDualStack"},!0]},j={[y]:xe,[b]:[{[k]:"Endpoint"}]},$o={[y]:Ht,[b]:[{[k]:"Region"}],[Q]:"partitionResult"},Ds={[y]:L,[b]:[{[y]:q,[b]:[{[k]:"partitionResult"},pe]},"aws-cn"]},Lo={[y]:xe,[b]:[{[k]:"Bucket"}]},Se={[k]:"Bucket"},Us={[k]:Bo},$s={[h]:[{[y]:ye,[b]:[j]}],[v]:"Expected a endpoint to be specified but no endpoint was found",[l]:v},T={[y]:ye,[b]:[j]},oe={[y]:ko,[b]:[{[k]:"Endpoint"}],[Q]:"url"},Nt={[ve]:[{[Ce]:!0,[pe]:"sigv4",[Re]:dn,[Ie]:"{Region}"}]},N={},yr={[y]:se,[b]:[{[k]:"ForcePathStyle"},!1]},Sf={[k]:"ForcePathStyle"},z={[y]:se,[b]:[{[k]:"Accelerate"},!1]},W={[y]:L,[b]:[{[k]:"Region"},"aws-global"]},K={[ve]:[{[Ce]:!0,[pe]:"sigv4",[Re]:Ke,[Ie]:"us-east-1"}]},F={[y]:ye,[b]:[W]},X={[y]:se,[b]:[{[k]:"UseGlobalEndpoint"},!0]},Ls={[R]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[_]:{[ve]:[{[Ce]:!0,[pe]:"sigv4",[Re]:Ke,[Ie]:"{Region}"}]},[B]:{}},G={[ve]:[{[Ce]:!0,[pe]:"sigv4",[Re]:Ke,[Ie]:"{Region}"}]},Z={[y]:se,[b]:[{[k]:"UseGlobalEndpoint"},!1]},M={[y]:se,[b]:[{[k]:"UseDualStack"},!1]},Hs={[R]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[_]:G,[B]:{}},P={[y]:se,[b]:[{[k]:"UseFIPS"},!1]},js={[R]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[_]:G,[B]:{}},qs={[R]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[_]:G,[B]:{}},br={[y]:se,[b]:[{[y]:q,[b]:[{[k]:"url"},"isIp"]},!0]},Ho={[k]:"url"},wr={[y]:se,[b]:[{[y]:q,[b]:[Ho,"isIp"]},!1]},Er={[R]:Po,[_]:G,[B]:{}},Yr={[R]:No,[_]:G,[B]:{}},zs={[x]:Yr,[l]:x},Ar={[R]:Oo,[_]:G,[B]:{}},Vs={[R]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[_]:G,[B]:{}},Ot={[v]:"Invalid region: region was not a valid DNS name.",[l]:v},ue={[k]:Fo},jo={[k]:Io},xr={[y]:q,[b]:[ue,"service"]},hn={[k]:fn},Gs={[h]:[D],[v]:"S3 Object Lambda does not support Dual-stack",[l]:v},Ws={[h]:[me],[v]:"S3 Object Lambda does not support S3 Accelerate",[l]:v},Ks={[h]:[{[y]:xe,[b]:[{[k]:"DisableAccessPoints"}]},{[y]:se,[b]:[{[k]:"DisableAccessPoints"},!0]}],[v]:"Access points are not supported for this operation",[l]:v},Sr={[h]:[{[y]:xe,[b]:[{[k]:"UseArnRegion"}]},{[y]:se,[b]:[{[k]:"UseArnRegion"},!1]},{[y]:ye,[b]:[{[y]:L,[b]:[{[y]:q,[b]:[ue,"region"]},"{Region}"]}]}],[v]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[l]:v},qo={[y]:q,[b]:[{[k]:"bucketPartition"},pe]},zo={[y]:q,[b]:[ue,"accountId"]},vr={[ve]:[{[Ce]:!0,[pe]:"sigv4",[Re]:ln,[Ie]:"{bucketArn#region}"}]},Xs={[v]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[l]:v},Cr={[v]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[l]:v},Rr={[v]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[l]:v},_r={[v]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[l]:v},Zs={[v]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[l]:v},Ys={[v]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[l]:v},gt={[ve]:[{[Ce]:!0,[pe]:"sigv4",[Re]:Ke,[Ie]:"{bucketArn#region}"}]},Qs={[ve]:[{[Ce]:!0,[pe]:"sigv4",[Re]:dn,[Ie]:"{bucketArn#region}"}]},Js={[y]:Mo,[b]:[Se]},ei={[R]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[_]:G,[B]:{}},ti={[R]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[_]:G,[B]:{}},ri={[R]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[_]:G,[B]:{}},Br={[R]:Uo,[_]:G,[B]:{}},ni={[R]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[_]:G,[B]:{}},si={[k]:"UseObjectLambdaEndpoint"},Tr={[ve]:[{[Ce]:!0,[pe]:"sigv4",[Re]:ln,[Ie]:"{Region}"}]},ii={[R]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[_]:G,[B]:{}},oi={[R]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[_]:G,[B]:{}},ai={[R]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[_]:G,[B]:{}},kr={[R]:Zr,[_]:G,[B]:{}},ci={[R]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[_]:G,[B]:{}},Pr=[{[k]:"Region"}],vf=[{[k]:"Endpoint"}],ui=[Se],di=[{[y]:qe,[b]:[{[k]:Xr},!1]}],li=[{[y]:L,[b]:[{[k]:To},"beta"]}],mt=[j,oe],fi=[Lo],Te=[$o],hi=[{[y]:qe,[b]:[{[k]:"Region"},!1]}],ke=[{[y]:L,[b]:[{[k]:"Region"},"us-east-1"]}],Nr=[{[y]:L,[b]:[jo,Do]}],pi=[{[y]:q,[b]:[ue,"resourceId[1]"],[Q]:fn},{[y]:ye,[b]:[{[y]:L,[b]:[hn,jt]}]}],Cf=[ue,"resourceId[1]"],gi=[D],Or=[me],Mr=[{[y]:ye,[b]:[{[y]:L,[b]:[{[y]:q,[b]:[ue,"region"]},jt]}]}],mi=[{[y]:ye,[b]:[{[y]:xe,[b]:[{[y]:q,[b]:[ue,"resourceId[2]"]}]}]}],Rf=[ue,"resourceId[2]"],Fr=[{[y]:Ht,[b]:[{[y]:q,[b]:[ue,"region"]}],[Q]:"bucketPartition"}],yi=[{[y]:L,[b]:[qo,{[y]:q,[b]:[{[k]:"partitionResult"},pe]}]}],Ir=[{[y]:qe,[b]:[{[y]:q,[b]:[ue,"region"]},!0]}],Dr=[{[y]:qe,[b]:[zo,!1]}],bi=[{[y]:qe,[b]:[hn,!1]}],Mt=[U],wi=[{[y]:qe,[b]:[{[k]:"Region"},!0]}],_f={version:"1.0",parameters:{Bucket:gr,Region:gr,UseFIPS:ze,UseDualStack:ze,Endpoint:gr,ForcePathStyle:ze,Accelerate:ze,UseGlobalEndpoint:ze,UseObjectLambdaEndpoint:mr,DisableAccessPoints:mr,DisableMultiRegionAccessPoints:ze,UseArnRegion:mr},rules:[{[h]:[{[y]:xe,[b]:Pr}],[l]:A,rules:[{[h]:[me,U],error:"Accelerate cannot be used with FIPS",[l]:v},{[h]:[D,j],error:"Cannot set dual-stack in combination with a custom endpoint.",[l]:v},{[h]:[j,U],error:"A custom endpoint cannot be combined with FIPS",[l]:v},{[h]:[j,me],error:"A custom endpoint cannot be combined with S3 Accelerate",[l]:v},{[h]:[U,$o,Ds],error:"Partition does not support FIPS",[l]:v},{[h]:[Lo,{[y]:pt,[b]:[Se,49,50,Ae],[Q]:Bo},{[y]:pt,[b]:[Se,8,12,Ae],[Q]:To},{[y]:pt,[b]:[Se,0,7,Ae],[Q]:Bs},{[y]:pt,[b]:[Se,32,49,Ae],[Q]:Xr},{[y]:Ht,[b]:Pr,[Q]:"regionPartition"},{[y]:L,[b]:[{[k]:Bs},"--op-s3"]}],[l]:A,rules:[{[h]:di,[l]:A,rules:[{[h]:[{[y]:L,[b]:[Us,"e"]}],[l]:A,rules:[{[h]:li,[l]:A,rules:[$s,{[h]:mt,endpoint:{[R]:"https://{Bucket}.ec2.{url#authority}",[_]:Nt,[B]:N},[l]:x}]},{endpoint:{[R]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[_]:Nt,[B]:N},[l]:x}]},{[h]:[{[y]:L,[b]:[Us,"o"]}],[l]:A,rules:[{[h]:li,[l]:A,rules:[$s,{[h]:mt,endpoint:{[R]:"https://{Bucket}.op-{outpostId}.{url#authority}",[_]:Nt,[B]:N},[l]:x}]},{endpoint:{[R]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[_]:Nt,[B]:N},[l]:x}]},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[l]:v}]},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[l]:v}]},{[h]:fi,[l]:A,rules:[{[h]:[j,{[y]:ye,[b]:[{[y]:xe,[b]:[{[y]:ko,[b]:vf}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[l]:v},{[h]:[yr,{[y]:Ts,[b]:[Se,_s]}],[l]:A,rules:[{[h]:Te,[l]:A,rules:[{[h]:hi,[l]:A,rules:[{[h]:[me,Ds],error:"S3 Accelerate cannot be used in this region",[l]:v},{[h]:[D,U,z,T,W],endpoint:{[R]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[_]:K,[B]:N},[l]:x},{[h]:[D,U,z,T,F,X],[l]:A,rules:[{endpoint:Ls,[l]:x}]},{[h]:[D,U,z,T,F,Z],endpoint:Ls,[l]:x},{[h]:[M,U,z,T,W],endpoint:{[R]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[_]:K,[B]:N},[l]:x},{[h]:[M,U,z,T,F,X],[l]:A,rules:[{endpoint:Hs,[l]:x}]},{[h]:[M,U,z,T,F,Z],endpoint:Hs,[l]:x},{[h]:[D,P,me,T,W],endpoint:{[R]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[_]:K,[B]:N},[l]:x},{[h]:[D,P,me,T,F,X],[l]:A,rules:[{endpoint:js,[l]:x}]},{[h]:[D,P,me,T,F,Z],endpoint:js,[l]:x},{[h]:[D,P,z,T,W],endpoint:{[R]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[_]:K,[B]:N},[l]:x},{[h]:[D,P,z,T,F,X],[l]:A,rules:[{endpoint:qs,[l]:x}]},{[h]:[D,P,z,T,F,Z],endpoint:qs,[l]:x},{[h]:[M,P,z,j,oe,br,W],endpoint:{[R]:Po,[_]:K,[B]:N},[l]:x},{[h]:[M,P,z,j,oe,wr,W],endpoint:{[R]:No,[_]:K,[B]:N},[l]:x},{[h]:[M,P,z,j,oe,br,F,X],[l]:A,rules:[{[h]:ke,endpoint:Er,[l]:x},{endpoint:Er,[l]:x}]},{[h]:[M,P,z,j,oe,wr,F,X],[l]:A,rules:[{[h]:ke,endpoint:Yr,[l]:x},zs]},{[h]:[M,P,z,j,oe,br,F,Z],endpoint:Er,[l]:x},{[h]:[M,P,z,j,oe,wr,F,Z],endpoint:Yr,[l]:x},{[h]:[M,P,me,T,W],endpoint:{[R]:Oo,[_]:K,[B]:N},[l]:x},{[h]:[M,P,me,T,F,X],[l]:A,rules:[{[h]:ke,endpoint:Ar,[l]:x},{endpoint:Ar,[l]:x}]},{[h]:[M,P,me,T,F,Z],endpoint:Ar,[l]:x},{[h]:[M,P,z,T,W],endpoint:{[R]:ks,[_]:K,[B]:N},[l]:x},{[h]:[M,P,z,T,F,X],[l]:A,rules:[{[h]:ke,endpoint:{[R]:ks,[_]:G,[B]:N},[l]:x},{endpoint:Vs,[l]:x}]},{[h]:[M,P,z,T,F,Z],endpoint:Vs,[l]:x}]},Ot]}]},{[h]:[j,oe,{[y]:L,[b]:[{[y]:q,[b]:[Ho,"scheme"]},"http"]},{[y]:Ts,[b]:[Se,Ae]},yr,P,M,z],[l]:A,rules:[{[h]:Te,[l]:A,rules:[{[h]:hi,[l]:A,rules:[zs]},Ot]}]},{[h]:[yr,{[y]:Mo,[b]:ui,[Q]:Fo}],[l]:A,rules:[{[h]:[{[y]:q,[b]:[ue,"resourceId[0]"],[Q]:Io},{[y]:ye,[b]:[{[y]:L,[b]:[jo,jt]}]}],[l]:A,rules:[{[h]:[{[y]:L,[b]:[xr,ln]}],[l]:A,rules:[{[h]:Nr,[l]:A,rules:[{[h]:pi,[l]:A,rules:[Gs,Ws,{[h]:Mr,[l]:A,rules:[Ks,{[h]:mi,[l]:A,rules:[Sr,{[h]:Fr,[l]:A,rules:[{[h]:Te,[l]:A,rules:[{[h]:yi,[l]:A,rules:[{[h]:Ir,[l]:A,rules:[{[h]:[{[y]:L,[b]:[zo,jt]}],error:"Invalid ARN: Missing account id",[l]:v},{[h]:Dr,[l]:A,rules:[{[h]:bi,[l]:A,rules:[{[h]:mt,endpoint:{[R]:Ps,[_]:vr,[B]:N},[l]:x},{[h]:Mt,endpoint:{[R]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[_]:vr,[B]:N},[l]:x},{endpoint:{[R]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[_]:vr,[B]:N},[l]:x}]},Xs]},Cr]},Rr]},_r]}]}]},Zs]},{error:"Invalid ARN: bucket ARN is missing a region",[l]:v}]},Ys]},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[l]:v}]},{[h]:Nr,[l]:A,rules:[{[h]:pi,[l]:A,rules:[{[h]:Mr,[l]:A,rules:[{[h]:Nr,[l]:A,rules:[{[h]:Mr,[l]:A,rules:[Ks,{[h]:mi,[l]:A,rules:[Sr,{[h]:Fr,[l]:A,rules:[{[h]:Te,[l]:A,rules:[{[h]:[{[y]:L,[b]:[qo,"{partitionResult#name}"]}],[l]:A,rules:[{[h]:Ir,[l]:A,rules:[{[h]:[{[y]:L,[b]:[xr,Ke]}],[l]:A,rules:[{[h]:Dr,[l]:A,rules:[{[h]:bi,[l]:A,rules:[{[h]:Or,error:"Access Points do not support S3 Accelerate",[l]:v},{[h]:[U,D],endpoint:{[R]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[_]:gt,[B]:N},[l]:x},{[h]:[U,M],endpoint:{[R]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[_]:gt,[B]:N},[l]:x},{[h]:[P,D],endpoint:{[R]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[_]:gt,[B]:N},[l]:x},{[h]:[P,M,j,oe],endpoint:{[R]:Ps,[_]:gt,[B]:N},[l]:x},{[h]:[P,M],endpoint:{[R]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[_]:gt,[B]:N},[l]:x}]},Xs]},Cr]},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[l]:v}]},Rr]},_r]}]}]},Zs]}]}]},{[h]:[{[y]:qe,[b]:[hn,Ae]}],[l]:A,rules:[{[h]:gi,error:"S3 MRAP does not support dual-stack",[l]:v},{[h]:Mt,error:"S3 MRAP does not support FIPS",[l]:v},{[h]:Or,error:"S3 MRAP does not support S3 Accelerate",[l]:v},{[h]:[{[y]:se,[b]:[{[k]:"DisableMultiRegionAccessPoints"},Ae]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[l]:v},{[h]:[{[y]:Ht,[b]:Pr,[Q]:Ns}],[l]:A,rules:[{[h]:[{[y]:L,[b]:[{[y]:q,[b]:[{[k]:Ns},pe]},{[y]:q,[b]:[ue,"partition"]}]}],[l]:A,rules:[{endpoint:{[R]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[_]:{[ve]:[{[Ce]:Ae,name:"sigv4a",[Re]:Ke,signingRegionSet:["*"]}]},[B]:N},[l]:x}]},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[l]:v}]}]},{error:"Invalid Access Point Name",[l]:v}]},Ys]},{[h]:[{[y]:L,[b]:[xr,dn]}],[l]:A,rules:[{[h]:gi,error:"S3 Outposts does not support Dual-stack",[l]:v},{[h]:Mt,error:"S3 Outposts does not support FIPS",[l]:v},{[h]:Or,error:"S3 Outposts does not support S3 Accelerate",[l]:v},{[h]:[{[y]:xe,[b]:[{[y]:q,[b]:[ue,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[l]:v},{[h]:[{[y]:q,[b]:Cf,[Q]:Xr}],[l]:A,rules:[{[h]:di,[l]:A,rules:[Sr,{[h]:Fr,[l]:A,rules:[{[h]:Te,[l]:A,rules:[{[h]:yi,[l]:A,rules:[{[h]:Ir,[l]:A,rules:[{[h]:Dr,[l]:A,rules:[{[h]:[{[y]:q,[b]:Rf,[Q]:Os}],[l]:A,rules:[{[h]:[{[y]:q,[b]:[ue,"resourceId[3]"],[Q]:fn}],[l]:A,rules:[{[h]:[{[y]:L,[b]:[{[k]:Os},Do]}],[l]:A,rules:[{[h]:mt,endpoint:{[R]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[_]:Qs,[B]:N},[l]:x},{endpoint:{[R]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[_]:Qs,[B]:N},[l]:x}]},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[l]:v}]},{error:"Invalid ARN: expected an access point name",[l]:v}]},{error:"Invalid ARN: Expected a 4-component resource",[l]:v}]},Cr]},Rr]},_r]}]}]},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[l]:v}]},{error:"Invalid ARN: The Outpost Id was not set",[l]:v}]},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[l]:v}]},{error:"Invalid ARN: No ARN type specified",[l]:v}]},{[h]:[{[y]:pt,[b]:[Se,0,4,_s],[Q]:Ms},{[y]:L,[b]:[{[k]:Ms},"arn:"]},{[y]:ye,[b]:[{[y]:xe,[b]:[Js]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[l]:v},{[h]:[{[y]:se,[b]:[Sf,Ae]},Js],error:"Path-style addressing cannot be used with ARN buckets",[l]:v},{[h]:[{[y]:"uriEncode",[b]:ui,[Q]:"uri_encoded_bucket"}],[l]:A,rules:[{[h]:Te,[l]:A,rules:[{[h]:[z],[l]:A,rules:[{[h]:[D,T,U,W],endpoint:{[R]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[_]:K,[B]:N},[l]:x},{[h]:[D,T,U,F,X],[l]:A,rules:[{endpoint:ei,[l]:x}]},{[h]:[D,T,U,F,Z],endpoint:ei,[l]:x},{[h]:[M,T,U,W],endpoint:{[R]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[_]:K,[B]:N},[l]:x},{[h]:[M,T,U,F,X],[l]:A,rules:[{endpoint:ti,[l]:x}]},{[h]:[M,T,U,F,Z],endpoint:ti,[l]:x},{[h]:[D,T,P,W],endpoint:{[R]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[_]:K,[B]:N},[l]:x},{[h]:[D,T,P,F,X],[l]:A,rules:[{endpoint:ri,[l]:x}]},{[h]:[D,T,P,F,Z],endpoint:ri,[l]:x},{[h]:[M,j,oe,P,W],endpoint:{[R]:Uo,[_]:K,[B]:N},[l]:x},{[h]:[M,j,oe,P,F,X],[l]:A,rules:[{[h]:ke,endpoint:Br,[l]:x},{endpoint:Br,[l]:x}]},{[h]:[M,j,oe,P,F,Z],endpoint:Br,[l]:x},{[h]:[M,T,P,W],endpoint:{[R]:Fs,[_]:K,[B]:N},[l]:x},{[h]:[M,T,P,F,X],[l]:A,rules:[{[h]:ke,endpoint:{[R]:Fs,[_]:G,[B]:N},[l]:x},{endpoint:ni,[l]:x}]},{[h]:[M,T,P,F,Z],endpoint:ni,[l]:x}]},{error:"Path-style addressing cannot be used with S3 Accelerate",[l]:v}]}]}]},{[h]:[{[y]:xe,[b]:[si]},{[y]:se,[b]:[si,Ae]}],[l]:A,rules:[{[h]:Te,[l]:A,rules:[{[h]:wi,[l]:A,rules:[Gs,Ws,{[h]:mt,endpoint:{[R]:Zr,[_]:Tr,[B]:N},[l]:x},{[h]:Mt,endpoint:{[R]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[_]:Tr,[B]:N},[l]:x},{endpoint:{[R]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[_]:Tr,[B]:N},[l]:x}]},Ot]}]},{[h]:[{[y]:ye,[b]:fi}],[l]:A,rules:[{[h]:Te,[l]:A,rules:[{[h]:wi,[l]:A,rules:[{[h]:[U,D,T,W],endpoint:{[R]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[_]:K,[B]:N},[l]:x},{[h]:[U,D,T,F,X],[l]:A,rules:[{endpoint:ii,[l]:x}]},{[h]:[U,D,T,F,Z],endpoint:ii,[l]:x},{[h]:[U,M,T,W],endpoint:{[R]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[_]:K,[B]:N},[l]:x},{[h]:[U,M,T,F,X],[l]:A,rules:[{endpoint:oi,[l]:x}]},{[h]:[U,M,T,F,Z],endpoint:oi,[l]:x},{[h]:[P,D,T,W],endpoint:{[R]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[_]:K,[B]:N},[l]:x},{[h]:[P,D,T,F,X],[l]:A,rules:[{endpoint:ai,[l]:x}]},{[h]:[P,D,T,F,Z],endpoint:ai,[l]:x},{[h]:[P,M,j,oe,W],endpoint:{[R]:Zr,[_]:K,[B]:N},[l]:x},{[h]:[P,M,j,oe,F,X],[l]:A,rules:[{[h]:ke,endpoint:kr,[l]:x},{endpoint:kr,[l]:x}]},{[h]:[P,M,j,oe,F,Z],endpoint:kr,[l]:x},{[h]:[P,M,T,W],endpoint:{[R]:Is,[_]:K,[B]:N},[l]:x},{[h]:[P,M,T,F,X],[l]:A,rules:[{[h]:ke,endpoint:{[R]:Is,[_]:G,[B]:N},[l]:x},{endpoint:ci,[l]:x}]},{[h]:[P,M,T,F,Z],endpoint:ci,[l]:x}]},Ot]}]}]},{error:"A region must be set when sending requests to S3.",[l]:v}]},Bf=_f,Tf=(e,t={})=>td(Bf,{endpointParams:e,logger:t.logger}),kf=e=>{var t,r,n,s,i,o,a,c,u,d,f,p,g,w,E;return{apiVersion:"2006-03-01",base64Decoder:(t=e==null?void 0:e.base64Decoder)!=null?t:rn,base64Encoder:(r=e==null?void 0:e.base64Encoder)!=null?r:nn,disableHostPrefix:(n=e==null?void 0:e.disableHostPrefix)!=null?n:!1,endpointProvider:(s=e==null?void 0:e.endpointProvider)!=null?s:Tf,extensions:(i=e==null?void 0:e.extensions)!=null?i:[],getAwsChunkedEncodingStream:(o=e==null?void 0:e.getAwsChunkedEncodingStream)!=null?o:xa,logger:(a=e==null?void 0:e.logger)!=null?a:new Oi,sdkStreamMixin:(c=e==null?void 0:e.sdkStreamMixin)!=null?c:Na,serviceId:(u=e==null?void 0:e.serviceId)!=null?u:"S3",signerConstructor:(d=e==null?void 0:e.signerConstructor)!=null?d:xf,signingEscapePath:(f=e==null?void 0:e.signingEscapePath)!=null?f:!1,urlParser:(p=e==null?void 0:e.urlParser)!=null?p:$t,useArnRegion:(g=e==null?void 0:e.useArnRegion)!=null?g:!1,utf8Decoder:(w=e==null?void 0:e.utf8Decoder)!=null?w:Bt,utf8Encoder:(E=e==null?void 0:e.utf8Encoder)!=null?E:qt}},Pf=["in-region","cross-region","mobile","standard","legacy"],Nf=({defaultsMode:e}={})=>Ui(async()=>{const t=typeof e=="function"?await e():e;switch(t==null?void 0:t.toLowerCase()){case"auto":return Promise.resolve(Of()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(t==null?void 0:t.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Pf.join(", ")}, got ${t}`)}}),Of=()=>{var r,n;const e=typeof window<"u"&&((r=window==null?void 0:window.navigator)!=null&&r.userAgent)?_o.parse(window.navigator.userAgent):void 0,t=(n=e==null?void 0:e.platform)==null?void 0:n.type;return t==="tablet"||t==="mobile"},Mf=e=>{var s,i,o,a,c,u,d,f,p,g,w,E,S,C,O;const t=Nf(e),r=()=>t().then(ja),n=kf(e);return{...n,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:(s=e==null?void 0:e.bodyLengthChecker)!=null?s:Ef,credentialDefaultProvider:(i=e==null?void 0:e.credentialDefaultProvider)!=null?i:$=>()=>Promise.reject(new Error("Credential is missing")),defaultUserAgentProvider:(o=e==null?void 0:e.defaultUserAgentProvider)!=null?o:rf({serviceId:n.serviceId,clientVersion:Fl.version}),eventStreamSerdeProvider:(a=e==null?void 0:e.eventStreamSerdeProvider)!=null?a:lf,maxAttempts:(c=e==null?void 0:e.maxAttempts)!=null?c:Lt,md5:(u=e==null?void 0:e.md5)!=null?u:yf,region:(d=e==null?void 0:e.region)!=null?d:pf("Region is missing"),requestHandler:(f=e==null?void 0:e.requestHandler)!=null?f:new _a(r),retryMode:(p=e==null?void 0:e.retryMode)!=null?p:async()=>(await r()).retryMode||Ld,sha1:(g=e==null?void 0:e.sha1)!=null?g:po.Sha1,sha256:(w=e==null?void 0:e.sha256)!=null?w:Ao.Sha256,streamCollector:(E=e==null?void 0:e.streamCollector)!=null?E:Mi,streamHasher:(S=e==null?void 0:e.streamHasher)!=null?S:hf,useDualstackEndpoint:(C=e==null?void 0:e.useDualstackEndpoint)!=null?C:()=>Promise.resolve(pd),useFipsEndpoint:(O=e==null?void 0:e.useFipsEndpoint)!=null?O:()=>Promise.resolve(gd)}},Ff=e=>{let t=async()=>{if(e.region===void 0)throw new Error("Region is missing from runtimeConfig");const r=e.region;return typeof r=="string"?r:r()};return{setRegion(r){t=r},region(){return t}}},If=e=>({region:e.region()}),Ur=e=>e,Df=(e,t)=>{const r={...Ur(Ff(e)),...Ur(Wa(e)),...Ur(ea(e))};return t.forEach(n=>n.configure(r)),{...e,...If(r),...Ka(r),...ta(r)}};class Uf extends ba{constructor(...[t]){const r=Mf(t||{}),n=ml(r),s=md(n),i=$d(s),o=cl(i),a=o,c=ku(a),u=cc(c),d=Iu(u),f=yd(d),p=Df(f,(t==null?void 0:t.extensions)||[]);super(p),this.config=p,this.middlewareStack.use(pl(this.config)),this.middlewareStack.use(Ed(this.config)),this.middlewareStack.use(ua(this.config)),this.middlewareStack.use(fa(this.config)),this.middlewareStack.use(ya(this.config)),this.middlewareStack.use(Fu(this.config)),this.middlewareStack.use(fc(this.config)),this.middlewareStack.use(oa(this.config)),this.middlewareStack.use(ac(this.config)),this.middlewareStack.use(hd(this.config))}destroy(){super.destroy()}}var pn={},Wt={};(function(e){const t=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r=t+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",n="["+t+"]["+r+"]*",s=new RegExp("^"+n+"$"),i=function(a,c){const u=[];let d=c.exec(a);for(;d;){const f=[];f.startIndex=c.lastIndex-d[0].length;const p=d.length;for(let g=0;g<p;g++)f.push(d[g]);u.push(f),d=c.exec(a)}return u},o=function(a){const c=s.exec(a);return!(c===null||typeof c>"u")};e.isExist=function(a){return typeof a<"u"},e.isEmptyObject=function(a){return Object.keys(a).length===0},e.merge=function(a,c,u){if(c){const d=Object.keys(c),f=d.length;for(let p=0;p<f;p++)u==="strict"?a[d[p]]=[c[d[p]]]:a[d[p]]=c[d[p]]}},e.getValue=function(a){return e.isExist(a)?a:""},e.isName=o,e.getAllMatches=i,e.nameRegexp=n})(Wt);const gn=Wt,$f={allowBooleanAttributes:!1,unpairedTags:[]};pn.validate=function(e,t){t=Object.assign({},$f,t);const r=[];let n=!1,s=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let i=0;i<e.length;i++)if(e[i]==="<"&&e[i+1]==="?"){if(i+=2,i=Ai(e,i),i.err)return i}else if(e[i]==="<"){let o=i;if(i++,e[i]==="!"){i=xi(e,i);continue}else{let a=!1;e[i]==="/"&&(a=!0,i++);let c="";for(;i<e.length&&e[i]!==">"&&e[i]!==" "&&e[i]!=="	"&&e[i]!==`
`&&e[i]!=="\r";i++)c+=e[i];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),i--),!Wf(c)){let f;return c.trim().length===0?f="Invalid space after '<'.":f="Tag '"+c+"' is an invalid name.",V("InvalidTag",f,ce(e,i))}const u=jf(e,i);if(u===!1)return V("InvalidAttr","Attributes for '"+c+"' have open quote.",ce(e,i));let d=u.value;if(i=u.index,d[d.length-1]==="/"){const f=i-d.length;d=d.substring(0,d.length-1);const p=Si(d,t);if(p===!0)n=!0;else return V(p.err.code,p.err.msg,ce(e,f+p.err.line))}else if(a)if(u.tagClosed){if(d.trim().length>0)return V("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",ce(e,o));{const f=r.pop();if(c!==f.tagName){let p=ce(e,f.tagStartPos);return V("InvalidTag","Expected closing tag '"+f.tagName+"' (opened in line "+p.line+", col "+p.col+") instead of closing tag '"+c+"'.",ce(e,o))}r.length==0&&(s=!0)}}else return V("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",ce(e,i));else{const f=Si(d,t);if(f!==!0)return V(f.err.code,f.err.msg,ce(e,i-d.length+f.err.line));if(s===!0)return V("InvalidXml","Multiple possible root nodes found.",ce(e,i));t.unpairedTags.indexOf(c)!==-1||r.push({tagName:c,tagStartPos:o}),n=!0}for(i++;i<e.length;i++)if(e[i]==="<")if(e[i+1]==="!"){i++,i=xi(e,i);continue}else if(e[i+1]==="?"){if(i=Ai(e,++i),i.err)return i}else break;else if(e[i]==="&"){const f=Vf(e,i);if(f==-1)return V("InvalidChar","char '&' is not expected.",ce(e,i));i=f}else if(s===!0&&!Ei(e[i]))return V("InvalidXml","Extra text at the end",ce(e,i));e[i]==="<"&&i--}}else{if(Ei(e[i]))continue;return V("InvalidChar","char '"+e[i]+"' is not expected.",ce(e,i))}if(n){if(r.length==1)return V("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",ce(e,r[0].tagStartPos));if(r.length>0)return V("InvalidXml","Invalid '"+JSON.stringify(r.map(i=>i.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return V("InvalidXml","Start tag expected.",1);return!0};function Ei(e){return e===" "||e==="	"||e===`
`||e==="\r"}function Ai(e,t){const r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){const n=e.substr(r,t-r);if(t>5&&n==="xml")return V("InvalidXml","XML declaration allowed only at the start of the document.",ce(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function xi(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}const Lf='"',Hf="'";function jf(e,t){let r="",n="",s=!1;for(;t<e.length;t++){if(e[t]===Lf||e[t]===Hf)n===""?n=e[t]:n!==e[t]||(n="");else if(e[t]===">"&&n===""){s=!0;break}r+=e[t]}return n!==""?!1:{value:r,index:t,tagClosed:s}}const qf=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Si(e,t){const r=gn.getAllMatches(e,qf),n={};for(let s=0;s<r.length;s++){if(r[s][1].length===0)return V("InvalidAttr","Attribute '"+r[s][2]+"' has no space in starting.",yt(r[s]));if(r[s][3]!==void 0&&r[s][4]===void 0)return V("InvalidAttr","Attribute '"+r[s][2]+"' is without value.",yt(r[s]));if(r[s][3]===void 0&&!t.allowBooleanAttributes)return V("InvalidAttr","boolean attribute '"+r[s][2]+"' is not allowed.",yt(r[s]));const i=r[s][2];if(!Gf(i))return V("InvalidAttr","Attribute '"+i+"' is an invalid name.",yt(r[s]));if(!n.hasOwnProperty(i))n[i]=1;else return V("InvalidAttr","Attribute '"+i+"' is repeated.",yt(r[s]))}return!0}function zf(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function Vf(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,zf(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function V(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function Gf(e){return gn.isName(e)}function Wf(e){return gn.isName(e)}function ce(e,t){const r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function yt(e){return e.startIndex+e[1].length}var mn={};const Vo={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e}},Kf=function(e){return Object.assign({},Vo,e)};mn.buildOptions=Kf;mn.defaultOptions=Vo;class Xf{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,r){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:r})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}}var Zf=Xf;const Yf=Wt;function Qf(e,t){const r={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let n=1,s=!1,i=!1,o="";for(;t<e.length;t++)if(e[t]==="<"&&!i){if(s&&th(e,t))t+=7,[entityName,val,t]=Jf(e,t+1),val.indexOf("&")===-1&&(r[ih(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(s&&rh(e,t))t+=8;else if(s&&nh(e,t))t+=8;else if(s&&sh(e,t))t+=9;else if(eh)i=!0;else throw new Error("Invalid DOCTYPE");n++,o=""}else if(e[t]===">"){if(i?e[t-1]==="-"&&e[t-2]==="-"&&(i=!1,n--):n--,n===0)break}else e[t]==="["?s=!0:o+=e[t];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}function Jf(e,t){let r="";for(;t<e.length&&e[t]!=="'"&&e[t]!=='"';t++)r+=e[t];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");const n=e[t++];let s="";for(;t<e.length&&e[t]!==n;t++)s+=e[t];return[r,s,t]}function eh(e,t){return e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-"}function th(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y"}function rh(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T"}function nh(e,t){return e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T"}function sh(e,t){return e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N"}function ih(e){if(Yf.isName(e))return e;throw new Error(`Invalid entity name ${e}`)}var oh=Qf;const ah=/^[-+]?0x[a-fA-F0-9]+$/,ch=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const uh={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function dh(e,t={}){if(t=Object.assign({},uh,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(t.hex&&ah.test(r))return Number.parseInt(r,16);{const n=ch.exec(r);if(n){const s=n[1],i=n[2];let o=lh(n[3]);const a=n[4]||n[6];if(!t.leadingZeros&&i.length>0&&s&&r[2]!==".")return e;if(!t.leadingZeros&&i.length>0&&!s&&r[1]!==".")return e;{const c=Number(r),u=""+c;return u.search(/[eE]/)!==-1||a?t.eNotation?c:e:r.indexOf(".")!==-1?u==="0"&&o===""||u===o||s&&u==="-"+o?c:e:i?o===u||s+o===u?c:e:r===u||r===s+u?c:e}}else return e}}function lh(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}var fh=dh;const yn=Wt,bt=Zf,hh=oh,ph=fh;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,yn.nameRegexp);let gh=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=mh,this.parseXml=Ah,this.parseTextData=yh,this.resolveNameSpace=bh,this.buildAttributesMap=Eh,this.isItStopNode=Ch,this.replaceEntitiesValue=Sh,this.readStopNodeData=_h,this.saveTextToParentTag=vh,this.addChild=xh}};function mh(e){const t=Object.keys(e);for(let r=0;r<t.length;r++){const n=t[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function yh(e,t,r,n,s,i,o){if(e!==void 0&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){o||(e=this.replaceEntitiesValue(e));const a=this.options.tagValueProcessor(t,e,r,s,i);return a==null?e:typeof a!=typeof e||a!==e?a:this.options.trimValues?Jr(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?Jr(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function bh(e){if(this.options.removeNSPrefix){const t=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=r+t[1])}return e}const wh=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Eh(e,t,r){if(!this.options.ignoreAttributes&&typeof e=="string"){const n=yn.getAllMatches(e,wh),s=n.length,i={};for(let o=0;o<s;o++){const a=this.resolveNameSpace(n[o][1]);let c=n[o][4],u=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(u=this.options.transformAttributeName(u)),u==="__proto__"&&(u="#__proto__"),c!==void 0){this.options.trimValues&&(c=c.trim()),c=this.replaceEntitiesValue(c);const d=this.options.attributeValueProcessor(a,c,t);d==null?i[u]=c:typeof d!=typeof c||d!==c?i[u]=d:i[u]=Jr(c,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[u]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){const o={};return o[this.options.attributesGroupName]=i,o}return i}}const Ah=function(e){e=e.replace(/\r\n?/g,`
`);const t=new bt("!xml");let r=t,n="",s="";for(let i=0;i<e.length;i++)if(e[i]==="<")if(e[i+1]==="/"){const a=He(e,">",i,"Closing Tag is not closed.");let c=e.substring(i+2,a).trim();if(this.options.removeNSPrefix){const f=c.indexOf(":");f!==-1&&(c=c.substr(f+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&(n=this.saveTextToParentTag(n,r,s));const u=s.substring(s.lastIndexOf(".")+1);if(c&&this.options.unpairedTags.indexOf(c)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${c}>`);let d=0;u&&this.options.unpairedTags.indexOf(u)!==-1?(d=s.lastIndexOf(".",s.lastIndexOf(".")-1),this.tagsNodeStack.pop()):d=s.lastIndexOf("."),s=s.substring(0,d),r=this.tagsNodeStack.pop(),n="",i=a}else if(e[i+1]==="?"){let a=Qr(e,i,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,s),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){const c=new bt(a.tagName);c.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(c[":@"]=this.buildAttributesMap(a.tagExp,s,a.tagName)),this.addChild(r,c,s)}i=a.closeIndex+1}else if(e.substr(i+1,3)==="!--"){const a=He(e,"-->",i+4,"Comment is not closed.");if(this.options.commentPropName){const c=e.substring(i+4,a-2);n=this.saveTextToParentTag(n,r,s),r.add(this.options.commentPropName,[{[this.options.textNodeName]:c}])}i=a}else if(e.substr(i+1,2)==="!D"){const a=hh(e,i);this.docTypeEntities=a.entities,i=a.i}else if(e.substr(i+1,2)==="!["){const a=He(e,"]]>",i,"CDATA is not closed.")-2,c=e.substring(i+9,a);if(n=this.saveTextToParentTag(n,r,s),this.options.cdataPropName)r.add(this.options.cdataPropName,[{[this.options.textNodeName]:c}]);else{let u=this.parseTextData(c,r.tagname,s,!0,!1,!0);u==null&&(u=""),r.add(this.options.textNodeName,u)}i=a+2}else{let a=Qr(e,i,this.options.removeNSPrefix),c=a.tagName,u=a.tagExp,d=a.attrExpPresent,f=a.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,s,!1));const p=r;if(p&&this.options.unpairedTags.indexOf(p.tagname)!==-1&&(r=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf("."))),c!==t.tagname&&(s+=s?"."+c:c),this.isItStopNode(this.options.stopNodes,s,c)){let g="";if(u.length>0&&u.lastIndexOf("/")===u.length-1)i=a.closeIndex;else if(this.options.unpairedTags.indexOf(c)!==-1)i=a.closeIndex;else{const E=this.readStopNodeData(e,c,f+1);if(!E)throw new Error(`Unexpected end of ${c}`);i=E.i,g=E.tagContent}const w=new bt(c);c!==u&&d&&(w[":@"]=this.buildAttributesMap(u,s,c)),g&&(g=this.parseTextData(g,c,s,!0,d,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),w.add(this.options.textNodeName,g),this.addChild(r,w,s)}else{if(u.length>0&&u.lastIndexOf("/")===u.length-1){c[c.length-1]==="/"?(c=c.substr(0,c.length-1),u=c):u=u.substr(0,u.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));const g=new bt(c);c!==u&&d&&(g[":@"]=this.buildAttributesMap(u,s,c)),this.addChild(r,g,s),s=s.substr(0,s.lastIndexOf("."))}else{const g=new bt(c);this.tagsNodeStack.push(r),c!==u&&d&&(g[":@"]=this.buildAttributesMap(u,s,c)),this.addChild(r,g,s),r=g}n="",i=f}}else n+=e[i];return t.child};function xh(e,t,r){const n=this.options.updateTag(t.tagname,r,t[":@"]);n===!1||(typeof n=="string"&&(t.tagname=n),e.addChild(t))}const Sh=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){const r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){const r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function vh(e,t,r,n){return e&&(n===void 0&&(n=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,n),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function Ch(e,t,r){const n="*."+r;for(const s in e){const i=e[s];if(n===i||t===i)return!0}return!1}function Rh(e,t,r=">"){let n,s="";for(let i=t;i<e.length;i++){let o=e[i];if(n)o===n&&(n="");else if(o==='"'||o==="'")n=o;else if(o===r[0])if(r[1]){if(e[i+1]===r[1])return{data:s,index:i}}else return{data:s,index:i};else o==="	"&&(o=" ");s+=o}}function He(e,t,r,n){const s=e.indexOf(t,r);if(s===-1)throw new Error(n);return s+t.length-1}function Qr(e,t,r,n=">"){const s=Rh(e,t+1,n);if(!s)return;let i=s.data;const o=s.index,a=i.search(/\s/);let c=i,u=!0;if(a!==-1&&(c=i.substr(0,a).replace(/\s\s*$/,""),i=i.substr(a+1)),r){const d=c.indexOf(":");d!==-1&&(c=c.substr(d+1),u=c!==s.data.substr(d+1))}return{tagName:c,tagExp:i,closeIndex:o,attrExpPresent:u}}function _h(e,t,r){const n=r;let s=1;for(;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){const i=He(e,">",r,`${t} is not closed`);if(e.substring(r+2,i).trim()===t&&(s--,s===0))return{tagContent:e.substring(n,r),i};r=i}else if(e[r+1]==="?")r=He(e,"?>",r+1,"StopNode is not closed.");else if(e.substr(r+1,3)==="!--")r=He(e,"-->",r+3,"StopNode is not closed.");else if(e.substr(r+1,2)==="![")r=He(e,"]]>",r,"StopNode is not closed.")-2;else{const i=Qr(e,r,">");i&&((i&&i.tagName)===t&&i.tagExp[i.tagExp.length-1]!=="/"&&s++,r=i.closeIndex)}}function Jr(e,t,r){if(t&&typeof e=="string"){const n=e.trim();return n==="true"?!0:n==="false"?!1:ph(e,r)}else return yn.isExist(e)?e:""}var Bh=gh,Go={};function Th(e,t){return Wo(e,t)}function Wo(e,t,r){let n;const s={};for(let i=0;i<e.length;i++){const o=e[i],a=kh(o);let c="";if(r===void 0?c=a:c=r+"."+a,a===t.textNodeName)n===void 0?n=o[a]:n+=""+o[a];else{if(a===void 0)continue;if(o[a]){let u=Wo(o[a],t,c);const d=Nh(u,t);o[":@"]?Ph(u,o[":@"],c,t):Object.keys(u).length===1&&u[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?u=u[t.textNodeName]:Object.keys(u).length===0&&(t.alwaysCreateTextNode?u[t.textNodeName]="":u=""),s[a]!==void 0&&s.hasOwnProperty(a)?(Array.isArray(s[a])||(s[a]=[s[a]]),s[a].push(u)):t.isArray(a,c,d)?s[a]=[u]:s[a]=u}}}return typeof n=="string"?n.length>0&&(s[t.textNodeName]=n):n!==void 0&&(s[t.textNodeName]=n),s}function kh(e){const t=Object.keys(e);for(let r=0;r<t.length;r++){const n=t[r];if(n!==":@")return n}}function Ph(e,t,r,n){if(t){const s=Object.keys(t),i=s.length;for(let o=0;o<i;o++){const a=s[o];n.isArray(a,r+"."+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function Nh(e,t){const{textNodeName:r}=t,n=Object.keys(e).length;return!!(n===0||n===1&&(e[r]||typeof e[r]=="boolean"||e[r]===0))}Go.prettify=Th;const{buildOptions:Oh}=mn,Mh=Bh,{prettify:Fh}=Go,Ih=pn;let Dh=class{constructor(t){this.externalEntities={},this.options=Oh(t)}parse(t,r){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});const i=Ih.validate(t,r);if(i!==!0)throw Error(`${i.err.msg}:${i.err.line}:${i.err.col}`)}const n=new Mh(this.options);n.addExternalEntities(this.externalEntities);const s=n.parseXml(t);return this.options.preserveOrder||s===void 0?s:Fh(s,this.options)}addEntity(t,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=r}};var Uh=Dh;const $h=`
`;function Lh(e,t){let r="";return t.format&&t.indentBy.length>0&&(r=$h),Ko(e,t,"",r)}function Ko(e,t,r,n){let s="",i=!1;for(let o=0;o<e.length;o++){const a=e[o],c=Hh(a);let u="";if(r.length===0?u=c:u=`${r}.${c}`,c===t.textNodeName){let w=a[c];jh(u,t)||(w=t.tagValueProcessor(c,w),w=Xo(w,t)),i&&(s+=n),s+=w,i=!1;continue}else if(c===t.cdataPropName){i&&(s+=n),s+=`<![CDATA[${a[c][0][t.textNodeName]}]]>`,i=!1;continue}else if(c===t.commentPropName){s+=n+`<!--${a[c][0][t.textNodeName]}-->`,i=!0;continue}else if(c[0]==="?"){const w=vi(a[":@"],t),E=c==="?xml"?"":n;let S=a[c][0][t.textNodeName];S=S.length!==0?" "+S:"",s+=E+`<${c}${S}${w}?>`,i=!0;continue}let d=n;d!==""&&(d+=t.indentBy);const f=vi(a[":@"],t),p=n+`<${c}${f}`,g=Ko(a[c],t,u,d);t.unpairedTags.indexOf(c)!==-1?t.suppressUnpairedNode?s+=p+">":s+=p+"/>":(!g||g.length===0)&&t.suppressEmptyNode?s+=p+"/>":g&&g.endsWith(">")?s+=p+`>${g}${n}</${c}>`:(s+=p+">",g&&n!==""&&(g.includes("/>")||g.includes("</"))?s+=n+t.indentBy+g+n:s+=g,s+=`</${c}>`),i=!0}return s}function Hh(e){const t=Object.keys(e);for(let r=0;r<t.length;r++){const n=t[r];if(n!==":@")return n}}function vi(e,t){let r="";if(e&&!t.ignoreAttributes)for(let n in e){let s=t.attributeValueProcessor(n,e[n]);s=Xo(s,t),s===!0&&t.suppressBooleanAttributes?r+=` ${n.substr(t.attributeNamePrefix.length)}`:r+=` ${n.substr(t.attributeNamePrefix.length)}="${s}"`}return r}function jh(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let r=e.substr(e.lastIndexOf(".")+1);for(let n in t.stopNodes)if(t.stopNodes[n]===e||t.stopNodes[n]==="*."+r)return!0;return!1}function Xo(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){const n=t.entities[r];e=e.replace(n.regex,n.val)}return e}var qh=Lh;const zh=qh,Vh={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function De(e){this.options=Object.assign({},Vh,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Kh),this.processTextOrObjNode=Gh,this.options.format?(this.indentate=Wh,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}De.prototype.build=function(e){return this.options.preserveOrder?zh(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};De.prototype.j2x=function(e,t){let r="",n="";for(let s in e)if(!(typeof e[s]>"u"))if(e[s]===null)s[0]==="?"?n+=this.indentate(t)+"<"+s+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+s+"/"+this.tagEndChar;else if(e[s]instanceof Date)n+=this.buildTextValNode(e[s],s,"",t);else if(typeof e[s]!="object"){const i=this.isAttribute(s);if(i)r+=this.buildAttrPairStr(i,""+e[s]);else if(s===this.options.textNodeName){let o=this.options.tagValueProcessor(s,""+e[s]);n+=this.replaceEntitiesValue(o)}else n+=this.buildTextValNode(e[s],s,"",t)}else if(Array.isArray(e[s])){const i=e[s].length;let o="";for(let a=0;a<i;a++){const c=e[s][a];typeof c>"u"||(c===null?s[0]==="?"?n+=this.indentate(t)+"<"+s+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+s+"/"+this.tagEndChar:typeof c=="object"?this.options.oneListGroup?o+=this.j2x(c,t+1).val:o+=this.processTextOrObjNode(c,s,t):o+=this.buildTextValNode(c,s,"",t))}this.options.oneListGroup&&(o=this.buildObjectNode(o,s,"",t)),n+=o}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){const i=Object.keys(e[s]),o=i.length;for(let a=0;a<o;a++)r+=this.buildAttrPairStr(i[a],""+e[s][i[a]])}else n+=this.processTextOrObjNode(e[s],s,t);return{attrStr:r,val:n}};De.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function Gh(e,t,r){const n=this.j2x(e,r+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,n.attrStr,r):this.buildObjectNode(n.val,t,n.attrStr,r)}De.prototype.buildObjectNode=function(e,t,r,n){if(e==="")return t[0]==="?"?this.indentate(n)+"<"+t+r+"?"+this.tagEndChar:this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let s="</"+t+this.tagEndChar,i="";return t[0]==="?"&&(i="?",s=""),r&&e.indexOf("<")===-1?this.indentate(n)+"<"+t+r+i+">"+e+s:this.options.commentPropName!==!1&&t===this.options.commentPropName&&i.length===0?this.indentate(n)+`<!--${e}-->`+this.newLine:this.indentate(n)+"<"+t+r+i+this.tagEndChar+e+this.indentate(n)+s}};De.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};De.prototype.buildTextValNode=function(e,t,r,n){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(n)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(n)+"<"+t+r+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(t,e);return s=this.replaceEntitiesValue(s),s===""?this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(n)+"<"+t+r+">"+s+"</"+t+this.tagEndChar}};De.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){const r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e};function Wh(e){return this.options.indentBy.repeat(e)}function Kh(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}var Xh=De;const Zh=pn,Yh=Uh,Qh=Xh;var Jh={XMLParser:Yh,XMLValidator:Zh,XMLBuilder:Qh};class bn extends sn{constructor(t){super(t),Object.setPrototypeOf(this,bn.prototype)}}var Ci;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(Ci||(Ci={}));var Ri;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.ObjectSizeGreaterThan!==void 0?r.ObjectSizeGreaterThan(t.ObjectSizeGreaterThan):t.ObjectSizeLessThan!==void 0?r.ObjectSizeLessThan(t.ObjectSizeLessThan):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(Ri||(Ri={}));var _i;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.AccessPointArn!==void 0?r.AccessPointArn(t.AccessPointArn):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(_i||(_i={}));var Bi;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(Bi||(Bi={}));const ep=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:St},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:St}}),tp=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:St},...e.SSEKMSKeyId&&{SSEKMSKeyId:St},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:St}}),rp=async(e,t)=>{const{hostname:r,protocol:n="https",port:s,path:i}=await t.endpoint(),o=Ut({},wt,{"content-type":e.ContentType||"application/octet-stream","x-amz-acl":e.ACL,"cache-control":e.CacheControl,"content-disposition":e.ContentDisposition,"content-encoding":e.ContentEncoding,"content-language":e.ContentLanguage,"content-length":[()=>wt(e.ContentLength),()=>e.ContentLength.toString()],"content-md5":e.ContentMD5,"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm,"x-amz-checksum-crc32":e.ChecksumCRC32,"x-amz-checksum-crc32c":e.ChecksumCRC32C,"x-amz-checksum-sha1":e.ChecksumSHA1,"x-amz-checksum-sha256":e.ChecksumSHA256,expires:[()=>wt(e.Expires),()=>Da(e.Expires).toString()],"x-amz-grant-full-control":e.GrantFullControl,"x-amz-grant-read":e.GrantRead,"x-amz-grant-read-acp":e.GrantReadACP,"x-amz-grant-write-acp":e.GrantWriteACP,"x-amz-server-side-encryption":e.ServerSideEncryption,"x-amz-storage-class":e.StorageClass,"x-amz-website-redirect-location":e.WebsiteRedirectLocation,"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm,"x-amz-server-side-encryption-customer-key":e.SSECustomerKey,"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5,"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId,"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext,"x-amz-server-side-encryption-bucket-key-enabled":[()=>wt(e.BucketKeyEnabled),()=>e.BucketKeyEnabled.toString()],"x-amz-request-payer":e.RequestPayer,"x-amz-tagging":e.Tagging,"x-amz-object-lock-mode":e.ObjectLockMode,"x-amz-object-lock-retain-until-date":[()=>wt(e.ObjectLockRetainUntilDate),()=>(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()],"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner,...e.Metadata!==void 0&&Object.keys(e.Metadata).reduce((f,p)=>(f[`x-amz-meta-${p.toLowerCase()}`]=e.Metadata[p],f),{})});let a=`${i!=null&&i.endsWith("/")?i.slice(0,-1):i||""}/{Key+}`;a=On(a,e,"Bucket",()=>e.Bucket,"{Bucket}",!1),a=On(a,e,"Key",()=>e.Key,"{Key+}",!0);const c=Ut({"x-id":[,"PutObject"]});let u;e.Body!==void 0&&(u=e.Body);let d;return e.Body!==void 0&&(d=e.Body,u=d),new de({protocol:n,hostname:r,port:s,method:"PUT",headers:o,path:a,query:c,body:u})},np=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return sp(e,t);const r=Ut({$metadata:op(e),Expiration:[,e.headers["x-amz-expiration"]],ETag:[,e.headers.etag],ChecksumCRC32:[,e.headers["x-amz-checksum-crc32"]],ChecksumCRC32C:[,e.headers["x-amz-checksum-crc32c"]],ChecksumSHA1:[,e.headers["x-amz-checksum-sha1"]],ChecksumSHA256:[,e.headers["x-amz-checksum-sha256"]],ServerSideEncryption:[,e.headers["x-amz-server-side-encryption"]],VersionId:[,e.headers["x-amz-version-id"]],SSECustomerAlgorithm:[,e.headers["x-amz-server-side-encryption-customer-algorithm"]],SSECustomerKeyMD5:[,e.headers["x-amz-server-side-encryption-customer-key-md5"]],SSEKMSKeyId:[,e.headers["x-amz-server-side-encryption-aws-kms-key-id"]],SSEKMSEncryptionContext:[,e.headers["x-amz-server-side-encryption-context"]],BucketKeyEnabled:[()=>e.headers["x-amz-server-side-encryption-bucket-key-enabled"]!==void 0,()=>Ma(e.headers["x-amz-server-side-encryption-bucket-key-enabled"])],RequestCharged:[,e.headers["x-amz-request-charged"]]});return await Ii(e.body,t),r},sp=async(e,t)=>{const r={...e,body:await up(e.body,t)},n=dp(e,r.body),s=r.body;return ip({output:e,parsedBody:s,errorCode:n})},ip=La(bn),op=e=>{var t,r;return{httpStatusCode:e.statusCode,requestId:(r=(t=e.headers["x-amzn-requestid"])!=null?t:e.headers["x-amzn-request-id"])!=null?r:e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},ap=(e,t)=>Ii(e,t).then(r=>t.utf8Encoder(r)),wt=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),cp=(e,t)=>ap(e,t).then(r=>{if(r.length){const n=new Jh.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,u)=>u.trim()===""&&u.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);const s=n.parse(r),i="#text",o=Object.keys(s)[0],a=s[o];return a[i]&&(a[o]=a[i],delete a[i]),Di(a)}return{}}),up=async(e,t)=>{var n;const r=await cp(e,t);return r.Error&&(r.Error.message=(n=r.Error.message)!=null?n:r.Error.Message),r},dp=(e,t)=>{if((t==null?void 0:t.Code)!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"};function lp(e){return t=>async r=>{let n={...r.input};const s=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(const i of s){const o=n[i.target];if(o){const a=ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):typeof o=="string"?e.utf8Decoder(o):new Uint8Array(o),c=e.base64Encoder(a),u=new e.md5;u.update(a),n={...n,[i.target]:c,[i.hash]:e.base64Encoder(await u.digest())}}}return t({...r,input:n})}}const fp={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},hp=e=>({applyToStack:t=>{t.add(lp(e),fp)}});var J;(function(e){e.MD5="MD5",e.CRC32="CRC32",e.CRC32C="CRC32C",e.SHA1="SHA1",e.SHA256="SHA256"})(J||(J={}));var Ti;(function(e){e.HEADER="header",e.TRAILER="trailer"})(Ti||(Ti={}));const en=[J.CRC32,J.CRC32C,J.SHA1,J.SHA256],pp=[J.CRC32,J.CRC32C,J.SHA1,J.SHA256],gp=(e,{requestChecksumRequired:t,requestAlgorithmMember:r})=>{if(!r||!e[r])return t?J.MD5:void 0;const n=e[r];if(!en.includes(n))throw new Error(`The checksum algorithm "${n}" is not supported by the client. Select one of ${en}.`);return n},wn=e=>e===J.MD5?"content-md5":`x-amz-checksum-${e.toLowerCase()}`,mp=(e,t)=>{const r=e.toLowerCase();for(const n of Object.keys(t))if(r===n.toLowerCase())return!0;return!1},En=e=>e!==void 0&&typeof e!="string"&&!ArrayBuffer.isView(e)&&!Xi(e);var $r={},Et={},ki;function yp(){if(ki)return Et;ki=1,Object.defineProperty(Et,"__esModule",{value:!0}),Et.AwsCrc32c=void 0;var e=we,t=Fe(),r=Zo(),n=function(){function s(){this.crc32c=new r.Crc32c}return s.prototype.update=function(i){(0,t.isEmptyData)(i)||this.crc32c.update((0,t.convertToBuffer)(i))},s.prototype.digest=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(i){return[2,(0,t.numToUint8)(this.crc32c.digest())]})})},s.prototype.reset=function(){this.crc32c=new r.Crc32c},s}();return Et.AwsCrc32c=n,Et}var Pi;function Zo(){return Pi||(Pi=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AwsCrc32c=e.Crc32c=e.crc32c=void 0;var t=we,r=Fe();function n(c){return new s().update(c).digest()}e.crc32c=n;var s=function(){function c(){this.checksum=4294967295}return c.prototype.update=function(u){var d,f;try{for(var p=t.__values(u),g=p.next();!g.done;g=p.next()){var w=g.value;this.checksum=this.checksum>>>8^o[(this.checksum^w)&255]}}catch(E){d={error:E}}finally{try{g&&!g.done&&(f=p.return)&&f.call(p)}finally{if(d)throw d.error}}return this},c.prototype.digest=function(){return(this.checksum^4294967295)>>>0},c}();e.Crc32c=s;var i=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],o=(0,r.uint32ArrayFrom)(i),a=yp();Object.defineProperty(e,"AwsCrc32c",{enumerable:!0,get:function(){return a.AwsCrc32c}})}($r)),$r}var bp=Zo();const Yo=(e,t)=>({[J.MD5]:t.md5,[J.CRC32]:on.AwsCrc32,[J.CRC32C]:bp.AwsCrc32c,[J.SHA1]:t.sha1,[J.SHA256]:t.sha256})[e],Qo=(e,t)=>{const r=new e;return r.update(Ge(t||"")),r.digest()},wp={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},Ep=(e,t)=>r=>async n=>{if(!de.isInstance(n.request))return r(n);const{request:s}=n,{body:i,headers:o}=s,{base64Encoder:a,streamHasher:c}=e,{input:u,requestChecksumRequired:d,requestAlgorithmMember:f}=t,p=gp(u,{requestChecksumRequired:d,requestAlgorithmMember:f});let g=i,w=o;if(p){const S=wn(p),C=Yo(p,e);if(En(i)){const{getAwsChunkedEncodingStream:O,bodyLengthChecker:$}=e;g=O(i,{base64Encoder:a,bodyLengthChecker:$,checksumLocationName:S,checksumAlgorithmFn:C,streamHasher:c}),w={...o,"content-encoding":o["content-encoding"]?`${o["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":o["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":S},delete w["content-length"]}else if(!mp(S,o)){const O=await Qo(C,i);w={...o,[S]:a(O)}}}return await r({...n,request:{...s,headers:w,body:g}})},Jo=(e=[])=>{const t=[];for(const r of pp)!e.includes(r)||!en.includes(r)||t.push(r);return t},Ap=e=>{const t=e.lastIndexOf("-");if(t!==-1){const r=e.slice(t+1);if(!r.startsWith("0")){const n=parseInt(r,10);if(!isNaN(n)&&n>=1&&n<=1e4)return!0}}return!1};function Ni(e){return new Blob([e]).stream()}const xp=async(e,{streamHasher:t,checksumAlgorithmFn:r,base64Encoder:n})=>{const s=En(e)?t(r,e):Qo(r,e);return n(await s)},Sp=async(e,{config:t,responseAlgorithms:r})=>{const n=Jo(r),{body:s,headers:i}=e;for(const o of n){const a=wn(o),c=i[a];if(c){const u=Yo(o,t),{streamHasher:d,base64Encoder:f}=t,p=await xp(s,{streamHasher:d,checksumAlgorithmFn:u,base64Encoder:f});if(p===c)break;throw new Error(`Checksum mismatch: expected "${p}" but received "${c}" in response header "${a}".`)}}},vp={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},Cp=(e,t)=>(r,n)=>async s=>{if(!de.isInstance(s.request))return r(s);const i=s.input,o=await r(s),a=o.response;let c;const{requestValidationModeMember:u,responseAlgorithms:d}=t;if(u&&i[u]==="ENABLED"){const{clientName:f,commandName:p}=n;if(f==="S3Client"&&p==="GetObjectCommand"&&Jo(d).every(E=>{const S=wn(E),C=a.headers[S];return!C||Ap(C)}))return o;const w=En(a.body);w&&(c=await e.streamCollector(a.body),a.body=Ni(c)),await Sp(o.response,{config:e,responseAlgorithms:d}),w&&c&&(a.body=Ni(c))}return o},Rp=(e,t)=>({applyToStack:r=>{r.add(Ep(e,t),wp),r.addRelativeTo(Cp(e,t),vp)}});class An extends Oa{static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(Id(r,this.serialize,this.deserialize)),this.middlewareStack.use(Ud(r,An.getEndpointParameterInstructions())),this.middlewareStack.use(rc()),this.middlewareStack.use(hp(r)),this.middlewareStack.use(Rp(r,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!1}));const s=t.concat(this.middlewareStack),{logger:i}=r,c={logger:i,clientName:"S3Client",commandName:"PutObjectCommand",inputFilterSensitiveLog:tp,outputFilterSensitiveLog:ep,[ra]:{service:"AmazonS3",operation:"PutObject"}},{requestHandler:u}=r;return s.resolve(d=>u.handle(d.request,n||{}),c)}serialize(t,r){return rp(t,r)}deserialize(t,r){return np(t,r)}}const _p=new Uf({credentials:{accessKeyId:At.accessKeyId,secretAccessKey:At.secretAccessKey},region:At.region}),Bp={web:"web",h5:"h5"};var Tp=(e=>(e.c2c="c2c",e.im="im",e))(Tp||{}),kp=(e=>(e.merchant_application="merchant_application",e.complain_application="complain_application",e))(kp||{});const Pp=(e,t,r)=>`${Bp.web}/${e}/${t}/${r}`,Np=e=>{const{bucket:t,region:r}=At;return`https://${t}.S3.${r}.amazonaws.com/${e}`},Op=e=>{const t=e.name.split(".")||[];return`${Date.now()}.${t[t.length-1]}`},Up=(e,t,r)=>new Promise((n,s)=>{e||s(new Error("文件不存在"));const{bucket:i}=At,o=Pp(t,r,Op(e)),a=new An({Bucket:i,Key:o,Body:e,ContentType:e.type});_p.send(a).then(()=>{n({url:Np(o)})}).catch(c=>{console.error(c),s(new Error("上传失败"))})});export{kp as A,Up as a,Tp as b};
