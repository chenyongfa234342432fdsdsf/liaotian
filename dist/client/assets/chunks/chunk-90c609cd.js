import{u as se,i as r}from"./chunk-d8234155.js";import{r as o}from"./chunk-e9cd8943.js";/* empty css              */import{F as i,e as te,v as re,p as oe}from"./chunk-54123a3b.js";import{B as T}from"./chunk-23179642.js";import{I as f}from"./chunk-1a70223d.js";import{u as ae,q as ie,r as B}from"./chunk-fde55823.js";import{I as C}from"./chunk-d80cdd1c.js";import{o as ne}from"./chunk-99b8f121.js";import{L as le}from"./chunk-5212edba.js";import{I as ce}from"./chunk-38141c50.js";import{l as E}from"./chunk-ba3e3861.js";import{L as U}from"./chunk-278fdecb.js";import{C as me}from"./chunk-cb1a8670.js";import{u as ue,g as de,a as _e}from"./chunk-634a8a63.js";import{p as fe,a as pe,g as ge,b as he}from"./chunk-41ff5c14.js";import{u as ye}from"./chunk-7d77b549.js";import{U as xe}from"./chunk-18733530.js";import{j as s,a as n}from"./chunk-c1d16543.js";import{M as N}from"./chunk-36a75920.js";import"./chunk-cf010ec4.js";import"./chunk-77df718a.js";import"./chunk-38ad52ab.js";import"./chunk-b4d6f2f0.js";import"./chunk-0feb7138.js";import"./chunk-01660bad.js";import"./chunk-d4125093.js";import"./chunk-c1540bb6.js";import"./chunk-09d047a9.js";import"./chunk-acb1a683.js";import"./chunk-61229905.js";import"./chunk-b745fb4d.js";import"./chunk-3a21c360.js";/* empty css              */import"./chunk-bc20e779.js";import"./chunk-6b5946cf.js";import"./chunk-ec38f500.js";import"./chunk-260fa0dc.js";import"./chunk-f3e99ce8.js";const be="create-account-index-module__scoped--zag",Ce={scoped:be};function ns(){ue();const{setBusinessId:w,setAccessKey:I}=se(),{setUserTransitionDatas:v,setUserInfo:S,setLogin:k,setZimToken:q}=ae(),[d,h]=o.useState(0),[y,R]=o.useState(""),[_,V]=o.useState(""),[x,z]=o.useState(""),[a,M]=o.useState("email"),[p,A]=o.useState(!1),[F,l]=o.useState(!1),[b,j]=o.useState(!1),g=o.useRef(),[c]=i.useForm(),[L,P]=o.useState(!1),$=()=>{P(!0)},G=()=>{P(!1)},O=e=>{R(e.countryName),V(e.countryEnCode),z(e.countryShortName),c.setFieldValue("area",e.countryName)},K=()=>{ie({}).then(e=>{if(e.isOk&&e.data){let{countryName:t,countryShortName:m,countryEnCode:u}=e.data;R(t||""),V(u||""),z(m||""),c.setFieldValue("area",t)}})},D=()=>{const e={mobile:{validateName:["account","area","serverId"],sendRequest:H},email:{validateName:["email","serverId"],sendRequest:W}};c.validate(e[a].validateName).then(()=>{e[a].sendRequest()}).catch(()=>{})},H=()=>{const{account:e}=c.getFieldsValue();ge({mobileNumber:e,mobileCountryCd:_,typeCd:"1"}).then(m=>{var u;m.isOk&&((u=m.data)!=null&&u.success)&&h(60)})},W=()=>{let t={email:c.getFieldValue("email"),typeCd:"1"};he(t).then(m=>{var u;m.isOk&&((u=m.data)!=null&&u.success)&&h(60)})},Z=()=>{A(!p),c.setFieldValue("protocol",!p)},J=async e=>{{l(!0);const t=await _e(e.serverId);if(t)w(e.serverId),t&&I(t);else{l(!1),I(""),w("1"),await N.error(r._("features_users_create_account_index_sysmxmxmi8"));return}}a==="mobile"?Y(e):Q(e)},Q=async e=>{l(!0);const{data:t}=await fe({email:e.email,loginPassword:e.loginPassword,emailCode:e.code,regCountry:x,mobileCountryCd:_});if(!t){l(!1);return}q((t==null?void 0:t.zeGoToken)||""),S({...t==null?void 0:t.userInfo,bindCountry:y}),k(!0),B(t),l(!1),g.current={email:e.email,password:e.loginPassword,verifyCode:e.code},v({...g.current}),N.success(r._("features_users_create_account_index_hs4vign49m")),E("/set-information")},X=()=>{j(!b)},Y=async e=>{l(!0);const{data:t}=await pe({mobileNumber:e.account,loginPassword:e.loginPassword,mobileTelCode:e.code,regCountry:x,mobileCountryCd:_});if(!t){l(!1);return}l(!1),q((t==null?void 0:t.zeGoToken)||""),S({...t==null?void 0:t.userInfo,bindCountry:y}),B(t),k(!0),g.current={mobileCountryCd:_,mobile:e.account,shortName:x,password:e.loginPassword,verifyCode:e.code},v({...g.current}),N.success(r._("features_users_create_account_index_hs4vign49m")),E("/set-information")};o.useEffect(()=>{K()},[]),o.useEffect(()=>{let e=null;return d>0?e=setInterval(()=>{h(t=>t-1)},1e3):clearInterval(e),()=>{e&&clearInterval(e)}},[d]);const ee=`${ye("terms_service")}?redirect=/register`;return s(xe,{children:n("div",{className:Ce.scoped,children:[s(ce,{}),s("div",{className:"qcode-box",children:s("div",{className:"qcrode",children:s(le,{className:"overflow-hidden rounded-3xl",src:`${ne}plogo.png`})})}),s(i,{form:c,layout:"vertical",onSubmit:J,autoComplete:"off",validateTrigger:"onBlur",children:n("div",{className:"register-box",children:[n("h1",{className:"text-text_color_01 font-semibold size32",children:[a==="email"?r._("features_settings_center_personal_information_index_suyk940elg"):r._("features_settings_center_personal_information_index_4sbsiya1gg"),r._("features_users_create_account_index_xyxpcp1rku")]}),s(i.Item,{className:"list-item server-box",field:"serverId",requiredSymbol:!1,rules:[{required:!0,message:r._("features_users_create_account_index_xhrbqemwnq")}],children:s(f,{autoComplete:"off",placeholder:r._("features_users_create_account_index_xhrbqemwnq"),className:"input-box"})}),s("div",{className:"tab-box",children:n("ul",{children:[s("li",{className:a==="email"?"active":"",onClick:()=>M("email"),children:r._("features_settings_center_personal_information_index_suyk940elg")}),s("li",{className:a==="mobile"?"active":"",onClick:()=>M("mobile"),children:r._("features_settings_center_personal_information_index_4sbsiya1gg")})]})}),n("div",{className:"register-content",children:[s(i.Item,{className:"list-item cursor-pointer",field:"area",requiredSymbol:!1,rules:[{required:!0,message:r._("features_users_create_account_index_0dlxrrysk4")}],children:s(f,{readOnly:!0,value:y,onClick:$,suffix:s(C,{name:"icon_chat_arrow",fontSize:16,className:"text-icon_color"}),placeholder:r._("features_users_create_account_index_0dlxrrysk4"),className:"area"})}),a==="mobile"&&s(i.Item,{className:"list-item",field:"account",requiredSymbol:!1,rules:[{required:!0,message:r._("features_settings_center_bind_mobile_index_rocukuvszt")}],children:s(f,{addBefore:_?`+${_}`:"--",placeholder:r._("features_settings_center_bind_mobile_index_rocukuvszt"),className:"input-box"})}),a==="email"&&s(i.Item,{className:"list-item",field:"email",requiredSymbol:!1,rules:[te()],children:s(f,{placeholder:r._("features_users_create_account_index_jgkp094fey"),className:"input-box"})}),s(i.Item,{className:"list-item",requiredSymbol:!1,field:"code",rules:[re(d>0)],children:s(f,{placeholder:a==="email"?r._("features_settings_center_verify_identidy_index_rwtzuuhnki"):r._("features_settings_center_bind_mobile_index_avn5naqutc"),className:"input-box",addAfter:s(T,{onClick:D,disabled:d>0,className:"getcode pr-4",type:"text",children:d>0?`${d}s`:r._("features_users_create_account_index_dlm0wqw8rw")})})}),s(i.Item,{className:"list-item last-item",requiredSymbol:!1,field:"loginPassword",rules:[oe()],children:s(f,{type:b?"text":"password",className:"input-box",suffix:s(C,{name:b?"icon_register_open":"icon_register_hide",fontSize:22,onClick:X,className:"password-icon pr-4 text-icon_color"}),placeholder:r._("features_users_create_account_index_uqp_bpomjo")})})]}),s(i.Item,{requiredSymbol:!1,field:"protocol",rules:[{required:!0,message:r._("features_users_create_account_index_ytob4evvng")}],children:n("div",{className:"flex mt-4 justify-start w-full",children:[s(C,{name:p?"icon_register_single_selected":"icon_register_single_unselected",fontSize:20,className:p?"country-icon-active":"country-icon",onClick:Z}),n("p",{className:"text-sm text-text_color_02",children:[r._({id:"features_settings_center_logout_index_g9lscxwdky",values:{0:de()}}),s(U,{href:ee,className:"text-brand_color",children:r._("features_settings_center_logout_index_zladk_meh5")})]})]})}),s("div",{className:"w-full",children:s(T,{type:"primary",loading:F,htmlType:"submit",long:!0,className:"commit-btn",children:r._("features_users_create_account_index_xyxpcp1rku")})}),n("div",{className:"text-text_color_02 text-sm mt-6",children:[n("span",{children:[r._("features_users_create_account_index_tyytj1iz0w")," "]}),s(U,{href:"/login",className:"text-brand_color unline",children:r._("features_users_create_account_index_iog8k6vuh1")})]})]})}),s(me,{visible:L,onClose:G,onSelect:O})]})})}export{ns as default};
