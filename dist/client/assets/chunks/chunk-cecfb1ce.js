import{i as r}from"./chunk-d8234155.js";import{r as l}from"./chunk-e9cd8943.js";import{u as w}from"./chunk-cc4f6b84.js";import{l as x}from"./chunk-ba3e3861.js";import{I as g}from"./chunk-d80cdd1c.js";import{u as C,t as A,v as E,w as M,h as O}from"./chunk-fde55823.js";import{n as R}from"./chunk-4d9fa2e4.js";import{g as j,b as G}from"./chunk-41ff5c14.js";/* empty css              */import"./chunk-23179642.js";import{M as V}from"./chunk-61229905.js";import{C as z}from"./chunk-faa47c2c.js";import{a,j as t,F as L}from"./chunk-c1d16543.js";import{N as T}from"./chunk-5b5bf05c.js";import"./chunk-cf010ec4.js";import"./chunk-634a8a63.js";import"./chunk-09d047a9.js";import"./chunk-acb1a683.js";import"./chunk-99b8f121.js";import"./chunk-36a75920.js";import"./chunk-0feb7138.js";import"./chunk-b745fb4d.js";import"./chunk-b4d6f2f0.js";import"./chunk-cd3d6459.js";import"./chunk-ec38f500.js";import"./chunk-c1540bb6.js";import"./chunk-278fdecb.js";const U="verify-identidy-logout-modal-module__popbox--8El",B={popbox:U},D=r._("features_settings_center_verify_identidy_logout_modal_da0pfanyhk");function F({visible:b,verifyCode:s,onCommit:h}){const{userInfo:d,clearUserCacheData:u}=C(),[c,m]=l.useState([]),_=()=>{A({}).then(e=>{e.isOk&&e.data&&(e.data.length?m(e.data):y())})},y=()=>{let e;d.mobileNumber?e={mobileCountryCd:d.mobileCountryCd,mobileNumber:d.mobileNumber,verifyCode:s}:e={email:d.email,verifyCode:s},E(e).then(p=>{p.isOk&&p.data&&u()})},f=()=>{c.length?h():x("/login")};return l.useEffect(()=>{_()},[]),a(V,{className:B.popbox,closable:!1,style:{height:"auto"},title:t("div",{style:{textAlign:"left"},children:r._("features_settings_center_account_security_index_kkqlfhbqu1")}),visible:b,okText:D,onOk:f,children:[c.length?a("div",{className:"chat-list",children:[t("p",{className:"text-text_color_02 text-sm",children:r._("features_settings_center_verify_identidy_logout_modal_p99v97gjhc")}),t("ul",{className:"h-auto overflow-y-auto w-full list-box",children:c.map(e=>a("li",{className:"flex justify-start h-10 items-center mt-4",children:[t(z,{size:40,className:"rounded-img",src:e.headImage}),t("span",{className:"text-base text-text_color_01 ml-3",children:e.groupName})]},e.groupId))})]}):null,!c.length&&a("div",{className:"flex items-center",children:[t(g,{name:"icon_set_logout_successful",fontSize:20,className:"text-brand_color"}),t("span",{className:"text-lg text-text_color_01 ml-3",children:r._("features_settings_center_verify_identidy_logout_modal_yqxwa5wm8p")})]})]})}const P="verify-identidy-index-module__scoped--wtg",Q={scoped:P};function ge(){const b=w(),{userInfo:s}=C(),[h,d]=l.useState("");l.useState("86"),l.useState("");const[u,c]=l.useState(""),[m,_]=l.useState(0),[y,f]=l.useState(!1),{url:e}=b.urlParsed.search,p=()=>{s.mobileNumber?N():v()},N=()=>{let o={mobileNumber:s.mobileNumber,mobileCountryCd:s.mobileCountryCd,typeCd:e==="logout"?"24":"99"};j(o).then(i=>{var n;i.isOk&&((n=i.data)!=null&&n.success)&&_(60)})},v=()=>{let o={email:s.email,typeCd:e==="/logout"?"24":"99"};G(o).then(i=>{var n;i.isOk&&((n=i.data)!=null&&n.success)&&_(60)})},I=o=>{R.test(o)?c(o):c("")},k=()=>{M({mobileTelCode:u}).then(i=>{var n;if(i.isOk&&((n=i.data)!=null&&n.success)){if(e==="/logout"){f(!0);return}x(e)}})},S=()=>{O({}).then(o=>{if(o.isOk&&o.data){const i=o.data.find(n=>n.countryEnCode===s.mobileCountryCd);i&&d(i.countryName)}})},q=()=>{f(!1)};return l.useEffect(()=>{S()},[]),l.useEffect(()=>{let o=null;return m>0?o=setInterval(()=>{_(i=>i-1)},1e3):clearInterval(o),()=>{o&&clearInterval(o)}},[m]),a(L,{children:[a("div",{className:Q.scoped,children:[t(T,{label:r._("features_settings_center_verify_identidy_index_ddqe9vbya0"),url:"/account-security"}),a("div",{className:"vefify-box",children:[a("div",{className:"flex flex-col pt-7 w-full items-center justify-center h-40 pb-7",children:[t(g,{name:"icon_set_verify_identidy",fontSize:50,className:"text-brand_color"}),t("h3",{className:"text-lg text-text_color_01 mt-3",children:r._("features_settings_center_verify_identidy_index_27w9ced7x_")})]}),a("div",{className:"mobile-box",children:[t("div",{className:"list-item cursor-pointer",children:t("span",{className:"area",children:h})}),s.mobileNumber&&a("div",{className:"list-item",children:[a("span",{className:"area-code",children:["+",s.mobileCountryCd]}),t("span",{className:"mobile",children:s.mobileNumber})]}),!s.mobileNumber&&t("div",{className:"list-item",children:t("span",{className:"mobile",children:s.email})}),a("div",{className:"list-item",style:{border:"none"},children:[t("input",{type:"text",value:u,placeholder:s.mobileNumber?r._("features_settings_center_bind_mobile_index_avn5naqutc"):r._("features_settings_center_verify_identidy_index_rwtzuuhnki"),className:"code",onChange:o=>I(o.target.value)}),t("button",{onClick:p,disabled:m>0,className:"getcode",type:"button",children:m>0?`${m}s`:r._("features_settings_center_bind_mobile_index_6ar4vb1hlx")})]})]}),u&&t("div",{className:"commit-btn",onClick:k,children:t(g,{name:e==="/logout"?"icon_set_confirm":"icon_set_next_step",fontSize:e==="/logout"?24:34,className:"commit-icon"})})]})]}),e==="/logout"&&t(F,{visible:y,verifyCode:u,onCommit:q})]})}export{ge as default};
