import{i18n as i}from"@lingui/core";import{useState as d,useEffect as z}from"react";import x from"pinyin";import{I as u}from"./chunk-c41c86a9.js";import _ from"@nbit/arco";import{e as U}from"./chunk-86c9a026.js";import{L as q}from"./chunk-38b7cb18.js";import{b as A}from"./chunk-c4940547.js";import{d as D}from"./chunk-60db822c.js";import{j as n,a as l}from"./chunk-ea028b12.js";const F="country-modal-index-module__scoped--XOg",K={scoped:F};var C,g;const{Modal:R,Input:W,Message:$}=(g=(C=_)==null?void 0:C.default)!=null&&g.__esModule?_.default:_;function ne({visible:N,onClose:h,onSelect:S}){const b=A.getState(),[f,m]=d(""),[c,w]=d({}),[y,I]=d({}),[p,O]=d(null),[V,k]=d(),j=e=>{const a=e.trim().toLowerCase();m(a);const o={};for(const t in c)if(Object.prototype.hasOwnProperty.call(c,t)){const s=c[t].filter(r=>r.countryName.toLowerCase().indexOf(e)!==-1||r.countryEnCode.toString().indexOf(a)!==-1);s.length>0&&(o[t]=s)}I(o)},v=e=>{O(e)},L=()=>{if(!p){$.error(i._("features_users_create_account_index_0dlxrrysk4"));return}S(p),m(""),h()},E=()=>{m(""),h()},T=e=>{const o=e.map(t=>{const s=b.locale==="en-US"?t.countryName.charAt(0).toUpperCase():x(t.countryName,{style:x.STYLE_FIRST_LETTER})[0][0].toUpperCase();return{...t,pinyinName:s}}).reduce((t,s)=>{const{pinyinName:r,...P}=s;return t[r]||(t[r]=[]),t[r].push({...P}),t},{});w(o)},M=()=>{D({}).then(e=>{e.isOk&&e.data&&(T(e.data),k(e.data))})};return z(()=>{M()},[]),n("div",{children:l(R,{className:K.scoped,style:{width:"500px",height:"552px",boxShadow:"0px 4px 20px 0px rgba(0, 0, 0, 0.15)",padding:"24px"},title:n("div",{style:{textAlign:"left"},children:i._("components_country_modal_index_nscvohqorw")}),visible:N,closable:!1,okText:i._("components_pop_box_index_xjmp7i51ci"),cancelText:i._("features_group_components_comfirm_btn_pop_index_2sr1guu0iy"),onCancel:E,onOk:L,children:[n("div",{className:"country-search",children:n(W,{className:"country-search-input",prefix:n(u,{name:"icon_chat_search",className:"text-icon_color text-sm"}),placeholder:i._("features_group_components_search_input_index_tq98cmscdb"),onChange:j})}),n("div",{className:"country-list",children:Object.keys(f?y:c).sort().map((e,a)=>l("div",{children:[n("h3",{className:"letter",children:e}),n("ul",{children:(f?y[e]:c[e]).map((o,t)=>l("li",{className:"country-item",onClick:()=>v(o),children:[p===o?n(u,{name:"icon_register_single_selected",fontSize:20,className:"country-icon-active"}):n(u,{name:"icon_register_single_unselected",fontSize:20,className:"country-icon"}),n(q,{src:`${U}${o.countryShortName}.png`}),l("div",{className:"country-area-code",children:[n("span",{className:"country-name",children:o.countryName}),l("span",{className:"country-code",children:["+",o.countryEnCode]})]})]},t))})]},a))})]})})}export{ne as C};
