import H from"zustand";import{createTrackedSelector as x}from"react-tracked";import R from"immer";import{devtools as j}from"zustand/middleware";import h from"store";import{i18n as O}from"@lingui/core";import{I as F}from"./chunk-c41c86a9.js";import{useRequest as $,useUpdateEffect as M}from"ahooks";import{useState as u,useRef as I,useEffect as S}from"react";import f from"classnames";import{L as y}from"./chunk-bbab396b.js";import{L as U}from"./chunk-c04e2975.js";import{R as C}from"./chunk-33e5f5bc.js";import{l as A}from"./chunk-75081d50.js";import{u as E}from"./chunk-47d6a401.js";import{useMount as V}from"react-use";import{L as b}from"./chunk-38b7cb18.js";import{j as e,a,F as q}from"./chunk-ea028b12.js";import{f as z}from"./chunk-2fc83edf.js";import"@nbit/arco";import"./chunk-77d12848.js";import"./chunk-c4940547.js";import"js-cookie";import"./chunk-20abda34.js";import"@nbit/utils";import"./chunk-86c9a026.js";import"react-dom";import"./chunk-357fcbd2.js";import"./chunk-7a6de6d7.js";import"lodash";import"axios";import"vike/client/router";import"./chunk-687b5088.js";import"make-plural/plurals";import"lottie-react";import"./chunk-13ae7681.js";import"crypto-js";import"react-lazy-load-image-component";import"dayjs";import"dayjs/plugin/utc.js";import"dayjs/plugin/timezone.js";import"dayjs/plugin/customParseFormat.js";const g="HELPER_CENTER_INFO";function G(){return h.get(g)}function w(t){return h.set(g,t)}function B(){return h.set(g,"")}function P(t){return{selectAnnouncementInfo:G()||{},setSelectAnnouncementInfo:r=>{t(R(s=>{s.selectAnnouncementInfo=r,w(r)}))},removeSelectAnnouncementInfoCache:()=>{B()}}}const T=H(j(P,{name:"announcement-center-store"})),k=x(T),X={"message-center":"help-center-index-module__message-center--XVL"},J=t=>C({path:"/v1/im/helpCenter/help/content",method:"GET",params:t}),K=()=>C({path:"/v1/im/helpCenter/helpCenterList",method:"GET"}),Q={"message-list":"helperList-list-index-module__message-list--8iH"},W={"list-item":"list-item-index-module__list-item--vEB"};function Y({itemData:t,isActive:r}){return e("div",{className:f(W["list-item"],{active:r}),children:e("div",{className:"item-info",children:a("p",{className:f("item-title"),children:[e(b,{src:t.logo}),t.name]})})})}function Z(t){const{selectAnnouncementInfo:r,setSelectAnnouncementInfo:s}=k(),{loading:d,data:o}=$(K),l=i=>{s(i)},[c,p]=u([]),{hash:n}=E();let m=I("");return S(()=>{var N,v,_,L;const i=o;i!=null&&i.isOk&&(i!=null&&i.data)&&(p(((N=i.data)==null?void 0:N.dialogList)||[]),r!=null&&r.id||(_=(v=i.data)==null?void 0:v.dialogList)!=null&&_.length&&l((L=i.data)==null?void 0:L.dialogList[0]))},[o]),V(()=>{n!=null&&n.includes("?")&&(m.current=n.split("?")[1].split("=")[1])}),a("div",{className:Q["message-list"],children:[e("p",{className:"head",children:a("div",{className:"title",children:[e(F,{name:"a-Notselected",onClick:()=>{s(c[0]),m?A(m.current):A("/")}}),e("span",{children:O._("features_help_center_components_helperlist_list_index_niy4vxif4k")})]})}),a("div",{className:"overflow-y-auto flex-1",children:[d&&e("div",{className:"flex justify-center mt-5",children:e(y,{})}),!d&&!(c!=null&&c.length)?e(U,{}):c.map(i=>e("div",{className:f("message-data",{"is-select":r.id===i.id}),onClick:()=>l(i),children:e(Y,{itemData:i,isActive:!1})},i.id))]})]})}const D={"right-content":"right-content-index-module__right-content--e-F"},ee={"announcement-article":"announcement-article-index-module__announcement-article--dIz"};function te({id:t,onChangeArticle:r}){const[s,d]=u({}),{helpCenterText:o}=s,[l,c]=u(!1),p=n=>{c(!0),J({contentId:n}).then(m=>{m.isOk&&m.data&&d(m.data||[]),c(!1)})};return S(()=>{p(t)},[t]),e("div",{className:ee["announcement-article"],children:a("div",{className:"article-content",children:[l&&e("div",{className:"flex justify-center items-center",children:e(y,{})}),!l&&a("div",{className:"header",children:[e("h3",{children:o==null?void 0:o.name}),e("div",{className:"date-time",children:z((o==null?void 0:o.pushTimeStramp)||"")})]}),e("div",{className:"article-html",dangerouslySetInnerHTML:{__html:(o==null?void 0:o.content)||""}})]})})}function ne({selectData:t}){var p;const r=I(t),[s,d]=u([]),{hash:o,updateHash:l}=E(),c=n=>{var m;if((m=n==null?void 0:n.catalogVOList)!=null&&m.length){d(n);return}l(`#${n.id}`)};return M(()=>{var n;((n=r==null?void 0:r.current)==null?void 0:n.id)!==(t==null?void 0:t.id)&&l(""),r.current=t,d(t||{})},[t]),e("div",{className:D["right-content"],children:o?e(te,{id:o.slice(1),onChangeArticle:c}):a(q,{children:[e("h4",{className:"right-content-title",children:s==null?void 0:s.name}),e("div",{className:"content-list",children:(p=s.catalogVOList)==null?void 0:p.map(n=>e("div",{children:e("div",{className:"list-items-title",onClick:()=>c(n),children:n.name})},n.id))})]})})}function Te(){const{selectAnnouncementInfo:t}=k();return a("div",{className:X["message-center"],children:[e("div",{className:"top-bg"}),a("div",{className:"message-info",children:[e("div",{className:"left-list",children:e(Z,{selectData:t})}),e("div",{className:"right-content",children:e(ne,{selectData:t})})]})]})}export{Te as default};
