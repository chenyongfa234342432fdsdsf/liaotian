import{create as j}from"zustand";import{createTrackedSelector as O}from"react-tracked";import Y from"immer";import{devtools as H}from"zustand/middleware";import u from"store";import{i18n as y}from"@lingui/core";import{I as $}from"./chunk-c41c86a9.js";import{g as w,a as F}from"./chunk-7cc161e2.js";import{useRequest as R,useUpdateEffect as U}from"ahooks";import{useState as A,useEffect as L,useRef as b}from"react";import p from"classnames";import{L as q}from"./chunk-bbab396b.js";import{L as z}from"./chunk-c04e2975.js";import{u as S}from"./chunk-47d6a401.js";import{l as V}from"./chunk-75081d50.js";import{L as B}from"./chunk-38b7cb18.js";import{j as e,a as c,F as G}from"./chunk-ea028b12.js";import{f as C}from"./chunk-2fc83edf.js";import"@nbit/arco";import"./chunk-77d12848.js";import"./chunk-c4940547.js";import"js-cookie";import"./chunk-20abda34.js";import"@nbit/utils";import"./chunk-86c9a026.js";import"./chunk-33e5f5bc.js";import"axios";import"./chunk-687b5088.js";import"make-plural/plurals";import"vike/client/router";import"./chunk-357fcbd2.js";import"./chunk-7a6de6d7.js";import"lodash";import"crypto-js";import"react-dom";import"lottie-react";import"./chunk-13ae7681.js";import"react-lazy-load-image-component";import"dayjs";import"dayjs/plugin/utc.js";import"dayjs/plugin/timezone.js";import"dayjs/plugin/customParseFormat.js";const h="ANNOUNCEMENT_INFO";function J(){return u.get(h)}function K(t){return u.set(h,t)}function P(){return u.set(h,"")}function Q(t){return{selectAnnouncementInfo:J()||{},setSelectAnnouncementInfo:i=>{t(Y(o=>{o.selectAnnouncementInfo=i,K(i)}))},removeSelectAnnouncementInfoCache:()=>{P()}}}const W=j(H(Q,{name:"announcement-center-store"})),k=O(W),X={"message-center":"announcement-center-index-module__message-center--i3j"},Z={"message-list":"message-list-index-module__message-list--maN"},D={"list-item":"list-item-index-module__list-item--Yey"};function ee({itemData:t,isActive:i}){return e("div",{className:p(D["list-item"],{active:i}),children:e("div",{className:"item-info",children:c("p",{className:p("item-title"),children:[e(B,{src:t.logo}),t.name]})})})}function te(t){const{selectAnnouncementInfo:i,setSelectAnnouncementInfo:o}=k(),{loading:d,data:s}=R(w),{hash:a,updateHash:m}=S(),l=n=>{m(""),o(n)},[r,M]=A([]);return L(()=>{var f,g,N,v,_,x;const n=s;if(n!=null&&n.isOk&&(n!=null&&n.data))if(M(((f=n.data)==null?void 0:f.dialogList)||[]),a&&((g=n==null?void 0:n.data)!=null&&g.dialogList)){const[re,I]=a.slice(1).split("/");if(I){const E=(N=n==null?void 0:n.data)==null?void 0:N.dialogList.find(T=>String(T.id)===I);o(E)}}else i!=null&&i.id||(_=(v=n.data)==null?void 0:v.dialogList)!=null&&_.length&&o((x=n.data)==null?void 0:x.dialogList[0])},[s]),c("div",{className:Z["message-list"],children:[e("p",{className:"head",children:c("div",{className:"title",children:[e($,{name:"a-Notselected",onClick:()=>{o(r[0]),V("/")}}),e("span",{children:y._("features_announcement_center_components_message_list_index_x_ntlrzyyu")})]})}),c("div",{className:"overflow-y-auto flex-1",children:[d&&e("div",{className:"flex justify-center mt-5",children:e(q,{})}),!d&&!(r!=null&&r.length)?e(z,{}):r.map(n=>e("div",{className:p("message-data",{"is-select":(i==null?void 0:i.id)===(n==null?void 0:n.id)}),onClick:()=>l(n),children:e(ee,{itemData:n,isActive:!1})},n.id))]})]})}const ne={"right-content":"right-content-index-module__right-content--fo5"},ie={"announcement-article":"announcement-article-index-module__announcement-article--Eip"};function se({id:t,onChangeArticle:i}){const[o,d]=A({}),{announcementCenter:s,announcementList:a}=o,m=l=>{F({announceContentId:l}).then(r=>{r.isOk&&r.data&&d(r.data||[])})};return L(()=>{m(t)},[t]),c("div",{className:ie["announcement-article"],children:[c("div",{className:"article-content",children:[c("div",{className:"header",children:[e("h3",{children:s==null?void 0:s.name}),e("div",{className:"date-time",children:C((s==null?void 0:s.pushTimeStramp)||"")})]}),e("div",{className:"article-html",dangerouslySetInnerHTML:{__html:(s==null?void 0:s.content)||""}})]}),c("div",{className:"new-announcement",children:[e("p",{className:"content-right-header",children:y._("features_announcement_center_components_announcement_article_index_q4oeyxidda")}),e("div",{className:"content-right-body",children:a==null?void 0:a.map(l=>e("div",{className:"new-article-text",onClick:()=>i(l),children:l.name},l.id))})]})]})}function oe({selectData:t}){var a;const i=b(t),{hash:o,updateHash:d}=S(),s=m=>{d(`#${m.id}`)};return U(()=>{var r;const[m,l]=o.slice(1).split("/");l||(((r=i==null?void 0:i.current)==null?void 0:r.id)!==(t==null?void 0:t.id)&&d(""),i.current=t)},[t]),e("div",{className:ne["right-content"],children:o?e(se,{id:o.slice(1),onChangeArticle:s}):c(G,{children:[e("h4",{className:"right-content-title",children:t==null?void 0:t.name}),e("div",{className:"content-list",children:(a=t==null?void 0:t.announcementTextVOList)==null?void 0:a.map(m=>c("div",{children:[e("div",{className:"list-items-title",onClick:()=>s(m),children:m.name}),e("div",{className:"push-time",children:C(m.pushTimeStramp,"YYYY-MM-DD")})]},m.id))})]})})}function Qe(){const{selectAnnouncementInfo:t}=k();return c("div",{className:X["message-center"],children:[e("div",{className:"top-bg"}),c("div",{className:"message-info",children:[e("div",{className:"left-list",children:e(te,{selectData:t})}),e("div",{className:"right-content",children:e(oe,{selectData:t})})]})]})}export{Qe as default};
