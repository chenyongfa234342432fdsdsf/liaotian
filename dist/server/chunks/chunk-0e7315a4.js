import{d as a}from"./chunk-20abda34.js";import{S3Client as p,PutObjectCommand as m}from"@aws-sdk/client-s3";const h=new p({credentials:{accessKeyId:a.accessKeyId,secretAccessKey:a.secretAccessKey},region:a.region}),w={web:"web",h5:"h5"};var u=(t=>(t.c2c="c2c",t.im="im",t))(u||{}),b=(t=>(t.merchant_application="merchant_application",t.complain_application="complain_application",t))(b||{});const y=(t,e,n)=>`${w.web}/${t}/${e}/${n}`,$=t=>{const{bucket:e,region:n}=a;return`https://${e}.S3.${n}.amazonaws.com/${t}`},g=t=>{const e=t.name.split(".")||[];return`${Date.now()}.${e[e.length-1]}`},v=(t,e,n)=>new Promise((c,o)=>{t||o(new Error("文件不存在"));const{bucket:s}=a,r=y(e,n,g(t)),i=new m({Bucket:s,Key:r,Body:t,ContentType:t.type});h.send(i).then(()=>{c({url:$(r)})}).catch(l=>{console.error(l),o(new Error("上传失败"))})});export{b as A,u as a,v as b};
