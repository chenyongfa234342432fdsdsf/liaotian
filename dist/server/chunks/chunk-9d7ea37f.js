import{i18n as o}from"@lingui/core";import{useState as N,useRef as U,useEffect as C}from"react";import{u as j}from"./chunk-1b3433e3.js";import{useMount as B}from"ahooks";import{l as z}from"./chunk-75081d50.js";import b from"@nbit/arco";import{a as P}from"./chunk-9a1033a2.js";import{U as $}from"./chunk-3e9e38b0.js";import{u as w}from"./chunk-33e5f5bc.js";import{l as E,m as L}from"./chunk-60db822c.js";import{N as O}from"./chunk-38fc2cd5.js";import{I as k}from"./chunk-c41c86a9.js";import{a as l,j as e}from"./chunk-ea028b12.js";import"./chunk-20abda34.js";import"@nbit/utils";import"vike/client/router";import"./chunk-357fcbd2.js";import"./chunk-7a6de6d7.js";import"zustand";import"react-tracked";import"immer";import"zustand/middleware";import"lodash";import"./chunk-c4940547.js";import"./chunk-77d12848.js";import"js-cookie";import"store";import"axios";import"./chunk-687b5088.js";import"make-plural/plurals";import"./chunk-86c9a026.js";import"react-dom";import"classnames";import"lottie-react";import"./chunk-13ae7681.js";import"react-dom/client";import"./chunk-0e7315a4.js";import"@aws-sdk/client-s3";import"./chunk-a6cae7c5.js";import"react-easy-crop";import"crypto-js";import"./chunk-6bf38136.js";const H="text-input-index-module__scoped--Qz3",M={scoped:H};function f({label:g,maxLength:n,editable:c,onConfirm:p,defaultValue:s,placeholder:r,style:h,className:m}){const[i,d]=N(s||""),[a,_]=N(!1),t=U(null);C(()=>{d(s||"")},[s]);const u=S=>{c&&d(S.target.value)},x=()=>{p&&p(i),_(!1)},y=()=>{_(!0)};return C(()=>{a&&t.current&&t.current.focus()},[a]),l("div",{className:`${M.scoped} ${m}`,style:h,children:[e("p",{className:"input-label",children:g}),a&&l("div",{className:"enter-box",children:[e("input",{type:"text",className:"enter-input",value:i,ref:t,onChange:u,maxLength:n,placeholder:r}),e("span",{className:"max-num",children:n-i.length}),e("div",{className:"icon-box",onClick:x,children:e(k,{name:"icon_chat_unread",fontSize:24,className:"modify-icon"})})]}),!a&&l("div",{className:"input-box",children:[i?e("span",{className:"inputvalue",children:i}):e("span",{className:"tipvalue",children:r}),c&&e("div",{className:"icon-box",onClick:y,children:e(k,{name:"icon_register_edit",fontSize:24,className:"modify-icon"})})]})]})}const T="personal-information-index-module__scoped--Vz7",V={scoped:T};var I,v;const{Button:R,Message:q}=(v=(I=b)==null?void 0:I.default)!=null&&v.__esModule?b.default:b;function Pe(){const g=j(),{userInfo:n,setUserInfo:c,clearUserCacheData:p}=w(),[s,r]=N(""),{redirect:h}=g.urlParsed.search,m=t=>{L(t).then(u=>{if(u.isOk&&u.data){const x={...n,...t};c(x),q.success(o._("features_settings_center_payment_password_index_d33sm6ilif"))}})},i=t=>{r(t),m({avatarPath:t})},d=t=>{m({nickName:t})},a=t=>{m({personalSignature:t})},_=()=>P({content:o._("features_settings_center_personal_information_index_vuoskknpxb"),onCommit:async()=>{(await E({})).isOk&&(p(),z("/login"))}});return B(()=>{r(n.avatarPath)}),l("div",{className:V.scoped,children:[e(O,{label:o._("features_settings_center_personal_information_index_rxdpee9x1l"),url:h}),l("div",{className:"pensonl-box",children:[e("div",{className:"personal",children:e($,{oldHeadImg:s,onHeadImgChange:i})}),e(f,{label:o._("features_settings_center_personal_information_index_m8pf1yq1ee"),maxLength:10,editable:!0,onConfirm:d,defaultValue:n.nickName,placeholder:o._("features_settings_center_personal_information_index_6h1kc4tgkf"),style:{marginBottom:"24px"}}),e(f,{label:o._("features_settings_center_personal_information_index_4sbsiya1gg"),maxLength:20,editable:!1,defaultValue:n.mobileNumber?`${n.mobileCountryCd}-${n.mobileNumber}`:"",style:{marginBottom:"24px"}}),e(f,{label:o._("features_settings_center_personal_information_index_suyk940elg"),maxLength:20,editable:!1,defaultValue:n.email,style:{marginBottom:"24px"}}),e(f,{label:o._("features_settings_center_personal_information_index_v2nmegx2ft"),maxLength:20,editable:!0,onConfirm:a,defaultValue:n.personalSignature,placeholder:o._("features_settings_center_personal_information_index_nwjdukpjtz"),style:{marginBottom:"32px"}}),e(R,{type:"default",long:!0,className:"buttonlong",onClick:_,children:o._("features_settings_center_personal_information_index_ozickjsrtu")})]})]})}export{Pe as default};
