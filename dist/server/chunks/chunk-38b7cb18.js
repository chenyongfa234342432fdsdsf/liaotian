import h from"react-lazy-load-image-component";import{T as z}from"./chunk-77d12848.js";import M from"classnames";import{g as j,a as T,o as x}from"./chunk-86c9a026.js";import{useState as U,useMemo as g}from"react";import{u as C}from"./chunk-c4940547.js";import{fastUrlUtils as k}from"@nbit/utils";import{b as B}from"./chunk-20abda34.js";import{j as m,a as F}from"./chunk-ea028b12.js";const H="lazy-image-index-module__scoped--6Sr",A={scoped:H};var f,p;const{LazyLoadImage:D}=(p=(f=h)==null?void 0:f.default)!=null&&p.__esModule?h.default:h,{getFastUrl:E,injectThemeImgUrl:u}=k;var O=(a=>(a.svg=".svg",a.png=".png",a))(O||{});const P=x;function Z(a){const{src:t,radius:_,hasTheme:l,className:w,imageName:$,whetherPlaceholdImg:y=!1,whetherManyBusiness:c=!1,imageType:r,renderOriginalSize:o=!1,imgClassName:I,...s}=a,[i,b]=U({}),n=C().theme===z.dark?"_black":"_white",v=`${P}icon_default_load_fail${n}.png`,d=y?m("img",{className:"placeholder-img",src:v,alt:"",width:o?i.width:s.width,height:o?i.height:s.height}):void 0,N=g(()=>({target:e})=>(b({width:e.naturalWidth,height:e.naturalHeight}),!0),[]),L=g(()=>{if(typeof t!="string")return console.error("LazyImage: 传入的 src 非字符串请检查",t),t;let e=E(t);return c&&j()&&(e=e.replace(`${T().ossFolder}/web/image/`,`/web/business/${B}/business-img/`)),l?u(r?`${e}${r}`:`${e}`,n):r?`${e}${r}`:`${e}`},[t,r,l,n,c]);if(!t)return m("span",{style:{width:s.width||0,height:s.height||0}});const S=d?{placeholder:d}:{};return F("div",{className:M(A.scoped,w,_?"lazy-radius":""),children:[m(D,{className:I,...s,src:L,...S,onLoad:o?N:()=>{},width:o?i.width:s.width,height:o?i.height:s.height}),m("label",{children:$||""})]})}export{Z as L,O as T};
