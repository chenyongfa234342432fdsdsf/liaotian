import{i18n as i}from"@lingui/core";import{useRef as O,useState as c,useEffect as T}from"react";import F from"react-highlight-words";import{c as H,p as J,d as K}from"./chunk-8d494217.js";import{g as S}from"./chunk-33e5f5bc.js";import{I as _}from"./chunk-c41c86a9.js";import g from"@nbit/arco";import{M as W,C as Q}from"./chunk-67316d61.js";import{N as U}from"./chunk-4bfa64b6.js";import{L as X}from"./chunk-bbab396b.js";import{C}from"./chunk-e17c2dfa.js";import{A as Y}from"./chunk-a28ca130.js";import{a as n,j as s}from"./chunk-ea028b12.js";import"axios";import"./chunk-20abda34.js";import"@nbit/utils";import"zustand";import"zustand/middleware";import"react-tracked";import"immer";import"store";import"./chunk-c4940547.js";import"./chunk-77d12848.js";import"js-cookie";import"./chunk-687b5088.js";import"make-plural/plurals";import"vike/client/router";import"./chunk-357fcbd2.js";import"./chunk-7a6de6d7.js";import"lodash";import"crypto-js";import"classnames";import"./chunk-86c9a026.js";import"react-dom";import"./chunk-38b7cb18.js";import"react-lazy-load-image-component";import"ahooks";import"lottie-react";import"./chunk-13ae7681.js";import"./chunk-a6cae7c5.js";const Z="addition-index-module__addition--pmN",$={addition:Z};var A,w;const{Input:L,Message:l}=(w=(A=g)==null?void 0:A.default)!=null&&w.__esModule?g.default:g;function Te(){var y,b;const j=S(),f=O(null),[a,h]=c(""),[N,x]=c(!0),[z,m]=c(!1),[p,v]=c(0),[k,P]=c({uid:0,nickName:""}),[I,q]=c({groupId:"",groupName:""}),[E,D]=c(!1),[t,u]=c({userData:[],groupData:[]}),G=async e=>{D(!0);const o=await H({keyword:e});D(!1);const{isOk:d,data:r}=o||{};d&&r&&u(r)},R=async e=>{m(!1);const o=await J({uid:e}),{isOk:d,data:r}=o||{};d&&(r!=null&&r.success)?l.success(i._("features_messenger_addition_index_t0o7celfir")):l.error(i._("features_messenger_addition_index_79dzbswbuk"))},V=async e=>{m(!1);const o=await K({groupId:e}),{isOk:d,data:r}=o||{};d&&(r!=null&&r.success)&&l.success(i._("features_messenger_addition_index_cprqb5qgyz"))},B=async e=>{j.joinGroup(e.toString()).then(d=>{V(d.groupInfo.baseInfo.groupID)}).catch(d=>{l.success(i._("features_messenger_addition_index_gnkdmx1nh1"))})},M=(e,o)=>{p===1&&R(o),p===2&&B(e)};return T(()=>{},[t]),n("div",{className:$.addition,children:[s(Y,{titleText:i._("features_messenger_addition_index_pngdv3umj8")}),n("div",{className:"scroll-show",children:[s("div",{className:"search-input",children:s(L,{type:"text",className:"search-input-comm",prefix:s(_,{name:"icon_chat_search"}),suffix:a.length&&s(_,{name:"icon_chat_delete",onClick:()=>{h(""),u({userData:[],groupData:[]})}}),placeholder:i._("features_group_components_search_input_index_tq98cmscdb"),value:a,onChange:e=>{e.length===0&&u({userData:[],groupData:[]}),h(e),x(!0)},onPressEnter:()=>{var e;(e=f.current)==null||e.click()}})}),E?s("div",{className:"flex justify-center mt-52",children:s(X,{})}):n("div",{children:[!!a.length&&N&&n("div",{className:"nav-item",ref:f,onClick:()=>{G(a),x(!1)},children:[n("div",{className:"nav-item-left",children:[s("div",{className:"nav-ico-box",children:s(_,{name:"icon_address_book_invite_friend",fontSize:20,className:"icon-color"})}),n("div",{className:"nav-text",children:[s("div",{className:"search-tips",children:i._("features_messenger_addition_index_bb0pp6w1mo")}),s(F,{highlightClassName:"highlighted",searchWords:[a],autoEscape:!0,textToHighlight:a})]})]}),s("div",{className:"nav-item-right"})]}),!!(t!=null&&t.userData.length)&&a.length!==0&&n("div",{className:"seek seek-p",children:[s("div",{className:"seek-title",children:i._("features_messenger_addition_index_dpifdzvxuo")}),s("div",{children:(y=t==null?void 0:t.userData)==null?void 0:y.map(e=>{const o=e.alreadyAdd?n("div",{className:"add-text",children:[s(_,{name:"icon_address_book_added",className:"added"}),i._("features_messenger_addition_index_j3tuca3fsx")]}):s("div",{className:"add-btn",onClick:()=>{m(!0),v(1),P({uid:e.uid,nickName:e.nickName})},children:i._("features_messenger_addition_index_hi1mctpr4u")});return s(C,{crewName:e.nickName,searchValue:a,right:o},e.nickName)})})]}),!!(t!=null&&t.groupData.length)&&a.length!==0&&n("div",{className:"seek",children:[s("div",{className:"seek-title",children:i._("features_messenger_addition_index_2eiozsmyrc")}),s("div",{children:(b=t==null?void 0:t.groupData)==null?void 0:b.map(e=>{const o=e.alreadyAdd?s("div",{className:"add-btn",children:i._("features_select_contact_group_f2v65kjlnm")}):s("div",{className:"add-btn",onClick:()=>{m(!0),v(2),q({groupId:e.groupId,groupName:e.groupName})},children:i._("features_messenger_addition_index_yzmdmfxw1y")});return s(C,{crewName:e.groupName,searchValue:a,right:o,icon:"icon_address_book_group"},e.groupName)})})]}),!(t!=null&&t.groupData.length)&&!(t!=null&&t.userData.length)&&a.length!==0&&!N&&s(U,{name:"no_search_result",footerText:i._("features_group_components_search_friend_index_eppdggih18")})]})]}),z&&s(W,{children:s(Q,{title:p===1?k.nickName||"":I.groupName||"",content:p===1?i._("features_messenger_addition_index_1fx0wn_hbe"):i._("features_messenger_addition_index_0xlu0rnf6e"),confirmEvent:()=>{M(I.groupId,k.uid)},cancelEvent:()=>{m(!1)}})})]})}export{Te as default};
