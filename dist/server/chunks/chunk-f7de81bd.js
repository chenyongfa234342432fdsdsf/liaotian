import{i18n as o}from"@lingui/core";import{useState as n,useEffect as F}from"react";import p from"@nbit/arco";import{I as K}from"./chunk-c41c86a9.js";import{u as Q}from"./chunk-33e5f5bc.js";import{l as f}from"./chunk-75081d50.js";import{C as W}from"./chunk-52911f54.js";import{p as X}from"./chunk-9a1033a2.js";import{U as Y}from"./chunk-3e9e38b0.js";import{m as Z,b as ee}from"./chunk-60db822c.js";import{g as te}from"./chunk-eddfc2c9.js";import{U as oe}from"./chunk-e44b5a13.js";import{j as t,a as r}from"./chunk-ea028b12.js";import"classnames";import"./chunk-77d12848.js";import"./chunk-c4940547.js";import"zustand";import"zustand/middleware";import"react-tracked";import"js-cookie";import"store";import"./chunk-20abda34.js";import"@nbit/utils";import"immer";import"./chunk-86c9a026.js";import"axios";import"./chunk-687b5088.js";import"make-plural/plurals";import"vike/client/router";import"./chunk-357fcbd2.js";import"./chunk-7a6de6d7.js";import"lodash";import"crypto-js";import"pinyin";import"./chunk-38b7cb18.js";import"react-lazy-load-image-component";import"react-dom";import"lottie-react";import"./chunk-13ae7681.js";import"react-dom/client";import"./chunk-0e7315a4.js";import"@aws-sdk/client-s3";import"./chunk-a6cae7c5.js";import"react-easy-crop";const ne="set-information-index-module__scoped--PLt",se={scoped:ne};var I,k;const{Button:N,Message:re,Spin:v}=(k=(I=p)==null?void 0:I.default)!=null&&k.__esModule?p.default:p;function Ye(){const{userInfo:a,setUserInfo:h}=Q(),[ie,w]=n(""),[l,S]=n(""),[x,U]=n(1),[b,ae]=n(!1),[m,q]=n(""),[c,g]=n(0),[_,M]=n(""),[j,z]=n(a.bindCountry||""),[d,A]=n(a.mobileCountryCd||""),[O,T]=n(a.regCountryCd||""),[E,C]=n(!1),V=e=>{w(e),y({avatarPath:e})},B=e=>{S(e.target.value)},y=e=>{Z(e).then(s=>{var i;if(s.isOk&&((i=s.data)!=null&&i.success)){const u={...a,...e};h(u)}})},L=()=>{y({nickName:l}),a.mobileNumber?f("/messenger"):U(2)},H=()=>{C(!0)},P=()=>{C(!1)},R=e=>{z(e.countryName),A(e.countryEnCode),T(e.countryShortName)},$=()=>{if(!m){re.error(o._("features_settings_center_bind_mobile_index_0ra0n8jymv"));return}G()},G=()=>{te({mobileNumber:m,mobileCountryCd:d,typeCd:"1"}).then(s=>{var i;s.isOk&&((i=s.data)!=null&&i.success)&&g(60)})},J=async()=>{await X(o._("helper_message_fugvl05ct4"),o._("features_users_set_information_index_x1gw1yxzgn"),{okText:o._("components_i18n_select_modal_index_cl__sphiqv")}),f("/messenger")};F(()=>{let e=null;return c>0?e=setInterval(()=>{g(s=>s-1)},1e3):clearInterval(e),()=>{e&&clearInterval(e)}},[c]);const D=()=>{ee({regCountryCd:O,mobileCountryCd:d,mobileNumber:m,mobileCode:_}).then(s=>{var i;if(s.isOk&&((i=s.data)!=null&&i.success)){const u={...a,mobileNumber:m,mobileCountryCd:_};h(u),f("/messenger")}})};return t(oe,{children:r("div",{className:se.scoped,children:[x===1&&r("div",{className:"information",children:[t("h1",{className:"text-3xl text-text_color_01 font-semibold",children:o._("features_users_set_information_index_gbh7pkzybl")}),t("div",{className:"upload-head",children:t(Y,{size:82,padding:40,onHeadImgChange:V,containerClassName:"info-box"})}),r("div",{className:"enter-box",children:[t("input",{type:"text",className:"enter-input",value:l,onChange:B,maxLength:10,placeholder:o._("features_users_set_information_index_4_gowgaube")}),l&&r("span",{className:"max-num",children:[o._("features_users_set_information_index_0olrpyuok9"),10-l.length<0?0:10-l.length,o._("features_users_set_information_index_h9v_zt0h8q")]})]}),t(v,{loading:b,className:"w-full",children:t(N,{type:"primary",long:!0,className:"commit-btn",disabled:!l,onClick:L,children:o._("features_users_set_information_index_fpqbqymc5f")})})]}),x===2&&r("div",{className:"information",children:[t("h1",{className:"text-3xl text-text_color_01 font-semibold",children:o._("features_settings_center_account_security_index_b_vtomrwck")}),r("div",{className:"login-content mt-8",children:[r("div",{className:"list-item cursor-pointer",onClick:H,children:[t("input",{type:"text",value:j,className:"area",readOnly:!0,placeholder:o._("features_users_create_account_index_0dlxrrysk4")}),t(K,{name:"icon_chat_arrow",fontSize:16,className:"text-icon_color pr-4"})]}),r("div",{className:"list-item",children:[t("span",{className:"area-code",children:d?`+${d}`:"--"}),t("input",{type:"text",value:m,placeholder:o._("features_settings_center_bind_mobile_index_rocukuvszt"),className:"input-box",onChange:e=>q(e.target.value)})]}),r("div",{className:"list-item last-item",children:[t("input",{type:"text",value:_,placeholder:o._("features_settings_center_bind_mobile_index_avn5naqutc"),className:"input-box",onChange:e=>M(e.target.value)}),t("button",{onClick:$,disabled:c>0,className:"getcode pr-4",type:"button",children:c>0?`${c}s`:o._("features_users_create_account_index_dlm0wqw8rw")})]})]}),t(v,{loading:b,className:"w-full",children:t(N,{type:"primary",long:!0,className:"commit-btn",disabled:!m||!_||!d,onClick:D,children:o._("components_i18n_select_modal_index_cl__sphiqv")})}),t("div",{className:"text-text_color_02 text-sm mt-6 w-full justify-start",onClick:J,children:t("span",{className:"underline text-brand_color",children:o._("features_users_set_information_index_jedfqvgubj")})})]}),t(W,{visible:E,onClose:P,onSelect:R})]})})}export{Ye as default};
