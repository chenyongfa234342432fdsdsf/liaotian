import{i18n as i}from"@lingui/core";import{useState as n,useEffect as v}from"react";import{I as _}from"./chunk-c41c86a9.js";import{u as k}from"./chunk-33e5f5bc.js";import u from"@nbit/arco";import{g as G}from"./chunk-eddfc2c9.js";import{b as $,c as L}from"./chunk-60db822c.js";import{C as P}from"./chunk-52911f54.js";import{N as Q}from"./chunk-38fc2cd5.js";import{a as o,j as t}from"./chunk-ea028b12.js";import"classnames";import"./chunk-77d12848.js";import"./chunk-c4940547.js";import"zustand";import"zustand/middleware";import"react-tracked";import"js-cookie";import"store";import"./chunk-20abda34.js";import"@nbit/utils";import"immer";import"./chunk-86c9a026.js";import"axios";import"./chunk-687b5088.js";import"make-plural/plurals";import"vike/client/router";import"./chunk-357fcbd2.js";import"./chunk-7a6de6d7.js";import"lodash";import"crypto-js";import"pinyin";import"./chunk-38b7cb18.js";import"react-lazy-load-image-component";import"./chunk-6bf38136.js";const T="bind-mobile-binding-success-module__bindsuccess--Qtm",D={bindsuccess:T};function F(){const{userInfo:r}=k();return o("div",{className:D.bindsuccess,children:[t("div",{className:"success-icon",children:t(_,{name:"icon_set_binding_number1",fontSize:26,className:"mobile-icon"})}),t("p",{className:"success-label",children:i._("features_settings_center_bind_mobile_binding_success_ejh2f4d2gq")}),o("h3",{children:["+",r.mobileCountryCd," ",r.mobileNumber]})]})}const H="bind-mobile-index-module__scoped--rLn",J={scoped:H};var S,x;const{Message:I}=(x=(S=u)==null?void 0:S.default)!=null&&x.__esModule?u.default:u;function je(){const{userInfo:r,setUserInfo:M}=k(),[A,b]=n(""),[l,p]=n(""),[f,h]=n(""),[a,j]=n(""),[m,B]=n(""),[c,C]=n(0),[N,y]=n("pennding"),[q,g]=n(!1),w=()=>{g(!0)},z=()=>{g(!1)},U=e=>{b(e.countryName),p(e.countryEnCode),h(f)},V=()=>{if(!m){I.error(i._("features_settings_center_bind_mobile_index_nhuddnkozc"));return}$({regCountryCd:f,mobileCountryCd:l,mobileNumber:a,mobileCode:m}).then(s=>{if(s.isOk&&s.data){const d={...r,mobileNumber:a,mobileCountryCd:l};M(d),y("success")}})},E=()=>{if(!a){I.error(i._("features_settings_center_bind_mobile_index_0ra0n8jymv"));return}G({mobileNumber:a,mobileCountryCd:l,typeCd:"1"}).then(s=>{s.isOk&&s.data&&C(60)})},O=()=>{L({}).then(e=>{if(e.isOk&&e.data){let{countryName:s,countryShortName:d,countryEnCode:R}=e.data;b(s||""),p(R||""),h(d||"")}})};return v(()=>{r.mobileNumber?y("success"):O()},[]),v(()=>{let e=null;return c>0?e=setInterval(()=>{C(s=>s-1)},1e3):clearInterval(e),()=>{e&&clearInterval(e)}},[c]),o("div",{className:J.scoped,children:[t(Q,{label:i._("features_settings_center_account_security_index_b_vtomrwck"),url:"/account-security"}),o("div",{className:"mobile-content",children:[N==="pennding"&&o("div",{children:[o("div",{className:"mobile-box",children:[o("div",{className:"list-item cursor-pointer",onClick:w,children:[t("span",{className:"area",children:A}),t(_,{name:"icon_chat_arrow",fontSize:16,className:"arrow-icon text-icon_color"})]}),o("div",{className:"list-item",children:[o("span",{className:"area-code",children:["+",l]}),t("input",{type:"text",value:a,placeholder:i._("features_settings_center_bind_mobile_index_rocukuvszt"),className:"mobile",onChange:e=>j(e.target.value)})]}),o("div",{className:"list-item",style:{border:"none"},children:[t("input",{type:"text",value:m,placeholder:i._("features_settings_center_bind_mobile_index_avn5naqutc"),className:"code",onChange:e=>B(e.target.value)}),t("button",{onClick:E,disabled:c>0,className:"getcode",type:"button",children:c>0?`${c}s`:i._("features_settings_center_bind_mobile_index_6ar4vb1hlx")})]})]}),t("div",{className:"commit-btn",onClick:V,children:t(_,{name:"icon_set_confirm",fontSize:24,className:"commit-icon"})})]}),t(P,{visible:q,onClose:z,onSelect:U}),N==="success"&&t(F,{})]})]})}export{je as default};
